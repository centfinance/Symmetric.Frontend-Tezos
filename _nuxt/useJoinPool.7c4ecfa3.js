import{a3 as x,l as y}from"./entry.def4a3ad.js";import{t as a,f as O}from"./approve.96e4ef72.js";import{B as b,O as g}from"./taquito.es6.46f6d931.js";const T=async(r,l,s,d,i=.005,u=!1,e)=>{console.log(s);const c=await r.wallet.pkh();if(l){const v=a.address(c),w=e?a.address(e):a.address(c),p=a.map(s.map(t=>({key:a.nat(t.index),value:{0:a.address(t.address),1:t.id!==null?a.nat(t.id):void 0}})));console.log(p);const m=a.map(d.map(t=>({key:a.nat(t.index),value:a.nat(t.value.toString())}))),f=a.map(d.map(t=>({key:a.nat(t.index),value:a.nat(t.value.plus(t.value.multipliedBy(i)))}))),n=u?a.nat(0):a.nat(1),h=a.nat(0);return(await r.wallet.at(x.contracts.vault)).methodsObject.joinPool({poolId:{0:a.address(l.address),1:a.nat(l.id)},recipient:w,request:{assets:p,limits:f,userData:{allT:void 0,amountsIn:m,kind:n,minSPTAmountOut:h,sptAmountOut:void 0,tokenIndex:void 0}},sender:v})}},R=async(r,l,s,d=.5,i=!1,u)=>{const e=await y().tezos(),c=l.map((o,t)=>({index:o[0],value:b(o[1].toFixed(18)).multipliedBy(10**s[t].decimals)})),v=await T(e,r,s,c,d,i,u);console.log(r,s,c,d,i,u);const w=v?.toTransferParams(),p=await e.wallet.pkh(),m=await O(e,p,s[0].address,s.map(o=>o.id?o.id:0),x.contracts.vault),f={kind:g.TRANSACTION,...w},n=[];return n.push(...m.approveRequests),n.push(f),n.push(...m.revokeRequests),await e.wallet.batch(n).send()};export{T as c,R as u};
