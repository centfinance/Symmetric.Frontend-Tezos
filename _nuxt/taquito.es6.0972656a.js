import{b4 as qb,b5 as Hf,b6 as Qa,b7 as ji,b8 as Gi,b9 as Fr,ba as Wb,bb as Hl,bc as $c,bd as Jb,be as Zb}from"./entry.b98f4bf0.js";var Ys=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ca(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Fl(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){if(this instanceof i){var n=[null];n.push.apply(n,arguments);var s=Function.bind.apply(e,n);return new s}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}),r}var Xb=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Uc=Math.ceil,jr=Math.floor,ur="[BigNumber Error] ",jh=ur+"Number primitive has more than 15 significant digits: ",Cr=1e14,he=14,Hc=9007199254740991,Fc=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Ji=1e7,Dt=1e9;function Kl(t){var e,r,i,n=I.prototype={constructor:I,toString:null,valueOf:null},s=new I(1),a=20,o=4,f=-7,d=21,g=-1e7,y=1e7,S=!1,O=1,P=0,M={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},B="0123456789abcdefghijklmnopqrstuvwxyz",C=!0;function I(R,T){var x,E,c,h,b,p,u,_,w=this;if(!(w instanceof I))return new I(R,T);if(T==null){if(R&&R._isBigNumber===!0){w.s=R.s,!R.c||R.e>y?w.c=w.e=null:R.e<g?w.c=[w.e=0]:(w.e=R.e,w.c=R.c.slice());return}if((p=typeof R=="number")&&R*0==0){if(w.s=1/R<0?(R=-R,-1):1,R===~~R){for(h=0,b=R;b>=10;b/=10,h++);h>y?w.c=w.e=null:(w.e=h,w.c=[R]);return}_=String(R)}else{if(!Xb.test(_=String(R)))return i(w,_,p);w.s=_.charCodeAt(0)==45?(_=_.slice(1),-1):1}(h=_.indexOf("."))>-1&&(_=_.replace(".","")),(b=_.search(/e/i))>0?(h<0&&(h=b),h+=+_.slice(b+1),_=_.substring(0,b)):h<0&&(h=_.length)}else{if(ut(T,2,B.length,"Base"),T==10&&C)return w=new I(R),q(w,a+w.e+1,o);if(_=String(R),p=typeof R=="number"){if(R*0!=0)return i(w,_,p,T);if(w.s=1/R<0?(_=_.slice(1),-1):1,I.DEBUG&&_.replace(/^0\.0*|\./,"").length>15)throw Error(jh+R)}else w.s=_.charCodeAt(0)===45?(_=_.slice(1),-1):1;for(x=B.slice(0,T),h=b=0,u=_.length;b<u;b++)if(x.indexOf(E=_.charAt(b))<0){if(E=="."){if(b>h){h=u;continue}}else if(!c&&(_==_.toUpperCase()&&(_=_.toLowerCase())||_==_.toLowerCase()&&(_=_.toUpperCase()))){c=!0,b=-1,h=0;continue}return i(w,String(R),p,T)}p=!1,_=r(_,T,10,w.s),(h=_.indexOf("."))>-1?_=_.replace(".",""):h=_.length}for(b=0;_.charCodeAt(b)===48;b++);for(u=_.length;_.charCodeAt(--u)===48;);if(_=_.slice(b,++u)){if(u-=b,p&&I.DEBUG&&u>15&&(R>Hc||R!==jr(R)))throw Error(jh+w.s*R);if((h=h-b-1)>y)w.c=w.e=null;else if(h<g)w.c=[w.e=0];else{if(w.e=h,w.c=[],b=(h+1)%he,h<0&&(b+=he),b<u){for(b&&w.c.push(+_.slice(0,b)),u-=he;b<u;)w.c.push(+_.slice(b,b+=he));b=he-(_=_.slice(b)).length}else b-=u;for(;b--;_+="0");w.c.push(+_)}}else w.c=[w.e=0]}I.clone=Kl,I.ROUND_UP=0,I.ROUND_DOWN=1,I.ROUND_CEIL=2,I.ROUND_FLOOR=3,I.ROUND_HALF_UP=4,I.ROUND_HALF_DOWN=5,I.ROUND_HALF_EVEN=6,I.ROUND_HALF_CEIL=7,I.ROUND_HALF_FLOOR=8,I.EUCLID=9,I.config=I.set=function(R){var T,x;if(R!=null)if(typeof R=="object"){if(R.hasOwnProperty(T="DECIMAL_PLACES")&&(x=R[T],ut(x,0,Dt,T),a=x),R.hasOwnProperty(T="ROUNDING_MODE")&&(x=R[T],ut(x,0,8,T),o=x),R.hasOwnProperty(T="EXPONENTIAL_AT")&&(x=R[T],x&&x.pop?(ut(x[0],-Dt,0,T),ut(x[1],0,Dt,T),f=x[0],d=x[1]):(ut(x,-Dt,Dt,T),f=-(d=x<0?-x:x))),R.hasOwnProperty(T="RANGE"))if(x=R[T],x&&x.pop)ut(x[0],-Dt,-1,T),ut(x[1],1,Dt,T),g=x[0],y=x[1];else if(ut(x,-Dt,Dt,T),x)g=-(y=x<0?-x:x);else throw Error(ur+T+" cannot be zero: "+x);if(R.hasOwnProperty(T="CRYPTO"))if(x=R[T],x===!!x)if(x)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))S=x;else throw S=!x,Error(ur+"crypto unavailable");else S=x;else throw Error(ur+T+" not true or false: "+x);if(R.hasOwnProperty(T="MODULO_MODE")&&(x=R[T],ut(x,0,9,T),O=x),R.hasOwnProperty(T="POW_PRECISION")&&(x=R[T],ut(x,0,Dt,T),P=x),R.hasOwnProperty(T="FORMAT"))if(x=R[T],typeof x=="object")M=x;else throw Error(ur+T+" not an object: "+x);if(R.hasOwnProperty(T="ALPHABET"))if(x=R[T],typeof x=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(x))C=x.slice(0,10)=="0123456789",B=x;else throw Error(ur+T+" invalid: "+x)}else throw Error(ur+"Object expected: "+R);return{DECIMAL_PLACES:a,ROUNDING_MODE:o,EXPONENTIAL_AT:[f,d],RANGE:[g,y],CRYPTO:S,MODULO_MODE:O,POW_PRECISION:P,FORMAT:M,ALPHABET:B}},I.isBigNumber=function(R){if(!R||R._isBigNumber!==!0)return!1;if(!I.DEBUG)return!0;var T,x,E=R.c,c=R.e,h=R.s;e:if({}.toString.call(E)=="[object Array]"){if((h===1||h===-1)&&c>=-Dt&&c<=Dt&&c===jr(c)){if(E[0]===0){if(c===0&&E.length===1)return!0;break e}if(T=(c+1)%he,T<1&&(T+=he),String(E[0]).length==T){for(T=0;T<E.length;T++)if(x=E[T],x<0||x>=Cr||x!==jr(x))break e;if(x!==0)return!0}}}else if(E===null&&c===null&&(h===null||h===1||h===-1))return!0;throw Error(ur+"Invalid BigNumber: "+R)},I.maximum=I.max=function(){return F(arguments,n.lt)},I.minimum=I.min=function(){return F(arguments,n.gt)},I.random=function(){var R=9007199254740992,T=Math.random()*R&2097151?function(){return jr(Math.random()*R)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(x){var E,c,h,b,p,u=0,_=[],w=new I(s);if(x==null?x=a:ut(x,0,Dt),b=Uc(x/he),S)if(crypto.getRandomValues){for(E=crypto.getRandomValues(new Uint32Array(b*=2));u<b;)p=E[u]*131072+(E[u+1]>>>11),p>=9e15?(c=crypto.getRandomValues(new Uint32Array(2)),E[u]=c[0],E[u+1]=c[1]):(_.push(p%1e14),u+=2);u=b/2}else if(crypto.randomBytes){for(E=crypto.randomBytes(b*=7);u<b;)p=(E[u]&31)*281474976710656+E[u+1]*1099511627776+E[u+2]*4294967296+E[u+3]*16777216+(E[u+4]<<16)+(E[u+5]<<8)+E[u+6],p>=9e15?crypto.randomBytes(7).copy(E,u):(_.push(p%1e14),u+=7);u=b/7}else throw S=!1,Error(ur+"crypto unavailable");if(!S)for(;u<b;)p=T(),p<9e15&&(_[u++]=p%1e14);for(b=_[--u],x%=he,b&&x&&(p=Fc[he-x],_[u]=jr(b/p)*p);_[u]===0;_.pop(),u--);if(u<0)_=[h=0];else{for(h=-1;_[0]===0;_.splice(0,1),h-=he);for(u=1,p=_[0];p>=10;p/=10,u++);u<he&&(h-=he-u)}return w.e=h,w.c=_,w}}(),I.sum=function(){for(var R=1,T=arguments,x=new I(T[0]);R<T.length;)x=x.plus(T[R++]);return x},r=function(){var R="0123456789";function T(x,E,c,h){for(var b,p=[0],u,_=0,w=x.length;_<w;){for(u=p.length;u--;p[u]*=E);for(p[0]+=h.indexOf(x.charAt(_++)),b=0;b<p.length;b++)p[b]>c-1&&(p[b+1]==null&&(p[b+1]=0),p[b+1]+=p[b]/c|0,p[b]%=c)}return p.reverse()}return function(x,E,c,h,b){var p,u,_,w,v,l,A,K,V=x.indexOf("."),J=a,Z=o;for(V>=0&&(w=P,P=0,x=x.replace(".",""),K=new I(E),l=K.pow(x.length-V),P=w,K.c=T(Ai(Or(l.c),l.e,"0"),10,c,R),K.e=K.c.length),A=T(x,E,c,b?(p=B,R):(p=R,B)),_=w=A.length;A[--w]==0;A.pop());if(!A[0])return p.charAt(0);if(V<0?--_:(l.c=A,l.e=_,l.s=h,l=e(l,K,J,Z,c),A=l.c,v=l.r,_=l.e),u=_+J+1,V=A[u],w=c/2,v=v||u<0||A[u+1]!=null,v=Z<4?(V!=null||v)&&(Z==0||Z==(l.s<0?3:2)):V>w||V==w&&(Z==4||v||Z==6&&A[u-1]&1||Z==(l.s<0?8:7)),u<1||!A[0])x=v?Ai(p.charAt(1),-J,p.charAt(0)):p.charAt(0);else{if(A.length=u,v)for(--c;++A[--u]>c;)A[u]=0,u||(++_,A=[1].concat(A));for(w=A.length;!A[--w];);for(V=0,x="";V<=w;x+=p.charAt(A[V++]));x=Ai(x,_,p.charAt(0))}return x}}(),e=function(){function R(E,c,h){var b,p,u,_,w=0,v=E.length,l=c%Ji,A=c/Ji|0;for(E=E.slice();v--;)u=E[v]%Ji,_=E[v]/Ji|0,b=A*u+_*l,p=l*u+b%Ji*Ji+w,w=(p/h|0)+(b/Ji|0)+A*_,E[v]=p%h;return w&&(E=[w].concat(E)),E}function T(E,c,h,b){var p,u;if(h!=b)u=h>b?1:-1;else for(p=u=0;p<h;p++)if(E[p]!=c[p]){u=E[p]>c[p]?1:-1;break}return u}function x(E,c,h,b){for(var p=0;h--;)E[h]-=p,p=E[h]<c[h]?1:0,E[h]=p*b+E[h]-c[h];for(;!E[0]&&E.length>1;E.splice(0,1));}return function(E,c,h,b,p){var u,_,w,v,l,A,K,V,J,Z,Y,$,H,k,m,N,X,Q=E.s==c.s?1:-1,ue=E.c,te=c.c;if(!ue||!ue[0]||!te||!te[0])return new I(!E.s||!c.s||(ue?te&&ue[0]==te[0]:!te)?NaN:ue&&ue[0]==0||!te?Q*0:Q/0);for(V=new I(Q),J=V.c=[],_=E.e-c.e,Q=h+_+1,p||(p=Cr,_=Pr(E.e/he)-Pr(c.e/he),Q=Q/he|0),w=0;te[w]==(ue[w]||0);w++);if(te[w]>(ue[w]||0)&&_--,Q<0)J.push(1),v=!0;else{for(k=ue.length,N=te.length,w=0,Q+=2,l=jr(p/(te[0]+1)),l>1&&(te=R(te,l,p),ue=R(ue,l,p),N=te.length,k=ue.length),H=N,Z=ue.slice(0,N),Y=Z.length;Y<N;Z[Y++]=0);X=te.slice(),X=[0].concat(X),m=te[0],te[1]>=p/2&&m++;do{if(l=0,u=T(te,Z,N,Y),u<0){if($=Z[0],N!=Y&&($=$*p+(Z[1]||0)),l=jr($/m),l>1)for(l>=p&&(l=p-1),A=R(te,l,p),K=A.length,Y=Z.length;T(A,Z,K,Y)==1;)l--,x(A,N<K?X:te,K,p),K=A.length,u=1;else l==0&&(u=l=1),A=te.slice(),K=A.length;if(K<Y&&(A=[0].concat(A)),x(Z,A,Y,p),Y=Z.length,u==-1)for(;T(te,Z,N,Y)<1;)l++,x(Z,N<Y?X:te,Y,p),Y=Z.length}else u===0&&(l++,Z=[0]);J[w++]=l,Z[0]?Z[Y++]=ue[H]||0:(Z=[ue[H]],Y=1)}while((H++<k||Z[0]!=null)&&Q--);v=Z[0]!=null,J[0]||J.splice(0,1)}if(p==Cr){for(w=1,Q=J[0];Q>=10;Q/=10,w++);q(V,h+(V.e=w+_*he-1)+1,b,v)}else V.e=_,V.r=+v;return V}}();function z(R,T,x,E){var c,h,b,p,u;if(x==null?x=o:ut(x,0,8),!R.c)return R.toString();if(c=R.c[0],b=R.e,T==null)u=Or(R.c),u=E==1||E==2&&(b<=f||b>=d)?Sa(u,b):Ai(u,b,"0");else if(R=q(new I(R),T,x),h=R.e,u=Or(R.c),p=u.length,E==1||E==2&&(T<=h||h<=f)){for(;p<T;u+="0",p++);u=Sa(u,h)}else if(T-=b,u=Ai(u,h,"0"),h+1>p){if(--T>0)for(u+=".";T--;u+="0");}else if(T+=h-p,T>0)for(h+1==p&&(u+=".");T--;u+="0");return R.s<0&&c?"-"+u:u}function F(R,T){for(var x,E=1,c=new I(R[0]);E<R.length;E++)if(x=new I(R[E]),x.s)T.call(c,x)&&(c=x);else{c=x;break}return c}function W(R,T,x){for(var E=1,c=T.length;!T[--c];T.pop());for(c=T[0];c>=10;c/=10,E++);return(x=E+x*he-1)>y?R.c=R.e=null:x<g?R.c=[R.e=0]:(R.e=x,R.c=T),R}i=function(){var R=/^(-?)0([xbo])(?=\w[\w.]*$)/i,T=/^([^.]+)\.$/,x=/^\.([^.]+)$/,E=/^-?(Infinity|NaN)$/,c=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(h,b,p,u){var _,w=p?b:b.replace(c,"");if(E.test(w))h.s=isNaN(w)?null:w<0?-1:1;else{if(!p&&(w=w.replace(R,function(v,l,A){return _=(A=A.toLowerCase())=="x"?16:A=="b"?2:8,!u||u==_?l:v}),u&&(_=u,w=w.replace(T,"$1").replace(x,"0.$1")),b!=w))return new I(w,_);if(I.DEBUG)throw Error(ur+"Not a"+(u?" base "+u:"")+" number: "+b);h.s=null}h.c=h.e=null}}();function q(R,T,x,E){var c,h,b,p,u,_,w,v=R.c,l=Fc;if(v){e:{for(c=1,p=v[0];p>=10;p/=10,c++);if(h=T-c,h<0)h+=he,b=T,u=v[_=0],w=u/l[c-b-1]%10|0;else if(_=Uc((h+1)/he),_>=v.length)if(E){for(;v.length<=_;v.push(0));u=w=0,c=1,h%=he,b=h-he+1}else break e;else{for(u=p=v[_],c=1;p>=10;p/=10,c++);h%=he,b=h-he+c,w=b<0?0:u/l[c-b-1]%10|0}if(E=E||T<0||v[_+1]!=null||(b<0?u:u%l[c-b-1]),E=x<4?(w||E)&&(x==0||x==(R.s<0?3:2)):w>5||w==5&&(x==4||E||x==6&&(h>0?b>0?u/l[c-b]:0:v[_-1])%10&1||x==(R.s<0?8:7)),T<1||!v[0])return v.length=0,E?(T-=R.e+1,v[0]=l[(he-T%he)%he],R.e=-T||0):v[0]=R.e=0,R;if(h==0?(v.length=_,p=1,_--):(v.length=_+1,p=l[he-h],v[_]=b>0?jr(u/l[c-b]%l[b])*p:0),E)for(;;)if(_==0){for(h=1,b=v[0];b>=10;b/=10,h++);for(b=v[0]+=p,p=1;b>=10;b/=10,p++);h!=p&&(R.e++,v[0]==Cr&&(v[0]=1));break}else{if(v[_]+=p,v[_]!=Cr)break;v[_--]=0,p=1}for(h=v.length;v[--h]===0;v.pop());}R.e>y?R.c=R.e=null:R.e<g&&(R.c=[R.e=0])}return R}function G(R){var T,x=R.e;return x===null?R.toString():(T=Or(R.c),T=x<=f||x>=d?Sa(T,x):Ai(T,x,"0"),R.s<0?"-"+T:T)}return n.absoluteValue=n.abs=function(){var R=new I(this);return R.s<0&&(R.s=1),R},n.comparedTo=function(R,T){return Zn(this,new I(R,T))},n.decimalPlaces=n.dp=function(R,T){var x,E,c,h=this;if(R!=null)return ut(R,0,Dt),T==null?T=o:ut(T,0,8),q(new I(h),R+h.e+1,T);if(!(x=h.c))return null;if(E=((c=x.length-1)-Pr(this.e/he))*he,c=x[c])for(;c%10==0;c/=10,E--);return E<0&&(E=0),E},n.dividedBy=n.div=function(R,T){return e(this,new I(R,T),a,o)},n.dividedToIntegerBy=n.idiv=function(R,T){return e(this,new I(R,T),0,1)},n.exponentiatedBy=n.pow=function(R,T){var x,E,c,h,b,p,u,_,w,v=this;if(R=new I(R),R.c&&!R.isInteger())throw Error(ur+"Exponent not an integer: "+G(R));if(T!=null&&(T=new I(T)),p=R.e>14,!v.c||!v.c[0]||v.c[0]==1&&!v.e&&v.c.length==1||!R.c||!R.c[0])return w=new I(Math.pow(+G(v),p?R.s*(2-Aa(R)):+G(R))),T?w.mod(T):w;if(u=R.s<0,T){if(T.c?!T.c[0]:!T.s)return new I(NaN);E=!u&&v.isInteger()&&T.isInteger(),E&&(v=v.mod(T))}else{if(R.e>9&&(v.e>0||v.e<-1||(v.e==0?v.c[0]>1||p&&v.c[1]>=24e7:v.c[0]<8e13||p&&v.c[0]<=9999975e7)))return h=v.s<0&&Aa(R)?-0:0,v.e>-1&&(h=1/h),new I(u?1/h:h);P&&(h=Uc(P/he+2))}for(p?(x=new I(.5),u&&(R.s=1),_=Aa(R)):(c=Math.abs(+G(R)),_=c%2),w=new I(s);;){if(_){if(w=w.times(v),!w.c)break;h?w.c.length>h&&(w.c.length=h):E&&(w=w.mod(T))}if(c){if(c=jr(c/2),c===0)break;_=c%2}else if(R=R.times(x),q(R,R.e+1,1),R.e>14)_=Aa(R);else{if(c=+G(R),c===0)break;_=c%2}v=v.times(v),h?v.c&&v.c.length>h&&(v.c.length=h):E&&(v=v.mod(T))}return E?w:(u&&(w=s.div(w)),T?w.mod(T):h?q(w,P,o,b):w)},n.integerValue=function(R){var T=new I(this);return R==null?R=o:ut(R,0,8),q(T,T.e+1,R)},n.isEqualTo=n.eq=function(R,T){return Zn(this,new I(R,T))===0},n.isFinite=function(){return!!this.c},n.isGreaterThan=n.gt=function(R,T){return Zn(this,new I(R,T))>0},n.isGreaterThanOrEqualTo=n.gte=function(R,T){return(T=Zn(this,new I(R,T)))===1||T===0},n.isInteger=function(){return!!this.c&&Pr(this.e/he)>this.c.length-2},n.isLessThan=n.lt=function(R,T){return Zn(this,new I(R,T))<0},n.isLessThanOrEqualTo=n.lte=function(R,T){return(T=Zn(this,new I(R,T)))===-1||T===0},n.isNaN=function(){return!this.s},n.isNegative=function(){return this.s<0},n.isPositive=function(){return this.s>0},n.isZero=function(){return!!this.c&&this.c[0]==0},n.minus=function(R,T){var x,E,c,h,b=this,p=b.s;if(R=new I(R,T),T=R.s,!p||!T)return new I(NaN);if(p!=T)return R.s=-T,b.plus(R);var u=b.e/he,_=R.e/he,w=b.c,v=R.c;if(!u||!_){if(!w||!v)return w?(R.s=-T,R):new I(v?b:NaN);if(!w[0]||!v[0])return v[0]?(R.s=-T,R):new I(w[0]?b:o==3?-0:0)}if(u=Pr(u),_=Pr(_),w=w.slice(),p=u-_){for((h=p<0)?(p=-p,c=w):(_=u,c=v),c.reverse(),T=p;T--;c.push(0));c.reverse()}else for(E=(h=(p=w.length)<(T=v.length))?p:T,p=T=0;T<E;T++)if(w[T]!=v[T]){h=w[T]<v[T];break}if(h&&(c=w,w=v,v=c,R.s=-R.s),T=(E=v.length)-(x=w.length),T>0)for(;T--;w[x++]=0);for(T=Cr-1;E>p;){if(w[--E]<v[E]){for(x=E;x&&!w[--x];w[x]=T);--w[x],w[E]+=Cr}w[E]-=v[E]}for(;w[0]==0;w.splice(0,1),--_);return w[0]?W(R,w,_):(R.s=o==3?-1:1,R.c=[R.e=0],R)},n.modulo=n.mod=function(R,T){var x,E,c=this;return R=new I(R,T),!c.c||!R.s||R.c&&!R.c[0]?new I(NaN):!R.c||c.c&&!c.c[0]?new I(c):(O==9?(E=R.s,R.s=1,x=e(c,R,0,3),R.s=E,x.s*=E):x=e(c,R,0,O),R=c.minus(x.times(R)),!R.c[0]&&O==1&&(R.s=c.s),R)},n.multipliedBy=n.times=function(R,T){var x,E,c,h,b,p,u,_,w,v,l,A,K,V,J,Z=this,Y=Z.c,$=(R=new I(R,T)).c;if(!Y||!$||!Y[0]||!$[0])return!Z.s||!R.s||Y&&!Y[0]&&!$||$&&!$[0]&&!Y?R.c=R.e=R.s=null:(R.s*=Z.s,!Y||!$?R.c=R.e=null:(R.c=[0],R.e=0)),R;for(E=Pr(Z.e/he)+Pr(R.e/he),R.s*=Z.s,u=Y.length,v=$.length,u<v&&(K=Y,Y=$,$=K,c=u,u=v,v=c),c=u+v,K=[];c--;K.push(0));for(V=Cr,J=Ji,c=v;--c>=0;){for(x=0,l=$[c]%J,A=$[c]/J|0,b=u,h=c+b;h>c;)_=Y[--b]%J,w=Y[b]/J|0,p=A*_+w*l,_=l*_+p%J*J+K[h]+x,x=(_/V|0)+(p/J|0)+A*w,K[h--]=_%V;K[h]=x}return x?++E:K.splice(0,1),W(R,K,E)},n.negated=function(){var R=new I(this);return R.s=-R.s||null,R},n.plus=function(R,T){var x,E=this,c=E.s;if(R=new I(R,T),T=R.s,!c||!T)return new I(NaN);if(c!=T)return R.s=-T,E.minus(R);var h=E.e/he,b=R.e/he,p=E.c,u=R.c;if(!h||!b){if(!p||!u)return new I(c/0);if(!p[0]||!u[0])return u[0]?R:new I(p[0]?E:c*0)}if(h=Pr(h),b=Pr(b),p=p.slice(),c=h-b){for(c>0?(b=h,x=u):(c=-c,x=p),x.reverse();c--;x.push(0));x.reverse()}for(c=p.length,T=u.length,c-T<0&&(x=u,u=p,p=x,T=c),c=0;T;)c=(p[--T]=p[T]+u[T]+c)/Cr|0,p[T]=Cr===p[T]?0:p[T]%Cr;return c&&(p=[c].concat(p),++b),W(R,p,b)},n.precision=n.sd=function(R,T){var x,E,c,h=this;if(R!=null&&R!==!!R)return ut(R,1,Dt),T==null?T=o:ut(T,0,8),q(new I(h),R,T);if(!(x=h.c))return null;if(c=x.length-1,E=c*he+1,c=x[c]){for(;c%10==0;c/=10,E--);for(c=x[0];c>=10;c/=10,E++);}return R&&h.e+1>E&&(E=h.e+1),E},n.shiftedBy=function(R){return ut(R,-Hc,Hc),this.times("1e"+R)},n.squareRoot=n.sqrt=function(){var R,T,x,E,c,h=this,b=h.c,p=h.s,u=h.e,_=a+4,w=new I("0.5");if(p!==1||!b||!b[0])return new I(!p||p<0&&(!b||b[0])?NaN:b?h:1/0);if(p=Math.sqrt(+G(h)),p==0||p==1/0?(T=Or(b),(T.length+u)%2==0&&(T+="0"),p=Math.sqrt(+T),u=Pr((u+1)/2)-(u<0||u%2),p==1/0?T="5e"+u:(T=p.toExponential(),T=T.slice(0,T.indexOf("e")+1)+u),x=new I(T)):x=new I(p+""),x.c[0]){for(u=x.e,p=u+_,p<3&&(p=0);;)if(c=x,x=w.times(c.plus(e(h,c,_,1))),Or(c.c).slice(0,p)===(T=Or(x.c)).slice(0,p))if(x.e<u&&--p,T=T.slice(p-3,p+1),T=="9999"||!E&&T=="4999"){if(!E&&(q(c,c.e+a+2,0),c.times(c).eq(h))){x=c;break}_+=4,p+=4,E=1}else{(!+T||!+T.slice(1)&&T.charAt(0)=="5")&&(q(x,x.e+a+2,1),R=!x.times(x).eq(h));break}}return q(x,x.e+a+1,o,R)},n.toExponential=function(R,T){return R!=null&&(ut(R,0,Dt),R++),z(this,R,T,1)},n.toFixed=function(R,T){return R!=null&&(ut(R,0,Dt),R=R+this.e+1),z(this,R,T)},n.toFormat=function(R,T,x){var E,c=this;if(x==null)R!=null&&T&&typeof T=="object"?(x=T,T=null):R&&typeof R=="object"?(x=R,R=T=null):x=M;else if(typeof x!="object")throw Error(ur+"Argument not an object: "+x);if(E=c.toFixed(R,T),c.c){var h,b=E.split("."),p=+x.groupSize,u=+x.secondaryGroupSize,_=x.groupSeparator||"",w=b[0],v=b[1],l=c.s<0,A=l?w.slice(1):w,K=A.length;if(u&&(h=p,p=u,u=h,K-=h),p>0&&K>0){for(h=K%p||p,w=A.substr(0,h);h<K;h+=p)w+=_+A.substr(h,p);u>0&&(w+=_+A.slice(h)),l&&(w="-"+w)}E=v?w+(x.decimalSeparator||"")+((u=+x.fractionGroupSize)?v.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(x.fractionGroupSeparator||"")):v):w}return(x.prefix||"")+E+(x.suffix||"")},n.toFraction=function(R){var T,x,E,c,h,b,p,u,_,w,v,l,A=this,K=A.c;if(R!=null&&(p=new I(R),!p.isInteger()&&(p.c||p.s!==1)||p.lt(s)))throw Error(ur+"Argument "+(p.isInteger()?"out of range: ":"not an integer: ")+G(p));if(!K)return new I(A);for(T=new I(s),_=x=new I(s),E=u=new I(s),l=Or(K),h=T.e=l.length-A.e-1,T.c[0]=Fc[(b=h%he)<0?he+b:b],R=!R||p.comparedTo(T)>0?h>0?T:_:p,b=y,y=1/0,p=new I(l),u.c[0]=0;w=e(p,T,0,1),c=x.plus(w.times(E)),c.comparedTo(R)!=1;)x=E,E=c,_=u.plus(w.times(c=_)),u=c,T=p.minus(w.times(c=T)),p=c;return c=e(R.minus(x),E,0,1),u=u.plus(c.times(_)),x=x.plus(c.times(E)),u.s=_.s=A.s,h=h*2,v=e(_,E,h,o).minus(A).abs().comparedTo(e(u,x,h,o).minus(A).abs())<1?[_,E]:[u,x],y=b,v},n.toNumber=function(){return+G(this)},n.toPrecision=function(R,T){return R!=null&&ut(R,1,Dt),z(this,R,T,2)},n.toString=function(R){var T,x=this,E=x.s,c=x.e;return c===null?E?(T="Infinity",E<0&&(T="-"+T)):T="NaN":(R==null?T=c<=f||c>=d?Sa(Or(x.c),c):Ai(Or(x.c),c,"0"):R===10&&C?(x=q(new I(x),a+c+1,o),T=Ai(Or(x.c),x.e,"0")):(ut(R,2,B.length,"Base"),T=r(Ai(Or(x.c),c,"0"),10,R,E,!0)),E<0&&x.c[0]&&(T="-"+T)),T},n.valueOf=n.toJSON=function(){return G(this)},n._isBigNumber=!0,n[Symbol.toStringTag]="BigNumber",n[Symbol.for("nodejs.util.inspect.custom")]=n.valueOf,t!=null&&I.set(t),I}function Pr(t){var e=t|0;return t>0||t===e?e:e-1}function Or(t){for(var e,r,i=1,n=t.length,s=t[0]+"";i<n;){for(e=t[i++]+"",r=he-e.length;r--;e="0"+e);s+=e}for(n=s.length;s.charCodeAt(--n)===48;);return s.slice(0,n+1||1)}function Zn(t,e){var r,i,n=t.c,s=e.c,a=t.s,o=e.s,f=t.e,d=e.e;if(!a||!o)return null;if(r=n&&!n[0],i=s&&!s[0],r||i)return r?i?0:-o:a;if(a!=o)return a;if(r=a<0,i=f==d,!n||!s)return i?0:!n^r?1:-1;if(!i)return f>d^r?1:-1;for(o=(f=n.length)<(d=s.length)?f:d,a=0;a<o;a++)if(n[a]!=s[a])return n[a]>s[a]^r?1:-1;return f==d?0:f>d^r?1:-1}function ut(t,e,r,i){if(t<e||t>r||t!==jr(t))throw Error(ur+(i||"Argument")+(typeof t=="number"?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function Aa(t){var e=t.c.length-1;return Pr(t.e/he)==e&&t.c[e]%2!=0}function Sa(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function Ai(t,e,r){var i,n;if(e<0){for(n=r+".";++e;n+=r);t=n+t}else if(i=t.length,++e>i){for(n=r,e-=i;--e;n+=r);t+=n}else e<i&&(t=t.slice(0,e)+"."+t.slice(e));return t}var re=Kl(),jl=function(e,r,i,n,s){return e.config=r,i&&(e.code=i),e.request=n,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Yb=jl,Gl=function(e,r,i,n,s){var a=new Error(e);return Yb(a,r,i,n,s)},Qb=Gl,Vl=function(e,r,i){var n=i.config.validateStatus;!i.status||!n||n(i.status)?e(i):r(Qb("Request failed with status code "+i.status,i.config,null,i.request,i))},zl=function(e,r){return function(){for(var n=new Array(arguments.length),s=0;s<n.length;s++)n[s]=arguments[s];return e.apply(r,n)}},eg=zl,yn=Object.prototype.toString;function Eu(t){return Array.isArray(t)}function Ff(t){return typeof t>"u"}function tg(t){return t!==null&&!Ff(t)&&t.constructor!==null&&!Ff(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function ql(t){return yn.call(t)==="[object ArrayBuffer]"}function rg(t){return yn.call(t)==="[object FormData]"}function ig(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ql(t.buffer),e}function ng(t){return typeof t=="string"}function sg(t){return typeof t=="number"}function Wl(t){return t!==null&&typeof t=="object"}function Fa(t){if(yn.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function ag(t){return yn.call(t)==="[object Date]"}function og(t){return yn.call(t)==="[object File]"}function cg(t){return yn.call(t)==="[object Blob]"}function Jl(t){return yn.call(t)==="[object Function]"}function fg(t){return Wl(t)&&Jl(t.pipe)}function ug(t){return yn.call(t)==="[object URLSearchParams]"}function hg(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function dg(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function xu(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Eu(t))for(var r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}function Kf(){var t={};function e(n,s){Fa(t[s])&&Fa(n)?t[s]=Kf(t[s],n):Fa(n)?t[s]=Kf({},n):Eu(n)?t[s]=n.slice():t[s]=n}for(var r=0,i=arguments.length;r<i;r++)xu(arguments[r],e);return t}function lg(t,e,r){return xu(e,function(n,s){r&&typeof n=="function"?t[s]=eg(n,r):t[s]=n}),t}function pg(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var cr={isArray:Eu,isArrayBuffer:ql,isBuffer:tg,isFormData:rg,isArrayBufferView:ig,isString:ng,isNumber:sg,isObject:Wl,isPlainObject:Fa,isUndefined:Ff,isDate:ag,isFile:og,isBlob:cg,isFunction:Jl,isStream:fg,isURLSearchParams:ug,isStandardBrowserEnv:dg,forEach:xu,merge:Kf,extend:lg,trim:hg,stripBOM:pg},Xn=cr;function Gh(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Au=function(e,r,i){if(!r)return e;var n;if(i)n=i(r);else if(Xn.isURLSearchParams(r))n=r.toString();else{var s=[];Xn.forEach(r,function(f,d){f===null||typeof f>"u"||(Xn.isArray(f)?d=d+"[]":f=[f],Xn.forEach(f,function(y){Xn.isDate(y)?y=y.toISOString():Xn.isObject(y)&&(y=JSON.stringify(y)),s.push(Gh(d)+"="+Gh(y))}))}),n=s.join("&")}if(n){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e},bg=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},gg=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},mg=bg,vg=gg,Zl=function(e,r){return e&&!mg(r)?vg(e,r):r},Su={exports:{}},yg=cr;function xo(){this.handlers=[]}xo.prototype.use=function(e,r,i){return this.handlers.push({fulfilled:e,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};xo.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};xo.prototype.forEach=function(e){yg.forEach(this.handlers,function(i){i!==null&&e(i)})};var _g=xo,wg=cr,Eg=function(e,r){wg.forEach(e,function(n,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=n,delete e[s])})},Kc,Vh;function xg(){if(Vh)return Kc;Vh=1;var t=cr;return Kc=t.isStandardBrowserEnv()?function(){return{write:function(i,n,s,a,o,f){var d=[];d.push(i+"="+encodeURIComponent(n)),t.isNumber(s)&&d.push("expires="+new Date(s).toGMTString()),t.isString(a)&&d.push("path="+a),t.isString(o)&&d.push("domain="+o),f===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(i){var n=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Kc}var jc,zh;function Ag(){if(zh)return jc;zh=1;var t=cr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return jc=function(i){var n={},s,a,o;return i&&t.forEach(i.split(`
`),function(d){if(o=d.indexOf(":"),s=t.trim(d.substr(0,o)).toLowerCase(),a=t.trim(d.substr(o+1)),s){if(n[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?n[s]=(n[s]?n[s]:[]).concat([a]):n[s]=n[s]?n[s]+", "+a:a}}),n},jc}var Gc,qh;function Sg(){if(qh)return Gc;qh=1;var t=cr;return Gc=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),n;function s(a){var o=a;return r&&(i.setAttribute("href",o),o=i.href),i.setAttribute("href",o),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return n=s(window.location.href),function(o){var f=t.isString(o)?s(o):o;return f.protocol===n.protocol&&f.host===n.host}}():function(){return function(){return!0}}(),Gc}var Vc,Wh;function Ao(){if(Wh)return Vc;Wh=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Vc=t,Vc}var zc,Jh;function Zh(){if(Jh)return zc;Jh=1;var t=cr,e=Vl,r=xg(),i=Au,n=Zl,s=Ag(),a=Sg(),o=Gl,f=So(),d=Ao();return zc=function(y){return new Promise(function(O,P){var M=y.data,B=y.headers,C=y.responseType,I;function z(){y.cancelToken&&y.cancelToken.unsubscribe(I),y.signal&&y.signal.removeEventListener("abort",I)}t.isFormData(M)&&delete B["Content-Type"];var F=new XMLHttpRequest;if(y.auth){var W=y.auth.username||"",q=y.auth.password?unescape(encodeURIComponent(y.auth.password)):"";B.Authorization="Basic "+btoa(W+":"+q)}var G=n(y.baseURL,y.url);F.open(y.method.toUpperCase(),i(G,y.params,y.paramsSerializer),!0),F.timeout=y.timeout;function R(){if(F){var x="getAllResponseHeaders"in F?s(F.getAllResponseHeaders()):null,E=!C||C==="text"||C==="json"?F.responseText:F.response,c={data:E,status:F.status,statusText:F.statusText,headers:x,config:y,request:F};e(function(b){O(b),z()},function(b){P(b),z()},c),F=null}}if("onloadend"in F?F.onloadend=R:F.onreadystatechange=function(){!F||F.readyState!==4||F.status===0&&!(F.responseURL&&F.responseURL.indexOf("file:")===0)||setTimeout(R)},F.onabort=function(){F&&(P(o("Request aborted",y,"ECONNABORTED",F)),F=null)},F.onerror=function(){P(o("Network Error",y,null,F)),F=null},F.ontimeout=function(){var E=y.timeout?"timeout of "+y.timeout+"ms exceeded":"timeout exceeded",c=y.transitional||f.transitional;y.timeoutErrorMessage&&(E=y.timeoutErrorMessage),P(o(E,y,c.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",F)),F=null},t.isStandardBrowserEnv()){var T=(y.withCredentials||a(G))&&y.xsrfCookieName?r.read(y.xsrfCookieName):void 0;T&&(B[y.xsrfHeaderName]=T)}"setRequestHeader"in F&&t.forEach(B,function(E,c){typeof M>"u"&&c.toLowerCase()==="content-type"?delete B[c]:F.setRequestHeader(c,E)}),t.isUndefined(y.withCredentials)||(F.withCredentials=!!y.withCredentials),C&&C!=="json"&&(F.responseType=y.responseType),typeof y.onDownloadProgress=="function"&&F.addEventListener("progress",y.onDownloadProgress),typeof y.onUploadProgress=="function"&&F.upload&&F.upload.addEventListener("progress",y.onUploadProgress),(y.cancelToken||y.signal)&&(I=function(x){F&&(P(!x||x&&x.type?new d("canceled"):x),F.abort(),F=null)},y.cancelToken&&y.cancelToken.subscribe(I),y.signal&&(y.signal.aborted?I():y.signal.addEventListener("abort",I))),M||(M=null),F.send(M)})},zc}var qc,Xh;function So(){if(Xh)return qc;Xh=1;var t=cr,e=Eg,r=jl,i={"Content-Type":"application/x-www-form-urlencoded"};function n(f,d){!t.isUndefined(f)&&t.isUndefined(f["Content-Type"])&&(f["Content-Type"]=d)}function s(){var f;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(f=Zh()),f}function a(f,d,g){if(t.isString(f))try{return(d||JSON.parse)(f),t.trim(f)}catch(y){if(y.name!=="SyntaxError")throw y}return(g||JSON.stringify)(f)}var o={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:s(),transformRequest:[function(d,g){return e(g,"Accept"),e(g,"Content-Type"),t.isFormData(d)||t.isArrayBuffer(d)||t.isBuffer(d)||t.isStream(d)||t.isFile(d)||t.isBlob(d)?d:t.isArrayBufferView(d)?d.buffer:t.isURLSearchParams(d)?(n(g,"application/x-www-form-urlencoded;charset=utf-8"),d.toString()):t.isObject(d)||g&&g["Content-Type"]==="application/json"?(n(g,"application/json"),a(d)):d}],transformResponse:[function(d){var g=this.transitional||o.transitional,y=g&&g.silentJSONParsing,S=g&&g.forcedJSONParsing,O=!y&&this.responseType==="json";if(O||S&&t.isString(d)&&d.length)try{return JSON.parse(d)}catch(P){if(O)throw P.name==="SyntaxError"?r(P,this,"E_JSON_PARSE"):P}return d}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(d){return d>=200&&d<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(d){o.headers[d]={}}),t.forEach(["post","put","patch"],function(d){o.headers[d]=t.merge(i)}),qc=o,qc}var Rg=cr,Og=So(),Pg=function(e,r,i){var n=this||Og;return Rg.forEach(i,function(a){e=a.call(n,e,r)}),e},Wc,Yh;function Xl(){return Yh||(Yh=1,Wc=function(e){return!!(e&&e.__CANCEL__)}),Wc}var Qh=cr,Jc=Pg,Ig=Xl(),Tg=So(),Mg=Ao();function Zc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Mg("canceled")}var Lg=function(e){Zc(e),e.headers=e.headers||{},e.data=Jc.call(e,e.data,e.headers,e.transformRequest),e.headers=Qh.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Qh.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]});var r=e.adapter||Tg.adapter;return r(e).then(function(n){return Zc(e),n.data=Jc.call(e,n.data,n.headers,e.transformResponse),n},function(n){return Ig(n)||(Zc(e),n&&n.response&&(n.response.data=Jc.call(e,n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)})},gr=cr,Yl=function(e,r){r=r||{};var i={};function n(g,y){return gr.isPlainObject(g)&&gr.isPlainObject(y)?gr.merge(g,y):gr.isPlainObject(y)?gr.merge({},y):gr.isArray(y)?y.slice():y}function s(g){if(gr.isUndefined(r[g])){if(!gr.isUndefined(e[g]))return n(void 0,e[g])}else return n(e[g],r[g])}function a(g){if(!gr.isUndefined(r[g]))return n(void 0,r[g])}function o(g){if(gr.isUndefined(r[g])){if(!gr.isUndefined(e[g]))return n(void 0,e[g])}else return n(void 0,r[g])}function f(g){if(g in r)return n(e[g],r[g]);if(g in e)return n(void 0,e[g])}var d={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:f};return gr.forEach(Object.keys(e).concat(Object.keys(r)),function(y){var S=d[y]||s,O=S(y);gr.isUndefined(O)&&S!==f||(i[y]=O)}),i},Xc,ed;function Ql(){return ed||(ed=1,Xc={version:"0.26.0"}),Xc}var Ng=Ql().version,Ru={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Ru[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var td={};Ru.transitional=function(e,r,i){function n(s,a){return"[Axios v"+Ng+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return function(s,a,o){if(e===!1)throw new Error(n(a," has been removed"+(r?" in "+r:"")));return r&&!td[a]&&(td[a]=!0,console.warn(n(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,o):!0}};function Cg(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var i=Object.keys(t),n=i.length;n-- >0;){var s=i[n],a=e[s];if(a){var o=t[s],f=o===void 0||a(o,s,t);if(f!==!0)throw new TypeError("option "+s+" must be "+f);continue}if(r!==!0)throw Error("Unknown option "+s)}}var Bg={assertOptions:Cg,validators:Ru},e0=cr,Dg=Au,rd=_g,id=Lg,Ro=Yl,t0=Bg,Yn=t0.validators;function fa(t){this.defaults=t,this.interceptors={request:new rd,response:new rd}}fa.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Ro(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var i=r.transitional;i!==void 0&&t0.assertOptions(i,{silentJSONParsing:Yn.transitional(Yn.boolean),forcedJSONParsing:Yn.transitional(Yn.boolean),clarifyTimeoutError:Yn.transitional(Yn.boolean)},!1);var n=[],s=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(r)===!1||(s=s&&O.synchronous,n.unshift(O.fulfilled,O.rejected))});var a=[];this.interceptors.response.forEach(function(O){a.push(O.fulfilled,O.rejected)});var o;if(!s){var f=[id,void 0];for(Array.prototype.unshift.apply(f,n),f=f.concat(a),o=Promise.resolve(r);f.length;)o=o.then(f.shift(),f.shift());return o}for(var d=r;n.length;){var g=n.shift(),y=n.shift();try{d=g(d)}catch(S){y(S);break}}try{o=id(d)}catch(S){return Promise.reject(S)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};fa.prototype.getUri=function(e){return e=Ro(this.defaults,e),Dg(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};e0.forEach(["delete","get","head","options"],function(e){fa.prototype[e]=function(r,i){return this.request(Ro(i||{},{method:e,url:r,data:(i||{}).data}))}});e0.forEach(["post","put","patch"],function(e){fa.prototype[e]=function(r,i,n){return this.request(Ro(n||{},{method:e,url:r,data:i}))}});var kg=fa,Yc,nd;function $g(){if(nd)return Yc;nd=1;var t=Ao();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(a){i=a});var n=this;this.promise.then(function(s){if(n._listeners){var a,o=n._listeners.length;for(a=0;a<o;a++)n._listeners[a](s);n._listeners=null}}),this.promise.then=function(s){var a,o=new Promise(function(f){n.subscribe(f),a=f}).then(s);return o.cancel=function(){n.unsubscribe(a)},o},r(function(a){n.reason||(n.reason=new t(a),i(n.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},e.prototype.unsubscribe=function(i){if(this._listeners){var n=this._listeners.indexOf(i);n!==-1&&this._listeners.splice(n,1)}},e.source=function(){var i,n=new e(function(a){i=a});return{token:n,cancel:i}},Yc=e,Yc}var Qc,sd;function Ug(){return sd||(sd=1,Qc=function(e){return function(i){return e.apply(null,i)}}),Qc}var ef,ad;function Hg(){if(ad)return ef;ad=1;var t=cr;return ef=function(r){return t.isObject(r)&&r.isAxiosError===!0},ef}var od=cr,Fg=zl,Ka=kg,Kg=Yl,jg=So();function r0(t){var e=new Ka(t),r=Fg(Ka.prototype.request,e);return od.extend(r,Ka.prototype,e),od.extend(r,e),r.create=function(n){return r0(Kg(t,n))},r}var _i=r0(jg);_i.Axios=Ka;_i.Cancel=Ao();_i.CancelToken=$g();_i.isCancel=Xl();_i.VERSION=Ql().version;_i.all=function(e){return Promise.all(e)};_i.spread=Ug();_i.isAxiosError=Hg();Su.exports=_i;Su.exports.default=_i;var Gg=Su.exports,Vg=Gg;const cd=ca(Vg);class et extends Error{}class ke extends et{}class Oo extends et{}class Po extends et{}class i0 extends et{}class Io extends et{}class Mx extends et{}class Je extends ke{constructor(e,r){super(),this.address=e,this.errorDetail=r,this.name="InvalidAddressError",this.message=`Invalid address "${e}"`,this.message+=r?` ${r}.`:"."}}class zg extends ke{constructor(e,r){super(),this.blockHash=e,this.errorDetail=r,this.name="InvalidBlockHashError",this.message=`Invalid block hash "${e}"`,this.message+=r?` ${r}.`:"."}}class Qs extends ke{constructor(e){super(),this.amount=e,this.name="InvalidAmountError",this.message=`Invalid amount "${e}"`}}class eo extends ke{constructor(e,r){super(),this.hexString=e,this.errorDetail=r,this.name="InvalidHexStringError",this.message=`Invalid hex string "${e}"`,this.message+=r?` ${r}.`:"."}}class qg extends ke{constructor(e,r){super(),this.msg=e,this.errorDetail=r,this.name="InvalidMessageError",this.message=`Invalid message "${e}"`,this.message+=r?` ${r}.`:"."}}class n0 extends ke{constructor(e,r,i,n){super(),this.viewName=e,this.sigs=r,this.args=i,this.cause=n,this.name="InvalidViewParameterError",this.message=`Invalid view arguments ${JSON.stringify(i)} received for name "${e}" expecting one of the following signatures ${JSON.stringify(r)}.`}}class s0 extends ke{constructor(e,r){super(),this.publicKey=e,this.errorDetail=r,this.name="InvalidPublicKeyError",this.message=`Invalid public key "${e}"`,this.message+=r?` ${r}.`:"."}}class Nn extends ke{constructor(e,r){super(),this.contractAddress=e,this.errorDetail=r,this.name="InvalidContractAddressError",this.message=`Invalid contract address "${e}"`,this.message+=r?` ${r}.`:"."}}class Wg extends ke{constructor(e,r){super(),this.chainId=e,this.errorDetail=r,this.name="InvalidChainIdError",this.message=`Invalid chain id "${e}"`,this.message+=r?` ${r}.`:"."}}class Ou extends ke{constructor(e,r){super(),this.keyHash=e,this.errorDetail=r,this.name="InvalidKeyHashError",this.message=`Invalid public key hash "${e}"`,this.message+=r?` ${r}.`:"."}}class a0 extends ke{constructor(e,r){super(),this.operationHash=e,this.errorDetail=r,this.name="InvalidOperationHashError",this.message=`Invalid operation hash "${e}"`,this.message+=r?` ${r}.`:"."}}class bn extends ke{constructor(e,r){super(),this.operationKind=e,this.errorDetail=r,this.name="InvalidOperationKindError",this.message=`Invalid operation kind "${e}"`,this.message+=r?` ${r}.`:"."}}class o0 extends i0{constructor(e){super(),this.message=e,this.name="DeprecationError"}}class tf extends et{constructor(e,r){super(),this.pkh=e,this.cause=r,this.name="PublicKeyNotFoundError",this.message=`Public key not found of this address "${e}" in either wallet or contract API.`}}function Pu(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(g){try{d(i.next(g))}catch(y){a(y)}}function f(g){try{d(i.throw(g))}catch(y){a(y)}}function d(g){g.done?s(g.value):n(g.value).then(o,f)}d((i=i.apply(t,e||[])).next())})}const Jg=Vl,Zg=Au,Xg=Zl,{isUndefined:Yg,isStandardBrowserEnv:Qg,isFormData:em}=cr;function tm(t){return Pu(this,void 0,void 0,function*(){const e=im(t),r=[rm(e,t)];t.timeout&&t.timeout>0&&r.push(new Promise(n=>{setTimeout(()=>{const s=t.timeoutErrorMessage?t.timeoutErrorMessage:"timeout of "+t.timeout+"ms exceeded";n(jf(s,t,"ECONNABORTED",e))},t.timeout)}));const i=yield Promise.race(r);return new Promise((n,s)=>{if(i instanceof Error)s(i);else{const a=t;"settle"in a&&Object.prototype.toString.call(a.settle)==="[object Function]"?a.settle(n,s,i):Jg(n,s,i)}})})}function rm(t,e){return Pu(this,void 0,void 0,function*(){try{const r=yield fetch(t);let i={ok:r.ok,status:r.status,statusText:r.statusText,headers:new Headers(r.headers),config:e,request:t};if(r.status>=400)return jf("Response Error",e,"ERR_NETWORK",t,i);if(i={ok:r.ok,status:r.status,statusText:r.statusText,headers:new Headers(r.headers),config:e,request:t},r.status>=200&&r.status!==204)switch(e.responseType){case"arraybuffer":i.data=yield r.arrayBuffer();break;case"blob":i.data=yield r.blob();break;case"json":i.data=yield r.json();break;default:i.data=yield r.text();break}return i}catch{return jf("Network Error",e,"ERR_NETWORK",t)}})}function im(t){var e;const r=new Headers(t.headers);if(t.auth){const f=t.auth.username||"",d=t.auth.password?decodeURI(encodeURIComponent(t.auth.password)):"";r.set("Authorization",`Basic ${btoa(f+":"+d)}`)}const i=(e=t.method)===null||e===void 0?void 0:e.toUpperCase(),n={headers:r,method:i};i!=="GET"&&i!=="HEAD"&&(n.body=t.data,em(n.body)&&Qg()&&r.delete("Content-Type"));const s=t;"mode"in s&&(n.mode=s.mode),"cache"in s&&(n.cache=s.cache),"integrity"in s&&(n.integrity=s.integrity),"redirect"in s&&(n.redirect=s.redirect),"referrer"in s&&(n.referrer=s.referrer),Yg(s.withCredentials)||(n.credentials=s.withCredentials?"include":"omit");const a=Xg(s.baseURL,s.url),o=Zg(a,s.params,s.paramsSerializer);return new Request(o,n)}function jf(t,e,r,i,n){const s=new Error(t);return nm(s,e,r,i,n)}function nm(t,e,r,i,n){return t.config=e,r&&(t.code=r),t.request=i,t.response=n,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:"description"in this?this.description:void 0,number:"number"in this?this.number:void 0,fileName:"fileName"in this?this.fileName:void 0,lineNumber:"lineNumber"in this?this.lineNumber:void 0,columnNumber:"columnNumber"in this?this.columnNumber:void 0,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}class sm extends Io{constructor(e,r,i){super(),this.method=e,this.url=r,this.cause=i,this.name="HttpRequestFailed",this.message=`${e} ${r} ${String(i)}`}}class ws extends Io{constructor(e,r,i,n,s){super(),this.message=e,this.status=r,this.statusText=i,this.body=n,this.url=s,this.name="HttpResponse"}}var ea;(function(t){t[t.CONTINUE=100]="CONTINUE",t[t.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",t[t.PROCESSING=102]="PROCESSING",t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.ACCEPTED=202]="ACCEPTED",t[t.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.RESET_CONTENT=205]="RESET_CONTENT",t[t.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",t[t.MULTI_STATUS=207]="MULTI_STATUS",t[t.ALREADY_REPORTED=208]="ALREADY_REPORTED",t[t.IM_USED=226]="IM_USED",t[t.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",t[t.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",t[t.FOUND=302]="FOUND",t[t.SEE_OTHER=303]="SEE_OTHER",t[t.NOT_MODIFIED=304]="NOT_MODIFIED",t[t.USE_PROXY=305]="USE_PROXY",t[t.SWITCH_PROXY=306]="SWITCH_PROXY",t[t.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",t[t.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",t[t.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",t[t.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",t[t.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",t[t.CONFLICT=409]="CONFLICT",t[t.GONE=410]="GONE",t[t.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",t[t.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",t[t.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",t[t.URI_TOO_LONG=414]="URI_TOO_LONG",t[t.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",t[t.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",t[t.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",t[t.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",t[t.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",t[t.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",t[t.LOCKED=423]="LOCKED",t[t.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",t[t.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",t[t.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",t[t.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",t[t.BAD_GATEWAY=502]="BAD_GATEWAY",t[t.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",t[t.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",t[t.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",t[t.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",t[t.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",t[t.LOOP_DETECTED=508]="LOOP_DETECTED",t[t.NOT_EXTENDED=510]="NOT_EXTENDED",t[t.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"})(ea||(ea={}));var rf;const c0=typeof process<"u"&&!!(!((rf=process==null?void 0:process.versions)===null||rf===void 0)&&rf.node),am=c0?void 0:tm;var to;(function(t){t.TEXT="text",t.JSON="json"})(to||(to={}));class om{constructor(e=3e4){this.timeout=e}serialize(e){if(!e)return"";const r=[];for(const n in e)if(e.hasOwnProperty(n)&&typeof e[n]<"u"){const s=typeof e[n].toJSON=="function"?e[n].toJSON():e[n];if(s===null){r.push(encodeURIComponent(n));continue}if(Array.isArray(s)){s.forEach(a=>{r.push(encodeURIComponent(n)+"="+encodeURIComponent(a))});continue}r.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}const i=r.join("&");return i?`?${i}`:""}createRequest({url:e,method:r,timeout:i=this.timeout,query:n,headers:s={},json:a=!0},o){return Pu(this,void 0,void 0,function*(){const f=e+this.serialize(n);let d,g;s["Content-Type"]||(s["Content-Type"]="application/json"),a?d=to.JSON:(d=to.TEXT,g=[y=>y]);try{return(yield cd.request({url:f,method:r??"GET",headers:s,responseType:d,transformResponse:g,timeout:i,data:o,adapter:am})).data}catch(y){if(cd.isAxiosError(y)&&y.response||!c0&&y.response){let S;throw typeof y.response.data=="object"?S=JSON.stringify(y.response.data):S=y.response.data,new ws(`Http error response: (${y.response.status}) ${S}`,y.response.status,y.response.statusText,S,f)}else throw new sm(String(r),f,y)}})}}var cm={},f0={},To={},Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.BrowserRandomSource=void 0;const fd=65536;class fm{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let i=0;i<r.length;i+=fd)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,fd)));return r}}Mo.BrowserRandomSource=fm;function um(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Lo={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});function hm(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Fn.wipe=hm;const dm={},lm=Object.freeze(Object.defineProperty({__proto__:null,default:dm},Symbol.toStringTag,{value:"Module"})),No=Fl(lm);Object.defineProperty(Lo,"__esModule",{value:!0});Lo.NodeRandomSource=void 0;const pm=Fn;class bm{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof um<"u"){const e=No;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(e);for(let n=0;n<i.length;n++)i[n]=r[n];return(0,pm.wipe)(r),i}}Lo.NodeRandomSource=bm;Object.defineProperty(To,"__esModule",{value:!0});To.SystemRandomSource=void 0;const gm=Mo,mm=Lo;class vm{constructor(){if(this.isAvailable=!1,this.name="",this._source=new gm.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new mm.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}To.SystemRandomSource=vm;var me={},u0={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(o,f){var d=o>>>16&65535,g=o&65535,y=f>>>16&65535,S=f&65535;return g*S+(d*S+g*y<<16>>>0)|0}t.mul=Math.imul||e;function r(o,f){return o+f|0}t.add=r;function i(o,f){return o-f|0}t.sub=i;function n(o,f){return o<<f|o>>>32-f}t.rotl=n;function s(o,f){return o<<32-f|o>>>f}t.rotr=s;function a(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o}t.isInteger=Number.isInteger||a,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(o){return t.isInteger(o)&&o>=-t.MAX_SAFE_INTEGER&&o<=t.MAX_SAFE_INTEGER}})(u0);Object.defineProperty(me,"__esModule",{value:!0});var h0=u0;function ym(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}me.readInt16BE=ym;function _m(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}me.readUint16BE=_m;function wm(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}me.readInt16LE=wm;function Em(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}me.readUint16LE=Em;function d0(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}me.writeUint16BE=d0;me.writeInt16BE=d0;function l0(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}me.writeUint16LE=l0;me.writeInt16LE=l0;function Gf(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}me.readInt32BE=Gf;function Vf(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}me.readUint32BE=Vf;function zf(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}me.readInt32LE=zf;function qf(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}me.readUint32LE=qf;function ro(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}me.writeUint32BE=ro;me.writeInt32BE=ro;function io(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}me.writeUint32LE=io;me.writeInt32LE=io;function xm(t,e){e===void 0&&(e=0);var r=Gf(t,e),i=Gf(t,e+4);return r*4294967296+i-(i>>31)*4294967296}me.readInt64BE=xm;function Am(t,e){e===void 0&&(e=0);var r=Vf(t,e),i=Vf(t,e+4);return r*4294967296+i}me.readUint64BE=Am;function Sm(t,e){e===void 0&&(e=0);var r=zf(t,e),i=zf(t,e+4);return i*4294967296+r-(r>>31)*4294967296}me.readInt64LE=Sm;function Rm(t,e){e===void 0&&(e=0);var r=qf(t,e),i=qf(t,e+4);return i*4294967296+r}me.readUint64LE=Rm;function p0(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),ro(t/4294967296>>>0,e,r),ro(t>>>0,e,r+4),e}me.writeUint64BE=p0;me.writeInt64BE=p0;function b0(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),io(t>>>0,e,r),io(t/4294967296>>>0,e,r+4),e}me.writeUint64LE=b0;me.writeInt64LE=b0;function Om(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,s=t/8+r-1;s>=r;s--)i+=e[s]*n,n*=256;return i}me.readUintBE=Om;function Pm(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,s=r;s<r+t/8;s++)i+=e[s]*n,n*=256;return i}me.readUintLE=Pm;function Im(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!h0.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var n=1,s=t/8+i-1;s>=i;s--)r[s]=e/n&255,n*=256;return r}me.writeUintBE=Im;function Tm(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!h0.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var n=1,s=i;s<i+t/8;s++)r[s]=e/n&255,n*=256;return r}me.writeUintLE=Tm;function Mm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}me.readFloat32BE=Mm;function Lm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}me.readFloat32LE=Lm;function Nm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}me.readFloat64BE=Nm;function Cm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}me.readFloat64LE=Cm;function Bm(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t),e}me.writeFloat32BE=Bm;function Dm(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t,!0),e}me.writeFloat32LE=Dm;function km(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t),e}me.writeFloat64BE=km;function $m(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t,!0),e}me.writeFloat64LE=$m;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=To,r=me,i=Fn;t.defaultRandomSource=new e.SystemRandomSource;function n(d,g=t.defaultRandomSource){return g.randomBytes(d)}t.randomBytes=n;function s(d=t.defaultRandomSource){const g=n(4,d),y=(0,r.readUint32LE)(g);return(0,i.wipe)(g),y}t.randomUint32=s;const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function o(d,g=a,y=t.defaultRandomSource){if(g.length<2)throw new Error("randomString charset is too short");if(g.length>256)throw new Error("randomString charset is too long");let S="";const O=g.length,P=256-256%O;for(;d>0;){const M=n(Math.ceil(d*256/P),y);for(let B=0;B<M.length&&d>0;B++){const C=M[B];C<P&&(S+=g.charAt(C%O),d--)}(0,i.wipe)(M)}return S}t.randomString=o;function f(d,g=a,y=t.defaultRandomSource){const S=Math.ceil(d/(Math.log(g.length)/Math.LN2));return o(S,g,y)}t.randomStringForEntropy=f})(f0);var g0={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=me,r=Fn;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var i=function(){function o(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return o.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},o.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},o.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},o.prototype.update=function(f,d){if(d===void 0&&(d=f.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var g=0;if(this._bytesHashed+=d,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&d>0;)this._buffer[this._bufferLength++]=f[g++],d--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(d>=this.blockSize&&(g=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,f,g,d),d%=this.blockSize);d>0;)this._buffer[this._bufferLength++]=f[g++],d--;return this},o.prototype.finish=function(f){if(!this._finished){var d=this._bytesHashed,g=this._bufferLength,y=d/536870912|0,S=d<<3,O=d%128<112?128:256;this._buffer[g]=128;for(var P=g+1;P<O-8;P++)this._buffer[P]=0;e.writeUint32BE(y,this._buffer,O-8),e.writeUint32BE(S,this._buffer,O-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,O),this._finished=!0}for(var P=0;P<this.digestLength/8;P++)e.writeUint32BE(this._stateHi[P],f,P*8),e.writeUint32BE(this._stateLo[P],f,P*8+4);return this},o.prototype.digest=function(){var f=new Uint8Array(this.digestLength);return this.finish(f),f},o.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},o.prototype.restoreState=function(f){return this._stateHi.set(f.stateHi),this._stateLo.set(f.stateLo),this._bufferLength=f.bufferLength,f.buffer&&this._buffer.set(f.buffer),this._bytesHashed=f.bytesHashed,this._finished=!1,this},o.prototype.cleanSavedState=function(f){r.wipe(f.stateHi),r.wipe(f.stateLo),f.buffer&&r.wipe(f.buffer),f.bufferLength=0,f.bytesHashed=0},o}();t.SHA512=i;var n=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(o,f,d,g,y,S,O){for(var P=d[0],M=d[1],B=d[2],C=d[3],I=d[4],z=d[5],F=d[6],W=d[7],q=g[0],G=g[1],R=g[2],T=g[3],x=g[4],E=g[5],c=g[6],h=g[7],b,p,u,_,w,v,l,A;O>=128;){for(var K=0;K<16;K++){var V=8*K+S;o[K]=e.readUint32BE(y,V),f[K]=e.readUint32BE(y,V+4)}for(var K=0;K<80;K++){var J=P,Z=M,Y=B,$=C,H=I,k=z,m=F,N=W,X=q,Q=G,ue=R,te=T,ne=x,Qe=E,Ce=c,ve=h;if(b=W,p=h,w=p&65535,v=p>>>16,l=b&65535,A=b>>>16,b=(I>>>14|x<<32-14)^(I>>>18|x<<32-18)^(x>>>41-32|I<<32-(41-32)),p=(x>>>14|I<<32-14)^(x>>>18|I<<32-18)^(I>>>41-32|x<<32-(41-32)),w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,b=I&z^~I&F,p=x&E^~x&c,w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,b=n[K*2],p=n[K*2+1],w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,b=o[K%16],p=f[K%16],w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,v+=w>>>16,l+=v>>>16,A+=l>>>16,u=l&65535|A<<16,_=w&65535|v<<16,b=u,p=_,w=p&65535,v=p>>>16,l=b&65535,A=b>>>16,b=(P>>>28|q<<32-28)^(q>>>34-32|P<<32-(34-32))^(q>>>39-32|P<<32-(39-32)),p=(q>>>28|P<<32-28)^(P>>>34-32|q<<32-(34-32))^(P>>>39-32|q<<32-(39-32)),w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,b=P&M^P&B^M&B,p=q&G^q&R^G&R,w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,v+=w>>>16,l+=v>>>16,A+=l>>>16,N=l&65535|A<<16,ve=w&65535|v<<16,b=$,p=te,w=p&65535,v=p>>>16,l=b&65535,A=b>>>16,b=u,p=_,w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,v+=w>>>16,l+=v>>>16,A+=l>>>16,$=l&65535|A<<16,te=w&65535|v<<16,M=J,B=Z,C=Y,I=$,z=H,F=k,W=m,P=N,G=X,R=Q,T=ue,x=te,E=ne,c=Qe,h=Ce,q=ve,K%16===15)for(var V=0;V<16;V++)b=o[V],p=f[V],w=p&65535,v=p>>>16,l=b&65535,A=b>>>16,b=o[(V+9)%16],p=f[(V+9)%16],w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,u=o[(V+1)%16],_=f[(V+1)%16],b=(u>>>1|_<<32-1)^(u>>>8|_<<32-8)^u>>>7,p=(_>>>1|u<<32-1)^(_>>>8|u<<32-8)^(_>>>7|u<<32-7),w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,u=o[(V+14)%16],_=f[(V+14)%16],b=(u>>>19|_<<32-19)^(_>>>61-32|u<<32-(61-32))^u>>>6,p=(_>>>19|u<<32-19)^(u>>>61-32|_<<32-(61-32))^(_>>>6|u<<32-6),w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,v+=w>>>16,l+=v>>>16,A+=l>>>16,o[V]=l&65535|A<<16,f[V]=w&65535|v<<16}b=P,p=q,w=p&65535,v=p>>>16,l=b&65535,A=b>>>16,b=d[0],p=g[0],w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,v+=w>>>16,l+=v>>>16,A+=l>>>16,d[0]=P=l&65535|A<<16,g[0]=q=w&65535|v<<16,b=M,p=G,w=p&65535,v=p>>>16,l=b&65535,A=b>>>16,b=d[1],p=g[1],w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,v+=w>>>16,l+=v>>>16,A+=l>>>16,d[1]=M=l&65535|A<<16,g[1]=G=w&65535|v<<16,b=B,p=R,w=p&65535,v=p>>>16,l=b&65535,A=b>>>16,b=d[2],p=g[2],w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,v+=w>>>16,l+=v>>>16,A+=l>>>16,d[2]=B=l&65535|A<<16,g[2]=R=w&65535|v<<16,b=C,p=T,w=p&65535,v=p>>>16,l=b&65535,A=b>>>16,b=d[3],p=g[3],w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,v+=w>>>16,l+=v>>>16,A+=l>>>16,d[3]=C=l&65535|A<<16,g[3]=T=w&65535|v<<16,b=I,p=x,w=p&65535,v=p>>>16,l=b&65535,A=b>>>16,b=d[4],p=g[4],w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,v+=w>>>16,l+=v>>>16,A+=l>>>16,d[4]=I=l&65535|A<<16,g[4]=x=w&65535|v<<16,b=z,p=E,w=p&65535,v=p>>>16,l=b&65535,A=b>>>16,b=d[5],p=g[5],w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,v+=w>>>16,l+=v>>>16,A+=l>>>16,d[5]=z=l&65535|A<<16,g[5]=E=w&65535|v<<16,b=F,p=c,w=p&65535,v=p>>>16,l=b&65535,A=b>>>16,b=d[6],p=g[6],w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,v+=w>>>16,l+=v>>>16,A+=l>>>16,d[6]=F=l&65535|A<<16,g[6]=c=w&65535|v<<16,b=W,p=h,w=p&65535,v=p>>>16,l=b&65535,A=b>>>16,b=d[7],p=g[7],w+=p&65535,v+=p>>>16,l+=b&65535,A+=b>>>16,v+=w>>>16,l+=v>>>16,A+=l>>>16,d[7]=W=l&65535|A<<16,g[7]=h=w&65535|v<<16,S+=128,O-=128}return S}function a(o){var f=new i;f.update(o);var d=f.digest();return f.clean(),d}t.hash=a})(g0);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=f0,r=g0,i=Fn;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function n($){const H=new Float64Array(16);if($)for(let k=0;k<$.length;k++)H[k]=$[k];return H}const s=new Uint8Array(32);s[0]=9;const a=n(),o=n([1]),f=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),g=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),y=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),S=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function O($,H){for(let k=0;k<16;k++)$[k]=H[k]|0}function P($){let H=1;for(let k=0;k<16;k++){let m=$[k]+H+65535;H=Math.floor(m/65536),$[k]=m-H*65536}$[0]+=H-1+37*(H-1)}function M($,H,k){const m=~(k-1);for(let N=0;N<16;N++){const X=m&($[N]^H[N]);$[N]^=X,H[N]^=X}}function B($,H){const k=n(),m=n();for(let N=0;N<16;N++)m[N]=H[N];P(m),P(m),P(m);for(let N=0;N<2;N++){k[0]=m[0]-65517;for(let Q=1;Q<15;Q++)k[Q]=m[Q]-65535-(k[Q-1]>>16&1),k[Q-1]&=65535;k[15]=m[15]-32767-(k[14]>>16&1);const X=k[15]>>16&1;k[14]&=65535,M(m,k,1-X)}for(let N=0;N<16;N++)$[2*N]=m[N]&255,$[2*N+1]=m[N]>>8}function C($,H){let k=0;for(let m=0;m<32;m++)k|=$[m]^H[m];return(1&k-1>>>8)-1}function I($,H){const k=new Uint8Array(32),m=new Uint8Array(32);return B(k,$),B(m,H),C(k,m)}function z($){const H=new Uint8Array(32);return B(H,$),H[0]&1}function F($,H){for(let k=0;k<16;k++)$[k]=H[2*k]+(H[2*k+1]<<8);$[15]&=32767}function W($,H,k){for(let m=0;m<16;m++)$[m]=H[m]+k[m]}function q($,H,k){for(let m=0;m<16;m++)$[m]=H[m]-k[m]}function G($,H,k){let m,N,X=0,Q=0,ue=0,te=0,ne=0,Qe=0,Ce=0,ve=0,Ct=0,we=0,ye=0,gt=0,be=0,pe=0,st=0,de=0,Ee=0,Bt=0,De=0,$e=0,nr=0,Ke=0,Ve=0,Rr=0,qe=0,Xe=0,xi=0,tt=0,it=0,Jn=0,ft=0,xe=k[0],Ot=k[1],Ae=k[2],Se=k[3],Pt=k[4],Re=k[5],Oe=k[6],It=k[7],Pe=k[8],Ie=k[9],Tt=k[10],Te=k[11],Me=k[12],Mt=k[13],Le=k[14],Ne=k[15];m=H[0],X+=m*xe,Q+=m*Ot,ue+=m*Ae,te+=m*Se,ne+=m*Pt,Qe+=m*Re,Ce+=m*Oe,ve+=m*It,Ct+=m*Pe,we+=m*Ie,ye+=m*Tt,gt+=m*Te,be+=m*Me,pe+=m*Mt,st+=m*Le,de+=m*Ne,m=H[1],Q+=m*xe,ue+=m*Ot,te+=m*Ae,ne+=m*Se,Qe+=m*Pt,Ce+=m*Re,ve+=m*Oe,Ct+=m*It,we+=m*Pe,ye+=m*Ie,gt+=m*Tt,be+=m*Te,pe+=m*Me,st+=m*Mt,de+=m*Le,Ee+=m*Ne,m=H[2],ue+=m*xe,te+=m*Ot,ne+=m*Ae,Qe+=m*Se,Ce+=m*Pt,ve+=m*Re,Ct+=m*Oe,we+=m*It,ye+=m*Pe,gt+=m*Ie,be+=m*Tt,pe+=m*Te,st+=m*Me,de+=m*Mt,Ee+=m*Le,Bt+=m*Ne,m=H[3],te+=m*xe,ne+=m*Ot,Qe+=m*Ae,Ce+=m*Se,ve+=m*Pt,Ct+=m*Re,we+=m*Oe,ye+=m*It,gt+=m*Pe,be+=m*Ie,pe+=m*Tt,st+=m*Te,de+=m*Me,Ee+=m*Mt,Bt+=m*Le,De+=m*Ne,m=H[4],ne+=m*xe,Qe+=m*Ot,Ce+=m*Ae,ve+=m*Se,Ct+=m*Pt,we+=m*Re,ye+=m*Oe,gt+=m*It,be+=m*Pe,pe+=m*Ie,st+=m*Tt,de+=m*Te,Ee+=m*Me,Bt+=m*Mt,De+=m*Le,$e+=m*Ne,m=H[5],Qe+=m*xe,Ce+=m*Ot,ve+=m*Ae,Ct+=m*Se,we+=m*Pt,ye+=m*Re,gt+=m*Oe,be+=m*It,pe+=m*Pe,st+=m*Ie,de+=m*Tt,Ee+=m*Te,Bt+=m*Me,De+=m*Mt,$e+=m*Le,nr+=m*Ne,m=H[6],Ce+=m*xe,ve+=m*Ot,Ct+=m*Ae,we+=m*Se,ye+=m*Pt,gt+=m*Re,be+=m*Oe,pe+=m*It,st+=m*Pe,de+=m*Ie,Ee+=m*Tt,Bt+=m*Te,De+=m*Me,$e+=m*Mt,nr+=m*Le,Ke+=m*Ne,m=H[7],ve+=m*xe,Ct+=m*Ot,we+=m*Ae,ye+=m*Se,gt+=m*Pt,be+=m*Re,pe+=m*Oe,st+=m*It,de+=m*Pe,Ee+=m*Ie,Bt+=m*Tt,De+=m*Te,$e+=m*Me,nr+=m*Mt,Ke+=m*Le,Ve+=m*Ne,m=H[8],Ct+=m*xe,we+=m*Ot,ye+=m*Ae,gt+=m*Se,be+=m*Pt,pe+=m*Re,st+=m*Oe,de+=m*It,Ee+=m*Pe,Bt+=m*Ie,De+=m*Tt,$e+=m*Te,nr+=m*Me,Ke+=m*Mt,Ve+=m*Le,Rr+=m*Ne,m=H[9],we+=m*xe,ye+=m*Ot,gt+=m*Ae,be+=m*Se,pe+=m*Pt,st+=m*Re,de+=m*Oe,Ee+=m*It,Bt+=m*Pe,De+=m*Ie,$e+=m*Tt,nr+=m*Te,Ke+=m*Me,Ve+=m*Mt,Rr+=m*Le,qe+=m*Ne,m=H[10],ye+=m*xe,gt+=m*Ot,be+=m*Ae,pe+=m*Se,st+=m*Pt,de+=m*Re,Ee+=m*Oe,Bt+=m*It,De+=m*Pe,$e+=m*Ie,nr+=m*Tt,Ke+=m*Te,Ve+=m*Me,Rr+=m*Mt,qe+=m*Le,Xe+=m*Ne,m=H[11],gt+=m*xe,be+=m*Ot,pe+=m*Ae,st+=m*Se,de+=m*Pt,Ee+=m*Re,Bt+=m*Oe,De+=m*It,$e+=m*Pe,nr+=m*Ie,Ke+=m*Tt,Ve+=m*Te,Rr+=m*Me,qe+=m*Mt,Xe+=m*Le,xi+=m*Ne,m=H[12],be+=m*xe,pe+=m*Ot,st+=m*Ae,de+=m*Se,Ee+=m*Pt,Bt+=m*Re,De+=m*Oe,$e+=m*It,nr+=m*Pe,Ke+=m*Ie,Ve+=m*Tt,Rr+=m*Te,qe+=m*Me,Xe+=m*Mt,xi+=m*Le,tt+=m*Ne,m=H[13],pe+=m*xe,st+=m*Ot,de+=m*Ae,Ee+=m*Se,Bt+=m*Pt,De+=m*Re,$e+=m*Oe,nr+=m*It,Ke+=m*Pe,Ve+=m*Ie,Rr+=m*Tt,qe+=m*Te,Xe+=m*Me,xi+=m*Mt,tt+=m*Le,it+=m*Ne,m=H[14],st+=m*xe,de+=m*Ot,Ee+=m*Ae,Bt+=m*Se,De+=m*Pt,$e+=m*Re,nr+=m*Oe,Ke+=m*It,Ve+=m*Pe,Rr+=m*Ie,qe+=m*Tt,Xe+=m*Te,xi+=m*Me,tt+=m*Mt,it+=m*Le,Jn+=m*Ne,m=H[15],de+=m*xe,Ee+=m*Ot,Bt+=m*Ae,De+=m*Se,$e+=m*Pt,nr+=m*Re,Ke+=m*Oe,Ve+=m*It,Rr+=m*Pe,qe+=m*Ie,Xe+=m*Tt,xi+=m*Te,tt+=m*Me,it+=m*Mt,Jn+=m*Le,ft+=m*Ne,X+=38*Ee,Q+=38*Bt,ue+=38*De,te+=38*$e,ne+=38*nr,Qe+=38*Ke,Ce+=38*Ve,ve+=38*Rr,Ct+=38*qe,we+=38*Xe,ye+=38*xi,gt+=38*tt,be+=38*it,pe+=38*Jn,st+=38*ft,N=1,m=X+N+65535,N=Math.floor(m/65536),X=m-N*65536,m=Q+N+65535,N=Math.floor(m/65536),Q=m-N*65536,m=ue+N+65535,N=Math.floor(m/65536),ue=m-N*65536,m=te+N+65535,N=Math.floor(m/65536),te=m-N*65536,m=ne+N+65535,N=Math.floor(m/65536),ne=m-N*65536,m=Qe+N+65535,N=Math.floor(m/65536),Qe=m-N*65536,m=Ce+N+65535,N=Math.floor(m/65536),Ce=m-N*65536,m=ve+N+65535,N=Math.floor(m/65536),ve=m-N*65536,m=Ct+N+65535,N=Math.floor(m/65536),Ct=m-N*65536,m=we+N+65535,N=Math.floor(m/65536),we=m-N*65536,m=ye+N+65535,N=Math.floor(m/65536),ye=m-N*65536,m=gt+N+65535,N=Math.floor(m/65536),gt=m-N*65536,m=be+N+65535,N=Math.floor(m/65536),be=m-N*65536,m=pe+N+65535,N=Math.floor(m/65536),pe=m-N*65536,m=st+N+65535,N=Math.floor(m/65536),st=m-N*65536,m=de+N+65535,N=Math.floor(m/65536),de=m-N*65536,X+=N-1+37*(N-1),N=1,m=X+N+65535,N=Math.floor(m/65536),X=m-N*65536,m=Q+N+65535,N=Math.floor(m/65536),Q=m-N*65536,m=ue+N+65535,N=Math.floor(m/65536),ue=m-N*65536,m=te+N+65535,N=Math.floor(m/65536),te=m-N*65536,m=ne+N+65535,N=Math.floor(m/65536),ne=m-N*65536,m=Qe+N+65535,N=Math.floor(m/65536),Qe=m-N*65536,m=Ce+N+65535,N=Math.floor(m/65536),Ce=m-N*65536,m=ve+N+65535,N=Math.floor(m/65536),ve=m-N*65536,m=Ct+N+65535,N=Math.floor(m/65536),Ct=m-N*65536,m=we+N+65535,N=Math.floor(m/65536),we=m-N*65536,m=ye+N+65535,N=Math.floor(m/65536),ye=m-N*65536,m=gt+N+65535,N=Math.floor(m/65536),gt=m-N*65536,m=be+N+65535,N=Math.floor(m/65536),be=m-N*65536,m=pe+N+65535,N=Math.floor(m/65536),pe=m-N*65536,m=st+N+65535,N=Math.floor(m/65536),st=m-N*65536,m=de+N+65535,N=Math.floor(m/65536),de=m-N*65536,X+=N-1+37*(N-1),$[0]=X,$[1]=Q,$[2]=ue,$[3]=te,$[4]=ne,$[5]=Qe,$[6]=Ce,$[7]=ve,$[8]=Ct,$[9]=we,$[10]=ye,$[11]=gt,$[12]=be,$[13]=pe,$[14]=st,$[15]=de}function R($,H){G($,H,H)}function T($,H){const k=n();let m;for(m=0;m<16;m++)k[m]=H[m];for(m=253;m>=0;m--)R(k,k),m!==2&&m!==4&&G(k,k,H);for(m=0;m<16;m++)$[m]=k[m]}function x($,H){const k=n();let m;for(m=0;m<16;m++)k[m]=H[m];for(m=250;m>=0;m--)R(k,k),m!==1&&G(k,k,H);for(m=0;m<16;m++)$[m]=k[m]}function E($,H){const k=n(),m=n(),N=n(),X=n(),Q=n(),ue=n(),te=n(),ne=n(),Qe=n();q(k,$[1],$[0]),q(Qe,H[1],H[0]),G(k,k,Qe),W(m,$[0],$[1]),W(Qe,H[0],H[1]),G(m,m,Qe),G(N,$[3],H[3]),G(N,N,d),G(X,$[2],H[2]),W(X,X,X),q(Q,m,k),q(ue,X,N),W(te,X,N),W(ne,m,k),G($[0],Q,ue),G($[1],ne,te),G($[2],te,ue),G($[3],Q,ne)}function c($,H,k){for(let m=0;m<4;m++)M($[m],H[m],k)}function h($,H){const k=n(),m=n(),N=n();T(N,H[2]),G(k,H[0],N),G(m,H[1],N),B($,m),$[31]^=z(k)<<7}function b($,H,k){O($[0],a),O($[1],o),O($[2],o),O($[3],a);for(let m=255;m>=0;--m){const N=k[m/8|0]>>(m&7)&1;c($,H,N),E(H,$),E($,$),c($,H,N)}}function p($,H){const k=[n(),n(),n(),n()];O(k[0],g),O(k[1],y),O(k[2],o),G(k[3],g,y),b($,k,H)}function u($){if($.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const H=(0,r.hash)($);H[0]&=248,H[31]&=127,H[31]|=64;const k=new Uint8Array(32),m=[n(),n(),n(),n()];p(m,H),h(k,m);const N=new Uint8Array(64);return N.set($),N.set(k,32),{publicKey:k,secretKey:N}}t.generateKeyPairFromSeed=u;function _($){const H=(0,e.randomBytes)(32,$),k=u(H);return(0,i.wipe)(H),k}t.generateKeyPair=_;function w($){if($.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array($.subarray(32))}t.extractPublicKeyFromSecretKey=w;const v=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function l($,H){let k,m,N,X;for(m=63;m>=32;--m){for(k=0,N=m-32,X=m-12;N<X;++N)H[N]+=k-16*H[m]*v[N-(m-32)],k=Math.floor((H[N]+128)/256),H[N]-=k*256;H[N]+=k,H[m]=0}for(k=0,N=0;N<32;N++)H[N]+=k-(H[31]>>4)*v[N],k=H[N]>>8,H[N]&=255;for(N=0;N<32;N++)H[N]-=k*v[N];for(m=0;m<32;m++)H[m+1]+=H[m]>>8,$[m]=H[m]&255}function A($){const H=new Float64Array(64);for(let k=0;k<64;k++)H[k]=$[k];for(let k=0;k<64;k++)$[k]=0;l($,H)}function K($,H){const k=new Float64Array(64),m=[n(),n(),n(),n()],N=(0,r.hash)($.subarray(0,32));N[0]&=248,N[31]&=127,N[31]|=64;const X=new Uint8Array(64);X.set(N.subarray(32),32);const Q=new r.SHA512;Q.update(X.subarray(32)),Q.update(H);const ue=Q.digest();Q.clean(),A(ue),p(m,ue),h(X,m),Q.reset(),Q.update(X.subarray(0,32)),Q.update($.subarray(32)),Q.update(H);const te=Q.digest();A(te);for(let ne=0;ne<32;ne++)k[ne]=ue[ne];for(let ne=0;ne<32;ne++)for(let Qe=0;Qe<32;Qe++)k[ne+Qe]+=te[ne]*N[Qe];return l(X.subarray(32),k),X}t.sign=K;function V($,H){const k=n(),m=n(),N=n(),X=n(),Q=n(),ue=n(),te=n();return O($[2],o),F($[1],H),R(N,$[1]),G(X,N,f),q(N,N,$[2]),W(X,$[2],X),R(Q,X),R(ue,Q),G(te,ue,Q),G(k,te,N),G(k,k,X),x(k,k),G(k,k,N),G(k,k,X),G(k,k,X),G($[0],k,X),R(m,$[0]),G(m,m,X),I(m,N)&&G($[0],$[0],S),R(m,$[0]),G(m,m,X),I(m,N)?-1:(z($[0])===H[31]>>7&&q($[0],a,$[0]),G($[3],$[0],$[1]),0)}function J($,H,k){const m=new Uint8Array(32),N=[n(),n(),n(),n()],X=[n(),n(),n(),n()];if(k.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(V(X,$))return!1;const Q=new r.SHA512;Q.update(k.subarray(0,32)),Q.update($),Q.update(H);const ue=Q.digest();return A(ue),b(N,X,ue),p(X,k.subarray(32)),E(N,X),h(m,N),!C(k,m)}t.verify=J;function Z($){let H=[n(),n(),n(),n()];if(V(H,$))throw new Error("Ed25519: invalid public key");let k=n(),m=n(),N=H[1];W(k,o,N),q(m,o,N),T(m,m),G(k,k,m);let X=new Uint8Array(32);return B(X,k),X}t.convertPublicKeyToX25519=Z;function Y($){const H=(0,r.hash)($.subarray(0,32));H[0]&=248,H[31]&=127,H[31]|=64;const k=new Uint8Array(H.subarray(0,32));return(0,i.wipe)(H),k}t.convertSecretKeyToX25519=Y})(cm);var Um={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=me,r=Fn;t.BLOCK_SIZE=128,t.DIGEST_LENGTH=64,t.KEY_LENGTH=64,t.PERSONALIZATION_LENGTH=16,t.SALT_LENGTH=16,t.MAX_LEAF_SIZE=Math.pow(2,32)-1,t.MAX_FANOUT=255,t.MAX_MAX_DEPTH=255;var i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),n=[[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6],[22,16,24,0,10,4,30,26,20,28,6,12,14,2,18,8],[14,18,6,2,26,24,22,28,4,12,10,20,8,0,30,16],[18,0,10,14,4,8,20,30,28,2,22,24,12,16,6,26],[4,24,12,20,0,22,16,6,8,26,14,10,30,28,2,18],[24,10,2,30,28,26,8,20,0,14,12,6,18,4,16,22],[26,22,14,28,24,2,6,18,10,0,30,8,16,12,4,20],[12,30,28,18,22,6,0,16,24,4,26,14,2,8,20,10],[20,4,16,8,14,12,2,10,30,22,18,28,6,24,26,0],[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6]],s=function(){function o(f,d){if(f===void 0&&(f=64),this.digestLength=f,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(i),this._buffer=new Uint8Array(t.BLOCK_SIZE),this._bufferLength=0,this._ctr=new Uint32Array(4),this._flag=new Uint32Array(4),this._lastNode=!1,this._finished=!1,this._vtmp=new Uint32Array(32),this._mtmp=new Uint32Array(32),f<1||f>t.DIGEST_LENGTH)throw new Error("blake2b: wrong digest length");d&&this.validateConfig(d);var g=0;d&&d.key&&(g=d.key.length);var y=1,S=1;d&&d.tree&&(y=d.tree.fanout,S=d.tree.maxDepth),this._state[0]^=f|g<<8|y<<16|S<<24,d&&d.tree&&(this._state[1]^=d.tree.leafSize,this._state[2]^=d.tree.nodeOffsetLowBits,this._state[3]^=d.tree.nodeOffsetHighBits,this._state[4]^=d.tree.nodeDepth|d.tree.innerDigestLength<<8,this._lastNode=d.tree.lastNode),d&&d.salt&&(this._state[8]^=e.readUint32LE(d.salt,0),this._state[9]^=e.readUint32LE(d.salt,4),this._state[10]^=e.readUint32LE(d.salt,8),this._state[11]^=e.readUint32LE(d.salt,12)),d&&d.personalization&&(this._state[12]^=e.readUint32LE(d.personalization,0),this._state[13]^=e.readUint32LE(d.personalization,4),this._state[14]^=e.readUint32LE(d.personalization,8),this._state[15]^=e.readUint32LE(d.personalization,12)),this._initialState=new Uint32Array(this._state),d&&d.key&&g>0&&(this._paddedKey=new Uint8Array(t.BLOCK_SIZE),this._paddedKey.set(d.key),this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE)}return o.prototype.reset=function(){return this._state.set(this._initialState),this._paddedKey?(this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE):this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._finished=!1,this},o.prototype.validateConfig=function(f){if(f.key&&f.key.length>t.KEY_LENGTH)throw new Error("blake2b: wrong key length");if(f.salt&&f.salt.length!==t.SALT_LENGTH)throw new Error("blake2b: wrong salt length");if(f.personalization&&f.personalization.length!==t.PERSONALIZATION_LENGTH)throw new Error("blake2b: wrong personalization length");if(f.tree){if(f.tree.fanout<0||f.tree.fanout>t.MAX_FANOUT)throw new Error("blake2b: wrong tree fanout");if(f.tree.maxDepth<0||f.tree.maxDepth>t.MAX_MAX_DEPTH)throw new Error("blake2b: wrong tree depth");if(f.tree.leafSize<0||f.tree.leafSize>t.MAX_LEAF_SIZE)throw new Error("blake2b: wrong leaf size");if(f.tree.innerDigestLength<0||f.tree.innerDigestLength>t.DIGEST_LENGTH)throw new Error("blake2b: wrong tree inner digest length")}},o.prototype.update=function(f,d){if(d===void 0&&(d=f.length),this._finished)throw new Error("blake2b: can't update because hash was finished.");var g=t.BLOCK_SIZE-this._bufferLength,y=0;if(d===0)return this;if(d>g){for(var S=0;S<g;S++)this._buffer[this._bufferLength+S]=f[y+S];this._processBlock(t.BLOCK_SIZE),y+=g,d-=g,this._bufferLength=0}for(;d>t.BLOCK_SIZE;){for(var S=0;S<t.BLOCK_SIZE;S++)this._buffer[S]=f[y+S];this._processBlock(t.BLOCK_SIZE),y+=t.BLOCK_SIZE,d-=t.BLOCK_SIZE,this._bufferLength=0}for(var S=0;S<d;S++)this._buffer[this._bufferLength+S]=f[y+S];return this._bufferLength+=d,this},o.prototype.finish=function(f){if(!this._finished){for(var d=this._bufferLength;d<t.BLOCK_SIZE;d++)this._buffer[d]=0;this._flag[0]=4294967295,this._flag[1]=4294967295,this._lastNode&&(this._flag[2]=4294967295,this._flag[3]=4294967295),this._processBlock(this._bufferLength),this._finished=!0}for(var g=this._buffer.subarray(0,64),d=0;d<16;d++)e.writeUint32LE(this._state[d],g,d*4);return f.set(g.subarray(0,f.length)),this},o.prototype.digest=function(){var f=new Uint8Array(this.digestLength);return this.finish(f),f},o.prototype.clean=function(){r.wipe(this._vtmp),r.wipe(this._mtmp),r.wipe(this._state),r.wipe(this._buffer),r.wipe(this._initialState),this._paddedKey&&r.wipe(this._paddedKey),this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._lastNode=!1,this._finished=!1},o.prototype.saveState=function(){if(this._finished)throw new Error("blake2b: cannot save finished state");return{state:new Uint32Array(this._state),buffer:new Uint8Array(this._buffer),bufferLength:this._bufferLength,ctr:new Uint32Array(this._ctr),flag:new Uint32Array(this._flag),lastNode:this._lastNode,paddedKey:this._paddedKey?new Uint8Array(this._paddedKey):void 0,initialState:new Uint32Array(this._initialState)}},o.prototype.restoreState=function(f){return this._state.set(f.state),this._buffer.set(f.buffer),this._bufferLength=f.bufferLength,this._ctr.set(f.ctr),this._flag.set(f.flag),this._lastNode=f.lastNode,this._paddedKey&&r.wipe(this._paddedKey),this._paddedKey=f.paddedKey?new Uint8Array(f.paddedKey):void 0,this._initialState.set(f.initialState),this},o.prototype.cleanSavedState=function(f){r.wipe(f.state),r.wipe(f.buffer),r.wipe(f.initialState),f.paddedKey&&r.wipe(f.paddedKey),f.bufferLength=0,r.wipe(f.ctr),r.wipe(f.flag),f.lastNode=!1},o.prototype._G=function(f,d,g,y,S,O,P,M,B,C,I,z,F){var W=f[d],q=f[O],G=f[g],R=f[P],T=f[y],x=f[M],E=f[S],c=f[B],h=W&65535,b=W>>>16,p=q&65535,u=q>>>16;h+=G&65535,b+=G>>>16,p+=R&65535,u+=R>>>16,b+=h>>>16,p+=b>>>16,u+=p>>>16,q=p&65535|u<<16,W=h&65535|b<<16,h=W&65535,b=W>>>16,p=q&65535,u=q>>>16,h+=C&65535,b+=C>>>16,p+=I&65535,u+=I>>>16,b+=h>>>16,p+=b>>>16,u+=p>>>16,q=p&65535|u<<16,W=h&65535|b<<16,E^=W,c^=q,h=c,c=E,E=h,h=T&65535,b=T>>>16,p=x&65535,u=x>>>16,h+=E&65535,b+=E>>>16,p+=c&65535,u+=c>>>16,b+=h>>>16,p+=b>>>16,u+=p>>>16,x=p&65535|u<<16,T=h&65535|b<<16,G^=T,R^=x,h=G<<8|R>>>24,G=R<<8|G>>>24,R=h,h=W&65535,b=W>>>16,p=q&65535,u=q>>>16,h+=G&65535,b+=G>>>16,p+=R&65535,u+=R>>>16,b+=h>>>16,p+=b>>>16,u+=p>>>16,q=p&65535|u<<16,W=h&65535|b<<16,h=W&65535,b=W>>>16,p=q&65535,u=q>>>16,h+=z&65535,b+=z>>>16,p+=F&65535,u+=F>>>16,b+=h>>>16,p+=b>>>16,u+=p>>>16,q=p&65535|u<<16,W=h&65535|b<<16,E^=W,c^=q,h=E<<16|c>>>16,E=c<<16|E>>>16,c=h,h=T&65535,b=T>>>16,p=x&65535,u=x>>>16,h+=E&65535,b+=E>>>16,p+=c&65535,u+=c>>>16,b+=h>>>16,p+=b>>>16,u+=p>>>16,x=p&65535|u<<16,T=h&65535|b<<16,G^=T,R^=x,h=R<<1|G>>>31,G=G<<1|R>>>31,R=h,f[d]=W,f[O]=q,f[g]=G,f[P]=R,f[y]=T,f[M]=x,f[S]=E,f[B]=c},o.prototype._incrementCounter=function(f){for(var d=0;d<3;d++){var g=this._ctr[d]+f;if(this._ctr[d]=g>>>0,this._ctr[d]===g)return;f=1}},o.prototype._processBlock=function(f){this._incrementCounter(f);var d=this._vtmp;d.set(this._state),d.set(i,16),d[12*2+0]^=this._ctr[0],d[12*2+1]^=this._ctr[1],d[13*2+0]^=this._ctr[2],d[13*2+1]^=this._ctr[3],d[14*2+0]^=this._flag[0],d[14*2+1]^=this._flag[1],d[15*2+0]^=this._flag[2],d[15*2+1]^=this._flag[3];for(var g=this._mtmp,y=0;y<32;y++)g[y]=e.readUint32LE(this._buffer,y*4);for(var S=0;S<12;S++)this._G(d,0,8,16,24,1,9,17,25,g[n[S][0]],g[n[S][0]+1],g[n[S][1]],g[n[S][1]+1]),this._G(d,2,10,18,26,3,11,19,27,g[n[S][2]],g[n[S][2]+1],g[n[S][3]],g[n[S][3]+1]),this._G(d,4,12,20,28,5,13,21,29,g[n[S][4]],g[n[S][4]+1],g[n[S][5]],g[n[S][5]+1]),this._G(d,6,14,22,30,7,15,23,31,g[n[S][6]],g[n[S][6]+1],g[n[S][7]],g[n[S][7]+1]),this._G(d,0,10,20,30,1,11,21,31,g[n[S][8]],g[n[S][8]+1],g[n[S][9]],g[n[S][9]+1]),this._G(d,2,12,22,24,3,13,23,25,g[n[S][10]],g[n[S][10]+1],g[n[S][11]],g[n[S][11]+1]),this._G(d,4,14,16,26,5,15,17,27,g[n[S][12]],g[n[S][12]+1],g[n[S][13]],g[n[S][13]+1]),this._G(d,6,8,18,28,7,9,19,29,g[n[S][14]],g[n[S][14]+1],g[n[S][15]],g[n[S][15]+1]);for(var y=0;y<16;y++)this._state[y]^=d[y]^d[y+16]},o}();t.BLAKE2b=s;function a(o,f,d){f===void 0&&(f=t.DIGEST_LENGTH);var g=new s(f,d);g.update(o);var y=g.digest();return g.clean(),y}t.hash=a})(Um);const Hm="Input must be an string, Buffer or Uint8Array";function Fm(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(Hm);return e}function Km(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Ra(t){return(4294967296+t).toString(16).substring(1)}function jm(t,e,r){let i=`
`+t+" = ";for(let n=0;n<e.length;n+=2){if(r===32)i+=Ra(e[n]).toUpperCase(),i+=" ",i+=Ra(e[n+1]).toUpperCase();else if(r===64)i+=Ra(e[n+1]).toUpperCase(),i+=Ra(e[n]).toUpperCase();else throw new Error("Invalid size "+r);n%6===4?i+=`
`+new Array(t.length+4).join(" "):n<e.length-2&&(i+=" ")}console.log(i)}function Gm(t,e,r){let i=new Date().getTime();const n=new Uint8Array(e);for(let a=0;a<e;a++)n[a]=a%256;const s=new Date().getTime();console.log("Generated random input in "+(s-i)+"ms"),i=s;for(let a=0;a<r;a++){const o=t(n),f=new Date().getTime(),d=f-i;i=f,console.log("Hashed in "+d+"ms: "+o.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(d/1e3)*100)/100+" MB PER SECOND")}}var m0={normalizeInput:Fm,toHex:Km,debugPrint:jm,testSpeed:Gm};const ja=m0;function Oa(t,e,r){const i=t[e]+t[r];let n=t[e+1]+t[r+1];i>=4294967296&&n++,t[e]=i,t[e+1]=n}function ud(t,e,r,i){let n=t[e]+r;r<0&&(n+=4294967296);let s=t[e+1]+i;n>=4294967296&&s++,t[e]=n,t[e+1]=s}function v0(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Zi(t,e,r,i,n,s){const a=zs[n],o=zs[n+1],f=zs[s],d=zs[s+1];Oa(le,t,e),ud(le,t,a,o);let g=le[i]^le[t],y=le[i+1]^le[t+1];le[i]=y,le[i+1]=g,Oa(le,r,i),g=le[e]^le[r],y=le[e+1]^le[r+1],le[e]=g>>>24^y<<8,le[e+1]=y>>>24^g<<8,Oa(le,t,e),ud(le,t,f,d),g=le[i]^le[t],y=le[i+1]^le[t+1],le[i]=g>>>16^y<<16,le[i+1]=y>>>16^g<<16,Oa(le,r,i),g=le[e]^le[r],y=le[e+1]^le[r+1],le[e]=y>>>31^g<<1,le[e+1]=g>>>31^y<<1}const y0=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Vm=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Vt=new Uint8Array(Vm.map(function(t){return t*2})),le=new Uint32Array(32),zs=new Uint32Array(32);function _0(t,e){let r=0;for(r=0;r<16;r++)le[r]=t.h[r],le[r+16]=y0[r];for(le[24]=le[24]^t.t,le[25]=le[25]^t.t/4294967296,e&&(le[28]=~le[28],le[29]=~le[29]),r=0;r<32;r++)zs[r]=v0(t.b,4*r);for(r=0;r<12;r++)Zi(0,8,16,24,Vt[r*16+0],Vt[r*16+1]),Zi(2,10,18,26,Vt[r*16+2],Vt[r*16+3]),Zi(4,12,20,28,Vt[r*16+4],Vt[r*16+5]),Zi(6,14,22,30,Vt[r*16+6],Vt[r*16+7]),Zi(0,10,20,30,Vt[r*16+8],Vt[r*16+9]),Zi(2,12,22,24,Vt[r*16+10],Vt[r*16+11]),Zi(4,14,16,26,Vt[r*16+12],Vt[r*16+13]),Zi(6,8,18,28,Vt[r*16+14],Vt[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^le[r]^le[r+16]}const Xi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function w0(t,e,r,i){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&r.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(i&&i.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const n={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Xi.fill(0),Xi[0]=t,e&&(Xi[1]=e.length),Xi[2]=1,Xi[3]=1,r&&Xi.set(r,32),i&&Xi.set(i,48);for(let s=0;s<16;s++)n.h[s]=y0[s]^v0(Xi,s*4);return e&&(Iu(n,e),n.c=128),n}function Iu(t,e){for(let r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,_0(t,!1),t.c=0),t.b[t.c++]=e[r]}function E0(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;_0(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function x0(t,e,r,i,n){r=r||64,t=ja.normalizeInput(t),i&&(i=ja.normalizeInput(i)),n&&(n=ja.normalizeInput(n));const s=w0(r,e,i,n);return Iu(s,t),E0(s)}function zm(t,e,r,i,n){const s=x0(t,e,r,i,n);return ja.toHex(s)}var qm={blake2b:x0,blake2bHex:zm,blake2bInit:w0,blake2bUpdate:Iu,blake2bFinal:E0};const A0=m0;function Wm(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Yi(t,e,r,i,n,s){je[t]=je[t]+je[e]+n,je[i]=Pa(je[i]^je[t],16),je[r]=je[r]+je[i],je[e]=Pa(je[e]^je[r],12),je[t]=je[t]+je[e]+s,je[i]=Pa(je[i]^je[t],8),je[r]=je[r]+je[i],je[e]=Pa(je[e]^je[r],7)}function Pa(t,e){return t>>>e^t<<32-e}const S0=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zt=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),je=new Uint32Array(16),Kt=new Uint32Array(16);function R0(t,e){let r=0;for(r=0;r<8;r++)je[r]=t.h[r],je[r+8]=S0[r];for(je[12]^=t.t,je[13]^=t.t/4294967296,e&&(je[14]=~je[14]),r=0;r<16;r++)Kt[r]=Wm(t.b,4*r);for(r=0;r<10;r++)Yi(0,4,8,12,Kt[zt[r*16+0]],Kt[zt[r*16+1]]),Yi(1,5,9,13,Kt[zt[r*16+2]],Kt[zt[r*16+3]]),Yi(2,6,10,14,Kt[zt[r*16+4]],Kt[zt[r*16+5]]),Yi(3,7,11,15,Kt[zt[r*16+6]],Kt[zt[r*16+7]]),Yi(0,5,10,15,Kt[zt[r*16+8]],Kt[zt[r*16+9]]),Yi(1,6,11,12,Kt[zt[r*16+10]],Kt[zt[r*16+11]]),Yi(2,7,8,13,Kt[zt[r*16+12]],Kt[zt[r*16+13]]),Yi(3,4,9,14,Kt[zt[r*16+14]],Kt[zt[r*16+15]]);for(r=0;r<8;r++)t.h[r]^=je[r]^je[r+8]}function O0(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const r=e?e.length:0;if(e&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");const i={h:new Uint32Array(S0),b:new Uint8Array(64),c:0,t:0,outlen:t};return i.h[0]^=16842752^r<<8^t,r>0&&(Tu(i,e),i.c=64),i}function Tu(t,e){for(let r=0;r<e.length;r++)t.c===64&&(t.t+=t.c,R0(t,!1),t.c=0),t.b[t.c++]=e[r]}function P0(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;R0(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3)&255;return e}function I0(t,e,r){r=r||32,t=A0.normalizeInput(t);const i=O0(r,e);return Tu(i,t),P0(i)}function Jm(t,e,r){const i=I0(t,e,r);return A0.toHex(i)}var Zm={blake2s:I0,blake2sHex:Jm,blake2sInit:O0,blake2sUpdate:Tu,blake2sFinal:P0};const Cs=qm,Bs=Zm;var Xm={blake2b:Cs.blake2b,blake2bHex:Cs.blake2bHex,blake2bInit:Cs.blake2bInit,blake2bUpdate:Cs.blake2bUpdate,blake2bFinal:Cs.blake2bFinal,blake2s:Bs.blake2s,blake2sHex:Bs.blake2sHex,blake2sInit:Bs.blake2sInit,blake2sUpdate:Bs.blake2sUpdate,blake2sFinal:Bs.blake2sFinal};const Ym=ca(Xm);var Wf={exports:{}};typeof Object.create=="function"?Wf.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Wf.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}};var At=Wf.exports,Jf={exports:{}};const Es=Fl(qb);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Es,i=r.Buffer;function n(a,o){for(var f in a)o[f]=a[f]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(n(r,e),e.Buffer=s);function s(a,o,f){return i(a,o,f)}s.prototype=Object.create(i.prototype),n(i,s),s.from=function(a,o,f){if(typeof a=="number")throw new TypeError("Argument must not be a number");return i(a,o,f)},s.alloc=function(a,o,f){if(typeof a!="number")throw new TypeError("Argument must be a number");var d=i(a);return o!==void 0?typeof f=="string"?d.fill(o,f):d.fill(o):d.fill(0),d},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(Jf,Jf.exports);var Ar=Jf.exports,Zf={exports:{}},xs={},Mu={exports:{}},is=typeof Reflect=="object"?Reflect:null,hd=is&&typeof is.apply=="function"?is.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},Ga;is&&typeof is.ownKeys=="function"?Ga=is.ownKeys:Object.getOwnPropertySymbols?Ga=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ga=function(e){return Object.getOwnPropertyNames(e)};function Qm(t){console&&console.warn&&console.warn(t)}var T0=Number.isNaN||function(e){return e!==e};function Ye(){Ye.init.call(this)}Mu.exports=Ye;Mu.exports.once=iv;Ye.EventEmitter=Ye;Ye.prototype._events=void 0;Ye.prototype._eventsCount=0;Ye.prototype._maxListeners=void 0;var dd=10;function Co(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Ye,"defaultMaxListeners",{enumerable:!0,get:function(){return dd},set:function(t){if(typeof t!="number"||t<0||T0(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");dd=t}});Ye.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ye.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||T0(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function M0(t){return t._maxListeners===void 0?Ye.defaultMaxListeners:t._maxListeners}Ye.prototype.getMaxListeners=function(){return M0(this)};Ye.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var f=s[e];if(f===void 0)return!1;if(typeof f=="function")hd(f,this,r);else for(var d=f.length,g=D0(f,d),i=0;i<d;++i)hd(g[i],this,r);return!0};function L0(t,e,r,i){var n,s,a;if(Co(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),a===void 0)a=s[e]=r,++t._eventsCount;else if(typeof a=="function"?a=s[e]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),n=M0(t),n>0&&a.length>n&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,Qm(o)}return t}Ye.prototype.addListener=function(e,r){return L0(this,e,r,!1)};Ye.prototype.on=Ye.prototype.addListener;Ye.prototype.prependListener=function(e,r){return L0(this,e,r,!0)};function ev(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N0(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=ev.bind(i);return n.listener=r,i.wrapFn=n,n}Ye.prototype.once=function(e,r){return Co(r),this.on(e,N0(this,e,r)),this};Ye.prototype.prependOnceListener=function(e,r){return Co(r),this.prependListener(e,N0(this,e,r)),this};Ye.prototype.removeListener=function(e,r){var i,n,s,a,o;if(Co(r),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(s=-1,a=i.length-1;a>=0;a--)if(i[a]===r||i[a].listener===r){o=i[a].listener,s=a;break}if(s<0)return this;s===0?i.shift():tv(i,s),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,o||r)}return this};Ye.prototype.off=Ye.prototype.removeListener;Ye.prototype.removeAllListeners=function(e){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),a;for(n=0;n<s.length;++n)a=s[n],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(e,r[n]);return this};function C0(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?rv(n):D0(n,n.length)}Ye.prototype.listeners=function(e){return C0(this,e,!0)};Ye.prototype.rawListeners=function(e){return C0(this,e,!1)};Ye.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):B0.call(t,e)};Ye.prototype.listenerCount=B0;function B0(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Ye.prototype.eventNames=function(){return this._eventsCount>0?Ga(this._events):[]};function D0(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function tv(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function rv(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function iv(t,e){return new Promise(function(r,i){function n(a){t.removeListener(e,s),i(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}k0(t,e,s,{once:!0}),e!=="error"&&nv(t,n,{once:!0})})}function nv(t,e,r){typeof t.on=="function"&&k0(t,"error",e,r)}function k0(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){i.once&&t.removeEventListener(e,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Lu=Mu.exports;const Lx=ca(Lu);var $0=Lu.EventEmitter,nf,ld;function sv(){if(ld)return nf;ld=1;function t(S,O){var P=Object.keys(S);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(S);O&&(M=M.filter(function(B){return Object.getOwnPropertyDescriptor(S,B).enumerable})),P.push.apply(P,M)}return P}function e(S){for(var O=1;O<arguments.length;O++){var P=arguments[O]!=null?arguments[O]:{};O%2?t(Object(P),!0).forEach(function(M){r(S,M,P[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(P)):t(Object(P)).forEach(function(M){Object.defineProperty(S,M,Object.getOwnPropertyDescriptor(P,M))})}return S}function r(S,O,P){return O in S?Object.defineProperty(S,O,{value:P,enumerable:!0,configurable:!0,writable:!0}):S[O]=P,S}function i(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")}function n(S,O){for(var P=0;P<O.length;P++){var M=O[P];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(S,M.key,M)}}function s(S,O,P){return O&&n(S.prototype,O),P&&n(S,P),S}var a=Es,o=a.Buffer,f=No,d=f.inspect,g=d&&d.custom||"inspect";function y(S,O,P){o.prototype.copy.call(S,O,P)}return nf=function(){function S(){i(this,S),this.head=null,this.tail=null,this.length=0}return s(S,[{key:"push",value:function(P){var M={data:P,next:null};this.length>0?this.tail.next=M:this.head=M,this.tail=M,++this.length}},{key:"unshift",value:function(P){var M={data:P,next:this.head};this.length===0&&(this.tail=M),this.head=M,++this.length}},{key:"shift",value:function(){if(this.length!==0){var P=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,P}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(P){if(this.length===0)return"";for(var M=this.head,B=""+M.data;M=M.next;)B+=P+M.data;return B}},{key:"concat",value:function(P){if(this.length===0)return o.alloc(0);for(var M=o.allocUnsafe(P>>>0),B=this.head,C=0;B;)y(B.data,M,C),C+=B.data.length,B=B.next;return M}},{key:"consume",value:function(P,M){var B;return P<this.head.data.length?(B=this.head.data.slice(0,P),this.head.data=this.head.data.slice(P)):P===this.head.data.length?B=this.shift():B=M?this._getString(P):this._getBuffer(P),B}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(P){var M=this.head,B=1,C=M.data;for(P-=C.length;M=M.next;){var I=M.data,z=P>I.length?I.length:P;if(z===I.length?C+=I:C+=I.slice(0,P),P-=z,P===0){z===I.length?(++B,M.next?this.head=M.next:this.head=this.tail=null):(this.head=M,M.data=I.slice(z));break}++B}return this.length-=B,C}},{key:"_getBuffer",value:function(P){var M=o.allocUnsafe(P),B=this.head,C=1;for(B.data.copy(M),P-=B.data.length;B=B.next;){var I=B.data,z=P>I.length?I.length:P;if(I.copy(M,M.length-P,0,z),P-=z,P===0){z===I.length?(++C,B.next?this.head=B.next:this.head=this.tail=null):(this.head=B,B.data=I.slice(z));break}++C}return this.length-=C,M}},{key:g,value:function(P,M){return d(this,e({},M,{depth:0,customInspect:!1}))}}]),S}(),nf}function av(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Xf,this,t)):process.nextTick(Xf,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(Va,r):(r._writableState.errorEmitted=!0,process.nextTick(pd,r,s)):process.nextTick(pd,r,s):e?(process.nextTick(Va,r),e(s)):process.nextTick(Va,r)}),this)}function pd(t,e){Xf(t,e),Va(t)}function Va(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function ov(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Xf(t,e){t.emit("error",e)}function cv(t,e){var r=t._readableState,i=t._writableState;r&&r.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}var U0={destroy:av,undestroy:ov,errorOrDestroy:cv},Kn={};function fv(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var H0={};function Mr(t,e,r){r||(r=Error);function i(s,a,o){return typeof e=="string"?e:e(s,a,o)}var n=function(s){fv(a,s);function a(o,f,d){return s.call(this,i(o,f,d))||this}return a}(r);n.prototype.name=r.name,n.prototype.code=t,H0[t]=n}function bd(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(i){return String(i)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function uv(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function hv(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function dv(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Mr("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Mr("ERR_INVALID_ARG_TYPE",function(t,e,r){var i;typeof e=="string"&&uv(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be";var n;if(hv(t," argument"))n="The ".concat(t," ").concat(i," ").concat(bd(e,"type"));else{var s=dv(t,".")?"property":"argument";n='The "'.concat(t,'" ').concat(s," ").concat(i," ").concat(bd(e,"type"))}return n+=". Received type ".concat(typeof r),n},TypeError);Mr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Mr("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Mr("ERR_STREAM_PREMATURE_CLOSE","Premature close");Mr("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Mr("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Mr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Mr("ERR_STREAM_WRITE_AFTER_END","write after end");Mr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Mr("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Mr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Kn.codes=H0;var lv=Kn.codes.ERR_INVALID_OPT_VALUE;function pv(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function bv(t,e,r,i){var n=pv(e,i,r);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var s=i?r:"highWaterMark";throw new lv(s,n)}return Math.floor(n)}return t.objectMode?16:16*1024}var F0={getHighWaterMark:bv},Bo={},Nu=Ar.Buffer,gd=Nu.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function gv(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function mv(t){var e=gv(t);if(typeof e!="string"&&(Nu.isEncoding===gd||!gd(t)))throw new Error("Unknown encoding: "+t);return e||t}Bo.StringDecoder=ua;function ua(t){this.encoding=mv(t);var e;switch(this.encoding){case"utf16le":this.text=xv,this.end=Av,e=4;break;case"utf8":this.fillLast=_v,e=4;break;case"base64":this.text=Sv,this.end=Rv,e=3;break;default:this.write=Ov,this.end=Pv;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Nu.allocUnsafe(e)}ua.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};ua.prototype.end=Ev;ua.prototype.text=wv;ua.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function sf(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function vv(t,e,r){var i=e.length-1;if(i<r)return 0;var n=sf(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<r||n===-2?0:(n=sf(e[i]),n>=0?(n>0&&(t.lastNeed=n-2),n):--i<r||n===-2?0:(n=sf(e[i]),n>=0?(n>0&&(n===2?n=0:t.lastNeed=n-3),n):0))}function yv(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"ï¿½";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"ï¿½";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"ï¿½"}}function _v(t){var e=this.lastTotal-this.lastNeed,r=yv(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function wv(t,e){var r=vv(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var i=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function Ev(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"ï¿½":e}function xv(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Av(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Sv(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Rv(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Ov(t){return t.toString(this.encoding)}function Pv(t){return t&&t.length?this.write(t):""}var md=Kn.codes.ERR_STREAM_PREMATURE_CLOSE;function Iv(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];t.apply(this,i)}}}function Tv(){}function Mv(t){return t.setHeader&&typeof t.abort=="function"}function K0(t,e,r){if(typeof e=="function")return K0(t,null,e);e||(e={}),r=Iv(r||Tv);var i=e.readable||e.readable!==!1&&t.readable,n=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||o()},a=t._writableState&&t._writableState.finished,o=function(){n=!1,a=!0,i||r.call(t)},f=t._readableState&&t._readableState.endEmitted,d=function(){i=!1,f=!0,n||r.call(t)},g=function(P){r.call(t,P)},y=function(){var P;if(i&&!f)return(!t._readableState||!t._readableState.ended)&&(P=new md),r.call(t,P);if(n&&!a)return(!t._writableState||!t._writableState.ended)&&(P=new md),r.call(t,P)},S=function(){t.req.on("finish",o)};return Mv(t)?(t.on("complete",o),t.on("abort",y),t.req?S():t.on("request",S)):n&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",d),t.on("finish",o),e.error!==!1&&t.on("error",g),t.on("close",y),function(){t.removeListener("complete",o),t.removeListener("abort",y),t.removeListener("request",S),t.req&&t.req.removeListener("finish",o),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",o),t.removeListener("end",d),t.removeListener("error",g),t.removeListener("close",y)}}var Cu=K0,af,vd;function Lv(){if(vd)return af;vd=1;var t;function e(C,I,z){return I in C?Object.defineProperty(C,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):C[I]=z,C}var r=Cu,i=Symbol("lastResolve"),n=Symbol("lastReject"),s=Symbol("error"),a=Symbol("ended"),o=Symbol("lastPromise"),f=Symbol("handlePromise"),d=Symbol("stream");function g(C,I){return{value:C,done:I}}function y(C){var I=C[i];if(I!==null){var z=C[d].read();z!==null&&(C[o]=null,C[i]=null,C[n]=null,I(g(z,!1)))}}function S(C){process.nextTick(y,C)}function O(C,I){return function(z,F){C.then(function(){if(I[a]){z(g(void 0,!0));return}I[f](z,F)},F)}}var P=Object.getPrototypeOf(function(){}),M=Object.setPrototypeOf((t={get stream(){return this[d]},next:function(){var I=this,z=this[s];if(z!==null)return Promise.reject(z);if(this[a])return Promise.resolve(g(void 0,!0));if(this[d].destroyed)return new Promise(function(G,R){process.nextTick(function(){I[s]?R(I[s]):G(g(void 0,!0))})});var F=this[o],W;if(F)W=new Promise(O(F,this));else{var q=this[d].read();if(q!==null)return Promise.resolve(g(q,!1));W=new Promise(this[f])}return this[o]=W,W}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var I=this;return new Promise(function(z,F){I[d].destroy(null,function(W){if(W){F(W);return}z(g(void 0,!0))})})}),t),P),B=function(I){var z,F=Object.create(M,(z={},e(z,d,{value:I,writable:!0}),e(z,i,{value:null,writable:!0}),e(z,n,{value:null,writable:!0}),e(z,s,{value:null,writable:!0}),e(z,a,{value:I._readableState.endEmitted,writable:!0}),e(z,f,{value:function(q,G){var R=F[d].read();R?(F[o]=null,F[i]=null,F[n]=null,q(g(R,!1))):(F[i]=q,F[n]=G)},writable:!0}),z));return F[o]=null,r(I,function(W){if(W&&W.code!=="ERR_STREAM_PREMATURE_CLOSE"){var q=F[n];q!==null&&(F[o]=null,F[i]=null,F[n]=null,q(W)),F[s]=W;return}var G=F[i];G!==null&&(F[o]=null,F[i]=null,F[n]=null,G(g(void 0,!0))),F[a]=!0}),I.on("readable",S.bind(null,F)),F};return af=B,af}var of,yd;function Nv(){return yd||(yd=1,of=function(){throw new Error("Readable.from is not available in the browser")}),of}const Bu=xs;Bu.Readable=Fe;Fe.ReadableState=G0;Lu.EventEmitter;var j0=function(e,r){return e.listeners(r).length},ha=$0,Do=Es.Buffer,Cv=Ys.Uint8Array||function(){};function Bv(t){return Do.from(t)}function Dv(t){return Do.isBuffer(t)||t instanceof Cv}var cf=No,_e;cf&&cf.debuglog?_e=cf.debuglog("stream"):_e=function(){};var kv=sv(),Du=U0,$v=F0,Uv=$v.getHighWaterMark,ko=Kn.codes,Hv=ko.ERR_INVALID_ARG_TYPE,Fv=ko.ERR_STREAM_PUSH_AFTER_EOF,Kv=ko.ERR_METHOD_NOT_IMPLEMENTED,jv=ko.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ns,ff,uf;At(Fe,ha);var Js=Du.errorOrDestroy,hf=["error","close","destroy","pause","resume"];function Gv(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function G0(t,e,r){t=t||{},typeof r!="boolean"&&(r=e instanceof Bu.Duplex),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Uv(this,t,"readableHighWaterMark",r),this.buffer=new kv,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(ns||(ns=Bo.StringDecoder),this.decoder=new ns(t.encoding),this.encoding=t.encoding)}function Fe(t){if(!(this instanceof Fe))return new Fe(t);var e=this instanceof Bu.Duplex;this._readableState=new G0(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),ha.call(this)}Object.defineProperty(Fe.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Fe.prototype.destroy=Du.destroy;Fe.prototype._undestroy=Du.undestroy;Fe.prototype._destroy=function(t,e){e(t)};Fe.prototype.push=function(t,e){var r=this._readableState,i;return r.objectMode?i=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Do.from(t,e),e=""),i=!0),V0(this,t,e,!1,i)};Fe.prototype.unshift=function(t){return V0(this,t,null,!0,!1)};function V0(t,e,r,i,n){_e("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,qv(t,s);else{var a;if(n||(a=Vv(s,e)),a)Js(t,a);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Do.prototype&&(e=Bv(e)),i)s.endEmitted?Js(t,new jv):df(t,s,e,!0);else if(s.ended)Js(t,new Fv);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?df(t,s,e,!1):Yf(t,s)):df(t,s,e,!1)}else i||(s.reading=!1,Yf(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function df(t,e,r,i){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&$o(t)),Yf(t,e)}function Vv(t,e){var r;return!Dv(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Hv("chunk",["string","Buffer","Uint8Array"],e)),r}Fe.prototype.isPaused=function(){return this._readableState.flowing===!1};Fe.prototype.setEncoding=function(t){ns||(ns=Bo.StringDecoder);var e=new ns(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";r!==null;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),i!==""&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var _d=1073741824;function zv(t){return t>=_d?t=_d:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function wd(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=zv(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Fe.prototype.read=function(t){_e("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return _e("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?lf(this):$o(this),null;if(t=wd(t,e),t===0&&e.ended)return e.length===0&&lf(this),null;var i=e.needReadable;_e("need readable",i),(e.length===0||e.length-t<e.highWaterMark)&&(i=!0,_e("length less than watermark",i)),e.ended||e.reading?(i=!1,_e("reading or ended",i)):i&&(_e("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=wd(r,e)));var n;return t>0?n=W0(t,e):n=null,n===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&lf(this)),n!==null&&this.emit("data",n),n};function qv(t,e){if(_e("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?$o(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,z0(t)))}}function $o(t){var e=t._readableState;_e("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(_e("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(z0,t))}function z0(t){var e=t._readableState;_e("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,ku(t)}function Yf(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(Wv,t,e))}function Wv(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(_e("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Fe.prototype._read=function(t){Js(this,new Kv("_read()"))};Fe.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t);break}i.pipesCount+=1,_e("pipe count=%d opts=%j",i.pipesCount,e);var n=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=n?o:M;i.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",a);function a(B,C){_e("onunpipe"),B===r&&C&&C.hasUnpiped===!1&&(C.hasUnpiped=!0,g())}function o(){_e("onend"),t.end()}var f=Jv(r);t.on("drain",f);var d=!1;function g(){_e("cleanup"),t.removeListener("close",O),t.removeListener("finish",P),t.removeListener("drain",f),t.removeListener("error",S),t.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",M),r.removeListener("data",y),d=!0,i.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&f()}r.on("data",y);function y(B){_e("ondata");var C=t.write(B);_e("dest.write",C),C===!1&&((i.pipesCount===1&&i.pipes===t||i.pipesCount>1&&J0(i.pipes,t)!==-1)&&!d&&(_e("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function S(B){_e("onerror",B),M(),t.removeListener("error",S),j0(t,"error")===0&&Js(t,B)}Gv(t,"error",S);function O(){t.removeListener("finish",P),M()}t.once("close",O);function P(){_e("onfinish"),t.removeListener("close",O),M()}t.once("finish",P);function M(){_e("unpipe"),r.unpipe(t)}return t.emit("pipe",r),i.flowing||(_e("pipe resume"),r.resume()),t};function Jv(t){return function(){var r=t._readableState;_e("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&j0(t,"data")&&(r.flowing=!0,ku(t))}}Fe.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var a=J0(e.pipes,t);return a===-1?this:(e.pipes.splice(a,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Fe.prototype.on=function(t,e){var r=ha.prototype.on.call(this,t,e),i=this._readableState;return t==="data"?(i.readableListening=this.listenerCount("readable")>0,i.flowing!==!1&&this.resume()):t==="readable"&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,_e("on readable",i.length,i.reading),i.length?$o(this):i.reading||process.nextTick(Zv,this)),r};Fe.prototype.addListener=Fe.prototype.on;Fe.prototype.removeListener=function(t,e){var r=ha.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(q0,this),r};Fe.prototype.removeAllListeners=function(t){var e=ha.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(q0,this),e};function q0(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Zv(t){_e("readable nexttick read 0"),t.read(0)}Fe.prototype.resume=function(){var t=this._readableState;return t.flowing||(_e("resume"),t.flowing=!t.readableListening,Xv(this,t)),t.paused=!1,this};function Xv(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(Yv,t,e))}function Yv(t,e){_e("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),ku(t),e.flowing&&!e.reading&&t.read(0)}Fe.prototype.pause=function(){return _e("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_e("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ku(t){var e=t._readableState;for(_e("flow",e.flowing);e.flowing&&t.read()!==null;);}Fe.prototype.wrap=function(t){var e=this,r=this._readableState,i=!1;t.on("end",function(){if(_e("wrapped end"),r.decoder&&!r.ended){var a=r.decoder.end();a&&a.length&&e.push(a)}e.push(null)}),t.on("data",function(a){if(_e("wrapped data"),r.decoder&&(a=r.decoder.write(a)),!(r.objectMode&&a==null)&&!(!r.objectMode&&(!a||!a.length))){var o=e.push(a);o||(i=!0,t.pause())}});for(var n in t)this[n]===void 0&&typeof t[n]=="function"&&(this[n]=function(o){return function(){return t[o].apply(t,arguments)}}(n));for(var s=0;s<hf.length;s++)t.on(hf[s],this.emit.bind(this,hf[s]));return this._read=function(a){_e("wrapped _read",a),i&&(i=!1,t.resume())},this};typeof Symbol=="function"&&(Fe.prototype[Symbol.asyncIterator]=function(){return ff===void 0&&(ff=Lv()),ff(this)});Object.defineProperty(Fe.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Fe.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Fe.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Fe._fromList=W0;Object.defineProperty(Fe.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function W0(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function lf(t){var e=t._readableState;_e("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(Qv,e,t))}function Qv(t,e){if(_e("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Fe.from=function(t,e){return uf===void 0&&(uf=Nv()),uf(Fe,t,e)});function J0(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}var e2=t2;function t2(t,e){if(pf("noDeprecation"))return t;var r=!1;function i(){if(!r){if(pf("throwDeprecation"))throw new Error(e);pf("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return i}function pf(t){try{if(!Ys.localStorage)return!1}catch{return!1}var e=Ys.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}const $u=xs;$u.Writable=bt;function Z0(t){var e=this;this.next=null,this.entry=null,this.finish=function(){P2(e,t)}}bt.WritableState=da;var r2={deprecate:e2},X0=$0,Uo=Es.Buffer,i2=Ys.Uint8Array||function(){};function n2(t){return Uo.from(t)}function s2(t){return Uo.isBuffer(t)||t instanceof i2}var Uu=U0,a2=F0,o2=a2.getHighWaterMark,_n=Kn.codes,c2=_n.ERR_INVALID_ARG_TYPE,f2=_n.ERR_METHOD_NOT_IMPLEMENTED,u2=_n.ERR_MULTIPLE_CALLBACK,h2=_n.ERR_STREAM_CANNOT_PIPE,d2=_n.ERR_STREAM_DESTROYED,l2=_n.ERR_STREAM_NULL_VALUES,p2=_n.ERR_STREAM_WRITE_AFTER_END,b2=_n.ERR_UNKNOWN_ENCODING,fs=Uu.errorOrDestroy;At(bt,X0);function g2(){}function da(t,e,r){t=t||{},typeof r!="boolean"&&(r=e instanceof $u.Duplex),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=o2(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){x2(e,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Z0(this)}da.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(da.prototype,"buffer",{get:r2.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var za;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(za=Function.prototype[Symbol.hasInstance],Object.defineProperty(bt,Symbol.hasInstance,{value:function(e){return za.call(this,e)?!0:this!==bt?!1:e&&e._writableState instanceof da}})):za=function(e){return e instanceof this};function bt(t){var e=this instanceof $u.Duplex;if(!e&&!za.call(bt,this))return new bt(t);this._writableState=new da(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),X0.call(this)}bt.prototype.pipe=function(){fs(this,new h2)};function m2(t,e){var r=new p2;fs(t,r),process.nextTick(e,r)}function v2(t,e,r,i){var n;return r===null?n=new l2:typeof r!="string"&&!e.objectMode&&(n=new c2("chunk",["string","Buffer"],r)),n?(fs(t,n),process.nextTick(i,n),!1):!0}bt.prototype.write=function(t,e,r){var i=this._writableState,n=!1,s=!i.objectMode&&s2(t);return s&&!Uo.isBuffer(t)&&(t=n2(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),typeof r!="function"&&(r=g2),i.ending?m2(this,r):(s||v2(this,i,t,r))&&(i.pendingcb++,n=_2(this,i,s,t,e,r)),n};bt.prototype.cork=function(){this._writableState.corked++};bt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Y0(this,t))};bt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new b2(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(bt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function y2(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Uo.from(e,r)),e}Object.defineProperty(bt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function _2(t,e,r,i,n,s){if(!r){var a=y2(e,i,n);i!==a&&(r=!0,n="buffer",i=a)}var o=e.objectMode?1:i.length;e.length+=o;var f=e.length<e.highWaterMark;if(f||(e.needDrain=!0),e.writing||e.corked){var d=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},d?d.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Qf(t,e,!1,o,i,n,s);return f}function Qf(t,e,r,i,n,s,a){e.writelen=i,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new d2("write")):r?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function w2(t,e,r,i,n){--e.pendingcb,r?(process.nextTick(n,i),process.nextTick(ta,t,e),t._writableState.errorEmitted=!0,fs(t,i)):(n(i),t._writableState.errorEmitted=!0,fs(t,i),ta(t,e))}function E2(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function x2(t,e){var r=t._writableState,i=r.sync,n=r.writecb;if(typeof n!="function")throw new u2;if(E2(r),e)w2(t,r,i,e,n);else{var s=Q0(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Y0(t,r),i?process.nextTick(Ed,t,r,s,n):Ed(t,r,s,n)}}function Ed(t,e,r,i){r||A2(t,e),e.pendingcb--,i(),ta(t,e)}function A2(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function Y0(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,n=new Array(i),s=e.corkedRequestsFree;s.entry=r;for(var a=0,o=!0;r;)n[a]=r,r.isBuf||(o=!1),r=r.next,a+=1;n.allBuffers=o,Qf(t,e,!0,e.length,n,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new Z0(e),e.bufferedRequestCount=0}else{for(;r;){var f=r.chunk,d=r.encoding,g=r.callback,y=e.objectMode?1:f.length;if(Qf(t,e,!1,y,f,d,g),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}bt.prototype._write=function(t,e,r){r(new f2("_write()"))};bt.prototype._writev=null;bt.prototype.end=function(t,e,r){var i=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||O2(this,i,r),this};Object.defineProperty(bt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Q0(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function S2(t,e){t._final(function(r){e.pendingcb--,r&&fs(t,r),e.prefinished=!0,t.emit("prefinish"),ta(t,e)})}function R2(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(S2,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function ta(t,e){var r=Q0(e);if(r&&(R2(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}function O2(t,e,r){e.ending=!0,ta(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function P2(t,e,r){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree.next=t}Object.defineProperty(bt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});bt.prototype.destroy=Uu.destroy;bt.prototype._undestroy=Uu.undestroy;bt.prototype._destroy=function(t,e){e(t)};var I2=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};const us=xs;us.Duplex=li;At(li,us.Readable);for(var xd=I2(us.Writable.prototype),bf=0;bf<xd.length;bf++){var gf=xd[bf];li.prototype[gf]||(li.prototype[gf]=us.Writable.prototype[gf])}function li(t){if(!(this instanceof li))return new li(t);us.Readable.call(this,t),us.Writable.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",T2)))}Object.defineProperty(li.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(li.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(li.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function T2(){this._writableState.ended||process.nextTick(M2,this)}function M2(t){t.end()}Object.defineProperty(li.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});const la=xs;la.Transform=Vi;var Ho=Kn.codes,L2=Ho.ERR_METHOD_NOT_IMPLEMENTED,N2=Ho.ERR_MULTIPLE_CALLBACK,C2=Ho.ERR_TRANSFORM_ALREADY_TRANSFORMING,B2=Ho.ERR_TRANSFORM_WITH_LENGTH_0;At(Vi,la.Duplex);function D2(t,e){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(i===null)return this.emit("error",new N2);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function Vi(t){if(!(this instanceof Vi))return new Vi(t);la.Duplex.call(this,t),this._transformState={afterTransform:D2.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",k2)}function k2(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){Ad(t,e,r)}):Ad(this,null,null)}Vi.prototype.push=function(t,e){return this._transformState.needTransform=!1,la.Duplex.prototype.push.call(this,t,e)};Vi.prototype._transform=function(t,e,r){r(new L2("_transform()"))};Vi.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};Vi.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Vi.prototype._destroy=function(t,e){la.Duplex.prototype._destroy.call(this,t,function(r){e(r)})};function Ad(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new B2;if(t._transformState.transforming)throw new C2;return t.push(null)}const ep=xs;ep.PassThrough=ra;At(ra,ep.Transform);function ra(t){if(!(this instanceof ra))return new ra(t);Transform.call(this,t)}ra.prototype._transform=function(t,e,r){r(null,t)};var mf;function $2(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var tp=Kn.codes,U2=tp.ERR_MISSING_ARGS,H2=tp.ERR_STREAM_DESTROYED;function Sd(t){if(t)throw t}function F2(t){return t.setHeader&&typeof t.abort=="function"}function K2(t,e,r,i){i=$2(i);var n=!1;t.on("close",function(){n=!0}),mf===void 0&&(mf=Cu),mf(t,{readable:e,writable:r},function(a){if(a)return i(a);n=!0,i()});var s=!1;return function(a){if(!n&&!s){if(s=!0,F2(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();i(a||new H2("pipe"))}}}function Rd(t){t()}function j2(t,e){return t.pipe(e)}function G2(t){return!t.length||typeof t[t.length-1]!="function"?Sd:t.pop()}function V2(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=G2(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new U2("streams");var n,s=e.map(function(a,o){var f=o<e.length-1,d=o>0;return K2(a,f,d,function(g){n||(n=g),g&&s.forEach(Rd),!f&&(s.forEach(Rd),i(n))})});return e.reduce(j2)}var z2=V2;(function(t,e){const r=xs;e=t.exports=r.Readable,e.Stream=r.Readable,e.Readable=r.Readable,e.Writable=r.Writable,e.Duplex=r.Duplex,e.Transform=r.Transform,e.PassThrough=r.PassThrough,e.finished=Cu,e.pipeline=z2})(Zf,Zf.exports);var rp=Zf.exports,no=Ar.Buffer,ip=rp.Transform,q2=At;function W2(t,e){if(!no.isBuffer(t)&&typeof t!="string")throw new TypeError(e+" must be a string or a buffer")}function wn(t){ip.call(this),this._block=no.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}q2(wn,ip);wn.prototype._transform=function(t,e,r){var i=null;try{this.update(t,e)}catch(n){i=n}r(i)};wn.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)};wn.prototype.update=function(t,e){if(W2(t,"Data"),this._finalized)throw new Error("Digest already called");no.isBuffer(t)||(t=no.from(t,e));for(var r=this._block,i=0;this._blockOffset+t.length-i>=this._blockSize;){for(var n=this._blockOffset;n<this._blockSize;)r[n++]=t[i++];this._update(),this._blockOffset=0}for(;i<t.length;)r[this._blockOffset++]=t[i++];for(var s=0,a=t.length*8;a>0;++s)this._length[s]+=a,a=this._length[s]/4294967296|0,a>0&&(this._length[s]-=4294967296*a);return this};wn.prototype._update=function(){throw new Error("_update is not implemented")};wn.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e};wn.prototype._digest=function(){throw new Error("_digest is not implemented")};var np=wn,J2=At,sp=np,Z2=Ar.Buffer,X2=new Array(16);function Fo(){sp.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}J2(Fo,sp);Fo.prototype._update=function(){for(var t=X2,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var r=this._a,i=this._b,n=this._c,s=this._d;r=qt(r,i,n,s,t[0],3614090360,7),s=qt(s,r,i,n,t[1],3905402710,12),n=qt(n,s,r,i,t[2],606105819,17),i=qt(i,n,s,r,t[3],3250441966,22),r=qt(r,i,n,s,t[4],4118548399,7),s=qt(s,r,i,n,t[5],1200080426,12),n=qt(n,s,r,i,t[6],2821735955,17),i=qt(i,n,s,r,t[7],4249261313,22),r=qt(r,i,n,s,t[8],1770035416,7),s=qt(s,r,i,n,t[9],2336552879,12),n=qt(n,s,r,i,t[10],4294925233,17),i=qt(i,n,s,r,t[11],2304563134,22),r=qt(r,i,n,s,t[12],1804603682,7),s=qt(s,r,i,n,t[13],4254626195,12),n=qt(n,s,r,i,t[14],2792965006,17),i=qt(i,n,s,r,t[15],1236535329,22),r=Wt(r,i,n,s,t[1],4129170786,5),s=Wt(s,r,i,n,t[6],3225465664,9),n=Wt(n,s,r,i,t[11],643717713,14),i=Wt(i,n,s,r,t[0],3921069994,20),r=Wt(r,i,n,s,t[5],3593408605,5),s=Wt(s,r,i,n,t[10],38016083,9),n=Wt(n,s,r,i,t[15],3634488961,14),i=Wt(i,n,s,r,t[4],3889429448,20),r=Wt(r,i,n,s,t[9],568446438,5),s=Wt(s,r,i,n,t[14],3275163606,9),n=Wt(n,s,r,i,t[3],4107603335,14),i=Wt(i,n,s,r,t[8],1163531501,20),r=Wt(r,i,n,s,t[13],2850285829,5),s=Wt(s,r,i,n,t[2],4243563512,9),n=Wt(n,s,r,i,t[7],1735328473,14),i=Wt(i,n,s,r,t[12],2368359562,20),r=Jt(r,i,n,s,t[5],4294588738,4),s=Jt(s,r,i,n,t[8],2272392833,11),n=Jt(n,s,r,i,t[11],1839030562,16),i=Jt(i,n,s,r,t[14],4259657740,23),r=Jt(r,i,n,s,t[1],2763975236,4),s=Jt(s,r,i,n,t[4],1272893353,11),n=Jt(n,s,r,i,t[7],4139469664,16),i=Jt(i,n,s,r,t[10],3200236656,23),r=Jt(r,i,n,s,t[13],681279174,4),s=Jt(s,r,i,n,t[0],3936430074,11),n=Jt(n,s,r,i,t[3],3572445317,16),i=Jt(i,n,s,r,t[6],76029189,23),r=Jt(r,i,n,s,t[9],3654602809,4),s=Jt(s,r,i,n,t[12],3873151461,11),n=Jt(n,s,r,i,t[15],530742520,16),i=Jt(i,n,s,r,t[2],3299628645,23),r=Zt(r,i,n,s,t[0],4096336452,6),s=Zt(s,r,i,n,t[7],1126891415,10),n=Zt(n,s,r,i,t[14],2878612391,15),i=Zt(i,n,s,r,t[5],4237533241,21),r=Zt(r,i,n,s,t[12],1700485571,6),s=Zt(s,r,i,n,t[3],2399980690,10),n=Zt(n,s,r,i,t[10],4293915773,15),i=Zt(i,n,s,r,t[1],2240044497,21),r=Zt(r,i,n,s,t[8],1873313359,6),s=Zt(s,r,i,n,t[15],4264355552,10),n=Zt(n,s,r,i,t[6],2734768916,15),i=Zt(i,n,s,r,t[13],1309151649,21),r=Zt(r,i,n,s,t[4],4149444226,6),s=Zt(s,r,i,n,t[11],3174756917,10),n=Zt(n,s,r,i,t[2],718787259,15),i=Zt(i,n,s,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+i|0,this._c=this._c+n|0,this._d=this._d+s|0};Fo.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Z2.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function Ko(t,e){return t<<e|t>>>32-e}function qt(t,e,r,i,n,s,a){return Ko(t+(e&r|~e&i)+n+s|0,a)+e|0}function Wt(t,e,r,i,n,s,a){return Ko(t+(e&i|r&~i)+n+s|0,a)+e|0}function Jt(t,e,r,i,n,s,a){return Ko(t+(e^r^i)+n+s|0,a)+e|0}function Zt(t,e,r,i,n,s,a){return Ko(t+(r^(e|~i))+n+s|0,a)+e|0}var Y2=Fo,vf=Es.Buffer,Q2=At,ap=np,ey=new Array(16),Ds=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ks=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],$s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Us=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Hs=[0,1518500249,1859775393,2400959708,2840853838],Fs=[1352829926,1548603684,1836072691,2053994217,0];function jo(){ap.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}Q2(jo,ap);jo.prototype._update=function(){for(var t=ey,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var r=this._a|0,i=this._b|0,n=this._c|0,s=this._d|0,a=this._e|0,o=this._a|0,f=this._b|0,d=this._c|0,g=this._d|0,y=this._e|0,S=0;S<80;S+=1){var O,P;S<16?(O=Od(r,i,n,s,a,t[Ds[S]],Hs[0],$s[S]),P=Md(o,f,d,g,y,t[ks[S]],Fs[0],Us[S])):S<32?(O=Pd(r,i,n,s,a,t[Ds[S]],Hs[1],$s[S]),P=Td(o,f,d,g,y,t[ks[S]],Fs[1],Us[S])):S<48?(O=Id(r,i,n,s,a,t[Ds[S]],Hs[2],$s[S]),P=Id(o,f,d,g,y,t[ks[S]],Fs[2],Us[S])):S<64?(O=Td(r,i,n,s,a,t[Ds[S]],Hs[3],$s[S]),P=Pd(o,f,d,g,y,t[ks[S]],Fs[3],Us[S])):(O=Md(r,i,n,s,a,t[Ds[S]],Hs[4],$s[S]),P=Od(o,f,d,g,y,t[ks[S]],Fs[4],Us[S])),r=a,a=s,s=kn(n,10),n=i,i=O,o=y,y=g,g=kn(d,10),d=f,f=P}var M=this._b+n+g|0;this._b=this._c+s+y|0,this._c=this._d+a+o|0,this._d=this._e+r+f|0,this._e=this._a+i+d|0,this._a=M};jo.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=vf.alloc?vf.alloc(20):new vf(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function kn(t,e){return t<<e|t>>>32-e}function Od(t,e,r,i,n,s,a,o){return kn(t+(e^r^i)+s+a|0,o)+n|0}function Pd(t,e,r,i,n,s,a,o){return kn(t+(e&r|~e&i)+s+a|0,o)+n|0}function Id(t,e,r,i,n,s,a,o){return kn(t+((e|~r)^i)+s+a|0,o)+n|0}function Td(t,e,r,i,n,s,a,o){return kn(t+(e&i|r&~i)+s+a|0,o)+n|0}function Md(t,e,r,i,n,s,a,o){return kn(t+(e^(r|~i))+s+a|0,o)+n|0}var ty=jo,op={exports:{}},cp=Ar.Buffer;function Go(t,e){this._block=cp.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}Go.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=cp.from(t,e));for(var r=this._block,i=this._blockSize,n=t.length,s=this._len,a=0;a<n;){for(var o=s%i,f=Math.min(n-a,i-o),d=0;d<f;d++)r[o+d]=t[a+d];s+=f,a+=f,s%i===0&&this._update(r)}return this._len+=n,this};Go.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var i=(r&4294967295)>>>0,n=(r-i)/4294967296;this._block.writeUInt32BE(n,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s};Go.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var As=Go,ry=At,fp=As,iy=Ar.Buffer,ny=[1518500249,1859775393,-1894007588,-899497514],sy=new Array(80);function pa(){this.init(),this._w=sy,fp.call(this,64,56)}ry(pa,fp);pa.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function ay(t){return t<<5|t>>>27}function oy(t){return t<<30|t>>>2}function cy(t,e,r,i){return t===0?e&r|~e&i:t===2?e&r|e&i|r&i:e^r^i}pa.prototype._update=function(t){for(var e=this._w,r=this._a|0,i=this._b|0,n=this._c|0,s=this._d|0,a=this._e|0,o=0;o<16;++o)e[o]=t.readInt32BE(o*4);for(;o<80;++o)e[o]=e[o-3]^e[o-8]^e[o-14]^e[o-16];for(var f=0;f<80;++f){var d=~~(f/20),g=ay(r)+cy(d,i,n,s)+a+e[f]+ny[d]|0;a=s,s=n,n=oy(i),i=r,r=g}this._a=r+this._a|0,this._b=i+this._b|0,this._c=n+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0};pa.prototype._hash=function(){var t=iy.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var fy=pa,uy=At,up=As,hy=Ar.Buffer,dy=[1518500249,1859775393,-1894007588,-899497514],ly=new Array(80);function ba(){this.init(),this._w=ly,up.call(this,64,56)}uy(ba,up);ba.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function py(t){return t<<1|t>>>31}function by(t){return t<<5|t>>>27}function gy(t){return t<<30|t>>>2}function my(t,e,r,i){return t===0?e&r|~e&i:t===2?e&r|e&i|r&i:e^r^i}ba.prototype._update=function(t){for(var e=this._w,r=this._a|0,i=this._b|0,n=this._c|0,s=this._d|0,a=this._e|0,o=0;o<16;++o)e[o]=t.readInt32BE(o*4);for(;o<80;++o)e[o]=py(e[o-3]^e[o-8]^e[o-14]^e[o-16]);for(var f=0;f<80;++f){var d=~~(f/20),g=by(r)+my(d,i,n,s)+a+e[f]+dy[d]|0;a=s,s=n,n=gy(i),i=r,r=g}this._a=r+this._a|0,this._b=i+this._b|0,this._c=n+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0};ba.prototype._hash=function(){var t=hy.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var vy=ba,yy=At,hp=As,_y=Ar.Buffer,wy=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Ey=new Array(64);function ga(){this.init(),this._w=Ey,hp.call(this,64,56)}yy(ga,hp);ga.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function xy(t,e,r){return r^t&(e^r)}function Ay(t,e,r){return t&e|r&(t|e)}function Sy(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function Ry(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function Oy(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function Py(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}ga.prototype._update=function(t){for(var e=this._w,r=this._a|0,i=this._b|0,n=this._c|0,s=this._d|0,a=this._e|0,o=this._f|0,f=this._g|0,d=this._h|0,g=0;g<16;++g)e[g]=t.readInt32BE(g*4);for(;g<64;++g)e[g]=Py(e[g-2])+e[g-7]+Oy(e[g-15])+e[g-16]|0;for(var y=0;y<64;++y){var S=d+Ry(a)+xy(a,o,f)+wy[y]+e[y]|0,O=Sy(r)+Ay(r,i,n)|0;d=f,f=o,o=a,a=s+S|0,s=n,n=i,i=r,r=S+O|0}this._a=r+this._a|0,this._b=i+this._b|0,this._c=n+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0,this._f=o+this._f|0,this._g=f+this._g|0,this._h=d+this._h|0};ga.prototype._hash=function(){var t=_y.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var dp=ga,Iy=At,Ty=dp,My=As,Ly=Ar.Buffer,Ny=new Array(64);function Vo(){this.init(),this._w=Ny,My.call(this,64,56)}Iy(Vo,Ty);Vo.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Vo.prototype._hash=function(){var t=Ly.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var Cy=Vo,By=At,lp=As,Dy=Ar.Buffer,Ld=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],ky=new Array(160);function ma(){this.init(),this._w=ky,lp.call(this,128,112)}By(ma,lp);ma.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Nd(t,e,r){return r^t&(e^r)}function Cd(t,e,r){return t&e|r&(t|e)}function Bd(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function Dd(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function $y(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function Uy(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function Hy(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function Fy(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function kt(t,e){return t>>>0<e>>>0?1:0}ma.prototype._update=function(t){for(var e=this._w,r=this._ah|0,i=this._bh|0,n=this._ch|0,s=this._dh|0,a=this._eh|0,o=this._fh|0,f=this._gh|0,d=this._hh|0,g=this._al|0,y=this._bl|0,S=this._cl|0,O=this._dl|0,P=this._el|0,M=this._fl|0,B=this._gl|0,C=this._hl|0,I=0;I<32;I+=2)e[I]=t.readInt32BE(I*4),e[I+1]=t.readInt32BE(I*4+4);for(;I<160;I+=2){var z=e[I-30],F=e[I-15*2+1],W=$y(z,F),q=Uy(F,z);z=e[I-2*2],F=e[I-2*2+1];var G=Hy(z,F),R=Fy(F,z),T=e[I-7*2],x=e[I-7*2+1],E=e[I-16*2],c=e[I-16*2+1],h=q+x|0,b=W+T+kt(h,q)|0;h=h+R|0,b=b+G+kt(h,R)|0,h=h+c|0,b=b+E+kt(h,c)|0,e[I]=b,e[I+1]=h}for(var p=0;p<160;p+=2){b=e[p],h=e[p+1];var u=Cd(r,i,n),_=Cd(g,y,S),w=Bd(r,g),v=Bd(g,r),l=Dd(a,P),A=Dd(P,a),K=Ld[p],V=Ld[p+1],J=Nd(a,o,f),Z=Nd(P,M,B),Y=C+A|0,$=d+l+kt(Y,C)|0;Y=Y+Z|0,$=$+J+kt(Y,Z)|0,Y=Y+V|0,$=$+K+kt(Y,V)|0,Y=Y+h|0,$=$+b+kt(Y,h)|0;var H=v+_|0,k=w+u+kt(H,v)|0;d=f,C=B,f=o,B=M,o=a,M=P,P=O+Y|0,a=s+$+kt(P,O)|0,s=n,O=S,n=i,S=y,i=r,y=g,g=Y+H|0,r=$+k+kt(g,Y)|0}this._al=this._al+g|0,this._bl=this._bl+y|0,this._cl=this._cl+S|0,this._dl=this._dl+O|0,this._el=this._el+P|0,this._fl=this._fl+M|0,this._gl=this._gl+B|0,this._hl=this._hl+C|0,this._ah=this._ah+r+kt(this._al,g)|0,this._bh=this._bh+i+kt(this._bl,y)|0,this._ch=this._ch+n+kt(this._cl,S)|0,this._dh=this._dh+s+kt(this._dl,O)|0,this._eh=this._eh+a+kt(this._el,P)|0,this._fh=this._fh+o+kt(this._fl,M)|0,this._gh=this._gh+f+kt(this._gl,B)|0,this._hh=this._hh+d+kt(this._hl,C)|0};ma.prototype._hash=function(){var t=Dy.allocUnsafe(64);function e(r,i,n){t.writeInt32BE(r,n),t.writeInt32BE(i,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var pp=ma,Ky=At,jy=pp,Gy=As,Vy=Ar.Buffer,zy=new Array(160);function zo(){this.init(),this._w=zy,Gy.call(this,128,112)}Ky(zo,jy);zo.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};zo.prototype._hash=function(){var t=Vy.allocUnsafe(48);function e(r,i,n){t.writeInt32BE(r,n),t.writeInt32BE(i,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var qy=zo,jn=op.exports=function(e){e=e.toLowerCase();var r=jn[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};jn.sha=fy;jn.sha1=vy;jn.sha224=Cy;jn.sha256=dp;jn.sha384=qy;jn.sha512=pp;var Wy=op.exports,bp=Ar.Buffer,gp=rp.Transform,Jy=Bo.StringDecoder,Zy=At;function Kr(t){gp.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}Zy(Kr,gp);Kr.prototype.update=function(t,e,r){typeof t=="string"&&(t=bp.from(t,e));var i=this._update(t);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)};Kr.prototype.setAutoPadding=function(){};Kr.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};Kr.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};Kr.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};Kr.prototype._transform=function(t,e,r){var i;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(n){i=n}finally{r(i)}};Kr.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)};Kr.prototype._finalOrDigest=function(t){var e=this.__final()||bp.alloc(0);return t&&(e=this._toString(e,t,!0)),e};Kr.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new Jy(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var i=this._decoder.write(t);return r&&(i+=this._decoder.end()),i};var Xy=Kr,Yy=At,Qy=Y2,e6=ty,t6=Wy,mp=Xy;function qo(t){mp.call(this,"digest"),this._hash=t}Yy(qo,mp);qo.prototype._update=function(t){this._hash.update(t)};qo.prototype._final=function(){return this._hash.digest()};var r6=function(e){return e=e.toLowerCase(),e==="md5"?new Qy:e==="rmd160"||e==="ripemd160"?new e6:new qo(t6(e))},Ia=Ar.Buffer;function i6(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var i=0;i<t.length;i++){var n=t.charAt(i),s=n.charCodeAt(0);if(e[s]!==255)throw new TypeError(n+" is ambiguous");e[s]=i}var a=t.length,o=t.charAt(0),f=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function g(O){if((Array.isArray(O)||O instanceof Uint8Array)&&(O=Ia.from(O)),!Ia.isBuffer(O))throw new TypeError("Expected Buffer");if(O.length===0)return"";for(var P=0,M=0,B=0,C=O.length;B!==C&&O[B]===0;)B++,P++;for(var I=(C-B)*d+1>>>0,z=new Uint8Array(I);B!==C;){for(var F=O[B],W=0,q=I-1;(F!==0||W<M)&&q!==-1;q--,W++)F+=256*z[q]>>>0,z[q]=F%a>>>0,F=F/a>>>0;if(F!==0)throw new Error("Non-zero carry");M=W,B++}for(var G=I-M;G!==I&&z[G]===0;)G++;for(var R=o.repeat(P);G<I;++G)R+=t.charAt(z[G]);return R}function y(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return Ia.alloc(0);for(var P=0,M=0,B=0;O[P]===o;)M++,P++;for(var C=(O.length-P)*f+1>>>0,I=new Uint8Array(C);O[P];){var z=e[O.charCodeAt(P)];if(z===255)return;for(var F=0,W=C-1;(z!==0||F<B)&&W!==-1;W--,F++)z+=a*I[W]>>>0,I[W]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");B=F,P++}for(var q=C-B;q!==C&&I[q]===0;)q++;var G=Ia.allocUnsafe(M+(C-q));G.fill(0,0,M);for(var R=M;q!==C;)G[R++]=I[q++];return G}function S(O){var P=y(O);if(P)return P;throw new Error("Non-base"+a+" character")}return{encode:g,decodeUnsafe:y,decode:S}}var n6=i6,s6=n6,a6="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",o6=s6(a6),yf=o6,c6=Ar.Buffer,f6=function(t){function e(s){var a=t(s);return yf.encode(c6.concat([s,a],s.length+4))}function r(s){var a=s.slice(0,-4),o=s.slice(-4),f=t(a);if(!(o[0]^f[0]|o[1]^f[1]|o[2]^f[2]|o[3]^f[3]))return a}function i(s){var a=yf.decodeUnsafe(s);if(a)return r(a)}function n(s){var a=yf.decode(s),o=r(a);if(!o)throw new Error("Invalid checksum");return o}return{encode:e,decode:n,decodeUnsafe:i}},kd=r6,u6=f6;function h6(t){var e=kd("sha256").update(t).digest();return kd("sha256").update(e).digest()}var d6=u6(h6);const va=ca(d6);var l6={};const p6="elliptic@^6.5.4",b6="elliptic@6.5.4",g6=!1,m6="sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==",v6="/elliptic",y6={},_6={type:"range",registry:!0,raw:"elliptic@^6.5.4",name:"elliptic",escapedName:"elliptic",rawSpec:"^6.5.4",saveSpec:null,fetchSpec:"^6.5.4"},w6=["/@taquito/utils","/browserify-sign","/create-ecdh"],E6="https://registry.npmjs.org/elliptic/-/elliptic-6.5.4.tgz",x6="da37cebd31e79a1367e941b592ed1fbebd58abbb",A6="elliptic@^6.5.4",S6="/Users/stephen/Documents/GitHub/Symmetric.Frontend-Tezos/node_modules/@taquito/utils",R6={name:"Fedor Indutny",email:"fedor@indutny.com"},O6={url:"https://github.com/indutny/elliptic/issues"},P6=!1,I6={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},T6=!1,M6="EC cryptography",L6={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},N6=["lib"],C6="https://github.com/indutny/elliptic",B6=["EC","Elliptic","curve","Cryptography"],D6="MIT",k6="lib/elliptic.js",$6="elliptic",U6={type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},H6={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},F6="6.5.4",K6={_from:p6,_id:b6,_inBundle:g6,_integrity:m6,_location:v6,_phantomChildren:y6,_requested:_6,_requiredBy:w6,_resolved:E6,_shasum:x6,_spec:A6,_where:S6,author:R6,bugs:O6,bundleDependencies:P6,dependencies:I6,deprecated:T6,description:M6,devDependencies:L6,files:N6,homepage:C6,keywords:B6,license:D6,main:k6,name:$6,repository:U6,scripts:H6,version:F6};var Sr={},Hu={exports:{}};Hu.exports;(function(t){(function(e,r){function i(E,c){if(!E)throw new Error(c||"Assertion failed")}function n(E,c){E.super_=c;var h=function(){};h.prototype=c.prototype,E.prototype=new h,E.prototype.constructor=E}function s(E,c,h){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((c==="le"||c==="be")&&(h=c,c=10),this._init(E||0,c||10,h||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=Es.Buffer}catch{}s.isBN=function(c){return c instanceof s?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===s.wordSize&&Array.isArray(c.words)},s.max=function(c,h){return c.cmp(h)>0?c:h},s.min=function(c,h){return c.cmp(h)<0?c:h},s.prototype._init=function(c,h,b){if(typeof c=="number")return this._initNumber(c,h,b);if(typeof c=="object")return this._initArray(c,h,b);h==="hex"&&(h=16),i(h===(h|0)&&h>=2&&h<=36),c=c.toString().replace(/\s+/g,"");var p=0;c[0]==="-"&&(p++,this.negative=1),p<c.length&&(h===16?this._parseHex(c,p,b):(this._parseBase(c,h,p),b==="le"&&this._initArray(this.toArray(),h,b)))},s.prototype._initNumber=function(c,h,b){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(i(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),h,b)},s.prototype._initArray=function(c,h,b){if(i(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var u,_,w=0;if(b==="be")for(p=c.length-1,u=0;p>=0;p-=3)_=c[p]|c[p-1]<<8|c[p-2]<<16,this.words[u]|=_<<w&67108863,this.words[u+1]=_>>>26-w&67108863,w+=24,w>=26&&(w-=26,u++);else if(b==="le")for(p=0,u=0;p<c.length;p+=3)_=c[p]|c[p+1]<<8|c[p+2]<<16,this.words[u]|=_<<w&67108863,this.words[u+1]=_>>>26-w&67108863,w+=24,w>=26&&(w-=26,u++);return this.strip()};function o(E,c){var h=E.charCodeAt(c);return h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:h-48&15}function f(E,c,h){var b=o(E,h);return h-1>=c&&(b|=o(E,h-1)<<4),b}s.prototype._parseHex=function(c,h,b){this.length=Math.ceil((c.length-h)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var u=0,_=0,w;if(b==="be")for(p=c.length-1;p>=h;p-=2)w=f(c,h,p)<<u,this.words[_]|=w&67108863,u>=18?(u-=18,_+=1,this.words[_]|=w>>>26):u+=8;else{var v=c.length-h;for(p=v%2===0?h+1:h;p<c.length;p+=2)w=f(c,h,p)<<u,this.words[_]|=w&67108863,u>=18?(u-=18,_+=1,this.words[_]|=w>>>26):u+=8}this.strip()};function d(E,c,h,b){for(var p=0,u=Math.min(E.length,h),_=c;_<u;_++){var w=E.charCodeAt(_)-48;p*=b,w>=49?p+=w-49+10:w>=17?p+=w-17+10:p+=w}return p}s.prototype._parseBase=function(c,h,b){this.words=[0],this.length=1;for(var p=0,u=1;u<=67108863;u*=h)p++;p--,u=u/h|0;for(var _=c.length-b,w=_%p,v=Math.min(_,_-w)+b,l=0,A=b;A<v;A+=p)l=d(c,A,A+p,h),this.imuln(u),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(w!==0){var K=1;for(l=d(c,A,c.length,h),A=0;A<w;A++)K*=h;this.imuln(K),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},s.prototype.copy=function(c){c.words=new Array(this.length);for(var h=0;h<this.length;h++)c.words[h]=this.words[h];c.length=this.length,c.negative=this.negative,c.red=this.red},s.prototype.clone=function(){var c=new s(null);return this.copy(c),c},s.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(c,h){c=c||10,h=h|0||1;var b;if(c===16||c==="hex"){b="";for(var p=0,u=0,_=0;_<this.length;_++){var w=this.words[_],v=((w<<p|u)&16777215).toString(16);u=w>>>24-p&16777215,u!==0||_!==this.length-1?b=g[6-v.length]+v+b:b=v+b,p+=2,p>=26&&(p-=26,_--)}for(u!==0&&(b=u.toString(16)+b);b.length%h!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(c===(c|0)&&c>=2&&c<=36){var l=y[c],A=S[c];b="";var K=this.clone();for(K.negative=0;!K.isZero();){var V=K.modn(A).toString(c);K=K.idivn(A),K.isZero()?b=V+b:b=g[l-V.length]+V+b}for(this.isZero()&&(b="0"+b);b.length%h!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(c,h){return i(typeof a<"u"),this.toArrayLike(a,c,h)},s.prototype.toArray=function(c,h){return this.toArrayLike(Array,c,h)},s.prototype.toArrayLike=function(c,h,b){var p=this.byteLength(),u=b||Math.max(1,p);i(p<=u,"byte array longer than desired length"),i(u>0,"Requested array length <= 0"),this.strip();var _=h==="le",w=new c(u),v,l,A=this.clone();if(_){for(l=0;!A.isZero();l++)v=A.andln(255),A.iushrn(8),w[l]=v;for(;l<u;l++)w[l]=0}else{for(l=0;l<u-p;l++)w[l]=0;for(l=0;!A.isZero();l++)v=A.andln(255),A.iushrn(8),w[u-l-1]=v}return w},Math.clz32?s.prototype._countBits=function(c){return 32-Math.clz32(c)}:s.prototype._countBits=function(c){var h=c,b=0;return h>=4096&&(b+=13,h>>>=13),h>=64&&(b+=7,h>>>=7),h>=8&&(b+=4,h>>>=4),h>=2&&(b+=2,h>>>=2),b+h},s.prototype._zeroBits=function(c){if(c===0)return 26;var h=c,b=0;return h&8191||(b+=13,h>>>=13),h&127||(b+=7,h>>>=7),h&15||(b+=4,h>>>=4),h&3||(b+=2,h>>>=2),h&1||b++,b},s.prototype.bitLength=function(){var c=this.words[this.length-1],h=this._countBits(c);return(this.length-1)*26+h};function O(E){for(var c=new Array(E.bitLength()),h=0;h<c.length;h++){var b=h/26|0,p=h%26;c[h]=(E.words[b]&1<<p)>>>p}return c}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,h=0;h<this.length;h++){var b=this._zeroBits(this.words[h]);if(c+=b,b!==26)break}return c},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},s.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]|c.words[h];return this.strip()},s.prototype.ior=function(c){return i((this.negative|c.negative)===0),this.iuor(c)},s.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},s.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},s.prototype.iuand=function(c){var h;this.length>c.length?h=c:h=this;for(var b=0;b<h.length;b++)this.words[b]=this.words[b]&c.words[b];return this.length=h.length,this.strip()},s.prototype.iand=function(c){return i((this.negative|c.negative)===0),this.iuand(c)},s.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},s.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},s.prototype.iuxor=function(c){var h,b;this.length>c.length?(h=this,b=c):(h=c,b=this);for(var p=0;p<b.length;p++)this.words[p]=h.words[p]^b.words[p];if(this!==h)for(;p<h.length;p++)this.words[p]=h.words[p];return this.length=h.length,this.strip()},s.prototype.ixor=function(c){return i((this.negative|c.negative)===0),this.iuxor(c)},s.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},s.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},s.prototype.inotn=function(c){i(typeof c=="number"&&c>=0);var h=Math.ceil(c/26)|0,b=c%26;this._expand(h),b>0&&h--;for(var p=0;p<h;p++)this.words[p]=~this.words[p]&67108863;return b>0&&(this.words[p]=~this.words[p]&67108863>>26-b),this.strip()},s.prototype.notn=function(c){return this.clone().inotn(c)},s.prototype.setn=function(c,h){i(typeof c=="number"&&c>=0);var b=c/26|0,p=c%26;return this._expand(b+1),h?this.words[b]=this.words[b]|1<<p:this.words[b]=this.words[b]&~(1<<p),this.strip()},s.prototype.iadd=function(c){var h;if(this.negative!==0&&c.negative===0)return this.negative=0,h=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,h=this.isub(c),c.negative=1,h._normSign();var b,p;this.length>c.length?(b=this,p=c):(b=c,p=this);for(var u=0,_=0;_<p.length;_++)h=(b.words[_]|0)+(p.words[_]|0)+u,this.words[_]=h&67108863,u=h>>>26;for(;u!==0&&_<b.length;_++)h=(b.words[_]|0)+u,this.words[_]=h&67108863,u=h>>>26;if(this.length=b.length,u!==0)this.words[this.length]=u,this.length++;else if(b!==this)for(;_<b.length;_++)this.words[_]=b.words[_];return this},s.prototype.add=function(c){var h;return c.negative!==0&&this.negative===0?(c.negative=0,h=this.sub(c),c.negative^=1,h):c.negative===0&&this.negative!==0?(this.negative=0,h=c.sub(this),this.negative=1,h):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},s.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var h=this.iadd(c);return c.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var b=this.cmp(c);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,u;b>0?(p=this,u=c):(p=c,u=this);for(var _=0,w=0;w<u.length;w++)h=(p.words[w]|0)-(u.words[w]|0)+_,_=h>>26,this.words[w]=h&67108863;for(;_!==0&&w<p.length;w++)h=(p.words[w]|0)+_,_=h>>26,this.words[w]=h&67108863;if(_===0&&w<p.length&&p!==this)for(;w<p.length;w++)this.words[w]=p.words[w];return this.length=Math.max(this.length,w),p!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(c){return this.clone().isub(c)};function P(E,c,h){h.negative=c.negative^E.negative;var b=E.length+c.length|0;h.length=b,b=b-1|0;var p=E.words[0]|0,u=c.words[0]|0,_=p*u,w=_&67108863,v=_/67108864|0;h.words[0]=w;for(var l=1;l<b;l++){for(var A=v>>>26,K=v&67108863,V=Math.min(l,c.length-1),J=Math.max(0,l-E.length+1);J<=V;J++){var Z=l-J|0;p=E.words[Z]|0,u=c.words[J]|0,_=p*u+K,A+=_/67108864|0,K=_&67108863}h.words[l]=K|0,v=A|0}return v!==0?h.words[l]=v|0:h.length--,h.strip()}var M=function(c,h,b){var p=c.words,u=h.words,_=b.words,w=0,v,l,A,K=p[0]|0,V=K&8191,J=K>>>13,Z=p[1]|0,Y=Z&8191,$=Z>>>13,H=p[2]|0,k=H&8191,m=H>>>13,N=p[3]|0,X=N&8191,Q=N>>>13,ue=p[4]|0,te=ue&8191,ne=ue>>>13,Qe=p[5]|0,Ce=Qe&8191,ve=Qe>>>13,Ct=p[6]|0,we=Ct&8191,ye=Ct>>>13,gt=p[7]|0,be=gt&8191,pe=gt>>>13,st=p[8]|0,de=st&8191,Ee=st>>>13,Bt=p[9]|0,De=Bt&8191,$e=Bt>>>13,nr=u[0]|0,Ke=nr&8191,Ve=nr>>>13,Rr=u[1]|0,qe=Rr&8191,Xe=Rr>>>13,xi=u[2]|0,tt=xi&8191,it=xi>>>13,Jn=u[3]|0,ft=Jn&8191,xe=Jn>>>13,Ot=u[4]|0,Ae=Ot&8191,Se=Ot>>>13,Pt=u[5]|0,Re=Pt&8191,Oe=Pt>>>13,It=u[6]|0,Pe=It&8191,Ie=It>>>13,Tt=u[7]|0,Te=Tt&8191,Me=Tt>>>13,Mt=u[8]|0,Le=Mt&8191,Ne=Mt>>>13,Kh=u[9]|0,wt=Kh&8191,Et=Kh>>>13;b.negative=c.negative^h.negative,b.length=19,v=Math.imul(V,Ke),l=Math.imul(V,Ve),l=l+Math.imul(J,Ke)|0,A=Math.imul(J,Ve);var yc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(yc>>>26)|0,yc&=67108863,v=Math.imul(Y,Ke),l=Math.imul(Y,Ve),l=l+Math.imul($,Ke)|0,A=Math.imul($,Ve),v=v+Math.imul(V,qe)|0,l=l+Math.imul(V,Xe)|0,l=l+Math.imul(J,qe)|0,A=A+Math.imul(J,Xe)|0;var _c=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(_c>>>26)|0,_c&=67108863,v=Math.imul(k,Ke),l=Math.imul(k,Ve),l=l+Math.imul(m,Ke)|0,A=Math.imul(m,Ve),v=v+Math.imul(Y,qe)|0,l=l+Math.imul(Y,Xe)|0,l=l+Math.imul($,qe)|0,A=A+Math.imul($,Xe)|0,v=v+Math.imul(V,tt)|0,l=l+Math.imul(V,it)|0,l=l+Math.imul(J,tt)|0,A=A+Math.imul(J,it)|0;var wc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(wc>>>26)|0,wc&=67108863,v=Math.imul(X,Ke),l=Math.imul(X,Ve),l=l+Math.imul(Q,Ke)|0,A=Math.imul(Q,Ve),v=v+Math.imul(k,qe)|0,l=l+Math.imul(k,Xe)|0,l=l+Math.imul(m,qe)|0,A=A+Math.imul(m,Xe)|0,v=v+Math.imul(Y,tt)|0,l=l+Math.imul(Y,it)|0,l=l+Math.imul($,tt)|0,A=A+Math.imul($,it)|0,v=v+Math.imul(V,ft)|0,l=l+Math.imul(V,xe)|0,l=l+Math.imul(J,ft)|0,A=A+Math.imul(J,xe)|0;var Ec=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Ec>>>26)|0,Ec&=67108863,v=Math.imul(te,Ke),l=Math.imul(te,Ve),l=l+Math.imul(ne,Ke)|0,A=Math.imul(ne,Ve),v=v+Math.imul(X,qe)|0,l=l+Math.imul(X,Xe)|0,l=l+Math.imul(Q,qe)|0,A=A+Math.imul(Q,Xe)|0,v=v+Math.imul(k,tt)|0,l=l+Math.imul(k,it)|0,l=l+Math.imul(m,tt)|0,A=A+Math.imul(m,it)|0,v=v+Math.imul(Y,ft)|0,l=l+Math.imul(Y,xe)|0,l=l+Math.imul($,ft)|0,A=A+Math.imul($,xe)|0,v=v+Math.imul(V,Ae)|0,l=l+Math.imul(V,Se)|0,l=l+Math.imul(J,Ae)|0,A=A+Math.imul(J,Se)|0;var xc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(xc>>>26)|0,xc&=67108863,v=Math.imul(Ce,Ke),l=Math.imul(Ce,Ve),l=l+Math.imul(ve,Ke)|0,A=Math.imul(ve,Ve),v=v+Math.imul(te,qe)|0,l=l+Math.imul(te,Xe)|0,l=l+Math.imul(ne,qe)|0,A=A+Math.imul(ne,Xe)|0,v=v+Math.imul(X,tt)|0,l=l+Math.imul(X,it)|0,l=l+Math.imul(Q,tt)|0,A=A+Math.imul(Q,it)|0,v=v+Math.imul(k,ft)|0,l=l+Math.imul(k,xe)|0,l=l+Math.imul(m,ft)|0,A=A+Math.imul(m,xe)|0,v=v+Math.imul(Y,Ae)|0,l=l+Math.imul(Y,Se)|0,l=l+Math.imul($,Ae)|0,A=A+Math.imul($,Se)|0,v=v+Math.imul(V,Re)|0,l=l+Math.imul(V,Oe)|0,l=l+Math.imul(J,Re)|0,A=A+Math.imul(J,Oe)|0;var Ac=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Ac>>>26)|0,Ac&=67108863,v=Math.imul(we,Ke),l=Math.imul(we,Ve),l=l+Math.imul(ye,Ke)|0,A=Math.imul(ye,Ve),v=v+Math.imul(Ce,qe)|0,l=l+Math.imul(Ce,Xe)|0,l=l+Math.imul(ve,qe)|0,A=A+Math.imul(ve,Xe)|0,v=v+Math.imul(te,tt)|0,l=l+Math.imul(te,it)|0,l=l+Math.imul(ne,tt)|0,A=A+Math.imul(ne,it)|0,v=v+Math.imul(X,ft)|0,l=l+Math.imul(X,xe)|0,l=l+Math.imul(Q,ft)|0,A=A+Math.imul(Q,xe)|0,v=v+Math.imul(k,Ae)|0,l=l+Math.imul(k,Se)|0,l=l+Math.imul(m,Ae)|0,A=A+Math.imul(m,Se)|0,v=v+Math.imul(Y,Re)|0,l=l+Math.imul(Y,Oe)|0,l=l+Math.imul($,Re)|0,A=A+Math.imul($,Oe)|0,v=v+Math.imul(V,Pe)|0,l=l+Math.imul(V,Ie)|0,l=l+Math.imul(J,Pe)|0,A=A+Math.imul(J,Ie)|0;var Sc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Sc>>>26)|0,Sc&=67108863,v=Math.imul(be,Ke),l=Math.imul(be,Ve),l=l+Math.imul(pe,Ke)|0,A=Math.imul(pe,Ve),v=v+Math.imul(we,qe)|0,l=l+Math.imul(we,Xe)|0,l=l+Math.imul(ye,qe)|0,A=A+Math.imul(ye,Xe)|0,v=v+Math.imul(Ce,tt)|0,l=l+Math.imul(Ce,it)|0,l=l+Math.imul(ve,tt)|0,A=A+Math.imul(ve,it)|0,v=v+Math.imul(te,ft)|0,l=l+Math.imul(te,xe)|0,l=l+Math.imul(ne,ft)|0,A=A+Math.imul(ne,xe)|0,v=v+Math.imul(X,Ae)|0,l=l+Math.imul(X,Se)|0,l=l+Math.imul(Q,Ae)|0,A=A+Math.imul(Q,Se)|0,v=v+Math.imul(k,Re)|0,l=l+Math.imul(k,Oe)|0,l=l+Math.imul(m,Re)|0,A=A+Math.imul(m,Oe)|0,v=v+Math.imul(Y,Pe)|0,l=l+Math.imul(Y,Ie)|0,l=l+Math.imul($,Pe)|0,A=A+Math.imul($,Ie)|0,v=v+Math.imul(V,Te)|0,l=l+Math.imul(V,Me)|0,l=l+Math.imul(J,Te)|0,A=A+Math.imul(J,Me)|0;var Rc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Rc>>>26)|0,Rc&=67108863,v=Math.imul(de,Ke),l=Math.imul(de,Ve),l=l+Math.imul(Ee,Ke)|0,A=Math.imul(Ee,Ve),v=v+Math.imul(be,qe)|0,l=l+Math.imul(be,Xe)|0,l=l+Math.imul(pe,qe)|0,A=A+Math.imul(pe,Xe)|0,v=v+Math.imul(we,tt)|0,l=l+Math.imul(we,it)|0,l=l+Math.imul(ye,tt)|0,A=A+Math.imul(ye,it)|0,v=v+Math.imul(Ce,ft)|0,l=l+Math.imul(Ce,xe)|0,l=l+Math.imul(ve,ft)|0,A=A+Math.imul(ve,xe)|0,v=v+Math.imul(te,Ae)|0,l=l+Math.imul(te,Se)|0,l=l+Math.imul(ne,Ae)|0,A=A+Math.imul(ne,Se)|0,v=v+Math.imul(X,Re)|0,l=l+Math.imul(X,Oe)|0,l=l+Math.imul(Q,Re)|0,A=A+Math.imul(Q,Oe)|0,v=v+Math.imul(k,Pe)|0,l=l+Math.imul(k,Ie)|0,l=l+Math.imul(m,Pe)|0,A=A+Math.imul(m,Ie)|0,v=v+Math.imul(Y,Te)|0,l=l+Math.imul(Y,Me)|0,l=l+Math.imul($,Te)|0,A=A+Math.imul($,Me)|0,v=v+Math.imul(V,Le)|0,l=l+Math.imul(V,Ne)|0,l=l+Math.imul(J,Le)|0,A=A+Math.imul(J,Ne)|0;var Oc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Oc>>>26)|0,Oc&=67108863,v=Math.imul(De,Ke),l=Math.imul(De,Ve),l=l+Math.imul($e,Ke)|0,A=Math.imul($e,Ve),v=v+Math.imul(de,qe)|0,l=l+Math.imul(de,Xe)|0,l=l+Math.imul(Ee,qe)|0,A=A+Math.imul(Ee,Xe)|0,v=v+Math.imul(be,tt)|0,l=l+Math.imul(be,it)|0,l=l+Math.imul(pe,tt)|0,A=A+Math.imul(pe,it)|0,v=v+Math.imul(we,ft)|0,l=l+Math.imul(we,xe)|0,l=l+Math.imul(ye,ft)|0,A=A+Math.imul(ye,xe)|0,v=v+Math.imul(Ce,Ae)|0,l=l+Math.imul(Ce,Se)|0,l=l+Math.imul(ve,Ae)|0,A=A+Math.imul(ve,Se)|0,v=v+Math.imul(te,Re)|0,l=l+Math.imul(te,Oe)|0,l=l+Math.imul(ne,Re)|0,A=A+Math.imul(ne,Oe)|0,v=v+Math.imul(X,Pe)|0,l=l+Math.imul(X,Ie)|0,l=l+Math.imul(Q,Pe)|0,A=A+Math.imul(Q,Ie)|0,v=v+Math.imul(k,Te)|0,l=l+Math.imul(k,Me)|0,l=l+Math.imul(m,Te)|0,A=A+Math.imul(m,Me)|0,v=v+Math.imul(Y,Le)|0,l=l+Math.imul(Y,Ne)|0,l=l+Math.imul($,Le)|0,A=A+Math.imul($,Ne)|0,v=v+Math.imul(V,wt)|0,l=l+Math.imul(V,Et)|0,l=l+Math.imul(J,wt)|0,A=A+Math.imul(J,Et)|0;var Pc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Pc>>>26)|0,Pc&=67108863,v=Math.imul(De,qe),l=Math.imul(De,Xe),l=l+Math.imul($e,qe)|0,A=Math.imul($e,Xe),v=v+Math.imul(de,tt)|0,l=l+Math.imul(de,it)|0,l=l+Math.imul(Ee,tt)|0,A=A+Math.imul(Ee,it)|0,v=v+Math.imul(be,ft)|0,l=l+Math.imul(be,xe)|0,l=l+Math.imul(pe,ft)|0,A=A+Math.imul(pe,xe)|0,v=v+Math.imul(we,Ae)|0,l=l+Math.imul(we,Se)|0,l=l+Math.imul(ye,Ae)|0,A=A+Math.imul(ye,Se)|0,v=v+Math.imul(Ce,Re)|0,l=l+Math.imul(Ce,Oe)|0,l=l+Math.imul(ve,Re)|0,A=A+Math.imul(ve,Oe)|0,v=v+Math.imul(te,Pe)|0,l=l+Math.imul(te,Ie)|0,l=l+Math.imul(ne,Pe)|0,A=A+Math.imul(ne,Ie)|0,v=v+Math.imul(X,Te)|0,l=l+Math.imul(X,Me)|0,l=l+Math.imul(Q,Te)|0,A=A+Math.imul(Q,Me)|0,v=v+Math.imul(k,Le)|0,l=l+Math.imul(k,Ne)|0,l=l+Math.imul(m,Le)|0,A=A+Math.imul(m,Ne)|0,v=v+Math.imul(Y,wt)|0,l=l+Math.imul(Y,Et)|0,l=l+Math.imul($,wt)|0,A=A+Math.imul($,Et)|0;var Ic=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Ic>>>26)|0,Ic&=67108863,v=Math.imul(De,tt),l=Math.imul(De,it),l=l+Math.imul($e,tt)|0,A=Math.imul($e,it),v=v+Math.imul(de,ft)|0,l=l+Math.imul(de,xe)|0,l=l+Math.imul(Ee,ft)|0,A=A+Math.imul(Ee,xe)|0,v=v+Math.imul(be,Ae)|0,l=l+Math.imul(be,Se)|0,l=l+Math.imul(pe,Ae)|0,A=A+Math.imul(pe,Se)|0,v=v+Math.imul(we,Re)|0,l=l+Math.imul(we,Oe)|0,l=l+Math.imul(ye,Re)|0,A=A+Math.imul(ye,Oe)|0,v=v+Math.imul(Ce,Pe)|0,l=l+Math.imul(Ce,Ie)|0,l=l+Math.imul(ve,Pe)|0,A=A+Math.imul(ve,Ie)|0,v=v+Math.imul(te,Te)|0,l=l+Math.imul(te,Me)|0,l=l+Math.imul(ne,Te)|0,A=A+Math.imul(ne,Me)|0,v=v+Math.imul(X,Le)|0,l=l+Math.imul(X,Ne)|0,l=l+Math.imul(Q,Le)|0,A=A+Math.imul(Q,Ne)|0,v=v+Math.imul(k,wt)|0,l=l+Math.imul(k,Et)|0,l=l+Math.imul(m,wt)|0,A=A+Math.imul(m,Et)|0;var Tc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Tc>>>26)|0,Tc&=67108863,v=Math.imul(De,ft),l=Math.imul(De,xe),l=l+Math.imul($e,ft)|0,A=Math.imul($e,xe),v=v+Math.imul(de,Ae)|0,l=l+Math.imul(de,Se)|0,l=l+Math.imul(Ee,Ae)|0,A=A+Math.imul(Ee,Se)|0,v=v+Math.imul(be,Re)|0,l=l+Math.imul(be,Oe)|0,l=l+Math.imul(pe,Re)|0,A=A+Math.imul(pe,Oe)|0,v=v+Math.imul(we,Pe)|0,l=l+Math.imul(we,Ie)|0,l=l+Math.imul(ye,Pe)|0,A=A+Math.imul(ye,Ie)|0,v=v+Math.imul(Ce,Te)|0,l=l+Math.imul(Ce,Me)|0,l=l+Math.imul(ve,Te)|0,A=A+Math.imul(ve,Me)|0,v=v+Math.imul(te,Le)|0,l=l+Math.imul(te,Ne)|0,l=l+Math.imul(ne,Le)|0,A=A+Math.imul(ne,Ne)|0,v=v+Math.imul(X,wt)|0,l=l+Math.imul(X,Et)|0,l=l+Math.imul(Q,wt)|0,A=A+Math.imul(Q,Et)|0;var Mc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Mc>>>26)|0,Mc&=67108863,v=Math.imul(De,Ae),l=Math.imul(De,Se),l=l+Math.imul($e,Ae)|0,A=Math.imul($e,Se),v=v+Math.imul(de,Re)|0,l=l+Math.imul(de,Oe)|0,l=l+Math.imul(Ee,Re)|0,A=A+Math.imul(Ee,Oe)|0,v=v+Math.imul(be,Pe)|0,l=l+Math.imul(be,Ie)|0,l=l+Math.imul(pe,Pe)|0,A=A+Math.imul(pe,Ie)|0,v=v+Math.imul(we,Te)|0,l=l+Math.imul(we,Me)|0,l=l+Math.imul(ye,Te)|0,A=A+Math.imul(ye,Me)|0,v=v+Math.imul(Ce,Le)|0,l=l+Math.imul(Ce,Ne)|0,l=l+Math.imul(ve,Le)|0,A=A+Math.imul(ve,Ne)|0,v=v+Math.imul(te,wt)|0,l=l+Math.imul(te,Et)|0,l=l+Math.imul(ne,wt)|0,A=A+Math.imul(ne,Et)|0;var Lc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Lc>>>26)|0,Lc&=67108863,v=Math.imul(De,Re),l=Math.imul(De,Oe),l=l+Math.imul($e,Re)|0,A=Math.imul($e,Oe),v=v+Math.imul(de,Pe)|0,l=l+Math.imul(de,Ie)|0,l=l+Math.imul(Ee,Pe)|0,A=A+Math.imul(Ee,Ie)|0,v=v+Math.imul(be,Te)|0,l=l+Math.imul(be,Me)|0,l=l+Math.imul(pe,Te)|0,A=A+Math.imul(pe,Me)|0,v=v+Math.imul(we,Le)|0,l=l+Math.imul(we,Ne)|0,l=l+Math.imul(ye,Le)|0,A=A+Math.imul(ye,Ne)|0,v=v+Math.imul(Ce,wt)|0,l=l+Math.imul(Ce,Et)|0,l=l+Math.imul(ve,wt)|0,A=A+Math.imul(ve,Et)|0;var Nc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Nc>>>26)|0,Nc&=67108863,v=Math.imul(De,Pe),l=Math.imul(De,Ie),l=l+Math.imul($e,Pe)|0,A=Math.imul($e,Ie),v=v+Math.imul(de,Te)|0,l=l+Math.imul(de,Me)|0,l=l+Math.imul(Ee,Te)|0,A=A+Math.imul(Ee,Me)|0,v=v+Math.imul(be,Le)|0,l=l+Math.imul(be,Ne)|0,l=l+Math.imul(pe,Le)|0,A=A+Math.imul(pe,Ne)|0,v=v+Math.imul(we,wt)|0,l=l+Math.imul(we,Et)|0,l=l+Math.imul(ye,wt)|0,A=A+Math.imul(ye,Et)|0;var Cc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Cc>>>26)|0,Cc&=67108863,v=Math.imul(De,Te),l=Math.imul(De,Me),l=l+Math.imul($e,Te)|0,A=Math.imul($e,Me),v=v+Math.imul(de,Le)|0,l=l+Math.imul(de,Ne)|0,l=l+Math.imul(Ee,Le)|0,A=A+Math.imul(Ee,Ne)|0,v=v+Math.imul(be,wt)|0,l=l+Math.imul(be,Et)|0,l=l+Math.imul(pe,wt)|0,A=A+Math.imul(pe,Et)|0;var Bc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Bc>>>26)|0,Bc&=67108863,v=Math.imul(De,Le),l=Math.imul(De,Ne),l=l+Math.imul($e,Le)|0,A=Math.imul($e,Ne),v=v+Math.imul(de,wt)|0,l=l+Math.imul(de,Et)|0,l=l+Math.imul(Ee,wt)|0,A=A+Math.imul(Ee,Et)|0;var Dc=(w+v|0)+((l&8191)<<13)|0;w=(A+(l>>>13)|0)+(Dc>>>26)|0,Dc&=67108863,v=Math.imul(De,wt),l=Math.imul(De,Et),l=l+Math.imul($e,wt)|0,A=Math.imul($e,Et);var kc=(w+v|0)+((l&8191)<<13)|0;return w=(A+(l>>>13)|0)+(kc>>>26)|0,kc&=67108863,_[0]=yc,_[1]=_c,_[2]=wc,_[3]=Ec,_[4]=xc,_[5]=Ac,_[6]=Sc,_[7]=Rc,_[8]=Oc,_[9]=Pc,_[10]=Ic,_[11]=Tc,_[12]=Mc,_[13]=Lc,_[14]=Nc,_[15]=Cc,_[16]=Bc,_[17]=Dc,_[18]=kc,w!==0&&(_[19]=w,b.length++),b};Math.imul||(M=P);function B(E,c,h){h.negative=c.negative^E.negative,h.length=E.length+c.length;for(var b=0,p=0,u=0;u<h.length-1;u++){var _=p;p=0;for(var w=b&67108863,v=Math.min(u,c.length-1),l=Math.max(0,u-E.length+1);l<=v;l++){var A=u-l,K=E.words[A]|0,V=c.words[l]|0,J=K*V,Z=J&67108863;_=_+(J/67108864|0)|0,Z=Z+w|0,w=Z&67108863,_=_+(Z>>>26)|0,p+=_>>>26,_&=67108863}h.words[u]=w,b=_,_=p}return b!==0?h.words[u]=b:h.length--,h.strip()}function C(E,c,h){var b=new I;return b.mulp(E,c,h)}s.prototype.mulTo=function(c,h){var b,p=this.length+c.length;return this.length===10&&c.length===10?b=M(this,c,h):p<63?b=P(this,c,h):p<1024?b=B(this,c,h):b=C(this,c,h),b};function I(E,c){this.x=E,this.y=c}I.prototype.makeRBT=function(c){for(var h=new Array(c),b=s.prototype._countBits(c)-1,p=0;p<c;p++)h[p]=this.revBin(p,b,c);return h},I.prototype.revBin=function(c,h,b){if(c===0||c===b-1)return c;for(var p=0,u=0;u<h;u++)p|=(c&1)<<h-u-1,c>>=1;return p},I.prototype.permute=function(c,h,b,p,u,_){for(var w=0;w<_;w++)p[w]=h[c[w]],u[w]=b[c[w]]},I.prototype.transform=function(c,h,b,p,u,_){this.permute(_,c,h,b,p,u);for(var w=1;w<u;w<<=1)for(var v=w<<1,l=Math.cos(2*Math.PI/v),A=Math.sin(2*Math.PI/v),K=0;K<u;K+=v)for(var V=l,J=A,Z=0;Z<w;Z++){var Y=b[K+Z],$=p[K+Z],H=b[K+Z+w],k=p[K+Z+w],m=V*H-J*k;k=V*k+J*H,H=m,b[K+Z]=Y+H,p[K+Z]=$+k,b[K+Z+w]=Y-H,p[K+Z+w]=$-k,Z!==v&&(m=l*V-A*J,J=l*J+A*V,V=m)}},I.prototype.guessLen13b=function(c,h){var b=Math.max(h,c)|1,p=b&1,u=0;for(b=b/2|0;b;b=b>>>1)u++;return 1<<u+1+p},I.prototype.conjugate=function(c,h,b){if(!(b<=1))for(var p=0;p<b/2;p++){var u=c[p];c[p]=c[b-p-1],c[b-p-1]=u,u=h[p],h[p]=-h[b-p-1],h[b-p-1]=-u}},I.prototype.normalize13b=function(c,h){for(var b=0,p=0;p<h/2;p++){var u=Math.round(c[2*p+1]/h)*8192+Math.round(c[2*p]/h)+b;c[p]=u&67108863,u<67108864?b=0:b=u/67108864|0}return c},I.prototype.convert13b=function(c,h,b,p){for(var u=0,_=0;_<h;_++)u=u+(c[_]|0),b[2*_]=u&8191,u=u>>>13,b[2*_+1]=u&8191,u=u>>>13;for(_=2*h;_<p;++_)b[_]=0;i(u===0),i((u&-8192)===0)},I.prototype.stub=function(c){for(var h=new Array(c),b=0;b<c;b++)h[b]=0;return h},I.prototype.mulp=function(c,h,b){var p=2*this.guessLen13b(c.length,h.length),u=this.makeRBT(p),_=this.stub(p),w=new Array(p),v=new Array(p),l=new Array(p),A=new Array(p),K=new Array(p),V=new Array(p),J=b.words;J.length=p,this.convert13b(c.words,c.length,w,p),this.convert13b(h.words,h.length,A,p),this.transform(w,_,v,l,p,u),this.transform(A,_,K,V,p,u);for(var Z=0;Z<p;Z++){var Y=v[Z]*K[Z]-l[Z]*V[Z];l[Z]=v[Z]*V[Z]+l[Z]*K[Z],v[Z]=Y}return this.conjugate(v,l,p),this.transform(v,l,J,_,p,u),this.conjugate(J,_,p),this.normalize13b(J,p),b.negative=c.negative^h.negative,b.length=c.length+h.length,b.strip()},s.prototype.mul=function(c){var h=new s(null);return h.words=new Array(this.length+c.length),this.mulTo(c,h)},s.prototype.mulf=function(c){var h=new s(null);return h.words=new Array(this.length+c.length),C(this,c,h)},s.prototype.imul=function(c){return this.clone().mulTo(c,this)},s.prototype.imuln=function(c){i(typeof c=="number"),i(c<67108864);for(var h=0,b=0;b<this.length;b++){var p=(this.words[b]|0)*c,u=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=u>>>26,this.words[b]=u&67108863}return h!==0&&(this.words[b]=h,this.length++),this},s.prototype.muln=function(c){return this.clone().imuln(c)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(c){var h=O(c);if(h.length===0)return new s(1);for(var b=this,p=0;p<h.length&&h[p]===0;p++,b=b.sqr());if(++p<h.length)for(var u=b.sqr();p<h.length;p++,u=u.sqr())h[p]!==0&&(b=b.mul(u));return b},s.prototype.iushln=function(c){i(typeof c=="number"&&c>=0);var h=c%26,b=(c-h)/26,p=67108863>>>26-h<<26-h,u;if(h!==0){var _=0;for(u=0;u<this.length;u++){var w=this.words[u]&p,v=(this.words[u]|0)-w<<h;this.words[u]=v|_,_=w>>>26-h}_&&(this.words[u]=_,this.length++)}if(b!==0){for(u=this.length-1;u>=0;u--)this.words[u+b]=this.words[u];for(u=0;u<b;u++)this.words[u]=0;this.length+=b}return this.strip()},s.prototype.ishln=function(c){return i(this.negative===0),this.iushln(c)},s.prototype.iushrn=function(c,h,b){i(typeof c=="number"&&c>=0);var p;h?p=(h-h%26)/26:p=0;var u=c%26,_=Math.min((c-u)/26,this.length),w=67108863^67108863>>>u<<u,v=b;if(p-=_,p=Math.max(0,p),v){for(var l=0;l<_;l++)v.words[l]=this.words[l];v.length=_}if(_!==0)if(this.length>_)for(this.length-=_,l=0;l<this.length;l++)this.words[l]=this.words[l+_];else this.words[0]=0,this.length=1;var A=0;for(l=this.length-1;l>=0&&(A!==0||l>=p);l--){var K=this.words[l]|0;this.words[l]=A<<26-u|K>>>u,A=K&w}return v&&A!==0&&(v.words[v.length++]=A),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(c,h,b){return i(this.negative===0),this.iushrn(c,h,b)},s.prototype.shln=function(c){return this.clone().ishln(c)},s.prototype.ushln=function(c){return this.clone().iushln(c)},s.prototype.shrn=function(c){return this.clone().ishrn(c)},s.prototype.ushrn=function(c){return this.clone().iushrn(c)},s.prototype.testn=function(c){i(typeof c=="number"&&c>=0);var h=c%26,b=(c-h)/26,p=1<<h;if(this.length<=b)return!1;var u=this.words[b];return!!(u&p)},s.prototype.imaskn=function(c){i(typeof c=="number"&&c>=0);var h=c%26,b=(c-h)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(h!==0&&b++,this.length=Math.min(b,this.length),h!==0){var p=67108863^67108863>>>h<<h;this.words[this.length-1]&=p}return this.strip()},s.prototype.maskn=function(c){return this.clone().imaskn(c)},s.prototype.iaddn=function(c){return i(typeof c=="number"),i(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},s.prototype._iaddn=function(c){this.words[0]+=c;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},s.prototype.isubn=function(c){if(i(typeof c=="number"),i(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this.strip()},s.prototype.addn=function(c){return this.clone().iaddn(c)},s.prototype.subn=function(c){return this.clone().isubn(c)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(c,h,b){var p=c.length+b,u;this._expand(p);var _,w=0;for(u=0;u<c.length;u++){_=(this.words[u+b]|0)+w;var v=(c.words[u]|0)*h;_-=v&67108863,w=(_>>26)-(v/67108864|0),this.words[u+b]=_&67108863}for(;u<this.length-b;u++)_=(this.words[u+b]|0)+w,w=_>>26,this.words[u+b]=_&67108863;if(w===0)return this.strip();for(i(w===-1),w=0,u=0;u<this.length;u++)_=-(this.words[u]|0)+w,w=_>>26,this.words[u]=_&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(c,h){var b=this.length-c.length,p=this.clone(),u=c,_=u.words[u.length-1]|0,w=this._countBits(_);b=26-w,b!==0&&(u=u.ushln(b),p.iushln(b),_=u.words[u.length-1]|0);var v=p.length-u.length,l;if(h!=="mod"){l=new s(null),l.length=v+1,l.words=new Array(l.length);for(var A=0;A<l.length;A++)l.words[A]=0}var K=p.clone()._ishlnsubmul(u,1,v);K.negative===0&&(p=K,l&&(l.words[v]=1));for(var V=v-1;V>=0;V--){var J=(p.words[u.length+V]|0)*67108864+(p.words[u.length+V-1]|0);for(J=Math.min(J/_|0,67108863),p._ishlnsubmul(u,J,V);p.negative!==0;)J--,p.negative=0,p._ishlnsubmul(u,1,V),p.isZero()||(p.negative^=1);l&&(l.words[V]=J)}return l&&l.strip(),p.strip(),h!=="div"&&b!==0&&p.iushrn(b),{div:l||null,mod:p}},s.prototype.divmod=function(c,h,b){if(i(!c.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var p,u,_;return this.negative!==0&&c.negative===0?(_=this.neg().divmod(c,h),h!=="mod"&&(p=_.div.neg()),h!=="div"&&(u=_.mod.neg(),b&&u.negative!==0&&u.iadd(c)),{div:p,mod:u}):this.negative===0&&c.negative!==0?(_=this.divmod(c.neg(),h),h!=="mod"&&(p=_.div.neg()),{div:p,mod:_.mod}):this.negative&c.negative?(_=this.neg().divmod(c.neg(),h),h!=="div"&&(u=_.mod.neg(),b&&u.negative!==0&&u.isub(c)),{div:_.div,mod:u}):c.length>this.length||this.cmp(c)<0?{div:new s(0),mod:this}:c.length===1?h==="div"?{div:this.divn(c.words[0]),mod:null}:h==="mod"?{div:null,mod:new s(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new s(this.modn(c.words[0]))}:this._wordDiv(c,h)},s.prototype.div=function(c){return this.divmod(c,"div",!1).div},s.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},s.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},s.prototype.divRound=function(c){var h=this.divmod(c);if(h.mod.isZero())return h.div;var b=h.div.negative!==0?h.mod.isub(c):h.mod,p=c.ushrn(1),u=c.andln(1),_=b.cmp(p);return _<0||u===1&&_===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},s.prototype.modn=function(c){i(c<=67108863);for(var h=(1<<26)%c,b=0,p=this.length-1;p>=0;p--)b=(h*b+(this.words[p]|0))%c;return b},s.prototype.idivn=function(c){i(c<=67108863);for(var h=0,b=this.length-1;b>=0;b--){var p=(this.words[b]|0)+h*67108864;this.words[b]=p/c|0,h=p%c}return this.strip()},s.prototype.divn=function(c){return this.clone().idivn(c)},s.prototype.egcd=function(c){i(c.negative===0),i(!c.isZero());var h=this,b=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var p=new s(1),u=new s(0),_=new s(0),w=new s(1),v=0;h.isEven()&&b.isEven();)h.iushrn(1),b.iushrn(1),++v;for(var l=b.clone(),A=h.clone();!h.isZero();){for(var K=0,V=1;!(h.words[0]&V)&&K<26;++K,V<<=1);if(K>0)for(h.iushrn(K);K-- >0;)(p.isOdd()||u.isOdd())&&(p.iadd(l),u.isub(A)),p.iushrn(1),u.iushrn(1);for(var J=0,Z=1;!(b.words[0]&Z)&&J<26;++J,Z<<=1);if(J>0)for(b.iushrn(J);J-- >0;)(_.isOdd()||w.isOdd())&&(_.iadd(l),w.isub(A)),_.iushrn(1),w.iushrn(1);h.cmp(b)>=0?(h.isub(b),p.isub(_),u.isub(w)):(b.isub(h),_.isub(p),w.isub(u))}return{a:_,b:w,gcd:b.iushln(v)}},s.prototype._invmp=function(c){i(c.negative===0),i(!c.isZero());var h=this,b=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var p=new s(1),u=new s(0),_=b.clone();h.cmpn(1)>0&&b.cmpn(1)>0;){for(var w=0,v=1;!(h.words[0]&v)&&w<26;++w,v<<=1);if(w>0)for(h.iushrn(w);w-- >0;)p.isOdd()&&p.iadd(_),p.iushrn(1);for(var l=0,A=1;!(b.words[0]&A)&&l<26;++l,A<<=1);if(l>0)for(b.iushrn(l);l-- >0;)u.isOdd()&&u.iadd(_),u.iushrn(1);h.cmp(b)>=0?(h.isub(b),p.isub(u)):(b.isub(h),u.isub(p))}var K;return h.cmpn(1)===0?K=p:K=u,K.cmpn(0)<0&&K.iadd(c),K},s.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var h=this.clone(),b=c.clone();h.negative=0,b.negative=0;for(var p=0;h.isEven()&&b.isEven();p++)h.iushrn(1),b.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;b.isEven();)b.iushrn(1);var u=h.cmp(b);if(u<0){var _=h;h=b,b=_}else if(u===0||b.cmpn(1)===0)break;h.isub(b)}while(!0);return b.iushln(p)},s.prototype.invm=function(c){return this.egcd(c).a.umod(c)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(c){return this.words[0]&c},s.prototype.bincn=function(c){i(typeof c=="number");var h=c%26,b=(c-h)/26,p=1<<h;if(this.length<=b)return this._expand(b+1),this.words[b]|=p,this;for(var u=p,_=b;u!==0&&_<this.length;_++){var w=this.words[_]|0;w+=u,u=w>>>26,w&=67108863,this.words[_]=w}return u!==0&&(this.words[_]=u,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(c){var h=c<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this.strip();var b;if(this.length>1)b=1;else{h&&(c=-c),i(c<=67108863,"Number is too big");var p=this.words[0]|0;b=p===c?0:p<c?-1:1}return this.negative!==0?-b|0:b},s.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var h=this.ucmp(c);return this.negative!==0?-h|0:h},s.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var h=0,b=this.length-1;b>=0;b--){var p=this.words[b]|0,u=c.words[b]|0;if(p!==u){p<u?h=-1:p>u&&(h=1);break}}return h},s.prototype.gtn=function(c){return this.cmpn(c)===1},s.prototype.gt=function(c){return this.cmp(c)===1},s.prototype.gten=function(c){return this.cmpn(c)>=0},s.prototype.gte=function(c){return this.cmp(c)>=0},s.prototype.ltn=function(c){return this.cmpn(c)===-1},s.prototype.lt=function(c){return this.cmp(c)===-1},s.prototype.lten=function(c){return this.cmpn(c)<=0},s.prototype.lte=function(c){return this.cmp(c)<=0},s.prototype.eqn=function(c){return this.cmpn(c)===0},s.prototype.eq=function(c){return this.cmp(c)===0},s.red=function(c){return new T(c)},s.prototype.toRed=function(c){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(c){return this.red=c,this},s.prototype.forceRed=function(c){return i(!this.red,"Already a number in reduction context"),this._forceRed(c)},s.prototype.redAdd=function(c){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},s.prototype.redIAdd=function(c){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},s.prototype.redSub=function(c){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},s.prototype.redISub=function(c){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},s.prototype.redShl=function(c){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},s.prototype.redMul=function(c){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},s.prototype.redIMul=function(c){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(c){return i(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var z={k256:null,p224:null,p192:null,p25519:null};function F(E,c){this.name=E,this.p=new s(c,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}F.prototype._tmp=function(){var c=new s(null);return c.words=new Array(Math.ceil(this.n/13)),c},F.prototype.ireduce=function(c){var h=c,b;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),b=h.bitLength();while(b>this.n);var p=b<this.n?-1:h.ucmp(this.p);return p===0?(h.words[0]=0,h.length=1):p>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},F.prototype.split=function(c,h){c.iushrn(this.n,0,h)},F.prototype.imulK=function(c){return c.imul(this.k)};function W(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(W,F),W.prototype.split=function(c,h){for(var b=4194303,p=Math.min(c.length,9),u=0;u<p;u++)h.words[u]=c.words[u];if(h.length=p,c.length<=9){c.words[0]=0,c.length=1;return}var _=c.words[9];for(h.words[h.length++]=_&b,u=10;u<c.length;u++){var w=c.words[u]|0;c.words[u-10]=(w&b)<<4|_>>>22,_=w}_>>>=22,c.words[u-10]=_,_===0&&c.length>10?c.length-=10:c.length-=9},W.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var h=0,b=0;b<c.length;b++){var p=c.words[b]|0;h+=p*977,c.words[b]=h&67108863,h=p*64+(h/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function q(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(q,F);function G(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(G,F);function R(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(R,F),R.prototype.imulK=function(c){for(var h=0,b=0;b<c.length;b++){var p=(c.words[b]|0)*19+h,u=p&67108863;p>>>=26,c.words[b]=u,h=p}return h!==0&&(c.words[c.length++]=h),c},s._prime=function(c){if(z[c])return z[c];var h;if(c==="k256")h=new W;else if(c==="p224")h=new q;else if(c==="p192")h=new G;else if(c==="p25519")h=new R;else throw new Error("Unknown prime "+c);return z[c]=h,h};function T(E){if(typeof E=="string"){var c=s._prime(E);this.m=c.p,this.prime=c}else i(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}T.prototype._verify1=function(c){i(c.negative===0,"red works only with positives"),i(c.red,"red works only with red numbers")},T.prototype._verify2=function(c,h){i((c.negative|h.negative)===0,"red works only with positives"),i(c.red&&c.red===h.red,"red works only with red numbers")},T.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):c.umod(this.m)._forceRed(this)},T.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},T.prototype.add=function(c,h){this._verify2(c,h);var b=c.add(h);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},T.prototype.iadd=function(c,h){this._verify2(c,h);var b=c.iadd(h);return b.cmp(this.m)>=0&&b.isub(this.m),b},T.prototype.sub=function(c,h){this._verify2(c,h);var b=c.sub(h);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},T.prototype.isub=function(c,h){this._verify2(c,h);var b=c.isub(h);return b.cmpn(0)<0&&b.iadd(this.m),b},T.prototype.shl=function(c,h){return this._verify1(c),this.imod(c.ushln(h))},T.prototype.imul=function(c,h){return this._verify2(c,h),this.imod(c.imul(h))},T.prototype.mul=function(c,h){return this._verify2(c,h),this.imod(c.mul(h))},T.prototype.isqr=function(c){return this.imul(c,c.clone())},T.prototype.sqr=function(c){return this.mul(c,c)},T.prototype.sqrt=function(c){if(c.isZero())return c.clone();var h=this.m.andln(3);if(i(h%2===1),h===3){var b=this.m.add(new s(1)).iushrn(2);return this.pow(c,b)}for(var p=this.m.subn(1),u=0;!p.isZero()&&p.andln(1)===0;)u++,p.iushrn(1);i(!p.isZero());var _=new s(1).toRed(this),w=_.redNeg(),v=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);this.pow(l,v).cmp(w)!==0;)l.redIAdd(w);for(var A=this.pow(l,p),K=this.pow(c,p.addn(1).iushrn(1)),V=this.pow(c,p),J=u;V.cmp(_)!==0;){for(var Z=V,Y=0;Z.cmp(_)!==0;Y++)Z=Z.redSqr();i(Y<J);var $=this.pow(A,new s(1).iushln(J-Y-1));K=K.redMul($),A=$.redSqr(),V=V.redMul(A),J=Y}return K},T.prototype.invm=function(c){var h=c._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},T.prototype.pow=function(c,h){if(h.isZero())return new s(1).toRed(this);if(h.cmpn(1)===0)return c.clone();var b=4,p=new Array(1<<b);p[0]=new s(1).toRed(this),p[1]=c;for(var u=2;u<p.length;u++)p[u]=this.mul(p[u-1],c);var _=p[0],w=0,v=0,l=h.bitLength()%26;for(l===0&&(l=26),u=h.length-1;u>=0;u--){for(var A=h.words[u],K=l-1;K>=0;K--){var V=A>>K&1;if(_!==p[0]&&(_=this.sqr(_)),V===0&&w===0){v=0;continue}w<<=1,w|=V,v++,!(v!==b&&(u!==0||K!==0))&&(_=this.mul(_,p[w]),v=0,w=0)}l=26}return _},T.prototype.convertTo=function(c){var h=c.umod(this.m);return h===c?h.clone():h},T.prototype.convertFrom=function(c){var h=c.clone();return h.red=null,h},s.mont=function(c){return new x(c)};function x(E){T.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(x,T),x.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},x.prototype.convertFrom=function(c){var h=this.imod(c.mul(this.rinv));return h.red=null,h},x.prototype.imul=function(c,h){if(c.isZero()||h.isZero())return c.words[0]=0,c.length=1,c;var b=c.imul(h),p=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=b.isub(p).iushrn(this.shift),_=u;return u.cmp(this.m)>=0?_=u.isub(this.m):u.cmpn(0)<0&&(_=u.iadd(this.m)),_._forceRed(this)},x.prototype.mul=function(c,h){if(c.isZero()||h.isZero())return new s(0)._forceRed(this);var b=c.mul(h),p=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=b.isub(p).iushrn(this.shift),_=u;return u.cmp(this.m)>=0?_=u.isub(this.m):u.cmpn(0)<0&&(_=u.iadd(this.m)),_._forceRed(this)},x.prototype.invm=function(c){var h=this.imod(c._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(t,Ys)})(Hu);var Wi=Hu.exports,Gn=vp;function vp(t,e){if(!t)throw new Error(e||"Assertion failed")}vp.equal=function(e,r,i){if(e!=r)throw new Error(i||"Assertion failed: "+e+" != "+r)};var Fu={};(function(t){var e=t;function r(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var o=[];if(typeof s!="string"){for(var f=0;f<s.length;f++)o[f]=s[f]|0;return o}if(a==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var f=0;f<s.length;f+=2)o.push(parseInt(s[f]+s[f+1],16))}else for(var f=0;f<s.length;f++){var d=s.charCodeAt(f),g=d>>8,y=d&255;g?o.push(g,y):o.push(y)}return o}e.toArray=r;function i(s){return s.length===1?"0"+s:s}e.zero2=i;function n(s){for(var a="",o=0;o<s.length;o++)a+=i(s[o].toString(16));return a}e.toHex=n,e.encode=function(a,o){return o==="hex"?n(a):a}})(Fu);(function(t){var e=t,r=Wi,i=Gn,n=Fu;e.assert=i,e.toArray=n.toArray,e.zero2=n.zero2,e.toHex=n.toHex,e.encode=n.encode;function s(g,y,S){var O=new Array(Math.max(g.bitLength(),S)+1);O.fill(0);for(var P=1<<y+1,M=g.clone(),B=0;B<O.length;B++){var C,I=M.andln(P-1);M.isOdd()?(I>(P>>1)-1?C=(P>>1)-I:C=I,M.isubn(C)):C=0,O[B]=C,M.iushrn(1)}return O}e.getNAF=s;function a(g,y){var S=[[],[]];g=g.clone(),y=y.clone();for(var O=0,P=0,M;g.cmpn(-O)>0||y.cmpn(-P)>0;){var B=g.andln(3)+O&3,C=y.andln(3)+P&3;B===3&&(B=-1),C===3&&(C=-1);var I;B&1?(M=g.andln(7)+O&7,(M===3||M===5)&&C===2?I=-B:I=B):I=0,S[0].push(I);var z;C&1?(M=y.andln(7)+P&7,(M===3||M===5)&&B===2?z=-C:z=C):z=0,S[1].push(z),2*O===I+1&&(O=1-O),2*P===z+1&&(P=1-P),g.iushrn(1),y.iushrn(1)}return S}e.getJSF=a;function o(g,y,S){var O="_"+y;g.prototype[y]=function(){return this[O]!==void 0?this[O]:this[O]=S.call(this)}}e.cachedProperty=o;function f(g){return typeof g=="string"?e.toArray(g,"hex"):g}e.parseBytes=f;function d(g){return new r(g,"hex","le")}e.intFromLE=d})(Sr);var Ku={exports:{}},_f;Ku.exports=function(e){return _f||(_f=new un(null)),_f.generate(e)};function un(t){this.rand=t}Ku.exports.Rand=un;un.prototype.generate=function(e){return this._rand(e)};un.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),i=0;i<r.length;i++)r[i]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?un.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?un.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(un.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var $d=No;if(typeof $d.randomBytes!="function")throw new Error("Not supported");un.prototype._rand=function(e){return $d.randomBytes(e)}}catch{}var yp=Ku.exports,ju={},Rn=Wi,ya=Sr,so=ya.getNAF,j6=ya.getJSF,ao=ya.assert;function En(t,e){this.type=t,this.p=new Rn(e.p,16),this.red=e.prime?Rn.red(e.prime):Rn.mont(this.p),this.zero=new Rn(0).toRed(this.red),this.one=new Rn(1).toRed(this.red),this.two=new Rn(2).toRed(this.red),this.n=e.n&&new Rn(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Wo=En;En.prototype.point=function(){throw new Error("Not implemented")};En.prototype.validate=function(){throw new Error("Not implemented")};En.prototype._fixedNafMul=function(e,r){ao(e.precomputed);var i=e._getDoubles(),n=so(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var a=[],o,f;for(o=0;o<n.length;o+=i.step){f=0;for(var d=o+i.step-1;d>=o;d--)f=(f<<1)+n[d];a.push(f)}for(var g=this.jpoint(null,null,null),y=this.jpoint(null,null,null),S=s;S>0;S--){for(o=0;o<a.length;o++)f=a[o],f===S?y=y.mixedAdd(i.points[o]):f===-S&&(y=y.mixedAdd(i.points[o].neg()));g=g.add(y)}return g.toP()};En.prototype._wnafMul=function(e,r){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var s=n.points,a=so(r,i,this._bitLength),o=this.jpoint(null,null,null),f=a.length-1;f>=0;f--){for(var d=0;f>=0&&a[f]===0;f--)d++;if(f>=0&&d++,o=o.dblp(d),f<0)break;var g=a[f];ao(g!==0),e.type==="affine"?g>0?o=o.mixedAdd(s[g-1>>1]):o=o.mixedAdd(s[-g-1>>1].neg()):g>0?o=o.add(s[g-1>>1]):o=o.add(s[-g-1>>1].neg())}return e.type==="affine"?o.toP():o};En.prototype._wnafMulAdd=function(e,r,i,n,s){var a=this._wnafT1,o=this._wnafT2,f=this._wnafT3,d=0,g,y,S;for(g=0;g<n;g++){S=r[g];var O=S._getNAFPoints(e);a[g]=O.wnd,o[g]=O.points}for(g=n-1;g>=1;g-=2){var P=g-1,M=g;if(a[P]!==1||a[M]!==1){f[P]=so(i[P],a[P],this._bitLength),f[M]=so(i[M],a[M],this._bitLength),d=Math.max(f[P].length,d),d=Math.max(f[M].length,d);continue}var B=[r[P],null,null,r[M]];r[P].y.cmp(r[M].y)===0?(B[1]=r[P].add(r[M]),B[2]=r[P].toJ().mixedAdd(r[M].neg())):r[P].y.cmp(r[M].y.redNeg())===0?(B[1]=r[P].toJ().mixedAdd(r[M]),B[2]=r[P].add(r[M].neg())):(B[1]=r[P].toJ().mixedAdd(r[M]),B[2]=r[P].toJ().mixedAdd(r[M].neg()));var C=[-3,-1,-5,-7,0,7,5,1,3],I=j6(i[P],i[M]);for(d=Math.max(I[0].length,d),f[P]=new Array(d),f[M]=new Array(d),y=0;y<d;y++){var z=I[0][y]|0,F=I[1][y]|0;f[P][y]=C[(z+1)*3+(F+1)],f[M][y]=0,o[P]=B}}var W=this.jpoint(null,null,null),q=this._wnafT4;for(g=d;g>=0;g--){for(var G=0;g>=0;){var R=!0;for(y=0;y<n;y++)q[y]=f[y][g]|0,q[y]!==0&&(R=!1);if(!R)break;G++,g--}if(g>=0&&G++,W=W.dblp(G),g<0)break;for(y=0;y<n;y++){var T=q[y];T!==0&&(T>0?S=o[y][T-1>>1]:T<0&&(S=o[y][-T-1>>1].neg()),S.type==="affine"?W=W.mixedAdd(S):W=W.add(S))}}for(g=0;g<n;g++)o[g]=null;return s?W:W.toP()};function Lr(t,e){this.curve=t,this.type=e,this.precomputed=null}En.BasePoint=Lr;Lr.prototype.eq=function(){throw new Error("Not implemented")};Lr.prototype.validate=function(){return this.curve.validate(this)};En.prototype.decodePoint=function(e,r){e=ya.toArray(e,r);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?ao(e[e.length-1]%2===0):e[0]===7&&ao(e[e.length-1]%2===1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};Lr.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Lr.prototype._encode=function(e){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};Lr.prototype.encode=function(e,r){return ya.encode(this._encode(r),e)};Lr.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Lr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Lr.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,s=0;s<r;s+=e){for(var a=0;a<e;a++)n=n.dbl();i.push(n)}return{step:e,points:i}};Lr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:e,points:r}};Lr.prototype._getBeta=function(){return null};Lr.prototype.dblp=function(e){for(var r=this,i=0;i<e;i++)r=r.dbl();return r};var G6=Sr,lt=Wi,Gu=At,Ss=Wo,V6=G6.assert;function Nr(t){Ss.call(this,"short",t),this.a=new lt(t.a,16).toRed(this.red),this.b=new lt(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Gu(Nr,Ss);var z6=Nr;Nr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(e.beta)r=new lt(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(e.lambda)i=new lt(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],V6(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var a;return e.basis?a=e.basis.map(function(o){return{a:new lt(o.a,16),b:new lt(o.b,16)}}):a=this._getEndoBasis(i),{beta:r,lambda:i,basis:a}}};Nr.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:lt.mont(e),i=new lt(2).toRed(r).redInvm(),n=i.redNeg(),s=new lt(3).toRed(r).redNeg().redSqrt().redMul(i),a=n.redAdd(s).fromRed(),o=n.redSub(s).fromRed();return[a,o]};Nr.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),s=new lt(1),a=new lt(0),o=new lt(0),f=new lt(1),d,g,y,S,O,P,M,B=0,C,I;i.cmpn(0)!==0;){var z=n.div(i);C=n.sub(z.mul(i)),I=o.sub(z.mul(s));var F=f.sub(z.mul(a));if(!y&&C.cmp(r)<0)d=M.neg(),g=s,y=C.neg(),S=I;else if(y&&++B===2)break;M=C,n=i,i=C,o=s,s=I,f=a,a=F}O=C.neg(),P=I;var W=y.sqr().add(S.sqr()),q=O.sqr().add(P.sqr());return q.cmp(W)>=0&&(O=d,P=g),y.negative&&(y=y.neg(),S=S.neg()),O.negative&&(O=O.neg(),P=P.neg()),[{a:y,b:S},{a:O,b:P}]};Nr.prototype._endoSplit=function(e){var r=this.endo.basis,i=r[0],n=r[1],s=n.b.mul(e).divRound(this.n),a=i.b.neg().mul(e).divRound(this.n),o=s.mul(i.a),f=a.mul(n.a),d=s.mul(i.b),g=a.mul(n.b),y=e.sub(o).sub(f),S=d.add(g).neg();return{k1:y,k2:S}};Nr.prototype.pointFromX=function(e,r){e=new lt(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();return(r&&!s||!r&&s)&&(n=n.redNeg()),this.point(e,n)};Nr.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,i=e.y,n=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};Nr.prototype._endoWnafMulAdd=function(e,r,i){for(var n=this._endoWnafT1,s=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(r[a]),f=e[a],d=f._getBeta();o.k1.negative&&(o.k1.ineg(),f=f.neg(!0)),o.k2.negative&&(o.k2.ineg(),d=d.neg(!0)),n[a*2]=f,n[a*2+1]=d,s[a*2]=o.k1,s[a*2+1]=o.k2}for(var g=this._wnafMulAdd(1,n,s,a*2,i),y=0;y<a*2;y++)n[y]=null,s[y]=null;return g};function Ft(t,e,r,i){Ss.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new lt(e,16),this.y=new lt(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Gu(Ft,Ss.BasePoint);Nr.prototype.point=function(e,r,i){return new Ft(this,e,r,i)};Nr.prototype.pointFromJSON=function(e,r){return Ft.fromJSON(this,e,r)};Ft.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return r}};Ft.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Ft.fromJSON=function(e,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=e.point(r[0],r[1],i);if(!r[2])return n;function s(o){return e.point(o[0],o[1],i)}var a=r[2];return n.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[n].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[n].concat(a.naf.points.map(s))}},n};Ft.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Ft.prototype.isInfinity=function(){return this.inf};Ft.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(e.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};Ft.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),a=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Ft.prototype.getX=function(){return this.x.fromRed()};Ft.prototype.getY=function(){return this.y.fromRed()};Ft.prototype.mul=function(e){return e=new lt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Ft.prototype.mulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)};Ft.prototype.jmulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)};Ft.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Ft.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r};Ft.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Gt(t,e,r,i){Ss.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new lt(0)):(this.x=new lt(e,16),this.y=new lt(r,16),this.z=new lt(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Gu(Gt,Ss.BasePoint);Nr.prototype.jpoint=function(e,r,i){return new Gt(this,e,r,i)};Gt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(e);return this.curve.point(i,n)};Gt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Gt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),s=e.x.redMul(i),a=this.y.redMul(r.redMul(e.z)),o=e.y.redMul(i.redMul(this.z)),f=n.redSub(s),d=a.redSub(o);if(f.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=f.redSqr(),y=g.redMul(f),S=n.redMul(g),O=d.redSqr().redIAdd(y).redISub(S).redISub(S),P=d.redMul(S.redISub(O)).redISub(a.redMul(y)),M=this.z.redMul(e.z).redMul(f);return this.curve.jpoint(O,P,M)};Gt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=e.x.redMul(r),s=this.y,a=e.y.redMul(r).redMul(this.z),o=i.redSub(n),f=s.redSub(a);if(o.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=o.redSqr(),g=d.redMul(o),y=i.redMul(d),S=f.redSqr().redIAdd(g).redISub(y).redISub(y),O=f.redMul(y.redISub(S)).redISub(s.redMul(g)),P=this.z.redMul(o);return this.curve.jpoint(S,O,P)};Gt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<e;r++)i=i.dbl();return i}var n=this.curve.a,s=this.curve.tinv,a=this.x,o=this.y,f=this.z,d=f.redSqr().redSqr(),g=o.redAdd(o);for(r=0;r<e;r++){var y=a.redSqr(),S=g.redSqr(),O=S.redSqr(),P=y.redAdd(y).redIAdd(y).redIAdd(n.redMul(d)),M=a.redMul(S),B=P.redSqr().redISub(M.redAdd(M)),C=M.redISub(B),I=P.redMul(C);I=I.redIAdd(I).redISub(O);var z=g.redMul(f);r+1<e&&(d=d.redMul(O)),a=B,f=z,g=I}return this.curve.jpoint(a,g.redMul(s),f)};Gt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Gt.prototype._zeroDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var f=n.redAdd(n).redIAdd(n),d=f.redSqr().redISub(o).redISub(o),g=a.redIAdd(a);g=g.redIAdd(g),g=g.redIAdd(g),e=d,r=f.redMul(o.redISub(d)).redISub(g),i=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),S=this.y.redSqr(),O=S.redSqr(),P=this.x.redAdd(S).redSqr().redISub(y).redISub(O);P=P.redIAdd(P);var M=y.redAdd(y).redIAdd(y),B=M.redSqr(),C=O.redIAdd(O);C=C.redIAdd(C),C=C.redIAdd(C),e=B.redISub(P).redISub(P),r=M.redMul(P.redISub(e)).redISub(C),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,r,i)};Gt.prototype._threeDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var f=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),d=f.redSqr().redISub(o).redISub(o);e=d;var g=a.redIAdd(a);g=g.redIAdd(g),g=g.redIAdd(g),r=f.redMul(o.redISub(d)).redISub(g),i=this.y.redAdd(this.y)}else{var y=this.z.redSqr(),S=this.y.redSqr(),O=this.x.redMul(S),P=this.x.redSub(y).redMul(this.x.redAdd(y));P=P.redAdd(P).redIAdd(P);var M=O.redIAdd(O);M=M.redIAdd(M);var B=M.redAdd(M);e=P.redSqr().redISub(B),i=this.y.redAdd(this.z).redSqr().redISub(S).redISub(y);var C=S.redSqr();C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C),r=P.redMul(M.redISub(e)).redISub(C)}return this.curve.jpoint(e,r,i)};Gt.prototype._dbl=function(){var e=this.curve.a,r=this.x,i=this.y,n=this.z,s=n.redSqr().redSqr(),a=r.redSqr(),o=i.redSqr(),f=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s)),d=r.redAdd(r);d=d.redIAdd(d);var g=d.redMul(o),y=f.redSqr().redISub(g.redAdd(g)),S=g.redISub(y),O=o.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var P=f.redMul(S).redISub(O),M=i.redAdd(i).redMul(n);return this.curve.jpoint(y,P,M)};Gt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),s=e.redAdd(e).redIAdd(e),a=s.redSqr(),o=this.x.redAdd(r).redSqr().redISub(e).redISub(n);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);var f=o.redSqr(),d=n.redIAdd(n);d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var g=s.redIAdd(o).redSqr().redISub(a).redISub(f).redISub(d),y=r.redMul(g);y=y.redIAdd(y),y=y.redIAdd(y);var S=this.x.redMul(f).redISub(y);S=S.redIAdd(S),S=S.redIAdd(S);var O=this.y.redMul(g.redMul(d.redISub(g)).redISub(o.redMul(f)));O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var P=this.z.redAdd(o).redSqr().redISub(i).redISub(f);return this.curve.jpoint(S,O,P)};Gt.prototype.mul=function(e,r){return e=new lt(e,r),this.curve._wnafMul(this,e)};Gt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),s=i.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)===0};Gt.prototype.eqXToP=function(e){var r=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),s=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}};Gt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Gt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var es=Wi,_p=At,Jo=Wo,q6=Sr;function Rs(t){Jo.call(this,"mont",t),this.a=new es(t.a,16).toRed(this.red),this.b=new es(t.b,16).toRed(this.red),this.i4=new es(4).toRed(this.red).redInvm(),this.two=new es(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}_p(Rs,Jo);var W6=Rs;Rs.prototype.validate=function(e){var r=e.normalize().x,i=r.redSqr(),n=i.redMul(r).redAdd(i.redMul(this.a)).redAdd(r),s=n.redSqrt();return s.redSqr().cmp(n)===0};function Ht(t,e,r){Jo.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new es(e,16),this.z=new es(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}_p(Ht,Jo.BasePoint);Rs.prototype.decodePoint=function(e,r){return this.point(q6.toArray(e,r),1)};Rs.prototype.point=function(e,r){return new Ht(this,e,r)};Rs.prototype.pointFromJSON=function(e){return Ht.fromJSON(this,e)};Ht.prototype.precompute=function(){};Ht.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Ht.fromJSON=function(e,r){return new Ht(e,r[0],r[1]||e.one)};Ht.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ht.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Ht.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),i=this.x.redSub(this.z),n=i.redSqr(),s=r.redSub(n),a=r.redMul(n),o=s.redMul(n.redAdd(this.curve.a24.redMul(s)));return this.curve.point(a,o)};Ht.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Ht.prototype.diffAdd=function(e,r){var i=this.x.redAdd(this.z),n=this.x.redSub(this.z),s=e.x.redAdd(e.z),a=e.x.redSub(e.z),o=a.redMul(i),f=s.redMul(n),d=r.z.redMul(o.redAdd(f).redSqr()),g=r.x.redMul(o.redISub(f).redSqr());return this.curve.point(d,g)};Ht.prototype.mul=function(e){for(var r=e.clone(),i=this,n=this.curve.point(null,null),s=this,a=[];r.cmpn(0)!==0;r.iushrn(1))a.push(r.andln(1));for(var o=a.length-1;o>=0;o--)a[o]===0?(i=i.diffAdd(n,s),n=n.dbl()):(n=i.diffAdd(n,s),i=i.dbl());return n};Ht.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Ht.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Ht.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Ht.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Ht.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var J6=Sr,Ui=Wi,wp=At,Zo=Wo,Z6=J6.assert;function wi(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Zo.call(this,"edwards",t),this.a=new Ui(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Ui(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Ui(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),Z6(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}wp(wi,Zo);var X6=wi;wi.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};wi.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};wi.prototype.jpoint=function(e,r,i,n){return this.point(e,r,i,n)};wi.prototype.pointFromX=function(e,r){e=new Ui(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),a=n.redMul(s.redInvm()),o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var f=o.fromRed().isOdd();return(r&&!f||!r&&f)&&(o=o.redNeg()),this.point(e,o)};wi.prototype.pointFromY=function(e,r){e=new Ui(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),a=n.redMul(s.redInvm());if(a.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");return o.fromRed().isOdd()!==r&&(o=o.redNeg()),this.point(o,e)};wi.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),i=e.y.redSqr(),n=r.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(i)));return n.cmp(s)===0};function rt(t,e,r,i,n){Zo.BasePoint.call(this,t,"projective"),e===null&&r===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Ui(e,16),this.y=new Ui(r,16),this.z=i?new Ui(i,16):this.curve.one,this.t=n&&new Ui(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}wp(rt,Zo.BasePoint);wi.prototype.pointFromJSON=function(e){return rt.fromJSON(this,e)};wi.prototype.point=function(e,r,i,n){return new rt(this,e,r,i,n)};rt.fromJSON=function(e,r){return new rt(e,r[0],r[1],r[2])};rt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};rt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};rt.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var n=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),a=n.redAdd(r),o=a.redSub(i),f=n.redSub(r),d=s.redMul(o),g=a.redMul(f),y=s.redMul(f),S=o.redMul(a);return this.curve.point(d,g,S,y)};rt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),i=this.y.redSqr(),n,s,a,o,f,d;if(this.curve.twisted){o=this.curve._mulA(r);var g=o.redAdd(i);this.zOne?(n=e.redSub(r).redSub(i).redMul(g.redSub(this.curve.two)),s=g.redMul(o.redSub(i)),a=g.redSqr().redSub(g).redSub(g)):(f=this.z.redSqr(),d=g.redSub(f).redISub(f),n=e.redSub(r).redISub(i).redMul(d),s=g.redMul(o.redSub(i)),a=g.redMul(d))}else o=r.redAdd(i),f=this.curve._mulC(this.z).redSqr(),d=o.redSub(f).redSub(f),n=this.curve._mulC(e.redISub(o)).redMul(d),s=this.curve._mulC(o).redMul(r.redISub(i)),a=o.redMul(d);return this.curve.point(n,s,a)};rt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};rt.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),a=i.redSub(r),o=s.redSub(n),f=s.redAdd(n),d=i.redAdd(r),g=a.redMul(o),y=f.redMul(d),S=a.redMul(d),O=o.redMul(f);return this.curve.point(g,y,O,S)};rt.prototype._projAdd=function(e){var r=this.z.redMul(e.z),i=r.redSqr(),n=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(n).redMul(s),o=i.redSub(a),f=i.redAdd(a),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(s),g=r.redMul(o).redMul(d),y,S;return this.curve.twisted?(y=r.redMul(f).redMul(s.redSub(this.curve._mulA(n))),S=o.redMul(f)):(y=r.redMul(f).redMul(s.redSub(n)),S=this.curve._mulC(o).redMul(f)),this.curve.point(g,y,S)};rt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};rt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};rt.prototype.mulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!1)};rt.prototype.jmulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!0)};rt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};rt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};rt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};rt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};rt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};rt.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),n=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),this.x.cmp(r)===0)return!0}};rt.prototype.toP=rt.prototype.normalize;rt.prototype.mixedAdd=rt.prototype.add;(function(t){var e=t;e.base=Wo,e.short=z6,e.mont=W6,e.edwards=X6})(ju);var Xo={},Yo={},Be={},Y6=Gn,Q6=At;Be.inherits=Q6;function e3(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function t3(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var i=0,n=0;n<t.length;n++){var s=t.charCodeAt(n);s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):e3(t,n)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128)}else for(n=0;n<t.length;n++)r[n]=t[n]|0;return r}Be.toArray=t3;function r3(t){for(var e="",r=0;r<t.length;r++)e+=xp(t[r].toString(16));return e}Be.toHex=r3;function Ep(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Be.htonl=Ep;function i3(t,e){for(var r="",i=0;i<t.length;i++){var n=t[i];e==="little"&&(n=Ep(n)),r+=Ap(n.toString(16))}return r}Be.toHex32=i3;function xp(t){return t.length===1?"0"+t:t}Be.zero2=xp;function Ap(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Be.zero8=Ap;function n3(t,e,r,i){var n=r-e;Y6(n%4===0);for(var s=new Array(n/4),a=0,o=e;a<s.length;a++,o+=4){var f;i==="big"?f=t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3]:f=t[o+3]<<24|t[o+2]<<16|t[o+1]<<8|t[o],s[a]=f>>>0}return s}Be.join32=n3;function s3(t,e){for(var r=new Array(t.length*4),i=0,n=0;i<t.length;i++,n+=4){var s=t[i];e==="big"?(r[n]=s>>>24,r[n+1]=s>>>16&255,r[n+2]=s>>>8&255,r[n+3]=s&255):(r[n+3]=s>>>24,r[n+2]=s>>>16&255,r[n+1]=s>>>8&255,r[n]=s&255)}return r}Be.split32=s3;function a3(t,e){return t>>>e|t<<32-e}Be.rotr32=a3;function o3(t,e){return t<<e|t>>>32-e}Be.rotl32=o3;function c3(t,e){return t+e>>>0}Be.sum32=c3;function f3(t,e,r){return t+e+r>>>0}Be.sum32_3=f3;function u3(t,e,r,i){return t+e+r+i>>>0}Be.sum32_4=u3;function h3(t,e,r,i,n){return t+e+r+i+n>>>0}Be.sum32_5=h3;function d3(t,e,r,i){var n=t[e],s=t[e+1],a=i+s>>>0,o=(a<i?1:0)+r+n;t[e]=o>>>0,t[e+1]=a}Be.sum64=d3;function l3(t,e,r,i){var n=e+i>>>0,s=(n<e?1:0)+t+r;return s>>>0}Be.sum64_hi=l3;function p3(t,e,r,i){var n=e+i;return n>>>0}Be.sum64_lo=p3;function b3(t,e,r,i,n,s,a,o){var f=0,d=e;d=d+i>>>0,f+=d<e?1:0,d=d+s>>>0,f+=d<s?1:0,d=d+o>>>0,f+=d<o?1:0;var g=t+r+n+a+f;return g>>>0}Be.sum64_4_hi=b3;function g3(t,e,r,i,n,s,a,o){var f=e+i+s+o;return f>>>0}Be.sum64_4_lo=g3;function m3(t,e,r,i,n,s,a,o,f,d){var g=0,y=e;y=y+i>>>0,g+=y<e?1:0,y=y+s>>>0,g+=y<s?1:0,y=y+o>>>0,g+=y<o?1:0,y=y+d>>>0,g+=y<d?1:0;var S=t+r+n+a+f+g;return S>>>0}Be.sum64_5_hi=m3;function v3(t,e,r,i,n,s,a,o,f,d){var g=e+i+s+o+d;return g>>>0}Be.sum64_5_lo=v3;function y3(t,e,r){var i=e<<32-r|t>>>r;return i>>>0}Be.rotr64_hi=y3;function _3(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}Be.rotr64_lo=_3;function w3(t,e,r){return t>>>r}Be.shr64_hi=w3;function E3(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}Be.shr64_lo=E3;var Os={},Ud=Be,x3=Gn;function Qo(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Os.BlockHash=Qo;Qo.prototype.update=function(e,r){if(e=Ud.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=Ud.join32(e,0,e.length-i,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this};Qo.prototype.digest=function(e){return this.update(this._pad()),x3(this.pending===null),this._digest(e)};Qo.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,i=r-(e+this.padLength)%r,n=new Array(i+this.padLength);n[0]=128;for(var s=1;s<i;s++)n[s]=0;if(e<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)n[s++]=0;n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=e>>>24&255,n[s++]=e>>>16&255,n[s++]=e>>>8&255,n[s++]=e&255}else for(n[s++]=e&255,n[s++]=e>>>8&255,n[s++]=e>>>16&255,n[s++]=e>>>24&255,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,a=8;a<this.padLength;a++)n[s++]=0;return n};var Ps={},Ei={},A3=Be,oi=A3.rotr32;function S3(t,e,r,i){if(t===0)return Sp(e,r,i);if(t===1||t===3)return Op(e,r,i);if(t===2)return Rp(e,r,i)}Ei.ft_1=S3;function Sp(t,e,r){return t&e^~t&r}Ei.ch32=Sp;function Rp(t,e,r){return t&e^t&r^e&r}Ei.maj32=Rp;function Op(t,e,r){return t^e^r}Ei.p32=Op;function R3(t){return oi(t,2)^oi(t,13)^oi(t,22)}Ei.s0_256=R3;function O3(t){return oi(t,6)^oi(t,11)^oi(t,25)}Ei.s1_256=O3;function P3(t){return oi(t,7)^oi(t,18)^t>>>3}Ei.g0_256=P3;function I3(t){return oi(t,17)^oi(t,19)^t>>>10}Ei.g1_256=I3;var hs=Be,T3=Os,M3=Ei,wf=hs.rotl32,Ks=hs.sum32,L3=hs.sum32_5,N3=M3.ft_1,Pp=T3.BlockHash,C3=[1518500249,1859775393,2400959708,3395469782];function pi(){if(!(this instanceof pi))return new pi;Pp.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}hs.inherits(pi,Pp);var B3=pi;pi.blockSize=512;pi.outSize=160;pi.hmacStrength=80;pi.padLength=64;pi.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=wf(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var s=this.h[0],a=this.h[1],o=this.h[2],f=this.h[3],d=this.h[4];for(n=0;n<i.length;n++){var g=~~(n/20),y=L3(wf(s,5),N3(g,a,o,f),d,i[n],C3[g]);d=f,f=o,o=wf(a,30),a=s,s=y}this.h[0]=Ks(this.h[0],s),this.h[1]=Ks(this.h[1],a),this.h[2]=Ks(this.h[2],o),this.h[3]=Ks(this.h[3],f),this.h[4]=Ks(this.h[4],d)};pi.prototype._digest=function(e){return e==="hex"?hs.toHex32(this.h,"big"):hs.split32(this.h,"big")};var ds=Be,D3=Os,Is=Ei,k3=Gn,Br=ds.sum32,$3=ds.sum32_4,U3=ds.sum32_5,H3=Is.ch32,F3=Is.maj32,K3=Is.s0_256,j3=Is.s1_256,G3=Is.g0_256,V3=Is.g1_256,Ip=D3.BlockHash,z3=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bi(){if(!(this instanceof bi))return new bi;Ip.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=z3,this.W=new Array(64)}ds.inherits(bi,Ip);var Tp=bi;bi.blockSize=512;bi.outSize=256;bi.hmacStrength=192;bi.padLength=64;bi.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=$3(V3(i[n-2]),i[n-7],G3(i[n-15]),i[n-16]);var s=this.h[0],a=this.h[1],o=this.h[2],f=this.h[3],d=this.h[4],g=this.h[5],y=this.h[6],S=this.h[7];for(k3(this.k.length===i.length),n=0;n<i.length;n++){var O=U3(S,j3(d),H3(d,g,y),this.k[n],i[n]),P=Br(K3(s),F3(s,a,o));S=y,y=g,g=d,d=Br(f,O),f=o,o=a,a=s,s=Br(O,P)}this.h[0]=Br(this.h[0],s),this.h[1]=Br(this.h[1],a),this.h[2]=Br(this.h[2],o),this.h[3]=Br(this.h[3],f),this.h[4]=Br(this.h[4],d),this.h[5]=Br(this.h[5],g),this.h[6]=Br(this.h[6],y),this.h[7]=Br(this.h[7],S)};bi.prototype._digest=function(e){return e==="hex"?ds.toHex32(this.h,"big"):ds.split32(this.h,"big")};var eu=Be,Mp=Tp;function zi(){if(!(this instanceof zi))return new zi;Mp.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}eu.inherits(zi,Mp);var q3=zi;zi.blockSize=512;zi.outSize=224;zi.hmacStrength=192;zi.padLength=64;zi.prototype._digest=function(e){return e==="hex"?eu.toHex32(this.h.slice(0,7),"big"):eu.split32(this.h.slice(0,7),"big")};var lr=Be,W3=Os,J3=Gn,ci=lr.rotr64_hi,fi=lr.rotr64_lo,Lp=lr.shr64_hi,Np=lr.shr64_lo,Qi=lr.sum64,Ef=lr.sum64_hi,xf=lr.sum64_lo,Z3=lr.sum64_4_hi,X3=lr.sum64_4_lo,Y3=lr.sum64_5_hi,Q3=lr.sum64_5_lo,Cp=W3.BlockHash,e_=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ur(){if(!(this instanceof Ur))return new Ur;Cp.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=e_,this.W=new Array(160)}lr.inherits(Ur,Cp);var Bp=Ur;Ur.blockSize=1024;Ur.outSize=512;Ur.hmacStrength=192;Ur.padLength=128;Ur.prototype._prepareBlock=function(e,r){for(var i=this.W,n=0;n<32;n++)i[n]=e[r+n];for(;n<i.length;n+=2){var s=h_(i[n-4],i[n-3]),a=d_(i[n-4],i[n-3]),o=i[n-14],f=i[n-13],d=f_(i[n-30],i[n-29]),g=u_(i[n-30],i[n-29]),y=i[n-32],S=i[n-31];i[n]=Z3(s,a,o,f,d,g,y,S),i[n+1]=X3(s,a,o,f,d,g,y,S)}};Ur.prototype._update=function(e,r){this._prepareBlock(e,r);var i=this.W,n=this.h[0],s=this.h[1],a=this.h[2],o=this.h[3],f=this.h[4],d=this.h[5],g=this.h[6],y=this.h[7],S=this.h[8],O=this.h[9],P=this.h[10],M=this.h[11],B=this.h[12],C=this.h[13],I=this.h[14],z=this.h[15];J3(this.k.length===i.length);for(var F=0;F<i.length;F+=2){var W=I,q=z,G=o_(S,O),R=c_(S,O),T=t_(S,O,P,M,B),x=r_(S,O,P,M,B,C),E=this.k[F],c=this.k[F+1],h=i[F],b=i[F+1],p=Y3(W,q,G,R,T,x,E,c,h,b),u=Q3(W,q,G,R,T,x,E,c,h,b);W=s_(n,s),q=a_(n,s),G=i_(n,s,a,o,f),R=n_(n,s,a,o,f,d);var _=Ef(W,q,G,R),w=xf(W,q,G,R);I=B,z=C,B=P,C=M,P=S,M=O,S=Ef(g,y,p,u),O=xf(y,y,p,u),g=f,y=d,f=a,d=o,a=n,o=s,n=Ef(p,u,_,w),s=xf(p,u,_,w)}Qi(this.h,0,n,s),Qi(this.h,2,a,o),Qi(this.h,4,f,d),Qi(this.h,6,g,y),Qi(this.h,8,S,O),Qi(this.h,10,P,M),Qi(this.h,12,B,C),Qi(this.h,14,I,z)};Ur.prototype._digest=function(e){return e==="hex"?lr.toHex32(this.h,"big"):lr.split32(this.h,"big")};function t_(t,e,r,i,n){var s=t&r^~t&n;return s<0&&(s+=4294967296),s}function r_(t,e,r,i,n,s){var a=e&i^~e&s;return a<0&&(a+=4294967296),a}function i_(t,e,r,i,n){var s=t&r^t&n^r&n;return s<0&&(s+=4294967296),s}function n_(t,e,r,i,n,s){var a=e&i^e&s^i&s;return a<0&&(a+=4294967296),a}function s_(t,e){var r=ci(t,e,28),i=ci(e,t,2),n=ci(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function a_(t,e){var r=fi(t,e,28),i=fi(e,t,2),n=fi(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function o_(t,e){var r=ci(t,e,14),i=ci(t,e,18),n=ci(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function c_(t,e){var r=fi(t,e,14),i=fi(t,e,18),n=fi(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function f_(t,e){var r=ci(t,e,1),i=ci(t,e,8),n=Lp(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function u_(t,e){var r=fi(t,e,1),i=fi(t,e,8),n=Np(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function h_(t,e){var r=ci(t,e,19),i=ci(e,t,29),n=Lp(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}function d_(t,e){var r=fi(t,e,19),i=fi(e,t,29),n=Np(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}var tu=Be,Dp=Bp;function qi(){if(!(this instanceof qi))return new qi;Dp.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}tu.inherits(qi,Dp);var l_=qi;qi.blockSize=1024;qi.outSize=384;qi.hmacStrength=192;qi.padLength=128;qi.prototype._digest=function(e){return e==="hex"?tu.toHex32(this.h.slice(0,12),"big"):tu.split32(this.h.slice(0,12),"big")};Ps.sha1=B3;Ps.sha224=q3;Ps.sha256=Tp;Ps.sha384=l_;Ps.sha512=Bp;var kp={},$n=Be,p_=Os,Ta=$n.rotl32,Hd=$n.sum32,js=$n.sum32_3,Fd=$n.sum32_4,$p=p_.BlockHash;function gi(){if(!(this instanceof gi))return new gi;$p.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}$n.inherits(gi,$p);kp.ripemd160=gi;gi.blockSize=512;gi.outSize=160;gi.hmacStrength=192;gi.padLength=64;gi.prototype._update=function(e,r){for(var i=this.h[0],n=this.h[1],s=this.h[2],a=this.h[3],o=this.h[4],f=i,d=n,g=s,y=a,S=o,O=0;O<80;O++){var P=Hd(Ta(Fd(i,Kd(O,n,s,a),e[m_[O]+r],b_(O)),y_[O]),o);i=o,o=a,a=Ta(s,10),s=n,n=P,P=Hd(Ta(Fd(f,Kd(79-O,d,g,y),e[v_[O]+r],g_(O)),__[O]),S),f=S,S=y,y=Ta(g,10),g=d,d=P}P=js(this.h[1],s,y),this.h[1]=js(this.h[2],a,S),this.h[2]=js(this.h[3],o,f),this.h[3]=js(this.h[4],i,d),this.h[4]=js(this.h[0],n,g),this.h[0]=P};gi.prototype._digest=function(e){return e==="hex"?$n.toHex32(this.h,"little"):$n.split32(this.h,"little")};function Kd(t,e,r,i){return t<=15?e^r^i:t<=31?e&r|~e&i:t<=47?(e|~r)^i:t<=63?e&i|r&~i:e^(r|~i)}function b_(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function g_(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var m_=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v_=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y_=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],__=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],w_=Be,E_=Gn;function ls(t,e,r){if(!(this instanceof ls))return new ls(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(w_.toArray(e,r))}var x_=ls;ls.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),E_(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};ls.prototype.update=function(e,r){return this.inner.update(e,r),this};ls.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Be,e.common=Os,e.sha=Ps,e.ripemd=kp,e.hmac=x_,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Yo);var Af,jd;function A_(){return jd||(jd=1,Af={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Af}(function(t){var e=t,r=Yo,i=ju,n=Sr,s=n.assert;function a(d){d.type==="short"?this.curve=new i.short(d):d.type==="edwards"?this.curve=new i.edwards(d):this.curve=new i.mont(d),this.g=this.curve.g,this.n=this.curve.n,this.hash=d.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=a;function o(d,g){Object.defineProperty(e,d,{configurable:!0,enumerable:!0,get:function(){var y=new a(g);return Object.defineProperty(e,d,{configurable:!0,enumerable:!0,value:y}),y}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var f;try{f=A_()}catch{f=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",f]})})(Xo);var S_=Yo,Cn=Fu,Up=Gn;function gn(t){if(!(this instanceof gn))return new gn(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Cn.toArray(t.entropy,t.entropyEnc||"hex"),r=Cn.toArray(t.nonce,t.nonceEnc||"hex"),i=Cn.toArray(t.pers,t.persEnc||"hex");Up(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}var R_=gn;gn.prototype._init=function(e,r,i){var n=e.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656};gn.prototype._hmac=function(){return new S_.hmac(this.hash,this.K)};gn.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};gn.prototype.reseed=function(e,r,i,n){typeof r!="string"&&(n=i,i=r,r=null),e=Cn.toArray(e,r),i=Cn.toArray(i,n),Up(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1};gn.prototype.generate=function(e,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(n=i,i=r,r=null),i&&(i=Cn.toArray(i,n||"hex"),this._update(i));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,e);return this._update(i),this._reseed++,Cn.encode(a,r)};var O_=Wi,P_=Sr,ru=P_.assert;function rr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var I_=rr;rr.fromPublic=function(e,r,i){return r instanceof rr?r:new rr(e,{pub:r,pubEnc:i})};rr.fromPrivate=function(e,r,i){return r instanceof rr?r:new rr(e,{priv:r,privEnc:i})};rr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};rr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};rr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};rr.prototype._importPrivate=function(e,r){this.priv=new O_(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};rr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?ru(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&ru(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};rr.prototype.derive=function(e){return e.validate()||ru(e.validate(),"public point not validated"),e.mul(this.priv).getX()};rr.prototype.sign=function(e,r,i){return this.ec.sign(e,this,r,i)};rr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};rr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var oo=Wi,Vu=Sr,T_=Vu.assert;function ec(t,e){if(t instanceof ec)return t;this._importDER(t,e)||(T_(t.r&&t.s,"Signature without r or s"),this.r=new oo(t.r,16),this.s=new oo(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var M_=ec;function L_(){this.place=0}function Sf(t,e){var r=t[e.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var n=0,s=0,a=e.place;s<i;s++,a++)n<<=8,n|=t[a],n>>>=0;return n<=127?!1:(e.place=a,n)}function Gd(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}ec.prototype._importDER=function(e,r){e=Vu.toArray(e,r);var i=new L_;if(e[i.place++]!==48)return!1;var n=Sf(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var s=Sf(e,i);if(s===!1)return!1;var a=e.slice(i.place,s+i.place);if(i.place+=s,e[i.place++]!==2)return!1;var o=Sf(e,i);if(o===!1||e.length!==o+i.place)return!1;var f=e.slice(i.place,o+i.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(f[0]===0)if(f[1]&128)f=f.slice(1);else return!1;return this.r=new oo(a),this.s=new oo(f),this.recoveryParam=null,!0};function Rf(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}ec.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=Gd(r),i=Gd(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];Rf(n,r.length),n=n.concat(r),n.push(2),Rf(n,i.length);var s=n.concat(i),a=[48];return Rf(a,s.length),a=a.concat(s),Vu.encode(a,e)};var Bn=Wi,Hp=R_,N_=Sr,Of=Xo,C_=yp,Fp=N_.assert,zu=I_,tc=M_;function Tr(t){if(!(this instanceof Tr))return new Tr(t);typeof t=="string"&&(Fp(Object.prototype.hasOwnProperty.call(Of,t),"Unknown curve "+t),t=Of[t]),t instanceof Of.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var B_=Tr;Tr.prototype.keyPair=function(e){return new zu(this,e)};Tr.prototype.keyFromPrivate=function(e,r){return zu.fromPrivate(this,e,r)};Tr.prototype.keyFromPublic=function(e,r){return zu.fromPublic(this,e,r)};Tr.prototype.genKeyPair=function(e){e||(e={});for(var r=new Hp({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||C_(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new Bn(2));;){var s=new Bn(r.generate(i));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Tr.prototype._truncateToN=function(e,r){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Tr.prototype.sign=function(e,r,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),r=this.keyFromPrivate(r,i),e=this._truncateToN(new Bn(e,16));for(var s=this.n.byteLength(),a=r.getPrivate().toArray("be",s),o=e.toArray("be",s),f=new Hp({hash:this.hash,entropy:a,nonce:o,pers:n.pers,persEnc:n.persEnc||"utf8"}),d=this.n.sub(new Bn(1)),g=0;;g++){var y=n.k?n.k(g):new Bn(f.generate(this.n.byteLength()));if(y=this._truncateToN(y,!0),!(y.cmpn(1)<=0||y.cmp(d)>=0)){var S=this.g.mul(y);if(!S.isInfinity()){var O=S.getX(),P=O.umod(this.n);if(P.cmpn(0)!==0){var M=y.invm(this.n).mul(P.mul(r.getPrivate()).iadd(e));if(M=M.umod(this.n),M.cmpn(0)!==0){var B=(S.getY().isOdd()?1:0)|(O.cmp(P)!==0?2:0);return n.canonical&&M.cmp(this.nh)>0&&(M=this.n.sub(M),B^=1),new tc({r:P,s:M,recoveryParam:B})}}}}}};Tr.prototype.verify=function(e,r,i,n){e=this._truncateToN(new Bn(e,16)),i=this.keyFromPublic(i,n),r=new tc(r,"hex");var s=r.r,a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var o=a.invm(this.n),f=o.mul(e).umod(this.n),d=o.mul(s).umod(this.n),g;return this.curve._maxwellTrick?(g=this.g.jmulAdd(f,i.getPublic(),d),g.isInfinity()?!1:g.eqXToP(s)):(g=this.g.mulAdd(f,i.getPublic(),d),g.isInfinity()?!1:g.getX().umod(this.n).cmp(s)===0)};Tr.prototype.recoverPubKey=function(t,e,r,i){Fp((3&r)===r,"The recovery param is more than two bits"),e=new tc(e,i);var n=this.n,s=new Bn(t),a=e.r,o=e.s,f=r&1,d=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");d?a=this.curve.pointFromX(a.add(this.curve.n),f):a=this.curve.pointFromX(a,f);var g=e.r.invm(n),y=n.sub(s).mul(g).umod(n),S=o.mul(g).umod(n);return this.g.mulAdd(y,a,S)};Tr.prototype.getKeyRecoveryParam=function(t,e,r,i){if(e=new tc(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch{continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var _a=Sr,Kp=_a.assert,Vd=_a.parseBytes,Ts=_a.cachedProperty;function Ut(t,e){this.eddsa=t,this._secret=Vd(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=Vd(e.pub)}Ut.fromPublic=function(e,r){return r instanceof Ut?r:new Ut(e,{pub:r})};Ut.fromSecret=function(e,r){return r instanceof Ut?r:new Ut(e,{secret:r})};Ut.prototype.secret=function(){return this._secret};Ts(Ut,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Ts(Ut,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Ts(Ut,"privBytes",function(){var e=this.eddsa,r=this.hash(),i=e.encodingLength-1,n=r.slice(0,e.encodingLength);return n[0]&=248,n[i]&=127,n[i]|=64,n});Ts(Ut,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Ts(Ut,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Ts(Ut,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Ut.prototype.sign=function(e){return Kp(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Ut.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Ut.prototype.getSecret=function(e){return Kp(this._secret,"KeyPair is public only"),_a.encode(this.secret(),e)};Ut.prototype.getPublic=function(e){return _a.encode(this.pubBytes(),e)};var D_=Ut,k_=Wi,rc=Sr,$_=rc.assert,ic=rc.cachedProperty,U_=rc.parseBytes;function Vn(t,e){this.eddsa=t,typeof e!="object"&&(e=U_(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),$_(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof k_&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}ic(Vn,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});ic(Vn,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});ic(Vn,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});ic(Vn,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Vn.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Vn.prototype.toHex=function(){return rc.encode(this.toBytes(),"hex").toUpperCase()};var H_=Vn,F_=Yo,K_=Xo,ps=Sr,j_=ps.assert,jp=ps.parseBytes,Gp=D_,zd=H_;function pr(t){if(j_(t==="ed25519","only tested with ed25519 so far"),!(this instanceof pr))return new pr(t);t=K_[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=F_.sha512}var G_=pr;pr.prototype.sign=function(e,r){e=jp(e);var i=this.keyFromSecret(r),n=this.hashInt(i.messagePrefix(),e),s=this.g.mul(n),a=this.encodePoint(s),o=this.hashInt(a,i.pubBytes(),e).mul(i.priv()),f=n.add(o).umod(this.curve.n);return this.makeSignature({R:s,S:f,Rencoded:a})};pr.prototype.verify=function(e,r,i){e=jp(e),r=this.makeSignature(r);var n=this.keyFromPublic(i),s=this.hashInt(r.Rencoded(),n.pubBytes(),e),a=this.g.mul(r.S()),o=r.R().add(n.pub().mul(s));return o.eq(a)};pr.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return ps.intFromLE(e.digest()).umod(this.curve.n)};pr.prototype.keyFromPublic=function(e){return Gp.fromPublic(this,e)};pr.prototype.keyFromSecret=function(e){return Gp.fromSecret(this,e)};pr.prototype.makeSignature=function(e){return e instanceof zd?e:new zd(this,e)};pr.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};pr.prototype.decodePoint=function(e){e=ps.parseBytes(e);var r=e.length-1,i=e.slice(0,r).concat(e[r]&-129),n=(e[r]&128)!==0,s=ps.intFromLE(i);return this.curve.pointFromY(s,n)};pr.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};pr.prototype.decodeInt=function(e){return ps.intFromLE(e)};pr.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=K6.version,e.utils=Sr,e.rand=yp,e.curve=ju,e.curves=Xo,e.ec=B_,e.eddsa=G_})(l6);var U;(function(t){t.TZ1="tz1",t.TZ2="tz2",t.TZ3="tz3",t.TZ4="tz4",t.KT="KT",t.KT1="KT1",t.EDSK2="edsk2",t.SPSK="spsk",t.P2SK="p2sk",t.EDPK="edpk",t.SPPK="sppk",t.P2PK="p2pk",t.BLPK="BLpk",t.EDESK="edesk",t.SPESK="spesk",t.P2ESK="p2esk",t.EDSK="edsk",t.EDSIG="edsig",t.SPSIG="spsig",t.P2SIG="p2sig",t.SIG="sig",t.NET="Net",t.NCE="nce",t.B="B",t.O="o",t.LO="Lo",t.LLO="LLo",t.P="P",t.CO="Co",t.ID="id",t.EXPR="expr",t.TZ="TZ",t.VH="vh",t.SASK="sask",t.ZET1="zet1",t.TXR1="txr1",t.TXI="txi",t.TXM="txm",t.TXC="txc",t.TXMR="txmr",t.TXRL="txM",t.TXW="txw",t.SR1="sr1",t.SRC1="src1"})(U||(U={}));const er={[U.TZ1]:new Uint8Array([6,161,159]),[U.TZ2]:new Uint8Array([6,161,161]),[U.TZ3]:new Uint8Array([6,161,164]),[U.TZ4]:new Uint8Array([6,161,166]),[U.KT]:new Uint8Array([2,90,121]),[U.KT1]:new Uint8Array([2,90,121]),[U.EDSK]:new Uint8Array([43,246,78,7]),[U.EDSK2]:new Uint8Array([13,15,58,7]),[U.SPSK]:new Uint8Array([17,162,224,201]),[U.P2SK]:new Uint8Array([16,81,238,189]),[U.EDPK]:new Uint8Array([13,15,37,217]),[U.SPPK]:new Uint8Array([3,254,226,86]),[U.P2PK]:new Uint8Array([3,178,139,127]),[U.BLPK]:new Uint8Array([6,149,135,204]),[U.EDESK]:new Uint8Array([7,90,60,179,41]),[U.SPESK]:new Uint8Array([9,237,241,174,150]),[U.P2ESK]:new Uint8Array([9,48,57,115,171]),[U.EDSIG]:new Uint8Array([9,245,205,134,18]),[U.SPSIG]:new Uint8Array([13,115,101,19,63]),[U.P2SIG]:new Uint8Array([54,240,44,52]),[U.SIG]:new Uint8Array([4,130,43]),[U.NET]:new Uint8Array([87,82,0]),[U.NCE]:new Uint8Array([69,220,169]),[U.B]:new Uint8Array([1,52]),[U.O]:new Uint8Array([5,116]),[U.LO]:new Uint8Array([133,233]),[U.LLO]:new Uint8Array([29,159,109]),[U.P]:new Uint8Array([2,170]),[U.CO]:new Uint8Array([79,179]),[U.ID]:new Uint8Array([153,103]),[U.EXPR]:new Uint8Array([13,44,64,27]),[U.TZ]:new Uint8Array([2,90,121]),[U.VH]:new Uint8Array([1,106,242]),[U.SASK]:new Uint8Array([11,237,20,92]),[U.ZET1]:new Uint8Array([18,71,40,223]),[U.TXR1]:new Uint8Array([1,128,120,31]),[U.TXI]:new Uint8Array([79,148,196]),[U.TXM]:new Uint8Array([79,149,30]),[U.TXC]:new Uint8Array([79,148,17]),[U.TXMR]:new Uint8Array([18,7,206,87]),[U.TXRL]:new Uint8Array([79,146,82]),[U.TXW]:new Uint8Array([79,150,72]),[U.SR1]:new Uint8Array([6,124,117]),[U.SRC1]:new Uint8Array([17,165,134,138])},Vp={[U.TZ1]:20,[U.TZ2]:20,[U.TZ3]:20,[U.TZ4]:20,[U.KT]:20,[U.KT1]:20,[U.EDPK]:32,[U.SPPK]:33,[U.P2PK]:33,[U.BLPK]:48,[U.EDSIG]:64,[U.SPSIG]:64,[U.P2SIG]:64,[U.SIG]:64,[U.NET]:4,[U.B]:32,[U.P]:32,[U.O]:32,[U.VH]:32,[U.SASK]:169,[U.ZET1]:43,[U.TXR1]:20,[U.TXI]:32,[U.TXM]:32,[U.TXC]:32,[U.TXMR]:32,[U.TXRL]:32,[U.TXW]:32,[U.SR1]:20,[U.SRC1]:32};class V_ extends i0{constructor(e,r){super(),this.value=e,this.desiredType=r,this.name="ValueConversionError",this.message=`Unable to convert ${e} to a ${r}`}}var ee;(function(t){t[t.NO_PREFIX_MATCHED=0]="NO_PREFIX_MATCHED",t[t.INVALID_CHECKSUM=1]="INVALID_CHECKSUM",t[t.INVALID_LENGTH=2]="INVALID_LENGTH",t[t.VALID=3]="VALID"})(ee||(ee={}));function z_(t){return typeof t!="string"?!1:t in er}function xn(t,e){const r=new RegExp(`^(${e.join("|")})`).exec(t);if(!r||r.length===0)return ee.NO_PREFIX_MATCHED;const i=r[0];if(!z_(i))return ee.NO_PREFIX_MATCHED;if(t.includes("%")&&(t=t.split("%")[0]),!/^(KT1\w{33})$/.test(t)&&i==="KT1")return ee.INVALID_CHECKSUM;let s=va.decodeUnsafe(t);return s?(s=s.slice(er[i].length),s.length!==Vp[i]?ee.INVALID_LENGTH:ee.VALID):ee.INVALID_CHECKSUM}const zp=[U.TZ1,U.TZ2,U.TZ3,U.TZ4],qp=[U.KT1,U.TXR1],q_=[U.EDSIG,U.P2SIG,U.SPSIG,U.SIG],W_=[U.EDPK,U.SPPK,U.P2PK,U.BLPK],J_=[U.O];U.P;const Z_=[U.B],X_=[U.SR1];function Ge(t){return xn(t,[...zp,...qp,...X_])}function Wp(t){return xn(t,[U.NET])}function ss(t){return xn(t,qp)}function qu(t){return xn(t,zp)}function Y_(t){return xn(t,q_)}function Q_(t){return xn(t,W_)}function Jp(t){return xn(t,J_)}function e5(t){return xn(t,Z_)}function ae(t){switch(t){case ee.NO_PREFIX_MATCHED:return"with unsupported prefix";case ee.INVALID_CHECKSUM:return"failed checksum";case ee.INVALID_LENGTH:return"with incorrect length";default:return""}}const t5=6,r5=3;function qd(t){switch(t){case"tz":return t5;case"mtz":return r5;case"mutez":default:return 0}}function Wu(t="mutez",e="mutez",r){const i=new re(r);return i.isNaN()?r:i.multipliedBy(Math.pow(10,qd(t))).dividedBy(Math.pow(10,qd(e)))}function i5(t){const e=Ym.blake2b(o5(t),void 0,32);return dn(e,er.expr)}function dn(t,e){const r=typeof t=="string"?Uint8Array.from(Hf.from(t,"hex")):t,i=new Uint8Array(e.length+r.length);return i.set(e),i.set(r,e.length),va.encode(Hf.from(i.buffer))}const Zp=(t,e)=>va.decode(t).slice(e.length);function n5(t){const e=va.decode(t),r={[er.tz1.toString()]:"0000",[er.tz2.toString()]:"0001",[er.tz3.toString()]:"0002"},i={[er.txr1.toString()]:"02"},n=r[new Uint8Array(e.slice(0,3)).toString()],s=i[new Uint8Array(e.slice(0,4)).toString()];if(n){const a=Zs(e.slice(3));return n+a}else if(s){const a=Zs(e.slice(4));return s+a+"00"}else return"01"+Zs(e.slice(3,42))+"00"}function s5(t){const e=va.decode(t);return Zs(e.slice(3,42))}function iu(t){if(t.substring(0,2)==="00"){const e={"0000":er.tz1,"0001":er.tz2,"0002":er.tz3};return dn(t.substring(4),e[t.substring(0,4)])}else if(t.substring(0,2)==="02")return dn(t.substring(2,t.length-2),er.txr1);return dn(t.substring(2,42),er.KT)}function Wd(t){return dn(t,er.tz4)}function a5(t){if(t[0]==="0"){const e={"00":new Uint8Array([13,15,37,217]),"01":new Uint8Array([3,254,226,86]),"02":new Uint8Array([3,178,139,127])};return dn(t.substring(2),e[t.substring(0,2)])}}function Jd(t){if(t[0]==="0"){const e={"00":new Uint8Array([6,161,159]),"01":new Uint8Array([6,161,161]),"02":new Uint8Array([6,161,164])};return dn(t.substring(2),e[t.substring(0,2)])}}const o5=t=>{if(t.length%2!==0)throw new eo(t,": Expecting even number of characters");const e=nu(t);if(!e.match(/^([\da-f]{2})*$/gi))throw new eo(t,": Only characters 0-9, a-f and A-F are expected. Optionally, it can be prefixed with '0x'");const r=new Uint8Array(e.length/2);let i=0;for(let n=0;n<e.length;n+=2){const s=parseInt(e.slice(n,n+2),16);if(Number.isNaN(s))throw new V_(t,"Uint8Array");r[i++]=s}return r},Zs=t=>{const e=new Uint8Array(t),r=[];return e.forEach(i=>{const s=`00${i.toString(16)}`.slice(-2);r.push(s)}),r.join("")};function Nx(t){return Hf.from(t,"utf8").toString("hex")}function nu(t){return t.startsWith("0x")?t.slice(2):t}function Ma(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function se(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(g){try{d(i.next(g))}catch(y){a(y)}}function f(g){try{d(i.throw(g))}catch(y){a(y)}}function d(g){g.done?s(g.value):n(g.value).then(o,f)}d((i=i.apply(t,e||[])).next())})}const c5="main",oe={block:"head"};var Zd;(function(t){t.GET_BAKING_RIGHTS="getBakingRights",t.GET_BALLOTS="getBallots",t.GET_BALLOT_LIST="getBallotList",t.GET_BIG_MAP_KEY="getBigMapKey",t.GET_BIG_MAP_EXPR="getBigMapExpr",t.GET_BLOCK_HASH="getBlockHash",t.GET_BLOCK="getBlock",t.GET_BLOCK_HEADER="getBlockHeader",t.GET_BLOCK_METADATA="getBlockMetadata",t.GET_BALANCE="getBalance",t.GET_CHAIN_ID="getChainId",t.GET_CONSTANTS="getConstants",t.GET_CONTRACT="getContract",t.GET_CURRENT_PERIOD="getCurrentPeriod",t.GET_CURRENT_PROPOSAL="getCurrentProposal",t.GET_CURRENT_QUORUM="getCurrentQuorum",t.GET_DELEGATE="getDelegate",t.GET_DELEGATES="getDelegates",t.GET_VOTING_INFO="getVotingInfo",t.GET_ENDORSING_RIGHTS="getEndorsingRights",t.GET_ENTRYPOINTS="getEntrypoints",t.GET_LIVE_BLOCKS="getLiveBlocks",t.GET_MANAGER_KEY="getManagerKey",t.GET_NORMALIZED_SCRIPT="getNormalizedScript",t.GET_PROPOSALS="getProposals",t.GET_PROTOCOLS="getProtocols",t.GET_SAPLING_DIFF_BY_CONTRACT="getSaplingDiffByContract",t.GET_SAPLING_DIFF_BY_ID="getSaplingDiffById",t.GET_SCRIPT="getScript",t.GET_STORAGE="getStorage",t.GET_SUCCESSOR_PERIOD="getSuccessorPeriod",t.GET_TX_ROLLUP_INBOX="getTxRollupInbox",t.GET_TX_ROLLUP_STATE="getTxRollupState",t.GET_VOTES_LISTINGS="getVotesListings",t.PACK_DATA="packData",t.GET_STORAGE_USED_SPACE="getStorageUsedSpace",t.GET_STORAGE_PAID_SPACE="getStoragePaidSpace",t.GET_TICKET_BALANCE="getTicketBalance",t.GET_ALL_TICKET_BALANCES="getAllTicketBalances",t.GET_PENDING_OPERATIONS="getPendingOperations",t.GET_ORIGINATION_PROOF="getOriginationProof"})(Zd||(Zd={}));function qs(t,e){const r=Array.isArray(t);typeof e>"u"&&(e=Object.keys(t));const i=r?[]:{};return e.forEach(n=>{const s=t[n];let a;if(!(typeof s>"u")){if(Array.isArray(s)){a=qs(s),i[n]=a;return}a=new re(s),i[n]=a}}),i}var Xd;(function(t){t.TOO_LARGE="too large"})(Xd||(Xd={}));var Yd;(function(t){t.BAKING_REWARDS="baking rewards",t.REWARDS="rewards",t.FEES="fees",t.DEPOSITS="deposits",t.LEGACY_REWARDS="legacy_rewards",t.LEGACY_FEES="legacy_fees",t.LEGACY_DEPOSITS="legacy_deposits",t.BLOCK_FEES="block fees",t.NONCE_REVELATION_REWARDS="nonce revelation rewards",t.DOUBLE_SIGNING_EVIDENCE_REWARDS="double signing evidence rewards",t.ENDORSING_REWARDS="endorsing rewards",t.BAKING_BONUSES="baking bonuses",t.STORAGE_FEES="storage fees",t.PUNISHMENTS="punishments",t.LOST_ENDORSING_REWARDS="lost endorsing rewards",t.SUBSIDY="subsidy",t.BURNED="burned",t.COMMITMENT="commitment",t.BOOTSTRAP="bootstrap",t.INVOICE="invoice",t.MINTED="minted",t.TX_ROLLUP_REJECTION_REWARDS="tx_rollup_rejection_rewards",t.TX_ROLLUP_REJECTION_PUNISHMENTS="tx_rollup_rejection_punishments",t.BONDS="bonds"})(Yd||(Yd={}));var Qd;(function(t){t.WASM2="wasm_2_0_0",t.ARITH="arith"})(Qd||(Qd={}));var el;(function(t){t.START="start",t.MOVE="move"})(el||(el={}));var tl;(function(t){t.INBOX_PROOF="inbox_proof",t.REVEAL_PROOF="reveal_proof",t.FIRST_INPUT="first_input"})(tl||(tl={}));var rl;(function(t){t.RAW_DATA_PROOF="raw_data_proof",t.METADATA_PROOF="metadata_proof",t.DAL_PAGE_PROOF="dal_page_proof"})(rl||(rl={}));var il;(function(t){t.ONGOING="ongoing",t.ENDED="ended"})(il||(il={}));var nl;(function(t){t.LOSER="loser",t.DRAW="draw"})(nl||(nl={}));var sl;(function(t){t.CONFLICT_RESOLVED="conflict_resolved",t.TIMEOUT="timeout"})(sl||(sl={}));var j;(function(t){t.ORIGINATION="origination",t.DELEGATION="delegation",t.REVEAL="reveal",t.TRANSACTION="transaction",t.ACTIVATION="activate_account",t.ENDORSEMENT="endorsement",t.PREENDORSEMENT="preendorsement",t.SET_DEPOSITS_LIMIT="set_deposits_limit",t.DOUBLE_PREENDORSEMENT_EVIDENCE="double_preendorsement_evidence",t.ENDORSEMENT_WITH_SLOT="endorsement_with_slot",t.SEED_NONCE_REVELATION="seed_nonce_revelation",t.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",t.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",t.PROPOSALS="proposals",t.BALLOT="ballot",t.FAILING_NOOP="failing_noop",t.REGISTER_GLOBAL_CONSTANT="register_global_constant",t.TX_ROLLUP_ORIGINATION="tx_rollup_origination",t.TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",t.TX_ROLLUP_COMMIT="tx_rollup_commit",t.TX_ROLLUP_RETURN_BOND="tx_rollup_return_bond",t.TX_ROLLUP_FINALIZE_COMMITMENT="tx_rollup_finalize_commitment",t.TX_ROLLUP_REMOVE_COMMITMENT="tx_rollup_remove_commitment",t.TX_ROLLUP_REJECTION="tx_rollup_rejection",t.TX_ROLLUP_DISPATCH_TICKETS="tx_rollup_dispatch_tickets",t.TRANSFER_TICKET="transfer_ticket",t.INCREASE_PAID_STORAGE="increase_paid_storage",t.UPDATE_CONSENSUS_KEY="update_consensus_key",t.DRAIN_DELEGATE="drain_delegate",t.VDF_REVELATION="vdf_revelation",t.EVENT="event",t.TICKET_UPDATES="ticket_updates",t.SMART_ROLLUP_ORIGINATE="smart_rollup_originate",t.SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",t.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message",t.SMART_ROLLUP_PUBLISH="smart_rollup_publish",t.SMART_ROLLUP_CEMENT="smart_rollup_cement",t.SMART_ROLLUP_RECOVER_BOND="smart_rollup_recover_bond",t.SMART_ROLLUP_REFUTE="smart_rollup_refute",t.SMART_ROLLUP_TIMEOUT="smart_rollup_timeout"})(j||(j={}));class qa{constructor(e,r=c5,i=new om){this.url=e,this.chain=r,this.httpBackend=i}createURL(e){return`${this.url.replace(/\/+$/g,"")}${e}`}validateAddress(e){const r=Ge(e);if(r!==ee.VALID)throw new Je(e,ae(r))}validateContract(e){const r=ss(e);if(r!==ee.VALID)throw new Nn(e,ae(r))}getBlockHash({block:e}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/hash`),method:"GET"})})}getLiveBlocks({block:e}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/live_blocks`),method:"GET"})})}getBalance(e,{block:r}=oe){return se(this,void 0,void 0,function*(){this.validateAddress(e);const i=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/balance`),method:"GET"});return new re(i)})}getStorage(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage`),method:"GET"})})}getScript(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/script`),method:"GET"})})}getNormalizedScript(e,r={unparsing_mode:"Readable"},{block:i}=oe){return se(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${e}/script/normalized`),method:"POST"},r)})}getContract(e,{block:r}=oe){return se(this,void 0,void 0,function*(){this.validateAddress(e);const i=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}`),method:"GET"});return Object.assign(Object.assign({},i),{balance:new re(i.balance)})})}getManagerKey(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/manager_key`),method:"GET"})})}getDelegate(e,{block:r}=oe){return se(this,void 0,void 0,function*(){this.validateAddress(e);let i;try{i=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/delegate`),method:"GET"})}catch(n){if(n instanceof ws&&n.status===ea.NOT_FOUND)i=null;else throw n}return i})}getBigMapKey(e,r,{block:i}=oe){return se(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${e}/big_map_get`),method:"POST"},r)})}getBigMapExpr(e,r,{block:i}=oe){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/big_maps/${e}/${r}`),method:"GET"})})}getDelegates(e,{block:r}=oe){return se(this,void 0,void 0,function*(){this.validateAddress(e);const i=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/delegates/${e}`),method:"GET"}),n=qs(i,["balance","full_balance","current_frozen_deposits","frozen_deposits","frozen_balance","frozen_deposits_limit","staking_balance","delegated_balance","voting_power"]);return Object.assign(Object.assign(Object.assign({},i),n),{frozen_balance_by_cycle:i.frozen_balance_by_cycle?i.frozen_balance_by_cycle.map(s=>{var{deposit:a,deposits:o,fees:f,rewards:d}=s,g=Ma(s,["deposit","deposits","fees","rewards"]);const y=qs({deposit:a,deposits:o,fees:f,rewards:d},["deposit","deposits","fees","rewards"]);return Object.assign(Object.assign({},g),{deposit:y.deposit,deposits:y.deposits,fees:y.fees,rewards:y.rewards})}):void 0})})}getVotingInfo(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return this.validateAddress(e),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/delegates/${e}/voting_info`),method:"GET"})})}getConstants({block:e}=oe){return se(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/context/constants`),method:"GET"}),i=qs(r,["time_between_blocks","hard_gas_limit_per_operation","hard_gas_limit_per_block","proof_of_work_threshold","tokens_per_roll","seed_nonce_revelation_tip","block_security_deposit","endorsement_security_deposit","block_reward","endorsement_reward","cost_per_byte","hard_storage_limit_per_operation","test_chain_duration","baking_reward_per_endorsement","delay_per_missing_endorsement","minimal_block_delay","liquidity_baking_subsidy","cache_layout","baking_reward_fixed_portion","baking_reward_bonus_per_slot","endorsing_reward_per_slot","double_baking_punishment","delay_increment_per_round","tx_rollup_commitment_bond","vdf_difficulty","sc_rollup_stake_amount","minimal_stake"]);return Object.assign(Object.assign({},r),i)})}getBlock({block:e}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}`),method:"GET"})})}getBlockHeader({block:e}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/header`),method:"GET"})})}getBlockMetadata({block:e}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/metadata`),method:"GET"})})}getBakingRights(e={},{block:r}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/baking_rights`),method:"GET",query:e})})}getEndorsingRights(e={},{block:r}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/endorsing_rights`),method:"GET",query:e})})}getBallotList({block:e}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballot_list`),method:"GET"})})}getBallots({block:e}=oe){return se(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballots`),method:"GET"});return qs(r,["yay","nay","pass"])})}getCurrentProposal({block:e}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_proposal`),method:"GET"})})}getCurrentQuorum({block:e}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_quorum`),method:"GET"})})}getVotesListings({block:e}=oe){return se(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/listings`),method:"GET"});return r.map(i=>(i.voting_power&&(i.voting_power=new re(i.voting_power)),i)),r})}getProposals({block:e}=oe){return se(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/proposals`),method:"GET"});return r.map(i=>i[1]=new re(i[1])),r})}forgeOperations(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/forge/operations`),method:"POST"},e)})}injectOperation(e){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/injection/operation"),method:"POST"},e)})}preapplyOperations(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/preapply/operations`),method:"POST"},e)})}getEntrypoints(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return this.validateContract(e),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/entrypoints`),method:"GET"})})}runOperation(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_operation`),method:"POST"},e)})}runCode(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_code`),method:"POST"},e)})}runScriptView(e,{block:r}=oe){var{unparsing_mode:i="Readable"}=e,n=Ma(e,["unparsing_mode"]);return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_script_view`),method:"POST"},Object.assign({unparsing_mode:i},n))})}runView(e,{block:r}=oe){var{unparsing_mode:i="Readable"}=e,n=Ma(e,["unparsing_mode"]);return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_view`),method:"POST"},Object.assign({unparsing_mode:i},n))})}getChainId(){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/chain_id`),method:"GET"})})}packData(e,{block:r}=oe){return se(this,void 0,void 0,function*(){const i=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/pack_data`),method:"POST"},e),{gas:n}=i,s=Ma(i,["gas"]);let a=n;const o=new re(n||"");return o.isNaN()||(a=o),Object.assign({gas:a},s)})}getRpcUrl(){return this.url}getCurrentPeriod({block:e}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_period`),method:"GET"})})}getSuccessorPeriod({block:e}=oe){return se(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/successor_period`),method:"GET"})})}getSaplingDiffById(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/sapling/${e}/get_diff`),method:"GET"})})}getSaplingDiffByContract(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/single_sapling_get_diff`),method:"GET"})})}getProtocols({block:e}=oe){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/protocols`),method:"GET"})})}getTxRollupState(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/tx_rollup/${e}/state`),method:"GET"})})}getTxRollupInbox(e,r,{block:i}=oe){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/tx_rollup/${e}/inbox/${r}`),method:"GET"})})}getStorageUsedSpace(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage/used_space`),method:"GET"})})}getStoragePaidSpace(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage/paid_space`),method:"GET"})})}getTicketBalance(e,r,{block:i}=oe){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${i}/context/contracts/${e}/ticket_balance`),method:"POST"},r)})}getAllTicketBalances(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/all_ticket_balances`),method:"GET"})})}getPendingOperations(e={}){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/mempool/pending_operations`),method:"GET",query:e})})}getOriginationProof(e,{block:r}=oe){return se(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/smart_rollups/all/origination_proof`),method:"POST"},e)})}}function nt(t){return typeof t=="function"}function nc(t){var e=function(i){Error.call(i),i.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Pf=nc(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(i,n){return n+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function co(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var Un=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,i,n,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=Qa(a),f=o.next();!f.done;f=o.next()){var d=f.value;d.remove(this)}}catch(M){e={error:M}}finally{try{f&&!f.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}else a.remove(this);var g=this.initialTeardown;if(nt(g))try{g()}catch(M){s=M instanceof Pf?M.errors:[M]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var S=Qa(y),O=S.next();!O.done;O=S.next()){var P=O.value;try{al(P)}catch(M){s=s??[],M instanceof Pf?s=ji(ji([],Gi(s)),Gi(M.errors)):s.push(M)}}}catch(M){i={error:M}}finally{try{O&&!O.done&&(n=S.return)&&n.call(S)}finally{if(i)throw i.error}}}if(s)throw new Pf(s)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)al(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&co(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&co(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),Xp=Un.EMPTY;function Yp(t){return t instanceof Un||t&&"closed"in t&&nt(t.remove)&&nt(t.add)&&nt(t.unsubscribe)}function al(t){nt(t)?t():t.unsubscribe()}var Qp={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},su={setTimeout:function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=su.delegate;return n?.setTimeout?n.setTimeout.apply(n,ji([t,e],Gi(r))):setTimeout.apply(void 0,ji([t,e],Gi(r)))},clearTimeout:function(t){var e=su.delegate;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function e1(t){su.setTimeout(function(){throw t})}function fo(){}function Wa(t){t()}var Ju=function(t){Fr(e,t);function e(r){var i=t.call(this)||this;return i.isStopped=!1,r?(i.destination=r,Yp(r)&&r.add(i)):i.destination=d5,i}return e.create=function(r,i,n){return new ia(r,i,n)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Un),f5=Function.prototype.bind;function If(t,e){return f5.call(t,e)}var u5=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(i){La(i)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(i){La(i)}else La(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){La(r)}},t}(),ia=function(t){Fr(e,t);function e(r,i,n){var s=t.call(this)||this,a;if(nt(r)||!r)a={next:r??void 0,error:i??void 0,complete:n??void 0};else{var o;s&&Qp.useDeprecatedNextContext?(o=Object.create(r),o.unsubscribe=function(){return s.unsubscribe()},a={next:r.next&&If(r.next,o),error:r.error&&If(r.error,o),complete:r.complete&&If(r.complete,o)}):a=r}return s.destination=new u5(a),s}return e}(Ju);function La(t){e1(t)}function h5(t){throw t}var d5={closed:!0,next:fo,error:h5,complete:fo},Zu=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function An(t){return t}function l5(t){return t.length===0?An:t.length===1?t[0]:function(r){return t.reduce(function(i,n){return n(i)},r)}}var ht=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,i){var n=this,s=b5(e)?e:new ia(e,r,i);return Wa(function(){var a=n,o=a.operator,f=a.source;s.add(o?o.call(s,f):f?n._subscribe(s):n._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var i=this;return r=ol(r),new r(function(n,s){var a=new ia({next:function(o){try{e(o)}catch(f){s(f),a.unsubscribe()}},error:s,complete:n});i.subscribe(a)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[Zu]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return l5(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=ol(e),new e(function(i,n){var s;r.subscribe(function(a){return s=a},function(a){return n(a)},function(){return i(s)})})},t.create=function(e){return new t(e)},t}();function ol(t){var e;return(e=t??Qp.Promise)!==null&&e!==void 0?e:Promise}function p5(t){return t&&nt(t.next)&&nt(t.error)&&nt(t.complete)}function b5(t){return t&&t instanceof Ju||p5(t)&&Yp(t)}function t1(t){return nt(t?.lift)}function St(t){return function(e){if(t1(e))return e.lift(function(r){try{return t(r,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function vt(t,e,r,i,n){return new g5(t,e,r,i,n)}var g5=function(t){Fr(e,t);function e(r,i,n,s,a,o){var f=t.call(this,r)||this;return f.onFinalize=a,f.shouldUnsubscribe=o,f._next=i?function(d){try{i(d)}catch(g){r.error(g)}}:t.prototype._next,f._error=s?function(d){try{s(d)}catch(g){r.error(g)}finally{this.unsubscribe()}}:t.prototype._error,f._complete=n?function(){try{n()}catch(d){r.error(d)}finally{this.unsubscribe()}}:t.prototype._complete,f}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e}(Ju);function r1(){return St(function(t,e){var r=null;t._refCount++;var i=vt(e,void 0,void 0,void 0,function(){if(!t||t._refCount<=0||0<--t._refCount){r=null;return}var n=t._connection,s=r;r=null,n&&(!s||n===s)&&n.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(r=t.connect())})}var m5=function(t){Fr(e,t);function e(r,i){var n=t.call(this)||this;return n.source=r,n.subjectFactory=i,n._subject=null,n._refCount=0,n._connection=null,t1(r)&&(n.lift=r.lift),n}return e.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},e.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype._teardown=function(){this._refCount=0;var r=this._connection;this._subject=this._connection=null,r?.unsubscribe()},e.prototype.connect=function(){var r=this,i=this._connection;if(!i){i=this._connection=new Un;var n=this.getSubject();i.add(this.source.subscribe(vt(n,void 0,function(){r._teardown(),n.complete()},function(s){r._teardown(),n.error(s)},function(){return r._teardown()}))),i.closed&&(this._connection=null,i=Un.EMPTY)}return i},e.prototype.refCount=function(){return r1()(this)},e}(ht),v5=nc(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),zn=function(t){Fr(e,t);function e(){var r=t.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var i=new cl(this,this);return i.operator=r,i},e.prototype._throwIfClosed=function(){if(this.closed)throw new v5},e.prototype.next=function(r){var i=this;Wa(function(){var n,s;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var a=Qa(i.currentObservers),o=a.next();!o.done;o=a.next()){var f=o.value;f.next(r)}}catch(d){n={error:d}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}}})},e.prototype.error=function(r){var i=this;Wa(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=r;for(var n=i.observers;n.length;)n.shift().error(r)}})},e.prototype.complete=function(){var r=this;Wa(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var i=r.observers;i.length;)i.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var i=this,n=this,s=n.hasError,a=n.isStopped,o=n.observers;return s||a?Xp:(this.currentObservers=null,o.push(r),new Un(function(){i.currentObservers=null,co(o,r)}))},e.prototype._checkFinalizedStatuses=function(r){var i=this,n=i.hasError,s=i.thrownError,a=i.isStopped;n?r.error(s):a&&r.complete()},e.prototype.asObservable=function(){var r=new ht;return r.source=this,r},e.create=function(r,i){return new cl(r,i)},e}(ht),cl=function(t){Fr(e,t);function e(r,i){var n=t.call(this)||this;return n.destination=r,n.source=i,n}return e.prototype.next=function(r){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.next)===null||n===void 0||n.call(i,r)},e.prototype.error=function(r){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.error)===null||n===void 0||n.call(i,r)},e.prototype.complete=function(){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||i===void 0||i.call(r)},e.prototype._subscribe=function(r){var i,n;return(n=(i=this.source)===null||i===void 0?void 0:i.subscribe(r))!==null&&n!==void 0?n:Xp},e}(zn),sc=function(t){Fr(e,t);function e(r){var i=t.call(this)||this;return i._value=r,i}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(r){var i=t.prototype._subscribe.call(this,r);return!i.closed&&r.next(this._value),i},e.prototype.getValue=function(){var r=this,i=r.hasError,n=r.thrownError,s=r._value;if(i)throw n;return this._throwIfClosed(),s},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e}(zn),Xu={now:function(){return(Xu.delegate||Date).now()},delegate:void 0},Tn=function(t){Fr(e,t);function e(r,i,n){r===void 0&&(r=1/0),i===void 0&&(i=1/0),n===void 0&&(n=Xu);var s=t.call(this)||this;return s._bufferSize=r,s._windowTime=i,s._timestampProvider=n,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=i===1/0,s._bufferSize=Math.max(1,r),s._windowTime=Math.max(1,i),s}return e.prototype.next=function(r){var i=this,n=i.isStopped,s=i._buffer,a=i._infiniteTimeWindow,o=i._timestampProvider,f=i._windowTime;n||(s.push(r),!a&&s.push(o.now()+f)),this._trimBuffer(),t.prototype.next.call(this,r)},e.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var i=this._innerSubscribe(r),n=this,s=n._infiniteTimeWindow,a=n._buffer,o=a.slice(),f=0;f<o.length&&!r.closed;f+=s?1:2)r.next(o[f]);return this._checkFinalizedStatuses(r),i},e.prototype._trimBuffer=function(){var r=this,i=r._bufferSize,n=r._timestampProvider,s=r._buffer,a=r._infiniteTimeWindow,o=(a?1:2)*i;if(i<1/0&&o<s.length&&s.splice(0,s.length-o),!a){for(var f=n.now(),d=0,g=1;g<s.length&&s[g]<=f;g+=2)d=g;d&&s.splice(0,d+1)}},e}(zn),y5=function(t){Fr(e,t);function e(r,i){return t.call(this)||this}return e.prototype.schedule=function(r,i){return this},e}(Un),uo={setInterval:function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=uo.delegate;return n?.setInterval?n.setInterval.apply(n,ji([t,e],Gi(r))):setInterval.apply(void 0,ji([t,e],Gi(r)))},clearInterval:function(t){var e=uo.delegate;return(e?.clearInterval||clearInterval)(t)},delegate:void 0},_5=function(t){Fr(e,t);function e(r,i){var n=t.call(this,r,i)||this;return n.scheduler=r,n.work=i,n.pending=!1,n}return e.prototype.schedule=function(r,i){var n;if(i===void 0&&(i=0),this.closed)return this;this.state=r;var s=this.id,a=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(a,s,i)),this.pending=!0,this.delay=i,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(a,this.id,i),this},e.prototype.requestAsyncId=function(r,i,n){return n===void 0&&(n=0),uo.setInterval(r.flush.bind(r,this),n)},e.prototype.recycleAsyncId=function(r,i,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return i;i!=null&&uo.clearInterval(i)},e.prototype.execute=function(r,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(r,i);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,i){var n=!1,s;try{this.work(r)}catch(a){n=!0,s=a||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var r=this,i=r.id,n=r.scheduler,s=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,co(s,this),i!=null&&(this.id=this.recycleAsyncId(n,i,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(y5),fl=function(){function t(e,r){r===void 0&&(r=t.now),this.schedulerActionCtor=e,this.now=r}return t.prototype.schedule=function(e,r,i){return r===void 0&&(r=0),new this.schedulerActionCtor(this,e).schedule(i,r)},t.now=Xu.now,t}(),w5=function(t){Fr(e,t);function e(r,i){i===void 0&&(i=fl.now);var n=t.call(this,r,i)||this;return n.actions=[],n._active=!1,n}return e.prototype.flush=function(r){var i=this.actions;if(this._active){i.push(r);return}var n;this._active=!0;do if(n=r.execute(r.state,r.delay))break;while(r=i.shift());if(this._active=!1,n){for(;r=i.shift();)r.unsubscribe();throw n}},e}(fl),i1=new w5(_5),E5=i1,Yu=new ht(function(t){return t.complete()});function n1(t){return t&&nt(t.schedule)}function s1(t){return t[t.length-1]}function x5(t){return nt(s1(t))?t.pop():void 0}function ac(t){return n1(s1(t))?t.pop():void 0}var a1=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function o1(t){return nt(t?.then)}function c1(t){return nt(t[Zu])}function f1(t){return Symbol.asyncIterator&&nt(t?.[Symbol.asyncIterator])}function u1(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function A5(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var h1=A5();function d1(t){return nt(t?.[h1])}function l1(t){return Wb(this,arguments,function(){var r,i,n,s;return Hl(this,function(a){switch(a.label){case 0:r=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,$c(r.read())];case 3:return i=a.sent(),n=i.value,s=i.done,s?[4,$c(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,$c(n)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function p1(t){return nt(t?.getReader)}function br(t){if(t instanceof ht)return t;if(t!=null){if(c1(t))return S5(t);if(a1(t))return R5(t);if(o1(t))return O5(t);if(f1(t))return b1(t);if(d1(t))return P5(t);if(p1(t))return I5(t)}throw u1(t)}function S5(t){return new ht(function(e){var r=t[Zu]();if(nt(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function R5(t){return new ht(function(e){for(var r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()})}function O5(t){return new ht(function(e){t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,e1)})}function P5(t){return new ht(function(e){var r,i;try{for(var n=Qa(t),s=n.next();!s.done;s=n.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(o){r={error:o}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}e.complete()})}function b1(t){return new ht(function(e){T5(t,e).catch(function(r){return e.error(r)})})}function I5(t){return b1(l1(t))}function T5(t,e){var r,i,n,s;return Jb(this,void 0,void 0,function(){var a,o;return Hl(this,function(f){switch(f.label){case 0:f.trys.push([0,5,6,11]),r=Zb(t),f.label=1;case 1:return[4,r.next()];case 2:if(i=f.sent(),!!i.done)return[3,4];if(a=i.value,e.next(a),e.closed)return[2];f.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=f.sent(),n={error:o},[3,11];case 6:return f.trys.push([6,,9,10]),i&&!i.done&&(s=r.return)?[4,s.call(r)]:[3,8];case 7:f.sent(),f.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function ui(t,e,r,i,n){i===void 0&&(i=0),n===void 0&&(n=!1);var s=e.schedule(function(){r(),n?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!n)return s}function g1(t,e){return e===void 0&&(e=0),St(function(r,i){r.subscribe(vt(i,function(n){return ui(i,t,function(){return i.next(n)},e)},function(){return ui(i,t,function(){return i.complete()},e)},function(n){return ui(i,t,function(){return i.error(n)},e)}))})}function m1(t,e){return e===void 0&&(e=0),St(function(r,i){i.add(t.schedule(function(){return r.subscribe(i)},e))})}function M5(t,e){return br(t).pipe(m1(e),g1(e))}function L5(t,e){return br(t).pipe(m1(e),g1(e))}function N5(t,e){return new ht(function(r){var i=0;return e.schedule(function(){i===t.length?r.complete():(r.next(t[i++]),r.closed||this.schedule())})})}function C5(t,e){return new ht(function(r){var i;return ui(r,e,function(){i=t[h1](),ui(r,e,function(){var n,s,a;try{n=i.next(),s=n.value,a=n.done}catch(o){r.error(o);return}a?r.complete():r.next(s)},0,!0)}),function(){return nt(i?.return)&&i.return()}})}function v1(t,e){if(!t)throw new Error("Iterable cannot be null");return new ht(function(r){ui(r,e,function(){var i=t[Symbol.asyncIterator]();ui(r,e,function(){i.next().then(function(n){n.done?r.complete():r.next(n.value)})},0,!0)})})}function B5(t,e){return v1(l1(t),e)}function D5(t,e){if(t!=null){if(c1(t))return M5(t,e);if(a1(t))return N5(t,e);if(o1(t))return L5(t,e);if(f1(t))return v1(t,e);if(d1(t))return C5(t,e);if(p1(t))return B5(t,e)}throw u1(t)}function Sn(t,e){return e?D5(t,e):br(t)}function oc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=ac(t);return Sn(t,r)}function y1(t,e){var r=nt(t)?t:function(){return t},i=function(n){return n.error(r())};return new ht(e?function(n){return e.schedule(i,0,n)}:i)}var _1=nc(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function w1(t){return t instanceof Date&&!isNaN(t)}var k5=nc(function(t){return function(r){r===void 0&&(r=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=r}});function E1(t,e){var r=w1(t)?{first:t}:typeof t=="number"?{each:t}:t,i=r.first,n=r.each,s=r.with,a=s===void 0?$5:s,o=r.scheduler,f=o===void 0?e??i1:o,d=r.meta,g=d===void 0?null:d;if(i==null&&n==null)throw new TypeError("No timeout provided.");return St(function(y,S){var O,P,M=null,B=0,C=function(I){P=ui(S,f,function(){try{O.unsubscribe(),br(a({meta:g,lastValue:M,seen:B})).subscribe(S)}catch(z){S.error(z)}},I)};O=y.subscribe(vt(S,function(I){P?.unsubscribe(),B++,S.next(M=I),n>0&&C(n)},void 0,void 0,function(){P?.closed||P?.unsubscribe(),M=null})),!B&&C(i!=null?typeof i=="number"?i:+i-f.now():n)})}function $5(t){throw new k5(t)}function Dn(t,e){return St(function(r,i){var n=0;r.subscribe(vt(i,function(s){i.next(t.call(e,s,n++))}))})}var U5=Array.isArray;function H5(t,e){return U5(e)?t.apply(void 0,ji([],Gi(e))):t(e)}function F5(t){return Dn(function(e){return H5(t,e)})}var K5=Array.isArray,j5=Object.getPrototypeOf,G5=Object.prototype,V5=Object.keys;function z5(t){if(t.length===1){var e=t[0];if(K5(e))return{args:e,keys:null};if(q5(e)){var r=V5(e);return{args:r.map(function(i){return e[i]}),keys:r}}}return{args:t,keys:null}}function q5(t){return t&&typeof t=="object"&&j5(t)===G5}function W5(t,e){return t.reduce(function(r,i,n){return r[i]=e[n],r},{})}function ul(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=ac(t),i=x5(t),n=z5(t),s=n.args,a=n.keys;if(s.length===0)return Sn([],r);var o=new ht(J5(s,r,a?function(f){return W5(a,f)}:An));return i?o.pipe(F5(i)):o}function J5(t,e,r){return r===void 0&&(r=An),function(i){hl(e,function(){for(var n=t.length,s=new Array(n),a=n,o=n,f=function(g){hl(e,function(){var y=Sn(t[g],e),S=!1;y.subscribe(vt(i,function(O){s[g]=O,S||(S=!0,o--),o||i.next(r(s.slice()))},function(){--a||i.complete()}))},i)},d=0;d<n;d++)f(d)},i)}}function hl(t,e,r){t?ui(r,t,e):e()}function Z5(t,e,r,i,n,s,a,o){var f=[],d=0,g=0,y=!1,S=function(){y&&!f.length&&!d&&e.complete()},O=function(M){return d<i?P(M):f.push(M)},P=function(M){s&&e.next(M),d++;var B=!1;br(r(M,g++)).subscribe(vt(e,function(C){n?.(C),s?O(C):e.next(C)},function(){B=!0},void 0,function(){if(B)try{d--;for(var C=function(){var I=f.shift();a?ui(e,a,function(){return P(I)}):P(I)};f.length&&d<i;)C();S()}catch(I){e.error(I)}}))};return t.subscribe(vt(e,O,function(){y=!0,S()})),function(){o?.()}}function na(t,e,r){return r===void 0&&(r=1/0),nt(e)?na(function(i,n){return Dn(function(s,a){return e(i,s,n,a)})(br(t(i,n)))},r):(typeof e=="number"&&(r=e),St(function(i,n){return Z5(i,n,t,r)}))}function X5(t){return t===void 0&&(t=1/0),na(An,t)}function Y5(){return X5(1)}function ho(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Y5()(Sn(t,ac(t)))}function x1(t){return new ht(function(e){br(t()).subscribe(e)})}function au(t,e,r){t===void 0&&(t=0),r===void 0&&(r=E5);var i=-1;return e!=null&&(n1(e)?r=e:i=e),new ht(function(n){var s=w1(t)?+t-r.now():t;s<0&&(s=0);var a=0;return r.schedule(function(){n.closed||(n.next(a++),0<=i?this.schedule(void 0,i):n.complete())},s)})}var Q5=new ht(fo);function lo(t,e){return St(function(r,i){var n=0;r.subscribe(vt(i,function(s){return t.call(e,s,n++)&&i.next(s)}))})}function Qu(t,e,r){if(e==null&&(e=t,t=0),e<=0)return Yu;var i=e+t;return new ht(r?function(n){var s=t;return r.schedule(function(){s<i?(n.next(s++),this.schedule()):n.complete()})}:function(n){for(var s=t;s<i&&!n.closed;)n.next(s++);n.complete()})}function cc(t){return St(function(e,r){var i=null,n=!1,s;i=e.subscribe(vt(r,void 0,void 0,function(a){s=br(t(a,cc(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(r)):n=!0})),n&&(i.unsubscribe(),i=null,s.subscribe(r))})}function wa(t,e){return nt(e)?na(t,e,1):na(t,1)}function ew(t){return new ht(function(e){return t.subscribe(e)})}var tw={connector:function(){return new zn}};function A1(t,e){e===void 0&&(e=tw);var r=e.connector;return St(function(i,n){var s=r();br(t(ew(s))).subscribe(n),n.add(i.subscribe(s))})}function rw(t){return St(function(e,r){var i=!1;e.subscribe(vt(r,function(n){i=!0,r.next(n)},function(){i||r.next(t),r.complete()}))})}function iw(t){return t<=0?function(){return Yu}:St(function(e,r){var i=0;e.subscribe(vt(r,function(n){++i<=t&&(r.next(n),t<=i&&r.complete())}))})}function S1(t,e){return e===void 0&&(e=An),t=t??nw,St(function(r,i){var n,s=!0;r.subscribe(vt(i,function(a){var o=e(a);(s||!t(n,o))&&(s=!1,n=o,i.next(a))}))})}function nw(t,e){return t===e}function sw(t,e){return S1(function(r,i){return e?e(r[t],i[t]):r[t]===i[t]})}function aw(t){return t===void 0&&(t=ow),St(function(e,r){var i=!1;e.subscribe(vt(r,function(n){i=!0,r.next(n)},function(){return i?r.complete():r.error(t())}))})}function ow(){return new _1}function R1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return ho(r,oc.apply(void 0,ji([],Gi(t))))}}function Ci(t,e){var r=arguments.length>=2;return function(i){return i.pipe(t?lo(function(n,s){return t(n,s,i)}):An,iw(1),r?rw(e):aw(function(){return new _1}))}}function cw(t,e){var r=nt(t)?t:function(){return t};return nt(e)?A1(e,{connector:r}):function(i){return new m5(i,r)}}function dl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;if(r===0)throw new Error("list of properties cannot be empty.");return Dn(function(i){for(var n=i,s=0;s<r;s++){var a=n?.[t[s]];if(typeof a<"u")n=a;else return}return n})}function fw(t){return t?function(e){return A1(t)(e)}:function(e){return cw(new zn)(e)}}function O1(t){t===void 0&&(t=1/0);var e;t&&typeof t=="object"?e=t:e={count:t};var r=e.count,i=r===void 0?1/0:r,n=e.delay,s=e.resetOnSuccess,a=s===void 0?!1:s;return i<=0?An:St(function(o,f){var d=0,g,y=function(){var S=!1;g=o.subscribe(vt(f,function(O){a&&(d=0),f.next(O)},void 0,function(O){if(d++<i){var P=function(){g?(g.unsubscribe(),g=null,y()):S=!0};if(n!=null){var M=typeof n=="number"?au(n):br(n(O,d)),B=vt(f,function(){B.unsubscribe(),P()},function(){f.complete()});M.subscribe(B)}else P()}else f.error(O)})),S&&(g.unsubscribe(),g=null,y())};y()})}function po(t){t===void 0&&(t={});var e=t.connector,r=e===void 0?function(){return new zn}:e,i=t.resetOnError,n=i===void 0?!0:i,s=t.resetOnComplete,a=s===void 0?!0:s,o=t.resetOnRefCountZero,f=o===void 0?!0:o;return function(d){var g,y,S,O=0,P=!1,M=!1,B=function(){y?.unsubscribe(),y=void 0},C=function(){B(),g=S=void 0,P=M=!1},I=function(){var z=g;C(),z?.unsubscribe()};return St(function(z,F){O++,!M&&!P&&B();var W=S=S??r();F.add(function(){O--,O===0&&!M&&!P&&(y=Tf(I,f))}),W.subscribe(F),!g&&O>0&&(g=new ia({next:function(q){return W.next(q)},error:function(q){M=!0,B(),y=Tf(C,n,q),W.error(q)},complete:function(){P=!0,B(),y=Tf(C,a),W.complete()}}),br(z).subscribe(g))})(d)}}function Tf(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e===!0){t();return}if(e!==!1){var n=new ia({next:function(){n.unsubscribe(),t()}});return br(e.apply(void 0,ji([],Gi(r)))).subscribe(n)}}function ll(t,e,r){var i,n,s,a,o=!1;return t&&typeof t=="object"?(i=t.bufferSize,a=i===void 0?1/0:i,n=t.windowTime,e=n===void 0?1/0:n,s=t.refCount,o=s===void 0?!1:s,r=t.scheduler):a=t??1/0,po({connector:function(){return new Tn(a,e,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function uw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=ac(t);return St(function(i,n){(r?ho(t,i,r):ho(t,i)).subscribe(n)})}function Hi(t,e){return St(function(r,i){var n=null,s=0,a=!1,o=function(){return a&&!n&&i.complete()};r.subscribe(vt(i,function(f){n?.unsubscribe();var d=0,g=s++;br(t(f,g)).subscribe(n=vt(i,function(y){return i.next(e?e(f,y,g,d++):y)},function(){n=null,o()}))},function(){a=!0,o()}))})}function hw(t){return St(function(e,r){br(t).subscribe(vt(r,function(){return r.complete()},fo)),!r.closed&&e.subscribe(r)})}function dw(t,e){return e===void 0&&(e=!1),St(function(r,i){var n=0;r.subscribe(vt(i,function(s){var a=t(s,n++);(a||e)&&i.next(s),!a&&i.complete()}))})}function bo(t,e,r){var i=nt(t)||e||r?{next:t,error:e,complete:r}:t;return i?St(function(n,s){var a;(a=i.subscribe)===null||a===void 0||a.call(i);var o=!0;n.subscribe(vt(s,function(f){var d;(d=i.next)===null||d===void 0||d.call(i,f),s.next(f)},function(){var f;o=!1,(f=i.complete)===null||f===void 0||f.call(i),s.complete()},function(f){var d;o=!1,(d=i.error)===null||d===void 0||d.call(i,f),s.error(f)},function(){var f,d;o&&((f=i.unsubscribe)===null||f===void 0||f.call(i)),(d=i.finalize)===null||d===void 0||d.call(i)}))}):An}var lw=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,i=e.cmp&&function(s){return function(a){return function(o,f){var d={key:o,value:a[o]},g={key:f,value:a[f]};return s(d,g)}}}(e.cmp),n=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var o,f;if(Array.isArray(a)){for(f="[",o=0;o<a.length;o++)o&&(f+=","),f+=s(a[o])||"null";return f+"]"}if(a===null)return"null";if(n.indexOf(a)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var d=n.push(a)-1,g=Object.keys(a).sort(i&&i(a));for(f="",o=0;o<g.length;o++){var y=g[o],S=s(a[y]);S&&(f&&(f+=","),f+=JSON.stringify(y)+":"+S)}return n.splice(d,1),"{"+f+"}"}}(t)};const pw=ca(lw);var P1;class Gs extends et{constructor(e,r){super(),this.mapType=e,this.reason=r,this.message=`The map type '${JSON.stringify(e)}' is invalid. Reason: ${r}.`,this.name="InvalidMapTypeError"}}const I1=Symbol.for("taquito-michelson-map-type-symbol");function bw(t){if(!("prim"in t))throw new Gs(t,"Missing 'prim' field");if(!["map","big_map"].includes(t.prim))throw new Gs(t,"The prim field should be 'map' or 'big_map'");if(!("args"in t))throw new Gs(t,"Missing 'args' field");if(!Array.isArray(t.args))throw new Gs(t,"The 'args' field should be an array");if(t.args.length!==2)throw new Gs(t,"The 'args' field should have 2 elements")}class pl extends et{constructor(e,r,i,n){super(),this.value=e,this.type=r,this.reason=n,this.name="MapTypecheckError",this.message=`The ${i} provided: ${JSON.stringify(e)} is not compatible with the expected michelson type: ${JSON.stringify(r)}. Reason: ${JSON.stringify(n)}.`,this.name="MapTypecheckError"}}class hr{constructor(e){this.valueMap=new Map,this.keyMap=new Map,this[P1]=!0,e&&this.setType(e)}static isMichelsonMap(e){return e&&e[I1]===!0}setType(e){bw(e),this.keySchema=new yr(e.args[0]),this.valueSchema=new yr(e.args[1])}removeType(){this.keySchema=void 0,this.valueSchema=void 0}static fromLiteral(e,r){const i=new hr(r);return Object.keys(e).forEach(n=>{i.set(n,e[n])}),i}typecheckKey(e){this.keySchema&&this.keySchema.Typecheck(e)}typecheckValue(e){this.valueSchema&&this.valueSchema.Typecheck(e)}assertTypecheckValue(e){try{this.typecheckValue(e)}catch(r){throw new pl(e,this.valueSchema,"value",r)}}assertTypecheckKey(e){try{this.typecheckKey(e)}catch(r){throw new pl(e,this.keySchema,"key",r)}}serializeDeterministically(e){return pw(e)}*keys(){for(const[e]of this.entries())yield e}*values(){for(const[,e]of this.entries())yield e}*entries(){for(const e of this.valueMap.keys())yield[this.keyMap.get(e),this.valueMap.get(e)]}get(e){this.assertTypecheckKey(e);const r=this.serializeDeterministically(e);return this.valueMap.get(r)}set(e,r){this.assertTypecheckKey(e),this.assertTypecheckValue(r);const i=this.serializeDeterministically(e);this.keyMap.set(i,e),this.valueMap.set(i,r)}delete(e){this.assertTypecheckKey(e),this.keyMap.delete(this.serializeDeterministically(e)),this.valueMap.delete(this.serializeDeterministically(e))}has(e){this.assertTypecheckKey(e);const r=this.serializeDeterministically(e);return this.keyMap.has(r)&&this.valueMap.has(r)}clear(){this.keyMap.clear(),this.valueMap.clear()}get size(){return this.keyMap.size}forEach(e){for(const[r,i]of this.entries())e(i,r,this)}}P1=I1;class Ze extends et{constructor(e,r,i){super(),this.value=e,this.token=r,this.name="TokenValidationError";const n=this.token.annot(),s=n?`[${n}] `:"";this.message=`${s}${i}`}}class Rt{constructor(e,r,i){this.val=e,this.idx=r,this.fac=i,this.createToken=this.fac}typeWithoutAnnotations(){const e=i=>{if(typeof i=="object"){if(Array.isArray(i))return i.map(a=>e(a));const n=i;return n.args?{prim:n.prim,args:n.args.map(s=>e(s))}:{prim:n.prim}}return i};return(i=>i.args?{prim:i.prim,args:i.args.map(n=>e(n))}:{prim:i.prim})(this.val)}annot(){return(Array.isArray(this.val.annots)&&this.val.annots.length>0?this.val.annots[0]:String(this.idx)).replace(/(%|:)(_Liq_entry_)?/,"")}hasAnnotations(){return Array.isArray(this.val.annots)&&this.val.annots.length}get tokenVal(){return this.val}ExtractSignature(){return[[this.ExtractSchema()]]}}class pt extends Rt{compare(e,r){return e===r?0:e<r?-1:1}}class bl extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="BigMapValidationError"}}class vr extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}ExtractSchema(){return{big_map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:vr.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}validate(e){if(!hr.isMichelsonMap(e))throw new bl(e,this,`Value ${JSON.stringify(e)} is not a MichelsonMap`)}objLitToMichelsonMap(e){return e instanceof hr?e:typeof e=="object"?Object.keys(e).length===0?new hr:hr.fromLiteral(e):e}Encode(e){const r=this.objLitToMichelsonMap(e.pop());return this.validate(r),Array.from(r.keys()).sort((i,n)=>this.KeySchema.compare(i,n)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(e,r){const i=this.objLitToMichelsonMap(e);return this.validate(i),r&&r[vr.prim]?r[vr.prim](i,this.val):Array.from(i.keys()).sort((n,s)=>this.KeySchema.compare(n,s)).map(n=>({prim:"Elt",args:[this.KeySchema.EncodeObject(n),this.ValueSchema.EncodeObject(i.get(n))]}))}Execute(e,r){if(r&&r[vr.prim])return r[vr.prim](e,this.val);if(Array.isArray(e)){const i=new hr(this.val);return e.forEach(n=>{i.set(this.KeySchema.ToKey(n.args[0]),this.ValueSchema.Execute(n.args[1]))}),i}else{if("int"in e)return e.int;throw new bl(e,this,`Big map is expecting either an array (Athens) or an object with an int property (Babylon). Got ${JSON.stringify(e)}`)}}findAndReturnTokens(e,r){return vr.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),this.ValueSchema.findAndReturnTokens(e,r),r}}vr.prim="big_map";class gw extends et{constructor(e){super(e),this.message=e,this.name="OrTokenDecodingError"}}class Ue extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Encode(e){const r=e[e.length-1],i=this.createToken(this.val.args[0],this.idx);let n=1;i instanceof Ue&&(n=Object.keys(i.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+n);if(String(i.annot())===String(r)&&!(i instanceof Ue))return e.pop(),{prim:"Left",args:[i.Encode(e)]};if(String(s.annot())===String(r)&&!(s instanceof Ue))return e.pop(),{prim:"Right",args:[s.Encode(e)]};if(i instanceof Ue){const a=i.Encode(e);if(a)return{prim:"Left",args:[a]}}if(s instanceof Ue){const a=s.Encode(e);if(a)return{prim:"Right",args:[a]}}return null}ExtractSignature(){const e=this.createToken(this.val.args[0],this.idx);let r=1;e instanceof Ue&&(r=Object.keys(e.ExtractSchema()).length);const i=this.createToken(this.val.args[1],this.idx+r),n=[];if(e instanceof Ue)n.push(...e.ExtractSignature());else for(const s of e.ExtractSignature())n.push([e.annot(),...s]);if(i instanceof Ue)n.push(...i.ExtractSignature());else for(const s of i.ExtractSignature())n.push([i.annot(),...s]);return n}EncodeObject(e,r){const i=Object.keys(e)[0],n=this.createToken(this.val.args[0],this.idx);let s=1;n instanceof Ue&&(s=Object.keys(n.ExtractSchema()).length);const a=this.createToken(this.val.args[1],this.idx+s);if(String(n.annot())===String(i)&&!(n instanceof Ue))return{prim:"Left",args:[n.EncodeObject(e[i],r)]};if(String(a.annot())===String(i)&&!(a instanceof Ue))return{prim:"Right",args:[a.EncodeObject(e[i],r)]};if(n instanceof Ue){const o=n.EncodeObject(e,r);if(o)return{prim:"Left",args:[o]}}if(a instanceof Ue){const o=a.EncodeObject(e,r);if(o)return{prim:"Right",args:[o]}}return null}Execute(e,r){const i=this.createToken(this.val.args[0],this.idx);let n=1;i instanceof Ue&&(n=Object.keys(i.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+n);if(e.prim==="Right")return s instanceof Ue?s.Execute(e.args[0],r):{[s.annot()]:s.Execute(e.args[0],r)};if(e.prim==="Left")return i instanceof Ue?i.Execute(e.args[0],r):{[i.annot()]:i.Execute(e.args[0],r)};throw new gw(`Was expecting Left or Right prim but got: ${JSON.stringify(e.prim)}`)}traversal(e,r,i){const n=this.createToken(this.val.args[0],this.idx);let s=1,a;n instanceof Ue&&!n.hasAnnotations()?(a=e(n),s=Object.keys(n.ExtractSchema()).length):a={[n.annot()]:e(n)};const o=this.createToken(this.val.args[1],this.idx+s);let f;return o instanceof Ue&&!o.hasAnnotations()?f=r(o):f={[o.annot()]:r(o)},i(a,f)}ExtractSchema(){return this.traversal(e=>e.ExtractSchema(),e=>e.ExtractSchema(),(e,r)=>Object.assign(Object.assign({},e),r))}generateSchema(){return{__michelsonType:Ue.prim,schema:this.traversal(e=>e instanceof Ue&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),e=>e instanceof Ue&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),(e,r)=>Object.assign(Object.assign({},e),r))}}findToken(e){const r=this.createToken(this.val.args[0],this.idx);let i=1;r instanceof Ue&&(i=Object.keys(r.ExtractSchema()).length);const n=this.createToken(this.val.args[1],this.idx+i);if(String(r.annot())===String(e)&&!(r instanceof Ue)&&r instanceof pt)return r;if(String(n.annot())===String(e)&&!(n instanceof Ue)&&n instanceof pt)return n;if(r instanceof Ue){const s=r.findToken(e);if(s)return s}if(n instanceof Ue){const s=n.findToken(e);if(s)return s}return null}compare(e,r){const i=Object.keys(e)[0],n=Object.keys(r)[0];if(i===n){const s=this.findToken(i);if(s instanceof pt)return s.compare(e[i],r[i])}else{const s=JSON.stringify(this.EncodeObject(e)),a=JSON.stringify(this.EncodeObject(r));return s<a?-1:1}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,r){return Ue.prim===e&&r.push(this),this.traversal(i=>i.findAndReturnTokens(e,r),i=>i.findAndReturnTokens(e,r),(i,n)=>Object.assign(Object.assign({},i),n)),r}}Ue.prim="or";class mw extends et{constructor(e){super(e),this.message=e,this.name="TokenArgumentValidationError"}}class vw extends et{constructor(e,r){super(),this.val1=e,this.val2=r,this.name="TokenComparisonError",this.message=`Tokens ${JSON.stringify(e)} and ${JSON.stringify(r)} are not comparable`}}function ou(t,e=xt.prim){if(Array.isArray(t))return ou({prim:e,args:t},e);if(t.args===void 0)throw new mw(`The value ${JSON.stringify(t)} is an invalid PairToken with no arguments, a pair must have two or more arguments.`);return t.args.length>2?[t.args[0],{prim:e,args:t.args.slice(1)}]:[t.args[0],t.args[1]]}class xt extends pt{constructor(e,r,i){super(Array.isArray(e)?{prim:xt.prim,args:e}:e.prim?e:{prim:xt.prim,args:e},r,i)}args(){return ou(this.val)}tokens(){let e=0;return this.args().map(r=>{const i=this.createToken(r,this.idx+e);return i instanceof xt?e+=Object.keys(i.ExtractSchema()).length:e++,i})}Encode(e){return{prim:"Pair",args:this.tokens().map(r=>r.Encode(e))}}ExtractSignature(){const e=this.args(),r=this.createToken(e[0],this.idx);let i=1;r instanceof Ue&&(i=Object.keys(r.ExtractSchema()).length);const n=this.createToken(e[1],this.idx+i),s=[];for(const a of r.ExtractSignature())for(const o of n.ExtractSignature())s.push([...a,...o]);return s}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}ToKey(e){return this.Execute(e)}EncodeObject(e,r){const[i,n]=this.tokens();let s;i instanceof xt&&!i.hasAnnotations()?s=e:s=e[i.annot()];let a;return n instanceof xt&&!n.hasAnnotations()?a=e:a=e[n.annot()],{prim:"Pair",args:[i.EncodeObject(s,r),n.EncodeObject(a,r)]}}traversal(e,r){const i=this.args(),n=this.createToken(i[0],this.idx);let s=1,a;n instanceof xt&&(s=Object.keys(n.ExtractSchema()).length),n instanceof xt&&!n.hasAnnotations()?a=e(n):a={[n.annot()]:e(n)};const o=this.createToken(i[1],this.idx+s);let f;return o instanceof xt&&!o.hasAnnotations()?f=r(o):f={[o.annot()]:r(o)},Object.assign(Object.assign({},a),f)}Execute(e,r){const i=ou(e,"Pair");return this.traversal(n=>n.Execute(i[0],r),n=>n.Execute(i[1],r))}ExtractSchema(){return this.traversal(e=>e.ExtractSchema(),e=>e.ExtractSchema())}generateSchema(){return{__michelsonType:xt.prim,schema:this.traversal(e=>e instanceof xt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),e=>e instanceof xt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema())}}compare(e,r){const[i,n]=this.tokens(),s=(a,o)=>a instanceof xt&&!a.hasAnnotations()?o:o[a.annot()];if(i instanceof pt&&n instanceof pt){const a=i.compare(s(i,e),s(i,r));return a===0?n.compare(s(n,e),s(n,r)):a}throw new vw(e,r)}findAndReturnTokens(e,r){return xt.prim===e&&r.push(this),this.tokens().map(i=>i.findAndReturnTokens(e,r)),r}}xt.prim="pair";class gl extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="NatValidationError"}}class zr extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Execute(e){return new re(e[Object.keys(e)[0]])}Encode(e){const r=e.pop();return this.validate(r),{int:new re(r).toFixed()}}validate(e){const r=new re(e);if(r.isNaN())throw new gl(e,this,`Value is not a number: ${JSON.stringify(e)}`);if(r.isNegative())throw new gl(e,this,`Value cannot be negative: ${JSON.stringify(e)}`)}EncodeObject(e,r){return this.validate(e),r&&r[zr.prim]?r[zr.prim](e):{int:new re(e).toFixed()}}ExtractSchema(){return zr.prim}generateSchema(){return{__michelsonType:zr.prim,schema:zr.prim}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:zr.prim}}}ToKey({int:e}){return new re(e)}compare(e,r){const i=Number(e),n=Number(r);return i===n?0:i<n?-1:1}findAndReturnTokens(e,r){return zr.prim===e&&r.push(this),r}}zr.prim="nat";class qr extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return qr.prim}generateSchema(){return{__michelsonType:qr.prim,schema:qr.prim}}Encode(e){return{string:e.pop()}}EncodeObject(e,r){return r&&r[qr.prim]?r[qr.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:qr.prim}}}findAndReturnTokens(e,r){return qr.prim===e&&r.push(this),r}}qr.prim="string";class Mf extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="AddressValidationError"}}class Si extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}ToBigMapKey(e){return{key:{bytes:n5(e)},type:{prim:"bytes"}}}validate(e){if(Ge(e)!==ee.VALID)throw new Mf(e,this,`Address is not valid: ${JSON.stringify(e)}`)}Encode(e){const r=e.pop();return this.validate(r),{string:r}}EncodeObject(e,r){return this.validate(e),r&&r[Si.prim]?r[Si.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new Mf(e,this,`cannot be missing both string and bytes: ${JSON.stringify(e)}`);return iu(e.bytes)}ExtractSchema(){return Si.prim}generateSchema(){return{__michelsonType:Si.prim,schema:Si.prim}}ToKey({bytes:e,string:r}){if(r)return r;if(!e)throw new Mf({bytes:e,string:r},this,`cannot be missing both string and bytes ${JSON.stringify({string:r,bytes:e})}`);return iu(e)}compare(e,r){const i=a=>a.startsWith("tz"),n=i(e),s=i(r);return n&&!s?-1:s&&!n?1:super.compare(e,r)}findAndReturnTokens(e,r){return Si.prim===e&&r.push(this),r}}Si.prim="address";class yw extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="MapValidationError"}}class hn extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}validate(e){if(!hr.isMichelsonMap(e))throw new yw(e,this,`Value ${JSON.stringify(e)} is not a valid MichelsonMap`)}Execute(e,r){const i=new hr(this.val);return e.forEach(n=>{i.set(this.KeySchema.ToKey(n.args[0]),this.ValueSchema.Execute(n.args[1],r))}),i}objLitToMichelsonMap(e){return e instanceof hr?e:typeof e=="object"?Object.keys(e).length===0?new hr:hr.fromLiteral(e):e}Encode(e){const r=this.objLitToMichelsonMap(e.pop());return this.validate(r),Array.from(r.keys()).sort((i,n)=>this.KeySchema.compare(i,n)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(e,r){const i=this.objLitToMichelsonMap(e);return this.validate(i),r&&r[hn.prim]?r[hn.prim](i):Array.from(i.keys()).sort((n,s)=>this.KeySchema.compare(n,s)).map(n=>({prim:"Elt",args:[this.KeySchema.EncodeObject(n),this.ValueSchema.EncodeObject(i.get(n))]}))}ExtractSchema(){return{map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:hn.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}findAndReturnTokens(e,r){return hn.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),this.ValueSchema.findAndReturnTokens(e,r),r}}hn.prim="map";class Wr extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Execute(e){return String(e.prim).toLowerCase()==="true"}Encode(e){return{prim:e.pop()?"True":"False"}}EncodeObject(e,r){return r&&r[Wr.prim]?r[Wr.prim](e):{prim:e?"True":"False"}}ExtractSchema(){return Wr.prim}generateSchema(){return{__michelsonType:Wr.prim,schema:Wr.prim}}ToBigMapKey(e){return{key:this.EncodeObject(e),type:{prim:Wr.prim}}}ToKey(e){return this.EncodeObject(e)}compare(e,r){return e&&r||!e&&!r?0:e?1:-1}findAndReturnTokens(e,r){return Wr.prim===e&&r.push(this),r}}Wr.prim="bool";class Na extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="TxRollupL2AddressValidationError"}}class Ri extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}ToBigMapKey(e){return{key:{bytes:s5(e)},type:{prim:"bytes"}}}validate(e){if(Ge(e)!==ee.VALID)throw new Na(e,this,`tx_rollup_l2_address is not valid: ${JSON.stringify(e)}`)}Encode(e){const r=e.pop();if(!r)throw new Na(r,this,`arg missing to encode: this -> "${JSON.stringify(r)}"`);return this.validate(r),{string:r}}EncodeObject(e,r){return this.validate(e),r&&r[Ri.prim]?r[Ri.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new Na(e,this,`value cannot be missing string and byte value. must have one ${JSON.stringify(e)}`);return Wd(e.bytes)}ExtractSchema(){return Ri.prim}generateSchema(){return{__michelsonType:Ri.prim,schema:Ri.prim}}ToKey({bytes:e,string:r}){if(r)return r;if(!e)throw new Na(e,this,`value cannot be missing string and byte value. must have one: bytes = ${JSON.stringify(e)}`);return Wd(e)}findAndReturnTokens(e,r){return Ri.prim===e&&r.push(this),r}}Ri.prim="tx_rollup_l2_address";class ml extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="ContractValidationError"}}class dr extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}validate(e){if(Ge(e)!==ee.VALID)throw new ml(e,this,`Value ${JSON.stringify(e)} is not a valid contract address.`);return null}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new ml(e,this,`Value ${JSON.stringify(e)} is not a valid contract address. must contain bytes or string.`);return iu(e.bytes)}Encode(e){const r=e.pop();return this.validate(r),{string:r}}EncodeObject(e,r){return this.validate(e),r&&r[dr.prim]?r[dr.prim](e):{string:e}}ExtractSchema(){return dr.prim}generateSchema(){const e=this.createToken(this.val.args[0],0);return{__michelsonType:dr.prim,schema:{parameter:this.val.args[0]?e.generateSchema():{}}}}findAndReturnTokens(e,r){return dr.prim===e&&r.push(this),r}}dr.prim="contract";class _w extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="ListValidationError"}}class nn extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}get valueSchema(){return this.createToken(this.val.args[0],this.idx)}validate(e){if(!Array.isArray(e))throw new _w(e,this,`Value ${JSON.stringify(e)} is not a valid array`)}Encode(e){const r=e.pop();this.validate(r);const i=this.createToken(this.val.args[0],0);return r.reduce((n,s)=>[...n,i.EncodeObject(s)],[])}Execute(e,r){const i=this.createToken(this.val.args[0],0);return this.validate(e),e.reduce((n,s)=>[...n,i.Execute(s,r)],[])}EncodeObject(e,r){const i=this.createToken(this.val.args[0],0);return this.validate(e),r&&r[nn.prim]?r[nn.prim](e):e.reduce((n,s)=>[...n,i.EncodeObject(s)],[])}ExtractSchema(){return{[nn.prim]:this.valueSchema.ExtractSchema()}}generateSchema(){return{__michelsonType:nn.prim,schema:this.valueSchema.generateSchema()}}findAndReturnTokens(e,r){return nn.prim===e&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,r),r}}nn.prim="list";class ww extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="MutezValidationError"}}class Jr extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Execute(e){return new re(e[Object.keys(e)[0]])}ExtractSchema(){return Jr.prim}generateSchema(){return{__michelsonType:Jr.prim,schema:Jr.prim}}validate(e){if(new re(e).isNaN())throw new ww(e,this,`Value is not a number: ${e}`)}Encode(e){const r=e.pop();return this.validate(r),{int:String(r).toString()}}EncodeObject(e,r){return this.validate(e),r&&r[Jr.prim]?r[Jr.prim](e):{int:String(e).toString()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:Jr.prim}}}ToKey({int:e}){return e}compare(e,r){const i=Number(e),n=Number(r);return i===n?0:i<n?-1:1}findAndReturnTokens(e,r){return Jr.prim===e&&r.push(this),r}}Jr.prim="mutez";class Ew extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="BytesValidationError"}}class Zr extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}ToBigMapKey(e){return{key:{bytes:e},type:{prim:Zr.prim}}}validate(e){if(!(typeof e=="string"&&/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0))throw new Ew(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=nu(this.convertUint8ArrayToHexString(r)),this.validate(r),{bytes:String(r).toString()}}EncodeObject(e,r){return e=this.convertUint8ArrayToHexString(e),typeof e=="string"&&(e=nu(e)),this.validate(e),r&&r[Zr.prim]?r[Zr.prim](e):{bytes:String(e).toString()}}Execute(e){return e.bytes}ExtractSchema(){return Zr.prim}generateSchema(){return{__michelsonType:Zr.prim,schema:Zr.prim}}ToKey({bytes:e,string:r}){return r||e}findAndReturnTokens(e,r){return Zr.prim===e&&r.push(this),r}}Zr.prim="bytes";class bs extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}subToken(){return this.createToken(this.val.args[0],this.idx)}schema(){return this.createToken(this.val.args[0],0)}annot(){return Array.isArray(this.val.annots)?super.annot():this.createToken(this.val.args[0],this.idx).annot()}Encode(e){const r=e;return r==null?{prim:"None"}:Array.isArray(r)&&(r[r.length-1]===void 0||r[r.length-1]===null)?(r.pop(),{prim:"None"}):{prim:"Some",args:[this.schema().Encode(e)]}}EncodeObject(e,r){let i=e;return i==null?{prim:"None"}:(i=typeof i=="object"&&"Some"in i?i.Some:i,{prim:"Some",args:[this.schema().EncodeObject(i,r)]})}Execute(e,r){return e.prim==="None"?null:{Some:this.schema().Execute(e.args[0],r)}}ExtractSchema(){return{Some:this.schema().ExtractSchema()}}generateSchema(){return{__michelsonType:bs.prim,schema:this.schema().generateSchema()}}ExtractSignature(){return[...this.schema().ExtractSignature()]}get KeySchema(){return this.schema()}compare(e,r){if(e){if(!r)return 1}else return-1;return this.KeySchema.compare(e,r)}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,r){return bs.prim===e&&r.push(this),this.subToken().findAndReturnTokens(e,r),r}}bs.prim="option";class Xr extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Execute(e){if(e.string&&/^\d+$/.test(e.string))return new Date(Number(e.string)*1e3).toISOString();if(e.string)return new Date(e.string).toISOString();if(e.int)return new Date(Number(e.int)*1e3).toISOString()}Encode(e){const r=e.pop();return typeof r=="number"?{int:String(r)}:{string:r}}EncodeObject(e,r){return r&&r[Xr.prim]?r[Xr.prim](e):typeof e=="number"?{int:String(e)}:{string:e}}ExtractSchema(){return Xr.prim}generateSchema(){return{__michelsonType:Xr.prim,schema:Xr.prim}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Xr.prim}}}findAndReturnTokens(e,r){return Xr.prim===e&&r.push(this),r}}Xr.prim="timestamp";class xw extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="IntValidationError"}}class Qt extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Execute(e){return new re(e[Object.keys(e)[0]])}ExtractSchema(){return Qt.prim}generateSchema(){return{__michelsonType:Qt.prim,schema:Qt.prim}}validate(e){if(new re(e).isNaN())throw new xw(e,this,`Value is not a number: ${JSON.stringify(e)}`)}Encode(e){const r=e.pop();return this.validate(r),{int:new re(r).toFixed()}}EncodeObject(e,r){return this.validate(e),r&&r[Qt.prim]?r[Qt.prim](e):{int:new re(e).toFixed()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:Qt.prim}}}ToKey({int:e}){return e}compare(e,r){const i=Number(e),n=Number(r);return i===n?0:i<n?-1:1}findAndReturnTokens(e,r){return Qt.prim===e&&r.push(this),r}}Qt.prim="int";class Yr extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Encode(e){return e.pop(),{prim:"Unit"}}EncodeObject(e,r){return r&&r[Yr.prim]?r[Yr.prim](e):{prim:"Unit"}}Execute(e){return fu}ExtractSchema(){return Yr.prim}generateSchema(){return{__michelsonType:Yr.prim,schema:Yr.prim}}compare(e,r){return 0}ToKey(e){return fu}ToBigMapKey(e){return{key:{prim:"Unit"},type:{prim:Yr.prim}}}findAndReturnTokens(e,r){return Yr.prim===e&&r.push(this),r}}Yr.prim="unit";const Aw=4;class Sw extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="KeyValidationError"}}class Qr extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Execute(e){return e.string?e.string:a5(e.bytes)}validate(e){if(Q_(e)!==ee.VALID)throw new Sw(e,this,"Key is not valid")}Encode(e){const r=e.pop();return this.validate(r),{string:r}}EncodeObject(e,r){return this.validate(e),r&&r[Qr.prim]?r[Qr.prim](e):{string:e}}ExtractSchema(){return Qr.prim}generateSchema(){return{__michelsonType:Qr.prim,schema:Qr.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:Qr.prim}}}compare(e,r){const i=this.getPrefix(e),n=this.getPrefix(r);if(i===U.EDPK&&n!==U.EDPK)return-1;if(i===U.SPPK&&n!==U.SPPK)return n===U.EDPK?1:-1;if(i===U.P2PK){if(n!==U.P2PK)return 1;const s=this.getP256PublicKeyComparableBytes(e),a=this.getP256PublicKeyComparableBytes(r);return Buffer.compare(s,a)}return super.compare(e,r)}getPrefix(e){return e.substring(0,Aw)}getP256PublicKeyComparableBytes(e){return Zp(e,er[U.P2PK]).slice(1)}findAndReturnTokens(e,r){return Qr.prim===e&&r.push(this),r}}Qr.prim="key";class Rw extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="KeyHashValidationError"}}class ei extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Execute(e){return e.string?e.string:Jd(e.bytes)}validate(e){if(qu(e)!==ee.VALID)throw new Rw(e,this,`KeyHash is not valid: ${JSON.stringify(e)}`)}Encode(e){const r=e.pop();return this.validate(r),{string:r}}EncodeObject(e,r){return this.validate(e),r&&r[ei.prim]?r[ei.prim](e):{string:e}}ExtractSchema(){return ei.prim}generateSchema(){return{__michelsonType:ei.prim,schema:ei.prim}}ToKey({string:e,bytes:r}){return e||Jd(r)}ToBigMapKey(e){return{key:{string:e},type:{prim:ei.prim}}}findAndReturnTokens(e,r){return ei.prim===e&&r.push(this),r}}ei.prim="key_hash";class Ow extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="SignatureValidationError"}}class ti extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Execute(e){return e.string?e.string:e.bytes}validate(e){if(Y_(e)!==ee.VALID)throw new Ow(e,this,"Signature is not valid")}Encode(e){const r=e.pop();return this.validate(r),{string:r}}EncodeObject(e,r){return this.validate(e),r&&r[ti.prim]?r[ti.prim](e):{string:e}}ExtractSchema(){return ti.prim}generateSchema(){return{__michelsonType:ti.prim,schema:ti.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:ti.prim}}}findAndReturnTokens(e,r){return ti.prim===e&&r.push(this),r}}ti.prim="signature";class sn extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}get paramSchema(){return this.createToken(this.val.args[0],this.idx)}get returnSchema(){return this.createToken(this.val.args[1],this.idx+1)}Execute(e){return e.string?e.string:e}Encode(e){return e.pop()}EncodeObject(e,r){return r&&r[sn.prim]?r[sn.prim](e):e}ExtractSchema(){return{[sn.prim]:{parameters:this.paramSchema.ExtractSchema(),returns:this.returnSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:sn.prim,schema:{parameters:this.paramSchema.generateSchema(),returns:this.returnSchema.generateSchema()}}}findAndReturnTokens(e,r){return sn.prim===e&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,r),this.createToken(this.val.args[1],this.idx).findAndReturnTokens(e,r),r}}sn.prim="lambda";class Oi extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Execute(e){return e.string}Encode(...e){return{string:e.pop()}}EncodeObject(e,r){return r&&r[Oi.prim]?r[Oi.prim](e):{string:e}}ExtractSchema(){return Oi.prim}generateSchema(){return{__michelsonType:Oi.prim,schema:Oi.prim}}findAndReturnTokens(e,r){return Oi.prim===e&&r.push(this),r}}Oi.prim="operation";class Pw extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="SetValidationError"}}class an extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}get KeySchema(){return this.createToken(this.val.args[0],0)}validate(e){if(!Array.isArray(e))throw new Pw(e,this,`Value ${JSON.stringify(e)} is not an array`)}Encode(e){const r=e.pop();return this.validate(r),r.sort((i,n)=>this.KeySchema.compare(i,n)).reduce((i,n)=>[...i,this.KeySchema.EncodeObject(n)],[])}Execute(e,r){return e.reduce((i,n)=>[...i,this.KeySchema.Execute(n,r)],[])}EncodeObject(e,r){return this.validate(e),r&&r[an.prim]?r[an.prim](e):e.sort((i,n)=>this.KeySchema.compare(i,n)).reduce((i,n)=>[...i,this.KeySchema.EncodeObject(n)],[])}ExtractSchema(){return an.prim}generateSchema(){return{__michelsonType:an.prim,schema:this.KeySchema.generateSchema()}}findAndReturnTokens(e,r){return an.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),r}}an.prim="set";class Iw extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="ChainIDValidationError"}}class ri extends pt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}validate(e){if(Wp(e)!==ee.VALID)throw new Iw(e,this,`Value ${JSON.stringify(e)} is not a valid ChainID`)}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return ri.prim}generateSchema(){return{__michelsonType:ri.prim,schema:ri.prim}}Encode(e){const r=e.pop();return this.validate(r),{string:r}}EncodeObject(e,r){return this.validate(e),r&&r[ri.prim]?r[ri.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:ri.prim}}}findAndReturnTokens(e,r){return ri.prim===e&&r.push(this),r}}ri.prim="chain_id";class vl extends et{constructor(){super(),this.name="TicketEncodeError",this.message="Tickets cannot be sent to the blockchain; they are created on-chain"}}const Tw={prim:"contract"},Mw={prim:"int"};class si extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new vl}EncodeObject(e,r){if(r&&r[si.prim])return r[si.prim](e,this.val);throw new vl}Execute(e,r){if(r&&r[si.prim])return r[si.prim](e,this.val);const i=this.createToken(Tw,this.idx),n=this.valueToken,s=this.createToken(Mw,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:i.Execute(e.args[0],r),value:n.Execute(e.args[1].args[0],r),amount:s.Execute(e.args[1].args[1],r)}:{ticketer:i.Execute(e.args[0],r),value:n.Execute(e.args[1],r),amount:s.Execute(e.args[2],r)}}ExtractSchema(){return{ticketer:dr.prim,value:this.valueToken.ExtractSchema(),amount:Qt.prim}}generateSchema(){return{__michelsonType:si.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:dr.prim,schema:dr.prim},amount:{__michelsonType:Qt.prim,schema:Qt.prim}}}}findAndReturnTokens(e,r){return si.prim===e&&r.push(this),this.valueToken.findAndReturnTokens(e,r),r}}si.prim="ticket";class yl extends et{constructor(){super(),this.name="TicketDeprecatedEncodeError",this.message="Ticket_deprecated cannot be sent to the blockchain; they are created on-chain"}}const Lw={prim:"contract"},Nw={prim:"int"};class ai extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new yl}EncodeObject(e,r){if(r&&r[ai.prim])return r[ai.prim](e,this.val);throw new yl}Execute(e,r){if(r&&r[ai.prim])return r[ai.prim](e,this.val);const i=this.createToken(Lw,this.idx),n=this.valueToken,s=this.createToken(Nw,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:i.Execute(e.args[0],r),value:n.Execute(e.args[1].args[0],r),amount:s.Execute(e.args[1].args[1],r)}:{ticketer:i.Execute(e.args[0],r),value:n.Execute(e.args[1],r),amount:s.Execute(e.args[2],r)}}ExtractSchema(){return{ticketer:dr.prim,value:this.valueToken.ExtractSchema(),amount:Qt.prim}}generateSchema(){return{__michelsonType:ai.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:dr.prim,schema:dr.prim},amount:{__michelsonType:Qt.prim,schema:Qt.prim}}}}findAndReturnTokens(e,r){return ai.prim===e&&r.push(this),this.valueToken.findAndReturnTokens(e,r),r}}ai.prim="ticket_deprecated";class Lf extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="NeverTokenError"}}class Pi extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Encode(e){const r=e.pop();throw new Lf(r,this,`Assigning a value to the type never is forbidden. Trying to assign ${JSON.stringify(r)}.`)}EncodeObject(e,r){if(r&&r[Pi.prim])return r[Pi.prim](e);throw new Lf(e,this,`Assigning a value to the type never is forbidden. Trying to assign ${JSON.stringify(e)}.`)}Execute(e){throw new Lf(e,this,`There is no literal value for the type never. Trying to execute ${JSON.stringify(e)}.`)}ExtractSchema(){return Pi.prim}generateSchema(){return{__michelsonType:Pi.prim,schema:Pi.prim}}findAndReturnTokens(e,r){return Pi.prim===e&&r.push(this),r}}Pi.prim="never";class Nf extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="SaplingStateValidationError"}}class ii extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}isValid(e){return typeof e=="object"&&Object.keys(e).length===0}Execute(e,r){if(r&&r[ii.prim])return r[ii.prim](e,this.val);if("int"in e)return e.int;throw new Nf(e,this,`Sapling state is expecting an object with an int property. Got ${JSON.stringify(e)}`)}Encode(e){const r=e.pop();if(this.isValid(r))return[];throw new Nf(r,this,`Invalid sapling_state. Received: ${JSON.stringify(r)} while expecting: {}`)}EncodeObject(e,r){if(r&&r[ii.prim])return r[ii.prim](e);if(this.isValid(e))return[];throw new Nf(e,this,`Invalid sapling_state. Received: ${JSON.stringify(e)} while expecting: {}`)}ExtractSchema(){return{[ii.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:ii.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return ii.prim===e&&r.push(this),r}}ii.prim="sapling_state";class _l extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="SaplingTransactionValidationError"}}class on extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Execute(e){throw new _l(e,this,`There is no literal value for the sapling_transaction type. Got: ${JSON.stringify(e)}.`)}validateBytes(e){const r=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(r&&r[2].length%2===0)return r[2];throw new _l(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),{bytes:String(r).toString()}}EncodeObject(e,r){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),r&&r[on.prim]?r[on.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[on.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:on.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return on.prim===e&&r.push(this),r}}on.prim="sapling_transaction";class wl extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="SaplingTransactionDeprecatedValidationError"}}class cn extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Execute(e){throw new wl(e,this,`There is no literal value for the sapling_transaction_deprecated type. Got: ${JSON.stringify(e)}.`)}validateBytes(e){const r=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(r&&r[2].length%2===0)return r[2];throw new wl(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),{bytes:String(r).toString()}}EncodeObject(e,r){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),r&&r[cn.prim]?r[cn.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[cn.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:cn.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return cn.prim===e&&r.push(this),r}}cn.prim="sapling_transaction_deprecated";class Cw extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="Bls12381frValidationError"}}class Ii extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}validate(e){if(!(/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0))throw new Cw(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return typeof r=="number"?{int:r.toString()}:(r=this.convertUint8ArrayToHexString(r),this.validate(r),{bytes:r})}EncodeObject(e,r){return r&&r[Ii.prim]?r[Ii.prim](e):typeof e=="number"?{int:e.toString()}:(e=this.convertUint8ArrayToHexString(e),this.validate(e),{bytes:e})}Execute(e){return e.bytes}ExtractSchema(){return Ii.prim}generateSchema(){return{__michelsonType:Ii.prim,schema:Ii.prim}}findAndReturnTokens(e,r){return Ii.prim===e&&r.push(this),r}}Ii.prim="bls12_381_fr";class Bw extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="Bls12381g1ValidationError"}}class Ti extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}validate(e){if(!(/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0))throw new Bw(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.convertUint8ArrayToHexString(r),this.validate(r),{bytes:r}}EncodeObject(e,r){return e=this.convertUint8ArrayToHexString(e),this.validate(e),r&&r[Ti.prim]?r[Ti.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Ti.prim}generateSchema(){return{__michelsonType:Ti.prim,schema:Ti.prim}}findAndReturnTokens(e,r){return Ti.prim===e&&r.push(this),r}}Ti.prim="bls12_381_g1";class Dw extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="Bls12381g2ValidationError"}}class Mi extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}validate(e){if(!(/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0))throw new Dw(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.convertUint8ArrayToHexString(r),this.validate(r),{bytes:r}}EncodeObject(e,r){return e=this.convertUint8ArrayToHexString(e),this.validate(e),r&&r[Mi.prim]?r[Mi.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Mi.prim}generateSchema(){return{__michelsonType:Mi.prim,schema:Mi.prim}}findAndReturnTokens(e,r){return Mi.prim===e&&r.push(this),r}}Mi.prim="bls12_381_g2";class kw extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="ChestValidationError"}}class Li extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}validate(e){if(!(/^[0-9a-fA-F]*$/.test(e)&&e.length%2==0))throw new kw(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.convertUint8ArrayToHexString(r),this.validate(r),{bytes:r}}EncodeObject(e,r){return e=this.convertUint8ArrayToHexString(e),this.validate(e),r&&r[Li.prim]?r[Li.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Li.prim}generateSchema(){return{__michelsonType:Li.prim,schema:Li.prim}}findAndReturnTokens(e,r){return Li.prim===e&&r.push(this),r}}Li.prim="chest";class $w extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="ChestKeyValidationError"}}class Ni extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}validate(e){if(!(/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0))throw new $w(e,this,`Invalid bytes: ${JSON.stringify(e)}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.convertUint8ArrayToHexString(r),this.validate(r),{bytes:r}}EncodeObject(e,r){return e=this.convertUint8ArrayToHexString(e),this.validate(e),r&&r[Ni.prim]?r[Ni.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Ni.prim}generateSchema(){return{__michelsonType:Ni.prim,schema:Ni.prim}}findAndReturnTokens(e,r){return Ni.prim===e&&r.push(this),r}}Ni.prim="chest_key";class El extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="GlobalConstantEncodingError"}}class Uw extends Ze{constructor(e,r,i){super(e,r,i),this.value=e,this.token=r,this.name="GlobalConstantDecodingError"}}class ni extends Rt{constructor(e,r,i){super(e,r,i),this.val=e,this.idx=r,this.fac=i}Execute(e,r){if(r&&r[ni.prim])return r[ni.prim](e,this.val);throw new Uw(e,this,`Unable to decode a value represented by a global constants. Please provide an expanded script to the Michelson-Encoder or semantics for the decoding. The following global constant hash was encountered: ${this.val.args[0].string}.`)}Encode(e){throw new El(e,this,`Unable to encode a script containing global constants. Please provide an expanded script to the Michelson-Encoder. The following global constant hash was encountered: ${this.val.args[0].string}.`)}EncodeObject(e,r){if(r&&r[ni.prim])return r[ni.prim](e);throw new El(e,this,`Unable to encode a script containing global constants. Please provide an expanded script to the Michelson-Encoder. The following global constant hash was encountered: ${this.val.args[0].string}.`)}ExtractSchema(){return ni.prim}generateSchema(){return{__michelsonType:ni.prim,schema:{hash:this.val.args[0].string}}}findAndReturnTokens(e,r){return ni.prim===e&&r.push(this),r}}ni.prim="constant";const Hw=[xt,zr,qr,vr,Si,Ri,hn,Wr,Ue,dr,nn,Jr,Zr,bs,Xr,Qt,Yr,Qr,ei,ti,sn,Oi,an,ri,si,ai,Pi,ii,on,cn,Ii,Ti,Mi,Li,Ni,ni];class Fw extends et{constructor(e,r){super(e),this.message=e,this.data=r,this.name="Invalid token error"}}function Hn(t,e){if(Array.isArray(t))return new xt(t,e,Hn);const r=Hw.find(i=>i.prim===t.prim);if(!r)throw new Fw(`Malformed data: ${JSON.stringify(t)}. Expected a value with a valid prim property`,t);return new r(t,e,Hn)}class cu extends n0{constructor(e,r,i,n){super(e,r,i,n),this.viewName=e,this.sigs=r,this.args=i,this.cause=n,this.name="ParameterEncodingError",this.message=`Could not encode parameter ${JSON.stringify(i)} received for name "${e}" expecting one of the following signatures ${JSON.stringify(r)}`}}class Cf extends et{constructor(e,r){super(),this.script=e,this.reason=r,this.name="InvalidScriptError";let i="Invalid on-chain view found in the following script.";r&&(i+=` Reason: ${r}.`),i+=`Script: ${JSON.stringify(e)}`,this.message=i}}class Bi extends et{constructor(e,r){super(),this.script=e,this.reason=r,this.name="InvalidRpcResponseError";let i="Invalid RPC response passed as argument(s).";r&&(i+=` Reason: ${r}.`),i+=` Received: ${JSON.stringify(e)}`,this.message=i}}class Ca extends et{constructor(e){super(e),this.message=e,this.name="InvalidBigMapSchemaError"}}class Kw extends et{constructor(e,r){super(e),this.message=e,this.value=r,this.name="InvalidBigMapDiffError"}}class jw extends et{constructor(e,r,i,n){super(),this.details=r,this.schema=i,this.value=n,this.name="BigMapEncodingError",this.message=`Unable to encode the big map ${e}. Schema is: ${JSON.stringify(i)}. The ${e} is: ${JSON.stringify(n)}. Error details: ${r}`}}class Gw extends et{constructor(e,r,i,n,s){super(),this.details=r,this.schema=i,this.value=n,this.semantics=s,this.name="StorageEncodingError",this.message=`Unable to encode ${e}. The schema is: ${JSON.stringify(i)}, the value is: ${JSON.stringify(n)}.${s?`And the semantic is: ${JSON.stringify(s)}`:""}. Error details: ${r}`}}class Vw extends et{constructor(e){super(e),this.message=e,this.name="MissingArgumentError"}}var T1;const M1=Symbol.for("taquito-schema-type-symbol");function sa(t,e=xt.prim){var r,i;if(Array.isArray(t))return sa({prim:e,args:t},e);const n=t;return n.prim===e&&n.args&&n.args.length>2?Object.assign(Object.assign({},n),{args:[(r=n.args)===null||r===void 0?void 0:r[0],{prim:e,args:(i=n.args)===null||i===void 0?void 0:i.slice(1)}]}):n}function eh(t,e){if(t===void 0||e===void 0)return t===e;const r=sa(t),i=sa(e);return r.prim===i.prim&&(r.args===void 0&&i.args===void 0||r.args!==void 0&&i.args!==void 0&&r.args.length===i.args.length&&r.args.every((n,s)=>{var a,o;return eh(n,(o=(a=i.args)===null||a===void 0?void 0:a[s])!==null&&o!==void 0?o:{})}))&&(r.annots===void 0&&i.annots===void 0||r.annots!==void 0&&i.annots!==void 0&&r.annots.length===i.annots.length&&r.annots.every((n,s)=>{var a;return n===((a=i.annots)===null||a===void 0?void 0:a[s])}))}class yr{constructor(e){if(this.val=e,this[T1]=!0,this.root=Hn(e,0),this.root instanceof vr)this.bigMap=this.root;else if(this.isExpressionExtended(e)&&e.prim==="pair"){const r=e.args[0];this.isExpressionExtended(r)&&r.prim==="big_map"&&(this.bigMap=new vr(r,0,Hn))}}static isSchema(e){return e&&e[M1]===!0}static fromRPCResponse(e){if(!e)throw new Bi(e,"the RPC response is empty");if(!e.script)throw new Bi(e,"the RPC response has no script");if(!Array.isArray(e.script.code))throw new Bi(e,"The response.script.code should be an array");let r=e.script.code;for(;r.length===1&&Array.isArray(r[0]);)r=r[0];const i=r.find(n=>"prim"in n&&n.prim==="storage");if(!i||!Array.isArray(i.args))throw new Bi(e,'The response.script.code has an element of type {prim: "storage"}, but its args is not an array');return new yr(i.args[0])}isExpressionExtended(e){return"prim"in e&&Array.isArray(e.args)}removeTopLevelAnnotation(e){return(this.root instanceof xt||this.root instanceof Ue)&&this.root.hasAnnotations()&&typeof e=="object"&&Object.keys(e).length===1?e[Object.keys(e)[0]]:e}Execute(e,r){const i=this.root.Execute(e,r);return this.removeTopLevelAnnotation(i)}Typecheck(e){this.root instanceof vr&&Number.isInteger(Number(e))||this.root instanceof si&&e.ticketer&&e.value&&e.amount||this.root instanceof ai&&e.ticketer&&e.value&&e.amount||this.root instanceof hn&&this.root.ValueSchema instanceof vr||this.root.EncodeObject(e)}ExecuteOnBigMapDiff(e,r){if(!this.bigMap)throw new Ca("Big map schema is undefined");if(!Array.isArray(e))throw new Kw(`Big map diff must be an array, got: ${JSON.stringify(e)}`,e);const i=e.map(({key:n,value:s})=>({args:[n,s]}));return this.bigMap.Execute(i,r)}ExecuteOnBigMapValue(e,r){if(!this.bigMap)throw new Ca("Big map schema is undefined");return this.bigMap.ValueSchema.Execute(e,r)}EncodeBigMapKey(e){if(!this.bigMap)throw new Ca("Big map schema is undefined");try{return this.bigMap.KeySchema.ToBigMapKey(e)}catch(r){throw new jw("key",r,this.bigMap.KeySchema,e)}}Encode(e,r){try{return this.root.EncodeObject(e,r)}catch(i){throw i instanceof Ze?i:new Gw("storage object",i,this.root,e,r)}}ExtractSchema(){return this.removeTopLevelAnnotation(this.root.ExtractSchema())}generateSchema(){return this.removeTopLevelAnnotation(this.root.generateSchema())}ComputeState(e,r){if(!this.bigMap)throw new Ca("Big map schema is undefined");const i=e.reduce((n,s)=>Object.assign(Object.assign({},n),this.ExecuteOnBigMapDiff(s.contents[0].metadata.operation_result.big_map_diff)),{});return Object.assign(Object.assign({},this.Execute(r)),{[this.bigMap.annot()]:i})}FindFirstInTopLevelPair(e,r){return this.findValue(this.root.val,e,r)}findValue(e,r,i){if(eh(i,e))return r;if(Array.isArray(e)||e.prim==="pair"){const n=sa(e),s=sa(r,"Pair");if(n.args===void 0||s.args===void 0)throw new Vw("Tokens have no arguments");if(n.args[0])return this.findValue(n.args[0],s.args[0],i)||this.findValue(n.args[1],s.args[1],i)}}findToken(e){const r=[];return this.root.findAndReturnTokens(e,r)}}T1=M1;class ts{constructor(e){this.root=Hn(e,0)}static fromRPCResponse(e){if(!e)throw new Bi(e,"the RPC response is empty");if(!e.script)throw new Bi(e,"the RPC response has no script");if(!Array.isArray(e.script.code))throw new Bi(e,"The response.script.code should be an array");const r=e.script.code.find(i=>"prim"in i&&i.prim==="parameter");if(!r)throw new Bi(e,'The response.script.code should have an element of type {prim: "parameter"}');if(!Array.isArray(r.args))throw new Bi(e,'The response.script.code has an element of type {prim: "parameter"}, but its args is not an array');return new ts(r.args[0])}get isMultipleEntryPoint(){return this.root instanceof Ue||this.root instanceof bs&&this.root.subToken()instanceof Ue}get hasAnnotation(){return this.isMultipleEntryPoint?Object.keys(this.ExtractSchema())[0]!=="0":!0}Execute(e,r){return this.root.Execute(e,r)}Encode(...e){try{return this.root.Encode(e.reverse())}catch(r){throw r instanceof Ze?r:new cu("Unable to encode parameter",this.root,e,r)}}EncodeObject(e,r){try{return this.root.EncodeObject(e,r)}catch(i){throw i instanceof Ze?i:new cu("Unable to encode parameter object",this.root,e,i)}}ExtractSchema(){return this.root.ExtractSchema()}generateSchema(){return this.root.generateSchema()}ExtractSignatures(){return this.root.ExtractSignature()}}class th{constructor(e){if(!e)throw new Cf(e,"the args are not defined");if(e.length!==4)throw new Cf(e,"there should be exactly 4 arguments");if(!("string"in e[0])||!e[0].string)throw new Cf(e,"The first argument should be a string, representing the view name. It should be in the form: { string: 'viewName' }");this.viewName=e[0].string,this.viewArgsType=e[1],this.viewReturnType=e[2],this.instructions=e[3],this.rootArgsType=Hn(this.viewArgsType,0),this.rootReturnType=Hn(this.viewReturnType,0)}static fromRPCResponse(e){const r=[],i=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.filter(n=>n.prim==="view");return i&&i.forEach(n=>{r.push(new th(n.args))}),r}encodeViewArgs(e){try{return this.rootArgsType.EncodeObject(e)}catch(r){throw new cu(this.viewName,void 0,e,r)}}decodeViewResult(e,r){return this.rootReturnType.Execute(e,r)}extractArgsSchema(){return this.rootArgsType.ExtractSchema()}extractResultSchema(){return this.rootReturnType.ExtractSchema()}}class tn{constructor(e,r){this.tag=e,this.type=r}static fromMichelineValue(e){var r,i;return new tn((r=e.annots)===null||r===void 0?void 0:r[0],(i=e.args)===null||i===void 0?void 0:i[0])}static fromRPCResponse(e){const r=[];return e.script.code.forEach(i=>{!("prim"in i)||i.prim!=="code"||!("args"in i)||!i.args||r.push(...tn.extractEventsRecursively(i.args))}),tn.removeDuplicates(r)}static removeDuplicates(e){const r=[];return e.forEach(i=>{r.findIndex(s=>s.tag===i.tag&&eh(s.type,i.type))===-1&&r.push(i)}),r}static extractEventsRecursively(e){return Array.isArray(e)?e.flatMap(r=>tn.extractEventsRecursively(r)):"prim"in e?e.prim==="EMIT"?[tn.fromMichelineValue(e)]:!("args"in e)||!e.args?[]:e.args.flatMap(r=>tn.extractEventsRecursively(r)):[]}}const fu=Symbol(),sr=Symbol("source_reference");class On extends Error{constructor(e,r,i){super(i),this.src=e,this.idx=r,Object.setPrototypeOf(this,On.prototype)}}var ar;(function(t){t[t.Comment=0]="Comment",t[t.Number=1]="Number",t[t.String=2]="String",t[t.Bytes=3]="Bytes",t[t.Ident=4]="Ident"})(ar||(ar={}));const zw=new RegExp("\\s"),qw=new RegExp("[:@%_A-Za-z]"),Ww=new RegExp("[@%_\\.A-Za-z0-9]"),xl=new RegExp("[0-9]"),Jw=new RegExp("[0-9a-fA-F]");function*Bf(t,e=!1){let r=0;for(;r<t.length;){for(;r<t.length&&zw.test(t[r]);)r++;if(r===t.length)return;const i=t[r],n=r;if(qw.test(i)){for(r++;r<t.length&&Ww.test(t[r]);)r++;yield{t:ar.Ident,v:t.slice(n,r),first:n,last:r}}else if(t.length-r>1&&t.substring(r,r+2)==="0x"){for(r+=2;r<t.length&&Jw.test(t[r]);)r++;if(r-n&1)throw new On(t,r,"Bytes literal length is expected to be power of two");yield{t:ar.Bytes,v:t.slice(n,r),first:n,last:r}}else if(xl.test(i)||i==="-"){i==="-"&&r++;const s=r;for(;r<t.length&&xl.test(t[r]);)r++;if(s===r)throw new On(t,r,"Number literal is too short");yield{t:ar.Number,v:t.slice(n,r),first:n,last:r}}else if(i==='"'){r++;let s=!1;for(;r<t.length&&(s||t[r]!=='"');r++)!s&&t[r]==="\\"?s=!0:s=!1;if(r===t.length)throw new On(t,r,"Unterminated string literal");r++,yield{t:ar.String,v:t.slice(n,r),first:n,last:r}}else if(i==="#"){for(r++;r<t.length&&t[r]!==`
`;)r++;e&&(yield{t:ar.Comment,v:t.slice(n,r),first:n,last:r})}else if(t.length-r>1&&t.substring(r,r+2)==="/*"){for(r+=2;r<t.length&&!(t.length-r>1&&t.substring(r,r+2)==="*/");)r++;if(r===t.length)throw new On(t,r,"Unterminated C style comment");r+=2,e&&(yield{t:ar.Comment,v:t.slice(n,r),first:n,last:r})}else if(i==="("||i===")"||i==="{"||i==="}"||i===";")r++,yield{t:i,v:i,first:n,last:r};else throw new On(t,r,`Invalid character at offset ${r}: \`${i}'`)}}const Ba=Symbol("ref_contract");var Fi;(function(t){t.Ps9mPmXa="Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P",t.PtCJ7pwo="PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY",t.PsYLVpVv="PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt",t.PsddFKi3="PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP",t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdoTez="PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLoren="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANAD="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangzH="PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakarta="PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.PtNairobi="PtNairobiyssHuh87hEhfVBGCVrK3WnS8Z2FT4ymB5tAa4r1nQf",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(Fi||(Fi={}));const L1=Fi.Psithaca2,Al={Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P:0,PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY:1,PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt:2,PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP:3,Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd:4,PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU:5,PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS:5,PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb:6,PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo:7,PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq:8,PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA:8,PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i:9,PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV:10,PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r:11,PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx:11,PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP:12,Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A:12,PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw:13,PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY:13,PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg:14,PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW:15,PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc:16,PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1:16,PtNairobiyssHuh87hEhfVBGCVrK3WnS8Z2FT4ymB5tAa4r1nQf:17,ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK:18};function rs(t,e){return Al[t]<Al[e]}class _r extends Error{constructor(e,r){super(r),this.prim=e,Object.setPrototypeOf(this,_r.prototype)}}function at(t,e){var r,i;if(e===0&&t.args===void 0||((r=t.args)===null||r===void 0?void 0:r.length)===e)return!0;throw new _r(t,`macro ${t.prim} expects ${e} arguments, was given ${(i=t.args)===null||i===void 0?void 0:i.length}`)}function Vs(t){if(t.annots===void 0)return!0;throw new _r(t,`unexpected annotation on macro ${t.prim}: ${t.annots}`)}function Sl(t,e){if("int"in e)return!0;throw new _r(t,`macro ${t.prim} expects int argument`)}function Xs(t,e,r,i){let n=0,s=0;const a=[null,null];let o;if(n===e.length)throw new _r(t,`unexpected end: ${t.prim}`);let f=e[n++];switch(f){case"P":{const{r:g,n:y,an:S}=Xs(t,e.slice(n),r.slice(s),i);o=g,n+=y,s+=S;break}case"A":s!==r.length&&(a[0]=r[s++]);break;default:throw new _r(t,`${t.prim}: unexpected character: ${f}`)}let d;if(n===e.length)throw new _r(t,`unexpected end: ${t.prim}`);switch(f=e[n++],f){case"P":{const{r:g,n:y,an:S}=Xs(t,e.slice(n),r.slice(s),i);d=g.map(([O,P])=>[O+1,P]),n+=y,s+=S;break}case"I":s!==r.length&&(a[1]=r[s++]);break;default:throw new _r(t,`${t.prim}: unexpected character: ${f}`)}return{r:i(o,d,[0,a]),n,an:s}}function go(t,e,r,i){const n=e[0];switch(n){case"A":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CAR",annots:["@%%"]},go(t,e.slice(1),[],i)]]},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%@","%@",...r]}]:i.a;case"D":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CDR",annots:["@%%"]},go(t,e.slice(1),[],i)]]},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%@",...r]}]:i.d;default:throw new _r(t,`${t.prim}: unexpected character: ${n}`)}}function Zw(t,e){let r=t.length;for(;r>0&&t[r-1]===e;)r--;return t.slice(0,r)}function Df(t){const e=[],r=[];if(t!==void 0)for(const i of t)(i.length!==0&&i[0]==="%"?e:r).push(i);return{fields:e,rest:r}}function Lt({prim:t,annots:e,args:r}){return Object.assign(Object.assign({prim:t},e&&{annots:e}),r&&{args:r})}const Xw=/^P[PAI]{3,}R$/,Yw=/^UNP[PAI]{2,}R$/,Qw=/^C[AD]{2,}R$/,e4=/^SET_C[AD]+R$/,t4=/^MAP_C[AD]+R$/,r4=/^DI{2,}P$/,i4=/^DU+P$/;function n4(t,e){const r=e?.protocol||L1;function i(n){return n!==void 0?[{prim:"RENAME",annots:n}]:[]}switch(t.prim){case"CMPEQ":case"CMPNEQ":case"CMPLT":case"CMPGT":case"CMPLE":case"CMPGE":if(at(t,0))return[{prim:"COMPARE"},Lt({prim:t.prim.slice(3),annots:t.annots})];break;case"IFEQ":case"IFNEQ":case"IFLT":case"IFGT":case"IFLE":case"IFGE":if(at(t,2))return[{prim:t.prim.slice(2)},Lt({prim:"IF",annots:t.annots,args:t.args})];break;case"IFCMPEQ":case"IFCMPNEQ":case"IFCMPLT":case"IFCMPGT":case"IFCMPLE":case"IFCMPGE":if(at(t,2))return[{prim:"COMPARE"},{prim:t.prim.slice(5)},Lt({prim:"IF",annots:t.annots,args:t.args})];break;case"FAIL":if(at(t,0)&&Vs(t))return[{prim:"UNIT"},{prim:"FAILWITH"}];break;case"ASSERT":if(at(t,0)&&Vs(t))return[{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_EQ":case"ASSERT_NEQ":case"ASSERT_LT":case"ASSERT_GT":case"ASSERT_LE":case"ASSERT_GE":if(at(t,0)&&Vs(t))return[{prim:t.prim.slice(7)},{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_CMPEQ":case"ASSERT_CMPNEQ":case"ASSERT_CMPLT":case"ASSERT_CMPGT":case"ASSERT_CMPLE":case"ASSERT_CMPGE":if(at(t,0)&&Vs(t))return[[{prim:"COMPARE"},{prim:t.prim.slice(10)}],{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_NONE":if(at(t,0)&&Vs(t))return[{prim:"IF_NONE",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_SOME":if(at(t,0))return[{prim:"IF_NONE",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],i(t.annots)]}];break;case"ASSERT_LEFT":if(at(t,0))return[{prim:"IF_LEFT",args:[i(t.annots),[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_RIGHT":if(at(t,0))return[{prim:"IF_LEFT",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],i(t.annots)]}];break;case"IF_SOME":if(at(t,2))return[Lt({prim:"IF_NONE",annots:t.annots,args:[t.args[1],t.args[0]]})];break;case"IF_RIGHT":if(at(t,2))return[Lt({prim:"IF_LEFT",annots:t.annots,args:[t.args[1],t.args[0]]})];break;case"CAR":case"CDR":if(t.args!==void 0){if(at(t,1)&&Sl(t,t.args[0])){const n=parseInt(t.args[0].int,10);return Lt({prim:"GET",args:[{int:t.prim==="CAR"?String(n*2+1):String(n*2)}],annots:t.annots})}}else return t}if(Xw.test(t.prim)&&at(t,0)){const{fields:n,rest:s}=Df(t.annots),{r:a}=Xs(t,t.prim.slice(1),n,(o,f,d)=>[...o||[],...f||[],d]);return a.map(([o,f],d)=>{const g=[...Zw(f,null).map(S=>S===null?"%":S),...o===0&&d===a.length-1?s:[]],y=Lt({prim:"PAIR",annots:g.length!==0?g:void 0});return o===0?y:{prim:"DIP",args:o===1?[[y]]:[{int:String(o)},[y]]}})}if(Yw.test(t.prim))if(rs(r,Fi.PtEdo2Zk)&&at(t,0)){const{r:n}=Xs(t,t.prim.slice(3),t.annots||[],(s,a,o)=>[o,...a||[],...s||[]]);return n.map(([s,a])=>{const o=[{prim:"DUP"},Lt({prim:"CAR",annots:a[0]!==null?[a[0]]:void 0}),{prim:"DIP",args:[[Lt({prim:"CDR",annots:a[1]!==null?[a[1]]:void 0})]]}];return s===0?o:{prim:"DIP",args:s===1?[[o]]:[{int:String(s)},[o]]}})}else{if(t.prim==="UNPAIR")return t;if(at(t,0)){const{r:n}=Xs(t,t.prim.slice(3),[],(s,a,o)=>[o,...a||[],...s||[]]);return n.map(([s])=>{const a=Lt({prim:"UNPAIR"});return s===0?a:{prim:"DIP",args:s===1?[[a]]:[{int:String(s)},[a]]}})}}if(Qw.test(t.prim)&&at(t,0)){const n=[...t.prim.slice(1,t.prim.length-1)];return n.map((s,a)=>{const o=a===n.length-1?t.annots:void 0;switch(s){case"A":return Lt({prim:"CAR",annots:o});case"D":return Lt({prim:"CDR",annots:o});default:throw new _r(t,`unexpected character: ${s}`)}})}if(e4.test(t.prim)&&at(t,0)){const{fields:n,rest:s}=Df(t.annots);if(n.length>1)throw new _r(t,`unexpected annotation on macro ${t.prim}: ${n}`);const a=n.length!==0?{a:[{prim:"DUP"},{prim:"CAR",annots:n},{prim:"DROP"},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:[n[0],"%@"]}],d:[{prim:"DUP"},{prim:"CDR",annots:n},{prim:"DROP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",n[0]]}]}:{a:[{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%","%@"]}],d:[{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%"]}]};return go(t,t.prim.slice(5,t.prim.length-1),s,a)}if(t4.test(t.prim)&&at(t,1)){const{fields:n}=Df(t.annots);if(n.length>1)throw new _r(t,`unexpected annotation on macro ${t.prim}: ${n}`);const s={a:[{prim:"DUP"},{prim:"CDR",annots:["@%%"]},{prim:"DIP",args:[[Lt({prim:"CAR",annots:n.length!==0?["@"+n[0].slice(1)]:void 0}),t.args[0]]]},{prim:"SWAP"},{prim:"PAIR",annots:[n.length!==0?n[0]:"%","%@"]}],d:[{prim:"DUP"},Lt({prim:"CDR",annots:n.length!==0?["@"+n[0].slice(1)]:void 0}),t.args[0],{prim:"SWAP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",n.length!==0?n[0]:"%"]}]};return go(t,t.prim.slice(5,t.prim.length-1),[],s)}if(r4.test(t.prim)&&at(t,1)){let n=0;for(;t.prim[1+n]==="I";)n++;return Lt({prim:"DIP",args:[{int:String(n)},t.args[0]]})}if(i4.test(t.prim)){let n=0;for(;t.prim[1+n]==="U";)n++;if(rs(r,Fi.PtEdo2Zk)){if(n===1){if(t.args===void 0)return t;at(t,1)&&Sl(t,t.args[0])&&(n=parseInt(t.args[0].int,10))}else at(t,0);return n===1?[Lt({prim:"DUP",annots:t.annots})]:n===2?[{prim:"DIP",args:[[Lt({prim:"DUP",annots:t.annots})]]},{prim:"SWAP"}]:[{prim:"DIP",args:[{int:String(n-1)},[Lt({prim:"DUP",annots:t.annots})]]},{prim:"DIG",args:[{int:String(n)}]}]}else{if(n===1)return t;if(at(t,0))return Lt({prim:"DUP",args:[{int:String(n)}],annots:t.annots})}}return t}function s4(t,e){return t.args!==void 0&&t.args.length===1&&"string"in t.args[0]&&t.args[0].string in e?e[t.args[0].string]:t}class as extends Error{constructor(e,r){super(r),this.token=e,Object.setPrototypeOf(this,as.prototype)}}class Gr extends Error{constructor(e,r){super(r),this.node=e,Object.setPrototypeOf(this,Gr.prototype)}}const kf=new as(null,"Unexpected EOF");function Rl(t){return t.t===ar.Ident&&(t.v[0]==="@"||t.v[0]==="%"||t.v[0]===":")}const a4=new RegExp("^-?[0-9]+$"),o4=new RegExp("^([0-9a-fA-F]{2})*$");class Mn{constructor(e){this.opt=e}expand(e){var r,i,n;if(((r=this.opt)===null||r===void 0?void 0:r.expandGlobalConstant)!==void 0&&e.prim==="constant"){const s=s4(e,this.opt.expandGlobalConstant);return s!==e&&(s[sr]=Object.assign(Object.assign({},e[sr]||{first:0,last:0}),{globalConstant:e})),s}if(((i=this.opt)===null||i===void 0?void 0:i.expandMacros)===void 0||!((n=this.opt)===null||n===void 0)&&n.expandMacros){const s=n4(e,this.opt);return s!==e&&(s[sr]=Object.assign(Object.assign({},e[sr]||{first:0,last:0}),{macro:e})),s}else return e}parseListExpr(e,r){var i;const n={first:r.first,last:r.last},s=r.t==="(";let a;if(s){if(a=e.next(),a.done)throw kf;n.last=a.value.last}else a={value:r};if(a.value.t!==ar.Ident)throw new as(a.value,`not an identifier: ${a.value.v}`);const o={prim:a.value.v,[sr]:n};for(;;){const f=e.next();if(f.done){if(s)throw kf;break}else if(f.value.t===")"){if(!s)throw new as(f.value,"unexpected closing bracket");n.last=f.value.last;break}else if(Rl(f.value))o.annots=o.annots||[],o.annots.push(f.value.v),n.last=f.value.last;else{o.args=o.args||[];const d=this.parseExpr(e,f.value);n.last=((i=d[sr])===null||i===void 0?void 0:i.last)||n.last,o.args.push(d)}}return this.expand(o)}parseArgs(e,r){var i;const n={first:r.first,last:r.last},s={prim:r.v,[sr]:n};for(;;){const a=e.next();if(a.done||a.value.t==="}"||a.value.t===";")return[s,a];if(Rl(a.value))n.last=a.value.last,s.annots=s.annots||[],s.annots.push(a.value.v);else{const o=this.parseExpr(e,a.value);n.last=((i=o[sr])===null||i===void 0?void 0:i.last)||n.last,s.args=s.args||[],s.args.push(o)}}}parseSequenceExpr(e,r){var i,n;const s={first:r.first,last:r.last},a=[];a[sr]=s;const o=r.t==="{";let f=r.t==="{"?null:{value:r};for(;;){if(f===null&&(f=e.next(),f.done||(s.last=f.value.last)),f.done){if(o)throw kf;return a}if(f.value.t==="}"){if(o)return a;throw new as(f.value,"unexpected closing bracket")}else if(f.value.t===ar.Ident){const[d,g]=this.parseArgs(e,f.value);s.last=((i=d[sr])===null||i===void 0?void 0:i.last)||s.last,a.push(this.expand(d)),f=g}else{const d=this.parseExpr(e,f.value);s.last=((n=d[sr])===null||n===void 0?void 0:n.last)||s.last,a.push(d),f=null}f===null&&(f=e.next(),f.done||(s.last=f.value.last)),!f.done&&f.value.t===";"&&(f=null)}}parseExpr(e,r){switch(r.t){case ar.Ident:return this.expand({prim:r.v,[sr]:{first:r.first,last:r.last}});case ar.Number:return{int:r.v,[sr]:{first:r.first,last:r.last}};case ar.String:return{string:JSON.parse(r.v),[sr]:{first:r.first,last:r.last}};case ar.Bytes:return{bytes:r.v.slice(2),[sr]:{first:r.first,last:r.last}};case"{":return this.parseSequenceExpr(e,r);default:return this.parseListExpr(e,r)}}parseSequence(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=Bf(e),i=r.next();return i.done?null:this.parseSequenceExpr(r,i.value)}parseList(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=Bf(e),i=r.next();return i.done?null:this.parseListExpr(r,i.value)}parseMichelineExpression(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=Bf(e),i=r.next();return i.done?null:this.parseExpr(r,i.value)}parseScript(e){return this.parseSequence(e)}parseData(e){return this.parseList(e)}parseJSON(e){if(typeof e!="object")throw new TypeError(`object type was expected, got ${typeof e} instead`);if(Array.isArray(e)){const r=[];for(const i of e){if(i===null||typeof i!="object")throw new Gr(i,`unexpected sequence element: ${i}`);r.push(this.parseJSON(i))}return r}else if("prim"in e){const r=e;if(typeof r.prim=="string"&&(r.annots===void 0||Array.isArray(r.annots))&&(r.args===void 0||Array.isArray(r.args))){const i={prim:r.prim};if(r.annots!==void 0){for(const n of r.annots)if(typeof n!="string")throw new Gr(n,`string expected: ${n}`);i.annots=r.annots}if(r.args!==void 0){i.args=[];for(const n of r.args){if(n===null||typeof n!="object")throw new Gr(n,`unexpected argument: ${n}`);i.args.push(this.parseJSON(n))}}return this.expand(i)}throw new Gr(e,`malformed prim expression: ${e}`)}else if("string"in e){if(typeof e.string=="string")return{string:e.string};throw new Gr(e,`malformed string literal: ${e}`)}else if("int"in e){if(typeof e.int=="string"&&a4.test(e.int))return{int:e.int};throw new Gr(e,`malformed int literal: ${e}`)}else if("bytes"in e){if(typeof e.bytes=="string"&&o4.test(e.bytes))return{bytes:e.bytes};throw new Gr(e,`malformed bytes literal: ${e}`)}else throw new Gr(e,`unexpected object: ${e}`)}}const c4=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],f4=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];class uu extends Error{constructor(e){super(e),this.message=e,this.name="Base58DecodingError"}}function Ol(t){const e=(t.length+9)%64,r=e===0?0:64-e;if(t.length>268435455)throw new qg("",`: Invalid length ${t.length} is too big -- SHA-256.`);const i=t.length<<3,n=[...t,128,...new Array(r).fill(0),0,0,0,0,i>>24&255,i>>16&255,i>>8&255,i&255];function s(g,y){return g>>>y|g<<32-y}const a=[...c4],o=new Array(64),f=new Array(8);for(let g=0;g<n.length;g+=64){let y=g,S=0;for(;S<16;)o[S]=n[y]<<24|n[y+1]<<16|n[y+2]<<8|n[y+3],y+=4,S++;for(;S<64;){const O=s(o[S-15],7)^s(o[S-15],18)^o[S-15]>>>3,P=s(o[S-2],17)^s(o[S-2],19)^o[S-2]>>>10;o[S]=(P|0)+o[S-7]+O+o[S-16]|0,S++}for(let O=0;O<8;O++)f[O]=a[O];for(let O=0;O<64;O++){const P=s(f[0],2)^s(f[0],13)^s(f[0],22),M=s(f[4],6)^s(f[4],11)^s(f[4],25),B=f[7]+M+(f[4]&f[5]^~f[4]&f[6])+f4[O]+o[O]|0,C=P+(f[0]&f[1]^f[0]&f[2]^f[1]&f[2])|0;f[7]=f[6],f[6]=f[5],f[5]=f[4],f[4]=f[3]+B|0,f[3]=f[2],f[2]=f[1],f[1]=f[0],f[0]=B+C|0}for(let O=0;O<8;O++)a[O]=a[O]+f[O]|0}const d=[];for(const g of a)d.push(g>>24&255),d.push(g>>16&255),d.push(g>>8&255),d.push(g&255);return d}const $f=[0,1,2,3,4,5,6,7,8,-1,-1,-1,-1,-1,-1,-1,9,10,11,12,13,14,15,16,-1,17,18,19,20,21,-1,22,23,24,25,26,27,28,29,30,31,32,-1,-1,-1,-1,-1,-1,33,34,35,36,37,38,39,40,41,42,43,-1,44,45,46,47,48,49,50,51,52,53,54,55,56,57];function Pl(t,e){const r=t.charCodeAt(e)-49;if(r>=$f.length||$f[r]===-1)throw new uu(`Unexpected character at position ${e}: ${t[e]}`);return $f[r]}function u4(t){const e=[];let r=0;for(;r<t.length&&Pl(t,r)===0;)r++;let i=r;for(;r<t.length;){let n=Pl(t,r++),s=0;for(;n!==0||s<e.length;){const a=(e[s]||0)*58+n;e[s++]=a%256,n=Math.floor(a/256)}}for(;i-- >0;)e.push(0);return e.reverse()}function N1(t){const e=u4(t);if(e.length<4)throw new uu(`Data is too short ${e.length}`);const r=e.slice(0,e.length-4),i=e.slice(e.length-4),n=Ol(Ol(r));if(i[0]!==n[0]||i[1]!==n[1]||i[2]!==n[2]||i[3]!==n[3])throw new uu("Invalid checksum");return r}class h4 extends Error{constructor(e){super(),this.message=e,this.name="InvalidContractError"}}class d4 extends Error{constructor(e){super(),this.message=e,this.name="InvalidTypeExpressionError"}}class l4 extends Error{constructor(e){super(),this.message=e,this.name="InvalidDataExpressionError"}}class p4 extends Error{constructor(e){super(),this.entrypoint=e,this.name="InvalidEntrypointError",this.message=`Contract has no entrypoint named: '${e}'`}}class b4 extends Error{constructor(e){super(),this.message=e,this.name="LongIntegerError"}}class g4 extends Error{constructor(e){super(),this.hexByte=e,this.name="HexParseError",this.message=`Unable to parse hex byte: ${e}`}}class wr extends Error{constructor(e,r){super(r),this.val=e,Object.setPrototypeOf(this,wr.prototype)}}class ie extends wr{constructor(e,r,i){super(e,i),r!==void 0&&(this.data=r),Object.setPrototypeOf(this,ie.prototype)}}class C1{constructor(e){if(this.neg=!1,this.buf=[],e!==void 0)if(typeof e=="string")for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(r===0&&i===45)this.neg=!0;else{if(i<48||i>57)throw new b4(`unexpected character in integer constant: ${e[r]}`);this.append(i-48)}}else e<0?(this.neg=!0,this.append(-e)):this.append(e)}append(e){let r=0;for(;e!==0||r<this.buf.length;){const i=(this.buf[r]||0)*10+e;this.buf[r++]=i%256,e=Math.floor(i/256)}}cmp(e){if(this.neg!==e.neg)return(e.neg?1:0)-(this.neg?1:0);{let r=0;if(this.buf.length!==e.buf.length)r=this.buf.length<e.buf.length?-1:1;else if(this.buf.length!==0){let i=e.buf.length-1;for(;i>=0&&this.buf[i]===e.buf[i];)i--;r=i<0?0:this.buf[i]<e.buf[i]?-1:1}return this.neg?r===0?0:-r:r}}get sign(){return this.buf.length===0?0:this.neg?-1:1}}function os(t){const e=[];for(let r=0;r<t.length;r+=2){const i=parseInt(t.slice(r,r+2),16);if(Number.isNaN(i))return null;e.push(i)}return e}function hu(t){try{return new C1(t),!0}catch{return!1}}function B1(t){try{return new C1(t).sign>=0}catch{return!1}}const m4=/^(@%|@%%|%@|[@:%]([_0-9a-zA-Z][_0-9a-zA-Z.%@]*)?)$/;function gs(t,e){if(Array.isArray(t))return{};let r,i,n;if(t.annots!==void 0){for(const s of t.annots)if(s.length!==0){if(!m4.test(s)||!e?.specialVar&&(s==="@%"||s==="@%%")||!e?.specialFields&&s==="%@")throw new wr(t,`${t.prim}: unexpected annotation: ${s}`);switch(s[0]){case"%":(e?.emptyFields||s.length>1)&&(r=r||[],r.push(s));break;case":":s.length>1&&(i=i||[],i.push(s));break;case"@":(e?.emptyVar||s.length>1)&&(n=n||[],n.push(s));break}}}return{f:r,t:i,v:n}}const v4={BlockHash:[32,[1,52]],OperationHash:[32,[5,116]],OperationListHash:[32,[133,233]],OperationListListHash:[32,[29,159,109]],ProtocolHash:[32,[2,170]],ContextHash:[32,[79,199]],ED25519PublicKeyHash:[20,[6,161,159]],SECP256K1PublicKeyHash:[20,[6,161,161]],P256PublicKeyHash:[20,[6,161,164]],ContractHash:[20,[2,90,121]],CryptoboxPublicKeyHash:[16,[153,103]],ED25519Seed:[32,[13,15,58,7]],ED25519PublicKey:[32,[13,15,37,217]],SECP256K1SecretKey:[32,[17,162,224,201]],P256SecretKey:[32,[16,81,238,189]],ED25519EncryptedSeed:[56,[7,90,60,179,41]],SECP256K1EncryptedSecretKey:[56,[9,237,241,174,150]],P256EncryptedSecretKey:[56,[9,48,57,115,171]],SECP256K1PublicKey:[33,[3,254,226,86]],P256PublicKey:[33,[3,178,139,127]],SECP256K1Scalar:[33,[38,248,136]],SECP256K1Element:[33,[5,92,0]],ED25519SecretKey:[64,[43,246,78,7]],ED25519Signature:[64,[9,245,205,134,18]],SECP256K1Signature:[64,[13,115,101,19,63]],P256Signature:[64,[54,240,44,52]],GenericSignature:[64,[4,130,43]],ChainID:[4,[87,82,0]],RollupAddress:[20,[1,128,120,31]],TxRollupL2Address:[20,[6,161,166]]};function Di(t,...e){const r=N1(t);for(const i of e){const[n,s]=v4[i];if(r.length===n+s.length){let a=0;for(;a<s.length&&r[a]===s[a];)a++;if(a===s.length)return[i,r.slice(s.length)]}}return null}function mr(t,e){const r=e,i=Array.isArray(r)?r:r.args;return i.length===2?t==="pair"?{prim:"pair",args:i}:{prim:"Pair",args:i}:Object.assign(Object.assign({},Array.isArray(r)?{prim:t}:r),{args:[i[0],{prim:t,args:i.slice(1)}]})}function ki(t){return Array.isArray(t)||t.prim==="pair"}function D1(t){return Array.isArray(t)||"prim"in t&&t.prim==="Pair"}const y4=/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])[T ]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|[+-]([01][0-9]|2[0-3]):([0-5][0-9]))$/;function k1(t){if("string"in t){if(B1(t.string))return new Date(parseInt(t.string,10));if(y4.test(t.string)){const e=new Date(t.string);if(!Number.isNaN(e.valueOf))return e}}else if(hu(t.int))return new Date(parseInt(t.int,10));return null}function _4(t){const e=[];for(let r=0;r<t.length;r+=2){const i=t.slice(r,r+2),n=parseInt(i,16);if(Number.isNaN(n))throw new g4(i);e.push(n)}return e}function Qn(t){return t.map(e=>(e>>4&15).toString(16)+(e&15).toString(16)).join("")}const w4=31,$1={ABS:!0,ADD:!0,ADDRESS:!0,AMOUNT:!0,AND:!0,APPLY:!0,BALANCE:!0,BLAKE2B:!0,CAR:!0,CDR:!0,CHAIN_ID:!0,CHECK_SIGNATURE:!0,COMPARE:!0,CONCAT:!0,CONS:!0,EDIV:!0,EQ:!0,EXEC:!0,FAILWITH:!0,GE:!0,GET_AND_UPDATE:!0,GT:!0,HASH_KEY:!0,IMPLICIT_ACCOUNT:!0,INT:!0,ISNAT:!0,JOIN_TICKETS:!0,KECCAK:!0,LE:!0,LEVEL:!0,LSL:!0,LSR:!0,LT:!0,MEM:!0,MUL:!0,NEG:!0,NEQ:!0,NEVER:!0,NOT:!0,NOW:!0,OR:!0,PACK:!0,PAIRING_CHECK:!0,READ_TICKET:!0,SAPLING_VERIFY_UPDATE:!0,SELF:!0,SELF_ADDRESS:!0,SENDER:!0,SET_DELEGATE:!0,SHA256:!0,SHA3:!0,SHA512:!0,SIZE:!0,SLICE:!0,SOME:!0,SOURCE:!0,SPLIT_TICKET:!0,SUB:!0,SWAP:!0,TICKET:!0,TICKET_DEPRECATED:!0,TOTAL_VOTING_POWER:!0,TRANSFER_TOKENS:!0,UNIT:!0,VOTING_POWER:!0,XOR:!0,RENAME:!0,OPEN_CHEST:!0,SUB_MUTEZ:!0,MIN_BLOCK_TIME:!0,BYTES:!0,NAT:!0},U1=Object.assign({},$1,{CONTRACT:!0,CREATE_CONTRACT:!0,DIG:!0,DIP:!0,DROP:!0,DUG:!0,DUP:!0,EMIT:!0,EMPTY_BIG_MAP:!0,EMPTY_MAP:!0,EMPTY_SET:!0,GET:!0,IF:!0,IF_CONS:!0,IF_LEFT:!0,IF_NONE:!0,ITER:!0,LAMBDA:!0,LAMBDA_REC:!0,LEFT:!0,LOOP:!0,LOOP_LEFT:!0,MAP:!0,NIL:!0,NONE:!0,PAIR:!0,PUSH:!0,RIGHT:!0,SAPLING_EMPTY_STATE:!0,UNPACK:!0,UNPAIR:!0,UPDATE:!0,CAST:!0,VIEW:!0}),H1={unit:!0,never:!0,bool:!0,int:!0,nat:!0,string:!0,chain_id:!0,bytes:!0,mutez:!0,key_hash:!0,key:!0,signature:!0,timestamp:!0,address:!0,tx_rollup_l2_address:!0},Ms=Object.assign({},H1,{or:!0,pair:!0,set:!0,big_map:!0,contract:!0,lambda:!0,list:!0,map:!0,operation:!0,option:!0,bls12_381_g1:!0,bls12_381_g2:!0,bls12_381_fr:!0,sapling_transaction:!0,sapling_transaction_deprecated:!0,sapling_state:!0,ticket:!0,chest_key:!0,chest:!0});class ze extends wr{constructor(e,r){super(e,r),this.val=e,Object.setPrototypeOf(this,ze.prototype)}}function mi(t){return"prim"in t}function E4(t){return Array.isArray(t)||"prim"in t}function F1(t){if(mi(t))return!0;throw new ze(t,"prim expression expected")}function fn(t){if(Array.isArray(t))return!0;throw new ze(t,"sequence expression expected")}function Xt(t){if(E4(t))return!0;throw new ze(t,"prim or sequence expression expected")}function Uf(t){if(t.int[0]==="-")throw new ze(t,"natural number expected")}function Ja(t){if("int"in t)return!0;throw new ze(t,"int literal expected")}function K1(t){if("string"in t)return!0;throw new ze(t,"string literal expected")}function He(t,e){var r;if(e===0&&t.args===void 0||((r=t.args)===null||r===void 0?void 0:r.length)===e)return!0;throw new ze(t,`${e} arguments expected`)}function Ir(t){var e,r;if(Array.isArray(t)){for(const i of t){if(!Array.isArray(i)&&!mi(i))throw new ze(t,"sequence or prim expected");Ir(i)}return!0}if(F1(t)){if(Object.prototype.hasOwnProperty.call($1,t.prim))return He(t,0),!0;switch(t.prim){case"DROP":case"PAIR":case"UNPAIR":case"DUP":case"UPDATE":case"GET":t.args!==void 0&&He(t,1)&&Ja(t.args[0])&&Uf(t.args[0]);break;case"DIG":case"DUG":case"SAPLING_EMPTY_STATE":He(t,1)&&Ja(t.args[0])&&Uf(t.args[0]);break;case"NONE":case"LEFT":case"RIGHT":case"NIL":case"CAST":He(t,1)&&$i(t.args[0]);break;case"UNPACK":He(t,1)&&rh(t.args[0]);break;case"CONTRACT":He(t,1)&&fc(t.args[0]);break;case"IF_NONE":case"IF_LEFT":case"IF_CONS":case"IF":He(t,2)&&(fn(t.args[0])&&Ir(t.args[0]),fn(t.args[1])&&Ir(t.args[1]));break;case"MAP":case"ITER":case"LOOP":case"LOOP_LEFT":He(t,1)&&Ir(t.args[0]);break;case"CREATE_CONTRACT":He(t,1)&&G1(t.args[0]);break;case"DIP":if(((e=t.args)===null||e===void 0?void 0:e.length)===2)Ja(t.args[0])&&Uf(t.args[0]),fn(t.args[1])&&Ir(t.args[1]);else if(((r=t.args)===null||r===void 0?void 0:r.length)===1)fn(t.args[0])&&Ir(t.args[0]);else throw new ze(t,"1 or 2 arguments expected");break;case"PUSH":He(t,2)&&(ms(t.args[0]),Pn(t.args[1]));break;case"EMPTY_SET":He(t,1)&&Ki(t.args[0]);break;case"EMPTY_MAP":He(t,2)&&(Ki(t.args[0]),$i(t.args[1]));break;case"EMPTY_BIG_MAP":He(t,2)&&(Ki(t.args[0]),uc(t.args[1]));break;case"LAMBDA_REC":case"LAMBDA":He(t,3)&&($i(t.args[0]),$i(t.args[1]),fn(t.args[2])&&Ir(t.args[2]));break;case"VIEW":He(t,2)&&(K1(t.args[0])&&j1(t.args[0]),$i(t.args[1])&&ms(t.args[1]));break;case"EMIT":t.args&&t.args.length>0?He(t,1):He(t,0);break;default:throw new ze(t,"instruction expected")}}return!0}function Ki(t){if(Xt(t)){if(Array.isArray(t)||t.prim==="pair"||t.prim==="or"||t.prim==="option")qn(t,e=>Ki(e));else if(!Object.prototype.hasOwnProperty.call(H1,t.prim))throw new ze(t,`${t.prim}: type is not comparable`)}return!0}function rh(t){if(Xt(t)&&mi(t)){if(!Object.prototype.hasOwnProperty.call(Ms,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state"||t.prim==="ticket")throw new ze(t,`${t.prim}: type can't be used inside PACK/UNPACK instructions`);qn(t,e=>rh(e))}return!0}function ms(t){if(Xt(t)&&mi(t)){if(!Object.prototype.hasOwnProperty.call(Ms,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state"||t.prim==="ticket"||t.prim==="contract")throw new ze(t,`${t.prim}: type can't be pushed`);qn(t,e=>ms(e))}return!0}function ih(t){if(Xt(t)&&mi(t)){if(!Object.prototype.hasOwnProperty.call(Ms,t.prim)||t.prim==="operation"||t.prim==="contract")throw new ze(t,`${t.prim}: type can't be used as part of a storage`);qn(t,e=>ih(e))}return!0}function fc(t){if(Xt(t)&&mi(t)){if(!Object.prototype.hasOwnProperty.call(Ms,t.prim)||t.prim==="operation")throw new ze(t,`${t.prim}: type can't be used as part of a parameter`);qn(t,e=>fc(e))}return!0}function uc(t){if(Xt(t)&&mi(t)){if(!Object.prototype.hasOwnProperty.call(Ms,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state")throw new ze(t,`${t.prim}: type can't be used inside a big_map`);qn(t,e=>uc(e))}return!0}const x4=new RegExp("^[a-zA-Z0-9_.%@]*$");function j1(t){if(t.string.length>w4)throw new ze(t,`view name too long: ${t.string}`);if(!x4.test(t.string))throw new ze(t,`invalid character(s) in view name: ${t.string}`)}function $i(t){if(Xt(t)&&mi(t)){if(!Object.prototype.hasOwnProperty.call(Ms,t.prim))throw new ze(t,"type expected");qn(t,e=>$i(e))}return!0}function qn(t,e){if(Array.isArray(t)||t.prim==="pair"){const r=Array.isArray(t)?t:t.args;if(r===void 0||r.length<2)throw new ze(t,"at least 2 arguments expected");return r.forEach(i=>{Xt(i)&&e(i)}),!0}switch(t.prim){case"option":case"list":He(t,1)&&Xt(t.args[0])&&e(t.args[0]);break;case"contract":He(t,1)&&fc(t.args[0]);break;case"or":He(t,2)&&Xt(t.args[0])&&Xt(t.args[1])&&(e(t.args[0]),e(t.args[1]));break;case"lambda":He(t,2)&&($i(t.args[0]),$i(t.args[1]));break;case"set":He(t,1)&&Ki(t.args[0]);break;case"map":He(t,2)&&Xt(t.args[0])&&Xt(t.args[1])&&(Ki(t.args[0]),e(t.args[1]));break;case"big_map":He(t,2)&&Xt(t.args[0])&&Xt(t.args[1])&&(Ki(t.args[0]),uc(t.args[1]),e(t.args[1]));break;case"ticket":He(t,1)&&Xt(t.args[0])&&Ki(t.args[0]);break;case"sapling_state":case"sapling_transaction":He(t,1)&&Ja(t.args[0]);break;default:He(t,0)}return!0}function Pn(t){if("int"in t||"string"in t||"bytes"in t)return!0;if(Array.isArray(t)){let e=0;for(const r of t)mi(r)&&r.prim==="Elt"?(He(r,2)&&(Pn(r.args[0]),Pn(r.args[1])),e++):Pn(r);if(e!==0&&e!==t.length)throw new ze(t,"data entries and map elements can't be intermixed");return!0}if(mi(t))switch(t.prim){case"Unit":case"True":case"False":case"None":He(t,0);break;case"Pair":if(t.args===void 0||t.args.length<2)throw new ze(t,"at least 2 arguments expected");for(const e of t.args)Pn(e);break;case"Left":case"Right":case"Some":He(t,1)&&Pn(t.args[0]);break;case"Lambda_rec":t.args&&Ir(t.args);break;default:if(Object.prototype.hasOwnProperty.call(U1,t.prim))Ir(t);else throw new ze(t,"data entry or instruction expected")}else throw new ze(t,"data entry expected");return!0}function G1(t){if(fn(t)){const e={},r={};for(const i of t)if(F1(i)){if(i.prim!=="view"){if(i.prim in e)throw new ze(t,`duplicate contract section: ${i.prim}`);e[i.prim]=!0}switch(i.prim){case"code":He(i,1)&&fn(i.args[0])&&Ir(i.args[0]);break;case"parameter":if(He(i,1)&&fc(i.args[0]),i.annots)throw new ze(i,"Annotation must be part of the parameter type");break;case"storage":He(i,1)&&ih(i.args[0]);break;case"view":if(He(i,4)){if(K1(i.args[0])){const n=i.args[0];if(n.string in r)throw new ze(t,`duplicate view name: ${n.string}`);r[n.string]=!0,j1(n)}ms(i.args[1]),ms(i.args[2]),fn(i.args[3])&&Ir(i.args[3])}break;default:throw new ze(t,`unexpected contract section: ${i.prim}`)}}}return!0}function V1(t){return Object.prototype.hasOwnProperty.call(U1,t.prim)}function du(t){if(!Array.isArray(t))return!1;for(const e of t)if("prim"in e){if(V1(e))throw new wr(t,`Instruction outside of a lambda: ${JSON.stringify(t)}`);if(e.prim==="Elt")throw new wr(t,`Elt item outside of a map literal: ${JSON.stringify(t)}`)}return!0}function A4(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}const S4=["parameter","storage","code","False","Elt","Left","None","Pair","Right","Some","True","Unit","PACK","UNPACK","BLAKE2B","SHA256","SHA512","ABS","ADD","AMOUNT","AND","BALANCE","CAR","CDR","CHECK_SIGNATURE","COMPARE","CONCAT","CONS","CREATE_ACCOUNT","CREATE_CONTRACT","IMPLICIT_ACCOUNT","DIP","DROP","DUP","EDIV","EMPTY_MAP","EMPTY_SET","EQ","EXEC","FAILWITH","GE","GET","GT","HASH_KEY","IF","IF_CONS","IF_LEFT","IF_NONE","INT","LAMBDA","LE","LEFT","LOOP","LSL","LSR","LT","MAP","MEM","MUL","NEG","NEQ","NIL","NONE","NOT","NOW","OR","PAIR","PUSH","RIGHT","SIZE","SOME","SOURCE","SENDER","SELF","STEPS_TO_QUOTA","SUB","SWAP","TRANSFER_TOKENS","SET_DELEGATE","UNIT","UPDATE","XOR","ITER","LOOP_LEFT","ADDRESS","CONTRACT","ISNAT","CAST","RENAME","bool","contract","int","key","key_hash","lambda","list","map","big_map","nat","option","or","pair","set","signature","string","bytes","mutez","timestamp","unit","operation","address","SLICE","DIG","DUG","EMPTY_BIG_MAP","APPLY","chain_id","CHAIN_ID","LEVEL","SELF_ADDRESS","never","NEVER","UNPAIR","VOTING_POWER","TOTAL_VOTING_POWER","KECCAK","SHA3","PAIRING_CHECK","bls12_381_g1","bls12_381_g2","bls12_381_fr","sapling_state","sapling_transaction_deprecated","SAPLING_EMPTY_STATE","SAPLING_VERIFY_UPDATE","ticket","TICKET_DEPRECATED","READ_TICKET","SPLIT_TICKET","JOIN_TICKETS","GET_AND_UPDATE","chest","chest_key","OPEN_CHEST","VIEW","view","constant","SUB_MUTEZ","tx_rollup_l2_address","MIN_BLOCK_TIME","sapling_transaction","EMIT","Lambda_rec","LAMBDA_REC","TICKET","BYTES","NAT"],R4=Object.assign({},...S4.map((t,e)=>({[t]:e})));var rn;(function(t){t[t.Int=0]="Int",t[t.String=1]="String",t[t.Sequence=2]="Sequence",t[t.Prim0=3]="Prim0",t[t.Prim0Annot=4]="Prim0Annot",t[t.Prim1=5]="Prim1",t[t.Prim1Annot=6]="Prim1Annot",t[t.Prim2=7]="Prim2",t[t.Prim2Annot=8]="Prim2Annot",t[t.Prim=9]="Prim",t[t.Bytes=10]="Bytes"})(rn||(rn={}));class cs{constructor(){this.buffer=[]}get length(){return this.buffer.length}writeBytes(e){this.buffer.push(...e.map(r=>r&255))}writeUint8(e){const r=e|0;this.buffer.push(r&255)}writeUint16(e){const r=e|0;this.buffer.push(r>>8&255),this.buffer.push(r&255)}writeUint32(e){const r=e|0;this.buffer.push(r>>24&255),this.buffer.push(r>>16&255),this.buffer.push(r>>8&255),this.buffer.push(r&255)}writeInt8(e){this.writeUint8(e)}writeInt16(e){this.writeUint16(e)}writeInt32(e){this.writeUint32(e)}}const en=new Error("bounds out of range");class vs{constructor(e,r=0,i=e.length){this.buffer=e,this.idx=r,this.cap=i}get length(){return this.cap-this.idx}readBytes(e){if(this.cap-this.idx<e)throw en;const r=this.buffer.slice(this.idx,this.idx+e);return this.idx+=e,r}reader(e){if(this.cap-this.idx<e)throw en;const r=new vs(this.buffer,this.idx,this.idx+e);return this.idx+=e,r}copy(){return new vs(this.buffer,this.idx,this.cap)}readUint8(){if(this.cap-this.idx<1)throw en;return this.buffer[this.idx++]>>>0}readUint16(){if(this.cap-this.idx<2)throw en;const e=this.buffer[this.idx++],r=this.buffer[this.idx++];return(e<<8|r)>>>0}readUint32(){if(this.cap-this.idx<4)throw en;const e=this.buffer[this.idx++],r=this.buffer[this.idx++],i=this.buffer[this.idx++],n=this.buffer[this.idx++];return(e<<24|r<<16|i<<8|n)>>>0}readInt8(){if(this.cap-this.idx<1)throw en;return this.buffer[this.idx++]<<24>>24}readInt16(){if(this.cap-this.idx<2)throw en;const e=this.buffer[this.idx++],r=this.buffer[this.idx++];return(e<<8|r)<<16>>16}readInt32(){if(this.cap-this.idx<4)throw en;const e=this.buffer[this.idx++],r=this.buffer[this.idx++],i=this.buffer[this.idx++],n=this.buffer[this.idx++];return e<<24|r<<16|i<<8|n}}var ys;(function(t){t[t.Implicit=0]="Implicit",t[t.Originated=1]="Originated"})(ys||(ys={}));var ln;(function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1",t[t.P256=2]="P256"})(ln||(ln={}));function z1(t){let e;const r=t.readUint8();switch(r){case ln.ED25519:e="ED25519PublicKeyHash";break;case ln.SECP256K1:e="SECP256K1PublicKeyHash";break;case ln.P256:e="P256PublicKeyHash";break;default:throw new Error(`unknown public key hash tag: ${r}`)}return{type:e,hash:t.readBytes(20)}}function O4(t){let e;const r=t.readUint8();switch(r){case ys.Implicit:e=z1(t);break;case ys.Originated:e={type:"ContractHash",hash:t.readBytes(20)},t.readBytes(1);break;default:throw new Error(`unknown address tag: ${r}`)}if(t.length!==0){const i=new TextDecoder;e.entryPoint=i.decode(new Uint8Array(t.readBytes(t.length)))}return e}function q1(t,e){let r;switch(t.type){case"ED25519PublicKeyHash":r=ln.ED25519;break;case"SECP256K1PublicKeyHash":r=ln.SECP256K1;break;case"P256PublicKeyHash":r=ln.P256;break;default:throw new Error(`unexpected address type: ${t.type}`)}e.writeUint8(r),e.writeBytes(Array.from(t.hash))}function P4(t,e){if(t.type==="ContractHash"?(e.writeUint8(ys.Originated),e.writeBytes(Array.from(t.hash)),e.writeUint8(0)):(e.writeUint8(ys.Implicit),q1(t,e)),t.entryPoint!==void 0&&t.entryPoint!==""&&t.entryPoint!=="default"){const i=new TextEncoder().encode(t.entryPoint);e.writeBytes(Array.from(i))}}var pn;(function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1",t[t.P256=2]="P256"})(pn||(pn={}));function I4(t){let e,r;const i=t.readUint8();switch(i){case pn.ED25519:r="ED25519PublicKey",e=32;break;case pn.SECP256K1:r="SECP256K1PublicKey",e=33;break;case pn.P256:r="P256PublicKey",e=33;break;default:throw new Error(`unknown public key tag: ${i}`)}return{type:r,publicKey:t.readBytes(e)}}function T4(t,e){let r;switch(t.type){case"ED25519PublicKey":r=pn.ED25519;break;case"SECP256K1PublicKey":r=pn.SECP256K1;break;case"P256PublicKey":r=pn.P256;break;default:throw new Error(`unexpected public key type: ${t.type}`)}e.writeUint8(r),e.writeBytes(Array.from(t.publicKey))}function Za(t,e,r){var i,n;const[s,a]=r(t);if(Array.isArray(s)){const d=new cs;for(const g of s){const y=a.next();if(y.done)throw new Error("REPORT ME: iterator is done");Za(g,d,y.value)}e.writeUint8(rn.Sequence),e.writeUint32(d.length),e.writeBytes(d.buffer);return}if("string"in s){const g=new TextEncoder().encode(s.string);e.writeUint8(rn.String),e.writeUint32(g.length),e.writeBytes(Array.from(g));return}if("int"in s){e.writeUint8(rn.Int);let d=BigInt(s.int);const g=d<0;g&&(d=-d);let y=0;do{const S=BigInt(y===0?6:7);let O=d&(BigInt(1)<<S)-BigInt(1);d>>=S,d&&(O|=BigInt(128)),y===0&&g&&(O|=BigInt(64)),e.writeUint8(Number(O)),y++}while(d);return}if("bytes"in s){const d=_4(s.bytes);e.writeUint8(rn.Bytes),e.writeUint32(d.length),e.writeBytes(d);return}const o=R4[s.prim];if(o===void 0)throw new TypeError(`Can't encode primary: ${s.prim}`);const f=(((i=s.args)===null||i===void 0?void 0:i.length)||0)<3?rn.Prim0+(((n=s.args)===null||n===void 0?void 0:n.length)||0)*2+(s.annots===void 0||s.annots.length===0?0:1):rn.Prim;if(e.writeUint8(f),e.writeUint8(o),s.args!==void 0)if(s.args.length<3)for(const d of s.args){const g=a.next();if(g.done)throw new Error("REPORT ME: iterator is done");Za(d,e,g.value)}else{const d=new cs;for(const g of s.args){const y=a.next();if(y.done)throw new Error("REPORT ME: iterator is done");Za(g,d,y.value)}e.writeUint32(d.length),e.writeBytes(d.buffer)}if(s.annots!==void 0&&s.annots.length!==0){const g=new TextEncoder().encode(s.annots.join(" "));e.writeUint32(g.length),e.writeBytes(Array.from(g))}else s.args!==void 0&&s.args.length>=3&&e.writeUint32(0)}const M4=t=>"prim"in t&&(t.prim==="Left"||t.prim==="Right"),L4=t=>"prim"in t&&(t.prim==="Some"||t.prim==="None"),In=t=>{if(ki(t))return e=>{if(!D1(e))throw new ie(t,e,`pair expected: ${JSON.stringify(e)}`);du(e);const r=mr("pair",t);return[mr("Pair",e),function*(){for(const n of r.args)yield In(n)}()]};switch(t.prim){case"or":return e=>{if(!M4(e))throw new ie(t,e,`or expected: ${JSON.stringify(e)}`);return[e,function*(){yield In(t.args[e.prim==="Left"?0:1])}()]};case"option":return e=>{if(!L4(e))throw new ie(t,e,`option expected: ${JSON.stringify(e)}`);return[e,function*(){e.prim==="Some"&&(yield In(t.args[0]))}()]};case"list":case"set":return e=>{if(!Array.isArray(e))throw new ie(t,e,`${t.prim} expected: ${JSON.stringify(e)}`);return[e,function*(){for(const r of e)yield In(t.args[0])}()]};case"map":return e=>{if(!Array.isArray(e))throw new ie(t,e,`map expected: ${JSON.stringify(e)}`);return[e,function*(){for(const r of e)yield i=>{if(!("prim"in i)||i.prim!=="Elt")throw new ie(t,i,`map element expected: ${JSON.stringify(i)}`);return[i,function*(){for(const n of t.args)yield In(n)}()]}}()]};case"chain_id":return e=>{if(!("bytes"in e)&&!("string"in e))throw new ie(t,e,`chain id expected: ${JSON.stringify(e)}`);let r;if("string"in e){const i=Di(e.string,"ChainID");if(i===null)throw new ie(t,e,`chain id base58 expected: ${e.string}`);r={bytes:Qn(i[1])}}else r=e;return[r,[][Symbol.iterator]()]};case"signature":return e=>{if(!("bytes"in e)&&!("string"in e))throw new ie(t,e,`signature expected: ${JSON.stringify(e)}`);let r;if("string"in e){const i=Di(e.string,"ED25519Signature","SECP256K1Signature","P256Signature","GenericSignature");if(i===null)throw new ie(t,e,`signature base58 expected: ${e.string}`);r={bytes:Qn(i[1])}}else r=e;return[r,[][Symbol.iterator]()]};case"key_hash":return e=>{if(!("bytes"in e)&&!("string"in e))throw new ie(t,e,`key hash expected: ${JSON.stringify(e)}`);let r;if("string"in e){const i=Di(e.string,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash");if(i===null)throw new ie(t,e,`key hash base58 expected: ${e.string}`);const n=new cs;q1({type:i[0],hash:i[1]},n),r={bytes:Qn(n.buffer)}}else r=e;return[r,[][Symbol.iterator]()]};case"key":return e=>{if(!("bytes"in e)&&!("string"in e))throw new ie(t,e,`public key expected: ${JSON.stringify(e)}`);let r;if("string"in e){const i=Di(e.string,"ED25519PublicKey","SECP256K1PublicKey","P256PublicKey");if(i===null)throw new ie(t,e,`public key base58 expected: ${e.string}`);const n=new cs;T4({type:i[0],publicKey:i[1]},n),r={bytes:Qn(n.buffer)}}else r=e;return[r,[][Symbol.iterator]()]};case"address":return e=>{if(!("bytes"in e)&&!("string"in e))throw new ie(t,e,`address expected: ${JSON.stringify(e)}`);let r;if("string"in e){const i=e.string.split("%"),n=Di(i[0],"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash","ContractHash");if(n===null)throw new ie(t,e,`address base58 expected: ${e.string}`);const s=new cs;P4({type:n[0],hash:n[1],entryPoint:i.length>1?i[1]:void 0},s),r={bytes:Qn(s.buffer)}}else r=e;return[r,[][Symbol.iterator]()]};case"timestamp":return e=>{if(!("string"in e)&&!("int"in e))throw new ie(t,e,`timestamp expected: ${JSON.stringify(e)}`);let r;if("string"in e){const i=k1(e);if(i===null)throw new ie(t,e,`can't parse date: ${e.string}`);r={int:String(Math.floor(i.getTime()/1e3))}}else r=e;return[r,[][Symbol.iterator]()]};default:return mo}},N4=t=>"prim"in t&&t.prim==="PUSH",mo=t=>N4(t)?(Ir(t),[t,function*(){yield mo,yield In(t.args[0])}()]):[t,function*(){for(;;)yield mo}()];function C4(t,e){const r=new cs;return r.writeUint8(5),Za(t,r,e!==void 0?In(e):mo),r.buffer}function B4(t,e){return{bytes:Qn(C4(t,e))}}function D4(t){const e=os(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new vs(new Uint8Array(e));return O4(r)}function k4(t){const e=os(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new vs(new Uint8Array(e));return z1(r)}function $4(t){const e=os(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new vs(new Uint8Array(e));return I4(r)}class ge extends wr{constructor(e,r,i){super(e,i),this.stackState=r,Object.setPrototypeOf(this,ge.prototype)}}function We(t){return Array.isArray(t)?"pair":t.prim}function vo(t){return"prim"in t?t.args:t}function kr(t,e,r=!1){if(We(t)!==We(e))throw new ie(t,void 0,`types mismatch: ${We(t)} != ${We(e)}`);const i=[gs(t),gs(e)];if(i[0].t&&i[1].t&&i[0].t[0]!==i[1].t[0])throw new ie(t,void 0,`${We(t)}: type names mismatch: ${i[0].t[0]} != ${i[1].t[0]}`);if(r&&i[0].f&&i[1].f&&i[0].f[0]!==i[1].f[0])throw new ie(t,void 0,`${We(t)}: field names mismatch: ${i[0].f[0]} != ${i[1].f}`);if(ki(t)){const n=mr("pair",t),s=mr("pair",e);kr(n.args[0],s.args[0],!0),kr(n.args[1],s.args[1],!0);return}switch(t.prim){case"option":case"list":case"contract":case"set":case"ticket":kr(t.args[0],e.args[0]);break;case"or":kr(t.args[0],e.args[0],!0),kr(t.args[1],e.args[1],!0);break;case"lambda":case"map":case"big_map":kr(t.args[0],e.args[0]),kr(t.args[1],e.args[1]);break;case"sapling_state":case"sapling_transaction":if(parseInt(t.args[0].int,10)!==parseInt(e.args[0].int,10))throw new ie(t,void 0,`${We(t)}: type argument mismatch: ${t.args[0].int} != ${e.args[0].int}`)}}function W1(t,e){if(t.length!==e.length)throw new ie(t,void 0,`stack length mismatch: ${t.length} != ${e.length}`);for(let r=0;r<t.length;r++)kr(t[r],e[r])}function ct(t,e=!1){var r,i,n;if(!Array.isArray(t)){const s=gs(t);if((((r=s.t)===null||r===void 0?void 0:r.length)||0)>1)throw new ie(t,void 0,`${t.prim}: at most one type annotation allowed: ${t.annots}`);if(e){if((((i=s.f)===null||i===void 0?void 0:i.length)||0)>1)throw new ie(t,void 0,`${t.prim}: at most one field annotation allowed: ${t.annots}`)}else if((((n=s.f)===null||n===void 0?void 0:n.length)||0)>0)throw new ie(t,void 0,`${t.prim}: field annotations aren't allowed: ${t.annots}`)}if(ki(t)){const s=vo(t);for(const a of s)ct(a,!0);return}switch(t.prim){case"option":case"list":case"contract":case"set":ct(t.args[0]);break;case"or":for(const s of t.args)ct(s,!0);break;case"lambda":case"map":case"big_map":ct(t.args[0]),ct(t.args[1])}}function J1(t){if(!Array.isArray(t))return!1;for(const e of t)if(!(Array.isArray(e)&&J1(e)||"prim"in e&&V1(e)))return!1;return!0}function Dr(t,e,r){if(ki(e)){if(D1(t)){du(t);const i=mr("Pair",t),n=mr("pair",e);Dr(i.args[0],n.args[0],r),Dr(i.args[1],n.args[1],r);return}throw new ie(e,t,`pair expected: ${JSON.stringify(t)}`)}switch(e.prim){case"int":if("int"in t&&hu(t.int))return;throw new ie(e,t,`integer value expected: ${JSON.stringify(t)}`);case"nat":case"mutez":if("int"in t&&B1(t.int))return;throw new ie(e,t,`natural value expected: ${JSON.stringify(t)}`);case"string":if("string"in t)return;throw new ie(e,t,`string value expected: ${JSON.stringify(t)}`);case"bytes":case"bls12_381_g1":case"bls12_381_g2":if("bytes"in t&&os(t.bytes)!==null)return;throw new ie(e,t,`bytes value expected: ${JSON.stringify(t)}`);case"bool":if("prim"in t&&(t.prim==="True"||t.prim==="False"))return;throw new ie(e,t,`boolean value expected: ${JSON.stringify(t)}`);case"key_hash":if("string"in t&&Di(t.string,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash")!==null)return;if("bytes"in t)try{k4(t);return}catch{}throw new ie(e,t,`key hash expected: ${JSON.stringify(t)}`);case"timestamp":if(("string"in t||"int"in t)&&k1(t)!==null)return;throw new ie(e,t,`timestamp expected: ${JSON.stringify(t)}`);case"address":if("string"in t){let i=t.string;const n=t.string.indexOf("%");if(n>=0&&(i=t.string.slice(0,n)),Di(i,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash","ContractHash","TxRollupL2Address","RollupAddress")!==null)return}else if("bytes"in t)try{D4(t);return}catch{}throw new ie(e,t,`address expected: ${JSON.stringify(t)}`);case"key":if("string"in t&&Di(t.string,"ED25519PublicKey","SECP256K1PublicKey","P256PublicKey")!==null)return;if("bytes"in t)try{$4(t);return}catch{}throw new ie(e,t,`public key expected: ${JSON.stringify(t)}`);case"unit":if("prim"in t&&t.prim==="Unit")return;throw new ie(e,t,`unit value expected: ${JSON.stringify(t)}`);case"signature":if("bytes"in t||"string"in t&&Di(t.string,"ED25519Signature","SECP256K1Signature","P256Signature","GenericSignature")!==null)return;throw new ie(e,t,`signature expected: ${JSON.stringify(t)}`);case"chain_id":if(("bytes"in t||"string"in t)&&("string"in t?N1(t.string):os(t.bytes))!==null)return;throw new ie(e,t,`chain id expected: ${JSON.stringify(t)}`);case"option":if("prim"in t){if(t.prim==="None")return;if(t.prim==="Some"){Dr(t.args[0],e.args[0],r);return}}throw new ie(e,t,`option expected: ${JSON.stringify(t)}`);case"list":case"set":if(du(t)){for(const i of t)Dr(i,e.args[0],r);return}throw new ie(e,t,`${e.prim} expected: ${JSON.stringify(t)}`);case"or":if("prim"in t){if(t.prim==="Left"){Dr(t.args[0],e.args[0],r);return}else if(t.prim==="Right"){Dr(t.args[0],e.args[1],r);return}}throw new ie(e,t,`union (or) expected: ${JSON.stringify(t)}`);case"lambda":if(J1(t)){const i=Nt(t,[e.args[0]],r);if("failed"in i)throw new ie(e,t,`function is failed with error type: ${i.failed}`);if(i.length!==1)throw new ie(e,t,"function must return a value");kr(e.args[1],i[0]);return}throw new ie(e,t,`function expected: ${JSON.stringify(t)}`);case"map":case"big_map":if(Array.isArray(t)){for(const i of t){if(!("prim"in i)||i.prim!=="Elt")throw new ie(e,t,`map elements expected: ${JSON.stringify(t)}`);Dr(i.args[0],e.args[0],r),Dr(i.args[1],e.args[1],r)}return}throw new ie(e,t,`${e.prim} expected: ${JSON.stringify(t)}`);case"bls12_381_fr":if("int"in t&&hu(t.int)||"bytes"in t&&os(t.bytes)!==null)return;throw new ie(e,t,`BLS12-381 element expected: ${JSON.stringify(t)}`);case"sapling_state":if(Array.isArray(t))return;throw new ie(e,t,`sapling state expected: ${JSON.stringify(t)}`);case"ticket":Dr(t,{prim:"pair",args:[{prim:"address"},e.args[0],{prim:"nat"}]},r);return;default:throw new ie(e,t,`type ${We(e)} don't have Michelson literal representation`)}}function U4(t,e,r){let i=e,n=e,s=0;for(const a of t){const o=Nt(a,n,r);if(i=o,"failed"in o)break;n=o,s++}if("failed"in i&&i.level==0&&(!("prim"in i.failed)||i.failed.prim!=="never")&&s!==t.length-1)throw new ge(t,i,"FAIL must appear in a tail position");if(r?.traceCallback!==void 0){const a={op:t,in:e,out:i};r.traceCallback(a)}return"failed"in i?{failed:i.failed,level:i.level+1}:i}function Nt(t,e,r){const i=r?.protocol||L1;if(Array.isArray(t))return U4(t,e,r);const n=t;function s(x,...E){if(e.length<E.length+x)throw new ge(n,e,`${n.prim}: stack must have at least ${E.length} element(s)`);let c=x;for(const h of E){if(h!==null&&h.length!==0){let b=0;for(;b<h.length&&h[b]!==We(e[c]);)b++;if(b===h.length)throw new ge(n,e,`${n.prim}: stack type mismatch: [${c}] expected to be ${h}, got ${We(e[c])} instead`)}c++}return e.slice(x,E.length+x)}function a(x){return(...E)=>{try{return x(...E)}catch(c){throw c instanceof wr?new ge(n,e,c.message):c}}}function o(x){return E=>{try{return x(E)}catch(c){throw c instanceof wr?new ge(n,e,c.message):c}}}const f=a(gs),d=a(W1),g=a(kr),y=o(Ki),S=o(rh),O=o(ih),P=o(ms),M=o(uc);function B(x,E){const c=f(n,Object.assign(Object.assign({},E),{emptyFields:x.f!==void 0&&x.f>1,emptyVar:x.v!==void 0&&x.v>1})),h=(b,p,u)=>{if(b&&b.length>(p||0))throw new ge(n,e,`${n.prim}: at most ${p||0} ${u} annotations allowed`)};return h(c.f,x.f,"field"),h(c.t,x.t,"type"),h(c.v,x.v,"variable"),c}function C(x,E){const c=x,h=Array.isArray(c)?{prim:"pair",args:c}:c,b=f(h),p=E.v!==void 0||E.t!==void 0||E.f!==void 0?[...(E.v===null?b.v:E.v)||[],...(E.t===null?b.t:E.t)||[],...(E.f===null?b.f:E.f)||[]]:void 0,u=A4(h,["annots"]);return Object.assign(Object.assign({},u),p&&p.length!==0&&{annots:p})}function I(x,E){const c=B({v:1});return C(x,{v:c.v!==void 0?c.v:E!==void 0?[E]:null,t:null})}function z(x,E,c,h,b){var p,u,_,w;const v=(p=f(E).f)===null||p===void 0?void 0:p[0],l=(u=c.f)===null||u===void 0?void 0:u[h];if(l!==void 0&&l!=="%"&&v!==void 0&&l!==v)throw new ge(n,e,`${n.prim}: field names doesn't match: ${l} !== ${v}`);const A=(_=c.v)===null||_===void 0?void 0:_[h],K=(w=f(x).v)===null||w===void 0?void 0:w[0];return C(E,{t:null,v:A?A==="@%"?v?["@"+v.slice(1)]:void 0:A==="@%%"?K?["@"+K.slice(1)+"."+(v?v.slice(1):b)]:v?["@"+v.slice(1)]:void 0:[A]:null})}function F(x,E,c=E){const h=mr("pair",x);if(c===1)return[h.args[0]];if(c===2)return h.args;const b=h.args[1];if(ki(b))return[h.args[0],...F(b,E,c-1)];throw new ge(n,e,`${n.prim}: at least ${E} fields are expected`)}function W(x,E,c=E){if(c===0)return x;const h=mr("pair",x);if(c===1)return h.args[0];const b=h.args[1];if(ki(b))return W(b,E,c-2);if(c===2)return b;throw new ge(n,e,`${n.prim}: at least ${E+1} fields are expected`)}function q(x,E,c,h=c){if(h===0)return E;const b=mr("pair",x);if(h===1)return Object.assign(Object.assign({},b),{args:[E,b.args[1]]});const p=b.args[1];if(ki(p))return Object.assign(Object.assign({},b),{args:[b.args[0],q(p,E,c,h-2)]});if(h===2)return Object.assign(Object.assign({},b),{args:[b.args[0],E]});throw new ge(n,e,`${n.prim}: at least ${c+1} fields are expected`)}const G=(x,E)=>["@"+(x.v?x.v[0].slice(1)+".":"")+E];function R(x,E){return"failed"in x||"failed"in E?"failed"in x?E:x:(d(x,E),x)}const T=(x=>{var E,c,h,b,p;switch(x.prim){case"DUP":{const u=x.args?parseInt(x.args[0].int,10):1;if(u===0)throw new ge(x,e,"DUP 0 is forbidden");const _=s(u-1,null)[0];if(We(_)==="ticket")throw new ge(x,e,"ticket can't be DUPed");return[_,...e]}case"SWAP":{const u=s(0,null,null);return B({}),[u[1],u[0],...e.slice(2)]}case"SOME":return[C({prim:"option",args:[s(0,null)[0]]},B({t:1,v:1})),...e.slice(1)];case"UNIT":return[C({prim:"unit"},B({v:1,t:1})),...e];case"PAIR":{const u=x.args?parseInt(x.args[0].int,10):2;if(u<2)throw new ge(x,e,`PAIR ${u} is forbidden`);const _=s(0,...new Array(u).fill(null)),w=B({f:u,t:1,v:1},{specialFields:!0}),v=A=>{const K=A.lastIndexOf(".");return A.slice(K>0?K+1:1)},l=_.map((A,K)=>{var V;const J=f(A),Z=w.f&&w.f.length>K&&w.f[K]!=="%"?w.f[K]==="%@"?J.v?["%"+v(((V=J.v)===null||V===void 0?void 0:V[0])||"")]:void 0:[w.f[K]]:void 0;return C(A,{v:null,t:null,f:Z})});return[C({prim:"pair",args:l},{t:w.t,v:w.v}),...e.slice(u)]}case"UNPAIR":{const u=x.args?parseInt(x.args[0].int,10):2;if(u<2)throw new ge(x,e,`UNPAIR ${u} is forbidden`);const _=s(0,["pair"])[0],w=B({f:2,v:2},{specialVar:!0});return[...F(_,u).map((l,A)=>z(_,l,w,A,A===0?"car":"cdr")),...e.slice(1)]}case"CAR":case"CDR":{const u=mr("pair",s(0,["pair"])[0]),_=u.args[x.prim==="CAR"?0:1],w=B({f:1,v:1},{specialVar:!0});return[z(u,_,w,0,x.prim.toLocaleLowerCase()),...e.slice(1)]}case"CONS":{const u=s(0,null,["list"]);return g(u[0],u[1].args[0]),[I({prim:"list",args:[u[1].args[0]]}),...e.slice(2)]}case"SIZE":return s(0,["string","list","set","map","bytes"]),[I({prim:"nat"}),...e.slice(1)];case"MEM":{const u=s(0,null,["set","map","big_map"]);return y(u[0]),g(u[0],u[1].args[0]),[I({prim:"bool"}),...e.slice(2)]}case"GET":if(x.args){const u=parseInt(x.args[0].int,10),_=s(0,["pair"])[0];return[I(W(_,u)),...e.slice(1)]}else{const u=s(0,null,["map","big_map"]);return y(u[0]),g(u[0],u[1].args[0]),[I({prim:"option",args:[u[1].args[1]]}),...e.slice(2)]}case"UPDATE":if(x.args){const u=parseInt(x.args[0].int,10),_=s(0,null,["pair"]);return[I(q(_[1],_[0],u)),...e.slice(2)]}else{const u=s(0,null,["bool","option"]);if(y(u[0]),u[1].prim==="bool"){const w=s(2,["set"]);return g(u[0],w[0].args[0]),[I({prim:"set",args:[C(u[0],{t:null})]}),...e.slice(3)]}const _=s(2,["map","big_map"]);return g(u[0],_[0].args[0]),_[0].prim==="map"?[I({prim:"map",args:[C(u[0],{t:null}),C(u[1].args[0],{t:null})]}),...e.slice(3)]:(M(u[1].args[0]),[I({prim:"big_map",args:[C(u[0],{t:null}),C(u[1].args[0],{t:null})]}),...e.slice(3)])}case"GET_AND_UPDATE":{const u=B({v:2}),_=s(0,null,["option"],["map","big_map"]);y(_[0]),g(_[0],_[2].args[0]),g(_[1].args[0],_[2].args[1]);const w=(E=u.v)===null||E===void 0?void 0:E.map(v=>v!=="@"?[v]:void 0);return _[2].prim==="map"?[C({prim:"option",args:[_[2].args[1]]},{v:w?.[0]}),C({prim:"map",args:[C(_[0],{t:null}),C(_[1].args[0],{t:null})]},{v:w?.[1]}),...e.slice(3)]:(M(_[1].args[0]),[C({prim:"option",args:[_[2].args[1]]},{v:w?.[0]}),C({prim:"big_map",args:[C(_[0],{t:null}),C(_[1].args[0],{t:null})]},{v:w?.[1]}),...e.slice(3)])}case"EXEC":{const u=s(0,null,["lambda"]);return g(u[0],u[1].args[0]),[I(u[1].args[1]),...e.slice(2)]}case"APPLY":{const u=s(0,null,["lambda"]);if(O(u[0]),P(u[0]),!ki(u[1].args[0]))throw new ge(x,e,`${x.prim}: function's argument must be a pair: ${We(u[1].args[0])}`);const _=u[1].args[0];return g(u[0],vo(_)[0]),[I({prim:"lambda",args:[vo(_)[1],u[1].args[1]]}),...e.slice(2)]}case"FAILWITH":{const u=s(0,null)[0];return rs(i,Fi.PtEdo2Zk)||S(u),{failed:u,level:0}}case"NEVER":return s(0,["never"]),{failed:{prim:"never"},level:0};case"RENAME":return[I(s(0,null)[0]),...e.slice(1)];case"CONCAT":{const u=s(0,["string","list","bytes"]);if(u[0].prim==="list"){if(We(u[0].args[0])!=="string"&&We(u[0].args[0])!=="bytes")throw new ge(x,e,`${x.prim}: can't concatenate list of ${We(u[0].args[0])}'s`);return[I(u[0].args[0]),...e.slice(1)]}const _=s(1,["string","bytes"]);if(u[0].prim!==_[0].prim)throw new ge(x,e,`${x.prim}: can't concatenate ${u[0].prim} with ${_[0].prim}`);return[I(_[0]),...e.slice(2)]}case"SLICE":return[I({prim:"option",args:[s(0,["nat"],["nat"],["string","bytes"])[2]]},"@slice"),...e.slice(3)];case"PACK":{const u=s(0,null)[0];return S(u),[I({prim:"bytes"},"@packed"),...e.slice(1)]}case"ADD":{const u=s(0,["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(u[0].prim==="nat"&&u[1].prim==="int"||u[0].prim==="int"&&u[1].prim==="nat")return[I({prim:"int"}),...e.slice(2)];if(u[0].prim==="int"&&u[1].prim==="timestamp"||u[0].prim==="timestamp"&&u[1].prim==="int")return[I({prim:"timestamp"}),...e.slice(2)];if((u[0].prim==="int"||u[0].prim==="nat"||u[0].prim==="mutez"||u[0].prim==="bls12_381_g1"||u[0].prim==="bls12_381_g2"||u[0].prim==="bls12_381_fr")&&u[0].prim===u[1].prim)return[I(u[0]),...e.slice(2)];throw new ge(x,e,`${x.prim}: can't add ${u[0].prim} to ${u[1].prim}`)}case"SUB":{const u=rs(i,Fi.PsiThaCa)?s(0,["nat","int","timestamp","mutez"],["nat","int","timestamp","mutez"]):s(0,["nat","int","timestamp"],["nat","int","timestamp"]);if((u[0].prim==="nat"||u[0].prim==="int")&&(u[1].prim==="nat"||u[1].prim==="int")||u[0].prim==="timestamp"&&u[1].prim==="timestamp")return[I({prim:"int"}),...e.slice(2)];if(u[0].prim==="timestamp"&&u[1].prim==="int")return[I({prim:"timestamp"}),...e.slice(2)];if(u[0].prim==="mutez"&&u[1].prim==="mutez")return[I({prim:"mutez"}),...e.slice(2)];throw new ge(x,e,`${x.prim}: can't subtract ${u[0].prim} from ${u[1].prim}`)}case"SUB_MUTEZ":return s(0,["mutez"],["mutez"]),[I({prim:"option",args:[{prim:"mutez"}]}),...e.slice(2)];case"MUL":{const u=s(0,["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(u[0].prim==="nat"&&u[1].prim==="int"||u[0].prim==="int"&&u[1].prim==="nat")return[I({prim:"int"}),...e.slice(2)];if(u[0].prim==="nat"&&u[1].prim==="mutez"||u[0].prim==="mutez"&&u[1].prim==="nat")return[I({prim:"mutez"}),...e.slice(2)];if((u[0].prim==="bls12_381_g1"||u[0].prim==="bls12_381_g2"||u[0].prim==="bls12_381_fr")&&u[1].prim==="bls12_381_fr"||(u[0].prim==="nat"||u[0].prim==="int")&&u[0].prim===u[1].prim)return[I(u[0]),...e.slice(2)];if((u[0].prim==="nat"||u[0].prim==="int")&&u[1].prim==="bls12_381_fr"||(u[1].prim==="nat"||u[1].prim==="int")&&u[0].prim==="bls12_381_fr")return[I({prim:"bls12_381_fr"}),...e.slice(2)];throw new ge(x,e,`${x.prim}: can't multiply ${u[0].prim} by ${u[1].prim}`)}case"EDIV":{const u=(w,v)=>({prim:"option",args:[{prim:"pair",args:[{prim:w},{prim:v}]}]}),_=s(0,["nat","int","mutez"],["nat","int","mutez"]);if(_[0].prim==="nat"&&_[1].prim==="nat")return[I(u("nat","nat")),...e.slice(2)];if((_[0].prim==="nat"||_[0].prim==="int")&&(_[1].prim==="nat"||_[1].prim==="int"))return[I(u("int","nat")),...e.slice(2)];if(_[0].prim==="mutez"&&_[1].prim==="nat")return[I(u("mutez","mutez")),...e.slice(2)];if(_[0].prim==="mutez"&&_[1].prim==="mutez")return[I(u("nat","mutez")),...e.slice(2)];throw new ge(x,e,`${x.prim}: can't euclideally divide ${_[0].prim} by ${_[1].prim}`)}case"ABS":return s(0,["int"]),[I({prim:"nat"}),...e.slice(1)];case"ISNAT":return s(0,["int"]),[I({prim:"option",args:[{prim:"nat"}]}),...e.slice(1)];case"INT":return s(0,["nat","bls12_381_fr","bytes"]),[I({prim:"int"}),...e.slice(1)];case"BYTES":return s(0,["nat","int"]),[I({prim:"bytes"}),...e.slice(1)];case"NAT":return s(0,["bytes"]),[I({prim:"nat"}),...e.slice(1)];case"NEG":{const u=s(0,["nat","int","bls12_381_g1","bls12_381_g2","bls12_381_fr"])[0];return u.prim==="nat"||u.prim==="int"?[I({prim:"int"}),...e.slice(1)]:[I(u),...e.slice(1)]}case"LSL":case"LSR":return s(0,["nat","bytes"],["nat","bytes"]),[I({prim:"nat"}),...e.slice(2)];case"OR":case"XOR":{const u=s(0,["nat","bytes","bool"],["nat","bytes","bool"]);if(u[0].prim!==u[1].prim)throw new ge(x,e,`${x.prim}: both arguments must be of the same type: ${u[0].prim}, ${u[1].prim}`);return[I(u[1]),...e.slice(2)]}case"AND":{const u=s(0,["nat","bytes","bool","int"],["nat","bytes","bool"]);if((u[0].prim!=="int"||u[1].prim!=="nat")&&u[0].prim!==u[1].prim)throw new ge(x,e,`${x.prim}: both arguments must be of the same type: ${u[0].prim}, ${u[1].prim}`);return[I(u[1]),...e.slice(2)]}case"NOT":return s(0,["nat","bytes","bool","int"])[0].prim==="bool"?[I({prim:"bool"}),...e.slice(1)]:[I({prim:"int"}),...e.slice(1)];case"COMPARE":{const u=s(0,null,null);return y(u[0]),y(u[1]),[I({prim:"int"}),...e.slice(2)]}case"EQ":case"NEQ":case"LT":case"GT":case"LE":case"GE":return s(0,["int"]),[I({prim:"bool"}),...e.slice(1)];case"SELF":{if(r?.contract===void 0)throw new ge(x,e,`${x.prim}: contract required`);const u=B({f:1,v:1}),_=lu(r.contract,(c=u.f)===null||c===void 0?void 0:c[0]);if(_===null)throw new ge(x,e,`${x.prim}: contract has no entrypoint ${_}`);return[C({prim:"contract",args:[_]},{v:u.v?u.v:["@self"]}),...e]}case"TRANSFER_TOKENS":{const u=s(0,null,["mutez"],["contract"]);return g(u[0],u[2].args[0]),[I({prim:"operation"}),...e.slice(3)]}case"SET_DELEGATE":{const u=s(0,["option"])[0];if(We(u.args[0])!=="key_hash")throw new ge(x,e,`${x.prim}: key hash expected: ${We(u.args[0])}`);return[I({prim:"operation"}),...e.slice(1)]}case"IMPLICIT_ACCOUNT":return s(0,["key_hash"]),[I({prim:"contract",args:[{prim:"unit"}]}),...e.slice(1)];case"NOW":return[I({prim:"timestamp"},"@now"),...e];case"AMOUNT":return[I({prim:"mutez"},"@amount"),...e];case"BALANCE":return[I({prim:"mutez"},"@balance"),...e];case"CHECK_SIGNATURE":return s(0,["key"],["signature"],["bytes"]),[I({prim:"bool"}),...e.slice(3)];case"BLAKE2B":case"SHA256":case"SHA512":case"KECCAK":case"SHA3":return s(0,["bytes"]),[I({prim:"bytes"}),...e.slice(1)];case"HASH_KEY":return s(0,["key"]),[I({prim:"key_hash"}),...e.slice(1)];case"SOURCE":return[I({prim:"address"},"@source"),...e];case"SENDER":return[I({prim:"address"},"@sender"),...e];case"ADDRESS":{const u=s(0,["contract"])[0],_=B({v:1});return[C({prim:"address",[Ba]:u},{v:_.v?_.v:G(f(u),"address")}),...e.slice(1)]}case"SELF_ADDRESS":{const u={prim:"address"};return r?.contract!==void 0&&(u[Ba]={prim:"contract",args:[hi(r.contract,"parameter").args[0]]}),[I(u,"@address"),...e]}case"CHAIN_ID":return[I({prim:"chain_id"}),...e];case"DROP":{B({});const u=x.args!==void 0?parseInt(x.args[0].int,10):1;return s(u-1,null),e.slice(u)}case"DIG":{B({});const u=parseInt(x.args[0].int,10);return[s(u,null)[0],...e.slice(0,u),...e.slice(u+1)]}case"DUG":{B({});const u=parseInt(x.args[0].int,10);return[...e.slice(1,u+1),s(0,null)[0],...e.slice(u+1)]}case"NONE":return ct(x.args[0]),[C({prim:"option",args:[x.args[0]]},B({t:1,v:1})),...e];case"LEFT":case"RIGHT":{const u=s(0,null)[0],_=B({f:2,t:1,v:1},{specialFields:!0}),w=f(u),v=[C(u,{t:null,v:null,f:_.f&&_.f.length>0&&_.f[0]!=="%"?_.f[0]==="%@"?w.v?["%"+w.v[0].slice(1)]:void 0:_.f:void 0}),C(x.args[0],{t:null,f:_.f&&_.f.length>1&&_.f[1]!=="%"?_.f:void 0})];return[C({prim:"or",args:x.prim==="LEFT"?v:[v[1],v[0]]},{t:_.t,v:_.v}),...e.slice(1)]}case"NIL":return ct(x.args[0]),[C({prim:"list",args:[x.args[0]]},B({t:1,v:1})),...e];case"UNPACK":return s(0,["bytes"]),ct(x.args[0]),[I({prim:"option",args:[x.args[0]]},"@unpacked"),...e.slice(1)];case"CONTRACT":{const u=s(0,["address"])[0];ct(x.args[0]);const _=B({v:1,f:1}),w=u[Ba];if(w!==void 0){const v=lu(w,(h=_.f)===null||h===void 0?void 0:h[0]);if(v===null)throw new ge(x,e,`${x.prim}: contract has no entrypoint ${v}`);g(v,x.args[0])}return[C({prim:"option",args:[{prim:"contract",args:[x.args[0]]}]},{v:_.v?_.v:G(f(u),"contract")}),...e.slice(1)]}case"CAST":{B({});const u=s(0,null)[0];return ct(x.args[0]),g(x.args[0],u),[x.args[0],...e.slice(1)]}case"IF_NONE":{B({});const u=s(0,["option"])[0],_=e.slice(1),w=Nt(x.args[0],_,r),v=Nt(x.args[1],[C(u.args[0],{t:null,v:G(f(u),"some")}),..._],r);return R(w,v)}case"IF_LEFT":{B({});const u=s(0,["or"])[0],_=f(u),w=f(u.args[0]),v=f(u.args[1]),l=e.slice(1),A=Nt(x.args[0],[C(u.args[0],{t:null,v:G(_,w.f?w.f[0].slice(1):"left")}),...l],r),K=Nt(x.args[1],[C(u.args[1],{t:null,v:G(_,v.f?v.f[0].slice(1):"right")}),...l],r);return R(A,K)}case"IF_CONS":{B({});const u=s(0,["list"])[0],_=f(u),w=e.slice(1),v=Nt(x.args[0],[C(u.args[0],{t:null,v:G(_,"hd")}),C(u,{t:null,v:G(_,"tl")}),...w],r),l=Nt(x.args[1],w,r);return R(v,l)}case"IF":{B({}),s(0,["bool"]);const u=e.slice(1),_=Nt(x.args[0],u,r),w=Nt(x.args[1],u,r);return R(_,w)}case"MAP":{const u=s(0,["list","map","option"])[0],_=e.slice(1),w=u.prim==="map"?{prim:"pair",args:u.args}:u.args[0],v=Nt(x.args[0],[C(w,{t:null,v:G(f(u),"elt")}),..._],r);if("failed"in v){if(!("prim"in v.failed)||v.failed.prim!=="never")throw new ge(x,e,`${x.prim}: FAIL is not allowed in MAP`);return{failed:v.failed,level:v.level+1}}if(v.length<1)throw new ge(x,e,`${x.prim}: function must return a value`);return d(v.slice(1),_),u.prim==="list"?[I({prim:"list",args:[v[0]]}),..._]:u.prim==="map"?[I({prim:"map",args:[u.args[0],v[0]]}),..._]:[I({prim:"option",args:[v[0]]}),..._]}case"ITER":{B({});const u=s(0,["set","list","map"])[0],_=e.slice(1),w=u.prim==="map"?{prim:"pair",args:u.args}:u.args[0],v=Nt(x.args[0],[C(w,{t:null,v:G(f(u),"elt")}),..._],r);return"failed"in v?{failed:v.failed,level:v.level+1}:(d(v,_),_)}case"LOOP":{B({}),s(0,["bool"]);const u=e.slice(1),_=Nt(x.args[0],u,r);return"failed"in _?{failed:_.failed,level:_.level+1}:(d(_,[{prim:"bool"},...u]),u)}case"LOOP_LEFT":{B({});const u=s(0,["or"])[0],_=e.slice(1),w=Nt(x.args[0],[C(u.args[0],{t:null,v:G(f(u),"left")}),..._],r);return"failed"in w?{failed:w.failed,level:w.level+1}:(d(w,[u,..._]),[C(u.args[1],{t:null,v:B({v:1}).v}),..._])}case"DIP":{B({});const u=x.args.length===2?parseInt(x.args[0].int,10):1;s(u-1,null);const _=e.slice(0,u),w=e.slice(u),v=x.args.length===2?Nt(x.args[1],w,r):Nt(x.args[0],w,r);return"failed"in v?{failed:v.failed,level:v.level+1}:[..._,...v]}case"CREATE_CONTRACT":{const u=B({v:2}),_=s(0,["option"],["mutez"],null);if(We(_[0].args[0])!=="key_hash")throw new ge(x,e,`${x.prim}: key hash expected: ${We(_[0].args[0])}`);O(_[2])&&(X1(x.args[0]),kr(hi(x.args[0],"storage").args[0],_[2]));const w=(b=u.v)===null||b===void 0?void 0:b.map(v=>v!=="@"?[v]:void 0);return[C({prim:"operation"},{v:w?.[0]}),C({prim:"address",[Ba]:{prim:"contract",args:[hi(x.args[0],"parameter").args[0]]}},{v:w?.[1]}),...e.slice(3)]}case"PUSH":return ct(x.args[0]),Dr(x.args[1],x.args[0],Object.assign(Object.assign({},r),{contract:void 0})),[I(x.args[0]),...e];case"EMPTY_SET":return ct(x.args[0]),y(x.args[0]),[C({prim:"set",args:x.args},B({t:1,v:1})),...e];case"EMPTY_MAP":return ct(x.args[0]),y(x.args[0]),ct(x.args[1]),[C({prim:"map",args:x.args},B({t:1,v:1})),...e];case"EMPTY_BIG_MAP":return ct(x.args[0]),y(x.args[0]),ct(x.args[1]),M(x.args[0]),[C({prim:"big_map",args:x.args},B({t:1,v:1})),...e];case"LAMBDA_REC":case"LAMBDA":{ct(x.args[0]),ct(x.args[1]);const u=[x.args[0]];x.prim==="LAMBDA_REC"&&u.push({prim:"lambda",args:[x.args[0],x.args[1]]});const _=Nt(x.args[2],u,Object.assign(Object.assign({},r),{contract:void 0}));if("failed"in _)return{failed:_.failed,level:_.level+1};if(_.length!==1)throw new ge(x,e,`${x.prim}: function must return a value`);return g(x.args[1],_[0]),[I({prim:"lambda",args:[x.args[0],x.args[1]]}),...e]}case"LEVEL":return[I({prim:"nat"},"@level"),...e];case"TOTAL_VOTING_POWER":return[I({prim:"nat"}),...e];case"VOTING_POWER":return s(0,["key_hash"]),[I({prim:"nat"}),...e.slice(1)];case"TICKET":{const u=s(0,null,["nat"])[0];return y(u),rs(i,Fi.PtLimaPtL)?[C({prim:"ticket",args:[u]},B({t:1,v:1})),...e.slice(2)]:[I({prim:"option",args:[C({prim:"ticket",args:[u]},B({t:1,v:1}))]}),...e.slice(2)]}case"JOIN_TICKETS":{const u=mr("pair",s(0,["pair"])[0]);if(We(u.args[0])!=="ticket")throw new ge(x,e,`${x.prim}: ticket expected: ${We(u.args[0])}`);return g(u.args[0],u.args[1]),[I({prim:"option",args:[C(u.args[0],{t:null})]}),...e.slice(1)]}case"SPLIT_TICKET":{const u=s(0,["ticket"],["pair"]),_=mr("pair",u[1]);if(We(_.args[0])!=="nat")throw new ge(x,e,`${x.prim}: nat expected: ${We(_.args[0])}`);return g(_.args[0],_.args[1]),[I({prim:"option",args:[{prim:"pair",args:[C(u[0],{t:null}),C(u[0],{t:null})]}]}),...e.slice(2)]}case"READ_TICKET":{const u=B({v:2}),_=s(0,["ticket"])[0],w=(p=u.v)===null||p===void 0?void 0:p.map(v=>v!=="@"?[v]:void 0);return[C({prim:"pair",args:[{prim:"address"},C(_.args[0],{t:null}),{prim:"nat"}]},{v:w?.[0]}),C(_,{v:w?.[1],t:null}),...e.slice(1)]}case"PAIRING_CHECK":{const u=s(0,["list"])[0].args[0];if(!ki(u))throw new ge(x,e,`${x.prim}: pair expected: ${We(u)}`);const _=mr("pair",u);if(We(_.args[0])!=="bls12_381_g1")throw new ge(x,e,`${x.prim}: bls12_381_g1 expected: ${We(_.args[0])}`);if(We(_.args[1])!=="bls12_381_g2")throw new ge(x,e,`${x.prim}: bls12_381_g2 expected: ${We(_.args[1])}`);return[I({prim:"bool"}),...e.slice(1)]}case"SAPLING_EMPTY_STATE":return[C({prim:"sapling_state",args:[x.args[0]]},B({v:1,t:1})),...e];case"SAPLING_VERIFY_UPDATE":{const u=s(0,["sapling_transaction"],["sapling_state"]);if(parseInt(u[0].args[0].int,10)!==parseInt(u[1].args[0].int,10))throw new ge(x,e,`${x.prim}: sapling memo size mismatch: ${u[0].args[0].int} != ${u[1].args[0].int}`);return rs(i,Fi.PtJakarta)?[I({prim:"option",args:[{prim:"pair",args:[{prim:"int"},C(u[1],{t:null})]}]}),...e.slice(2)]:[I({prim:"option",args:[{prim:"pair",args:[{prim:"bytes"},{prim:"pair",args:[{prim:"int"},C(u[1],{t:null})]}]}]}),...e.slice(2)]}case"OPEN_CHEST":return s(0,["chest_key"],["chest"],["nat"]),[I({prim:"or",args:[{prim:"bytes"},{prim:"bool"}]}),...e.slice(3)];case"VIEW":{const u=s(0,null,["address"]);return P(u[0]),[I({prim:"option",args:[x.args[1]]}),...e.slice(2)]}case"MIN_BLOCK_TIME":return[I({prim:"nat"}),...e];case"EMIT":{const u=B({f:1,t:1});if(x.args){const _=s(0,null);return g(_[0],x.args[0]),[C({prim:"operation"},u),...e.slice(1)]}return[C({prim:"operation"},u),...e.slice(1)]}default:throw new wr(x,`unexpected instruction: ${x.prim}`)}})(n);if(r?.traceCallback!==void 0){const x={op:n,in:e,out:T};r.traceCallback(x)}return T}function hi(t,e){for(const r of t)if(r.prim===e)return r;throw new wr(t,`missing contract section: ${e}`)}function H4(t){const e={};for(const r of t)r.prim==="view"&&(e[r.args[0].string]=r);return e}function Z1(t){if(Array.isArray(t)){for(const e of t)if("prim"in e&&(e.prim==="parameter"||e.prim==="storage"||e.prim==="code"))return!0}return!1}function lu(t,e){e=e||"%default";const r=yo(t).find(i=>i[0]===e);return r!==void 0?r[1]:e==="%default"?Z1(t)?hi(t,"parameter").args[0]:t:null}function F4(t){return Array.isArray(t)||t.prim==="or"}function yo(t){if(Z1(t)){const e=hi(t,"parameter"),r=yo(e.args[0]),i=gs(e);return i.f?[[i.f[0],e.args[0]],...r]:r}if(F4(t)){const e=vo(t),r=i=>{const n=gs(e[i]);if(We(e[i])==="or"){const s=yo(e[i]);return n.f?[[n.f[0],e[i]],...s]:s}return n.f?[[n.f[0],e[i]]]:[]};return[...r(0),...r(1)]}return[]}function X1(t,e){const r=(f,d,g,y)=>{ct(f,!0),ct(d);const S={prim:"pair",args:[Object.assign(Object.assign({},f),{annots:["@parameter"]}),Object.assign(Object.assign({},d),{annots:["@storage"]})]},O=Nt(y,[S],Object.assign(Object.assign({},e),{contract:t}));if("failed"in O)return O;try{W1(O,[g])}catch(P){throw P instanceof wr?new ge(y,O,P.message):P}return O},i=hi(t,"parameter").args[0],n=hi(t,"storage").args[0],s=hi(t,"code").args[0],o=r(i,n,{prim:"pair",args:[{prim:"list",args:[{prim:"operation"}]},n]},s);for(const f of Object.values(H4(t)))r(f.args[1],n,f.args[2],f.args[3]);return o}function Y1(t,e,r){ct(e),Dr(t,e,r||null)}function K4(t,e,r){for(const i of e)ct(i);if(r?.contract!==void 0)for(const i of["parameter","storage"]){const n=hi(r.contract,i).args[0];ct(n)}return Nt(t,e,r||null)}function j4(t,e,r){try{return Y1(t,e,r),!0}catch{return!1}}class nh{constructor(e,r){this.contract=e,this.ctx=Object.assign({contract:e},r),this.output=X1(e,this.ctx)}static parse(e,r){const i=new Mn(r),n=typeof e=="string"?i.parseScript(e):i.parseJSON(e);if(n===null)throw new h4("empty contract");if(G1(n))return new nh(n,r)}static parseTypeExpression(e,r){const i=new Mn(r),n=typeof e=="string"?i.parseScript(e):i.parseJSON(e);if(n===null)throw new d4("empty type expression");if($i(n))return ct(n),n}static parseDataExpression(e,r){const i=new Mn(r),n=typeof e=="string"?i.parseScript(e):i.parseJSON(e);if(n===null)throw new l4("empty data expression");if(Pn(n))return n;throw void 0}section(e){return hi(this.contract,e)}entryPoints(){return yo(this.contract)}entryPoint(e){return lu(this.contract,e)}assertDataValid(e,r){Y1(e,r,this.ctx)}isDataValid(e,r){return j4(e,r,this.ctx)}assertParameterValid(e,r){const i=this.entryPoint(e||void 0);if(i===null)throw new p4(e?.toString());this.assertDataValid(r,i)}isParameterValid(e,r){try{return this.assertParameterValid(e,r),!0}catch{return!1}}functionType(e,r){return K4(e,r,this.ctx)}}new nh([{prim:"parameter",args:[{prim:"unit"}]},{prim:"storage",args:[{prim:"unit"}]},{prim:"code",args:[[{prim:"CAR"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PAIR"}]]}]);const Il=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),dt=(t,e=8)=>t.toString(16).padStart(e,"0"),sh=31;var L;(function(t){t.SECRET="secret",t.RAW="raw",t.TZ1="tz1",t.BRANCH="branch",t.ZARITH="zarith",t.PUBLIC_KEY="public_key",t.PKH="pkh",t.DELEGATE="delegate",t.SCRIPT="script",t.BALLOT_STATEMENT="ballotStmt",t.PROPOSAL="proposal",t.PROPOSAL_ARR="proposalArr",t.INT32="int32",t.INT16="int16",t.PARAMETERS="parameters",t.ADDRESS="address",t.SMART_CONTRACT_ADDRESS="smart_contract_address",t.SMART_ROLLUP_ADDRESS="smart_rollup_address",t.SMART_ROLLUP_COMMITMENT_HASH="smart_rollup_commitment_hash",t.VALUE="value",t.PADDED_BYTES="padded_bytes",t.SMART_ROLLUP_MESSAGE="smart_rollup_message",t.MANAGER="manager",t.BLOCK_PAYLOAD_HASH="blockPayloadHash",t.ENTRYPOINT="entrypoint",t.OPERATION="operation",t.OP_ACTIVATE_ACCOUNT="activate_account",t.OP_DELEGATION="delegation",t.OP_TRANSACTION="transaction",t.OP_ORIGINATION="origination",t.OP_BALLOT="ballot",t.OP_ENDORSEMENT="endorsement",t.OP_SEED_NONCE_REVELATION="seed_nonce_revelation",t.OP_REVEAL="reveal",t.OP_PROPOSALS="proposals",t.OP_REGISTER_GLOBAL_CONSTANT="register_global_constant",t.OP_TRANSFER_TICKET="transfer_ticket",t.OP_TX_ROLLUP_ORIGINATION="tx_rollup_origination",t.OP_TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",t.BURN_LIMIT="burn_limit",t.TX_ROLLUP_ORIGINATION_PARAM="tx_rollup_origination_param",t.TX_ROLLUP_ID="tx_rollup_id",t.TX_ROLLUP_BATCH_CONTENT="tx_rollup_batch_content",t.OP_INCREASE_PAID_STORAGE="increase_paid_storage",t.OP_UPDATE_CONSENSUS_KEY="update_consensus_key",t.OP_DRAIN_DELEGATE="drain_delegate",t.DEPOSITS_LIMIT="deposits_limit",t.OP_SET_DEPOSITS_LIMIT="set_deposits_limit",t.OP_SMART_ROLLUP_ORIGINATE="smart_rollup_originate",t.PVM_KIND="pvm_kind",t.OP_SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",t.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message"})(L||(L={}));const Vr={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0a":"True","0b":"Unit","0c":"PACK","0d":"UNPACK","0e":"BLAKE2B","0f":"SHA256",10:"SHA512",11:"ABS",12:"ADD",13:"AMOUNT",14:"AND",15:"BALANCE",16:"CAR",17:"CDR",18:"CHECK_SIGNATURE",19:"COMPARE","1a":"CONCAT","1b":"CONS","1c":"CREATE_ACCOUNT","1d":"CREATE_CONTRACT","1e":"IMPLICIT_ACCOUNT","1f":"DIP",20:"DROP",21:"DUP",22:"EDIV",23:"EMPTY_MAP",24:"EMPTY_SET",25:"EQ",26:"EXEC",27:"FAILWITH",28:"GE",29:"GET","2a":"GT","2b":"HASH_KEY","2c":"IF","2d":"IF_CONS","2e":"IF_LEFT","2f":"IF_NONE",30:"INT",31:"LAMBDA",32:"LE",33:"LEFT",34:"LOOP",35:"LSL",36:"LSR",37:"LT",38:"MAP",39:"MEM","3a":"MUL","3b":"NEG","3c":"NEQ","3d":"NIL","3e":"NONE","3f":"NOT",40:"NOW",41:"OR",42:"PAIR",43:"PUSH",44:"RIGHT",45:"SIZE",46:"SOME",47:"SOURCE",48:"SENDER",49:"SELF","4a":"STEPS_TO_QUOTA","4b":"SUB","4c":"SWAP","4d":"TRANSFER_TOKENS","4e":"SET_DELEGATE","4f":"UNIT",50:"UPDATE",51:"XOR",52:"ITER",53:"LOOP_LEFT",54:"ADDRESS",55:"CONTRACT",56:"ISNAT",57:"CAST",58:"RENAME",59:"bool","5a":"contract","5b":"int","5c":"key","5d":"key_hash","5e":"lambda","5f":"list",60:"map",61:"big_map",62:"nat",63:"option",64:"or",65:"pair",66:"set",67:"signature",68:"string",69:"bytes","6a":"mutez","6b":"timestamp","6c":"unit","6d":"operation","6e":"address","6f":"SLICE",70:"DIG",71:"DUG",72:"EMPTY_BIG_MAP",73:"APPLY",74:"chain_id",75:"CHAIN_ID",76:"LEVEL",77:"SELF_ADDRESS",78:"never",79:"NEVER","7a":"UNPAIR","7b":"VOTING_POWER","7c":"TOTAL_VOTING_POWER","7d":"KECCAK","7e":"SHA3","7f":"PAIRING_CHECK",80:"bls12_381_g1",81:"bls12_381_g2",82:"bls12_381_fr",83:"sapling_state",84:"sapling_transaction_deprecated",85:"SAPLING_EMPTY_STATE",86:"SAPLING_VERIFY_UPDATE",87:"ticket",88:"TICKET_DEPRECATED",89:"READ_TICKET","8a":"SPLIT_TICKET","8b":"JOIN_TICKETS","8c":"GET_AND_UPDATE","8d":"chest","8e":"chest_key","8f":"OPEN_CHEST",90:"VIEW",91:"view",92:"constant",93:"SUB_MUTEZ",94:"tx_rollup_l2_address",95:"MIN_BLOCK_TIME",96:"sapling_transaction",97:"EMIT",98:"Lambda_rec",99:"LAMBDA_REC","9a":"TICKET","9b":"BYTES","9c":"NAT"},G4=(()=>{const t={};return Object.keys(Vr).forEach(e=>{t[Vr[e]]=e}),t})(),pu={4:"activate_account",107:"reveal",110:"delegation",108:"transaction",109:"origination",6:"ballot",21:"endorsement",1:"seed_nonce_revelation",5:"proposals",111:"register_global_constant",150:"tx_rollup_origination",151:"tx_rollup_submit_batch",158:"transfer_ticket",112:"set_deposits_limit",113:"increase_paid_storage",114:"update_consensus_key",9:"drain_delegate",200:"smart_rollup_originate",201:"smart_rollup_add_messages",206:"smart_rollup_execute_outbox_message"},Tl=(()=>{const t={};return Object.keys(pu).forEach(e=>{const r=typeof e=="string"?parseInt(e,10):e;t[pu[r]]=dt(r,2)}),t})(),_o={"00":"default","01":"root","02":"do","03":"set_delegate","04":"remove_delegate","05":"deposit"},Ml=(()=>{const t={};return Object.keys(_o).forEach(e=>{t[_o[e]]=e}),t})();class Ll extends ke{constructor(e,r){super(),this.operation=e,this.errorDetail=r,this.name="InvalidOperationSchemaError",this.message="Invalid operation content recevied",r&&(this.message+=` ${r}.`)}}class Q1 extends ke{constructor(e){super(),this.entrypoint=e,this.name="OversizedEntryPointError",this.message=`Invalid entrypoint length "${e.length}", maximum length is "${sh}".`}}class V4 extends ke{constructor(e){super(),this.ballotValue=e,this.name="InvalidBallotValueError",this.message=`Invalid ballot value "${e}" expecting one of the following: "yay", "nay", "pass".`}}class z4 extends ke{constructor(e){super(),this.ballotValue=e,this.name="DecodeBallotValueError",this.message=`Invalid ballot value "${e}", cannot be decoded.`}}class q4 extends ke{constructor(e){super(),this.value=e,this.name="UnexpectedMichelsonValueError",this.message=`Invalid Michelson value "${e}", unalbe to encode.`}}class eb extends ke{constructor(e){super(),this.message=e,this.name="OperationDecodingError"}}class W4 extends ke{constructor(e){super(),this.message=e,this.name="OperationEncodingError"}}class J4 extends ke{constructor(e){super(),this.op=e,this.name="UnsupportedOperationError",this.message=`Unsupported operation "${e}", can submit an issue on our github for feature request.`}}class Z4 extends ke{constructor(e){super(),this.pvm=e,this.name="UnsupportedPvmKindError",this.message=`Invalid Pvm kind "${e}" expecting either "arith" or "wasm_2_0_0".`}}class X4 extends ke{constructor(e){super(),this.pvm=e,this.name="DecodePvmKindError",this.message=`Invalid Pvm kind "${e}", cannot be decoded.`}}class tb extends ke{constructor(e,r){super(),this.address=e,this.errorDetail=r,this.name="InvalidSmartRollupAddress",this.message=`Invalid smart rollup address "${e}"`,r&&(this.message+=` ${r}.`)}}class rb extends ke{constructor(e,r){super(),this.hash=e,this.errorDetail=r,this.name="InvalidSmartRollupCommitmentHashError",this.message=`Invalid smart rollup commitment hash "${e}"`,r&&(this.message+=` ${r}.`)}}class Hr{constructor(e,r=0){this.arr=e,this.offset=r}static fromHexString(e){const r=e.toLowerCase();if(/^(([a-f]|\d){2})*$/.test(r)){const i=new Uint8Array((r.match(/([a-z]|\d){2}/g)||[]).map(n=>parseInt(n,16)));return new Hr(i)}else throw new eo(r)}consume(e){const r=this.arr.subarray(this.offset,this.offset+e);return this.offset+=e,r}get(e){return this.arr[this.offset+e]}length(){return this.arr.length-this.offset}slice(e,r){return new Hr(this.arr.slice(e,r))}}const Y4=t=>"prim"in t,Q4=t=>"bytes"in t&&typeof t.bytes=="string",eE=t=>"string"in t&&typeof t.string=="string",tE=t=>"int"in t&&typeof t.int=="string",rE=t=>{const e=mn(t.code),r=mn(t.storage);return`${dt(e.length/2,8)}${e}${dt(r.length/2,8)}${r}`},iE=t=>{const e=xr(t),r=xr(t);return{code:vn(new Hr(e)),storage:vn(new Hr(r))}},mn=t=>{if(Array.isArray(t)){const e=t.map(i=>mn(i)).join(""),r=e.length/2;return`02${dt(r)}${e}`}else{if(Y4(t))return hE(t);if(Q4(t))return sE(t);if(eE(t))return oE(t);if(tE(t))return fE(t)}throw new q4(JSON.stringify(t))},vn=t=>{const e=t.consume(1);switch(e[0]){case 10:return aE(t);case 1:return cE(t);case 0:return uE(t);case 2:{const r=new Hr(xr(t)),i=[];for(;r.length()>0;)i.push(vn(r));return i}default:return dE(t,e)}},xr=(t,e=4)=>{const r=t.consume(e),i=parseInt(Buffer.from(r).toString("hex"),16);return t.consume(i)},nE=(t,e=4)=>{const r=[];let i=t;for(;i.length();){const n=i.consume(e),s=parseInt(Buffer.from(n).toString("hex"),16);r.push(i.consume(s)),i=i.slice(s+e)}return r},sE=t=>{if(!/^([A-Fa-f0-9]{2})*$/.test(t.bytes))throw new eo(t.bytes);const e=t.bytes.length/2;return`0a${dt(e)}${t.bytes}`},aE=t=>{const e=xr(t);return{bytes:Buffer.from(e).toString("hex")}},oE=t=>{const e=Buffer.from(t.string,"utf8").toString("hex"),r=e.length/2;return`01${dt(r)}${e}`},cE=t=>{const e=xr(t);return{string:Buffer.from(e).toString("utf8")}},fE=({int:t})=>{const e=new re(t,10),r=e.toString(2)[0]==="-"?"1":"0",i=e.toString(2).replace(/-/g,""),n=i.length<=6?6:(i.length-6)%7?i.length+7-(i.length-6)%7:i.length,a=i.padStart(n,"0").match(/\d{6,7}/g).reverse();return a[0]=r+a[0],`00${a.map((f,d)=>parseInt((d===a.length-1?"0":"1")+f,2).toString(16).padStart(2,"0")).join("")}`},uE=t=>{let e=t.consume(1)[0];const r=[],i=128;for(;e&i;)r.push(e),e=t.consume(1)[0];r.push(e);const n=!!(64&r[0]);r[0]=r[0]&127;const s=r.map((o,f)=>o.toString(2).slice(f===0?-6:-7).padStart(f===0?6:7,"0")).reverse();let a=new re(s.join(""),2);return n&&(a=a.times(-1)),{int:a.toFixed()}},hE=t=>{const e=+Array.isArray(t.annots),r=Array.isArray(t.args)?t.args.length:0,i=dt(Math.min(2*r+e+3,9),2),n=G4[t.prim];let s=(t.args||[]).map(o=>mn(o)).join("");const a=Array.isArray(t.annots)?bE(t.annots):"";return(t.prim==="LAMBDA"||t.prim==="LAMBDA_REC")&&r&&(s=dt(s.length/2)+s+dt(0)),(t.prim==="pair"||t.prim==="Pair")&&r>2&&(s=a===""?dt(s.length/2)+s+dt(0):dt(s.length/2)+s),t.prim==="view"&&t.args&&(s=dt(s.length/2)+s+dt(0)),`${i}${n}${s}${a}`},dE=(t,e)=>{const r=(e[0]-3)%2===1;let i=Math.floor((e[0]-3)/2);const n=t.consume(1)[0].toString(16).padStart(2,"0"),s={prim:Vr[n]};if((Vr[n]==="LAMBDA"||Vr[n]==="LAMBDA_REC")&&t.consume(4),Vr[n]==="view")return i!=0?lE(t,s):s;let a,o;(Vr[n]==="pair"||Vr[n]==="Pair")&&i>2&&(a=pE(t),i=0,o=Nl(t));const f=new Array(i).fill(0).map(()=>vn(t));return(Vr[n]==="LAMBDA"||Vr[n]==="LAMBDA_REC")&&t.consume(4),a?s.args=a:f.length&&(s.args=f),o&&o[0]!==""?s.annots=o:r&&(s.annots=Nl(t)),s},lE=(t,e)=>(t.consume(4),e.args=new Array(4).fill(0).map(()=>vn(t)),t.consume(4),e),pE=t=>{const e=new Hr(xr(t)),r=[];for(;e.length()>0;)r.push(vn(e));return r},bE=t=>{const e=t.map(i=>Buffer.from(i,"utf8").toString("hex")).join("20"),r=e.length/2;return`${dt(r)}${e}`},Nl=t=>{const e=t.consume(4),r=parseInt(Buffer.from(e).toString("hex"),16),i=t.consume(r);return Buffer.from(i).toString("hex").split("20").map(s=>Buffer.from(s,"hex").toString("utf8"))},tr=t=>e=>Zs(Buffer.from(Zp(e,er[t]))),or=t=>e=>{const r=e.consume(Vp[t]);return dn(r,er[t])},gE=or(U.TZ1),mE=or(U.B),ah=t=>{const e=t.consume(1);if(e[0]===0)return or(U.TZ1)(t);if(e[0]===1)return or(U.TZ2)(t);if(e[0]===2)return or(U.TZ3)(t)},vE=tr(U.B),yE=tr(U.TZ1),Cl=t=>t?"ff":"00",ib=t=>tr(U.P)(t),nb=t=>or(U.P)(t),_E=t=>{const e=[];for(t.consume(4);t.length()>0;)e.push(nb(t));return e},wE=t=>dt(32*t.length)+t.map(e=>ib(e)).join(""),EE=t=>{switch(t){case"yay":return"00";case"nay":return"01";case"pass":return"02";default:throw new V4(t)}},xE=t=>{const e=t.consume(1);switch(e[0]){case 0:return"yay";case 1:return"nay";case 2:return"pass";default:throw new z4(e[0].toString())}},AE=t=>{switch(t){case"arith":return"00";case"wasm_2_0_0":return"01";default:throw new Z4(t)}},SE=t=>{const e=t.consume(1);switch(e[0]){case 0:return"arith";case 1:return"wasm_2_0_0";default:throw new X4(e[0].toString())}},RE=t=>t?Cl(!0)+oh(t):Cl(!1),OE=t=>{const e=parseInt(String(t),10),r=[];for(let i=0;i<4;i++){const n=(4-(i+1))*8;r.push((e&255<<n)>>n)}return Buffer.from(r).toString("hex")},PE=t=>{const e=t.consume(4);let r=0;for(let i=0;i<e.length;i++)r=r|e[i]<<(e.length-(i+1))*8;return r},IE=t=>{const e=parseInt(String(t),10),r=[];for(let i=0;i<2;i++){const n=(2-(i+1))*8;r.push((e&255<<n)>>n)}return Buffer.from(r).toString("hex")},TE=t=>{const e=t.consume(2);let r=0;for(let i=0;i<e.length;i++)r=r|e[i]<<(e.length-(i+1))*8;return r},ME=t=>t.consume(1)[0]===255,LE=t=>{if(ME(t))return ah(t)},oh=t=>{switch(t.substring(0,3)){case U.TZ1:return"00"+tr(U.TZ1)(t);case U.TZ2:return"01"+tr(U.TZ2)(t);case U.TZ3:return"02"+tr(U.TZ3)(t);case U.TZ4:return"03"+tr(U.TZ4)(t);default:throw new Ou(t,ae(ee.NO_PREFIX_MATCHED)+` expecting one for the following "${U.TZ1}", "${U.TZ2}", "${U.TZ3}" or "${U.TZ4}".`)}},NE=t=>{switch(t.substring(0,4)){case U.EDPK:return"00"+tr(U.EDPK)(t);case U.SPPK:return"01"+tr(U.SPPK)(t);case U.P2PK:return"02"+tr(U.P2PK)(t);default:throw new s0(t,ae(ee.NO_PREFIX_MATCHED)+` expecting one of the following '${U.EDPK}', '${U.SPPK}', '${U.P2PK}' or '${U.BLPK}'.`)}},CE=t=>{switch(t.substring(0,3)){case U.TZ1:case U.TZ2:case U.TZ3:case U.TZ4:return"00"+oh(t);case U.KT1:return"01"+tr(U.KT1)(t)+"00";default:throw new Je(t,ae(ee.NO_PREFIX_MATCHED)+` expecting one of the following prefix '${U.TZ1}', ${U.TZ2}', '${U.TZ3}', '${U.TZ4}' or '${U.KT1}'.`)}},BE=t=>{if(t.substring(0,3)!==U.SR1)throw new tb(t,ae(ee.NO_PREFIX_MATCHED)+` expecting prefix '${U.SR1}'.`);return tr(U.SR1)(t)},DE=t=>{if(t.substring(0,3)===U.KT1)return"01"+tr(U.KT1)(t)+"00";throw new Nn(t,ae(ee.NO_PREFIX_MATCHED)+` expecting prefix '${U.KT1}'.`)},kE=t=>{switch(t.consume(1)[0]){case 0:return or(U.EDPK)(t);case 1:return or(U.SPPK)(t);case 2:return or(U.P2PK)(t);default:throw new s0(t.toString(),ae(ee.NO_PREFIX_MATCHED))}},$E=t=>{if(t.substring(0,4)===U.SRC1)return tr(U.SRC1)(t);throw new rb(t,ae(ee.NO_PREFIX_MATCHED)+` expecting prefix '${U.SRC1}'`)},UE=t=>{switch(t.consume(1)[0]){case 0:return ah(t);case 1:{const r=or(U.KT1)(t);return t.consume(1),r}default:throw new Je(t.toString(),": Unable to decode.")}},HE=t=>{const e=or(U.SR1)(t);if(e.substring(0,3)!==U.SR1)throw new tb(e,ae(ee.NO_PREFIX_MATCHED)+` expecting prefix '${U.SR1}'.`);return e},FE=t=>{if(t.consume(1)[0]===1){const r=or(U.KT1)(t);return t.consume(1),r}throw new Nn(t.toString(),ae(ee.NO_PREFIX_MATCHED))},KE=t=>{const e=or(U.SRC1)(t);if(e.substring(0,4)!==U.SRC1)throw new rb(e,ae(ee.NO_PREFIX_MATCHED)+` expecting prefix '${U.SRC1}'`);return e},ch=t=>{const e=[];let r=new re(t,10);if(r.isNaN())throw new TypeError(`Invalid zarith number ${t}`);for(;;)if(r.lt(128)){r.lt(16)&&e.push("0"),e.push(r.toString(16));break}else{let i=r.mod(128);r=r.minus(i),r=r.dividedBy(128),i=i.plus(128),e.push(i.toString(16))}return e.join("")},fh=t=>{let e=0;for(;e<t.length()&&t.get(e)&128;)e+=1;let r=new re(0);for(let i=e;i>=0;i-=1){const n=t.get(i)&127;r=r.multipliedBy(128),r=r.plus(n)}return t.consume(e+1),new re(r).toString()},jE=t=>{const e=dt(t.consume(1)[0],2);if(e in _o)return _o[e];{const r=xr(t,1),i=Buffer.from(r).toString("utf8");if(i.length>sh)throw new Q1(i);return i}},GE=t=>{if(t.consume(1)[0]!==0){const r=jE(t),i=xr(t),n=vn(new Hr(i));return{entrypoint:r,value:n}}},VE=t=>{if(t in Ml)return`${Ml[t]}`;if(t.length>sh)throw new Q1(t);return`ff${mn({string:t}).slice(8)}`},zE=t=>{if(!t||t.entrypoint==="default"&&"prim"in t.value&&t.value.prim==="Unit")return"00";const e=VE(t.entrypoint),r=mn(t.value),i=(r.length/2).toString(16).padStart(8,"0");return`ff${e}${i}${r}`},qE=t=>{const e=mn(t);return`${dt(e.length/2)}${e}`},WE=t=>{const e=xr(t);return vn(new Hr(e))},JE=tr(U.VH),ZE=or(U.VH),XE=t=>`${mn({string:t}).slice(2)}`,YE=t=>{const e=xr(t);return Buffer.from(e).toString("utf8")},QE=t=>"",e8=t=>({}),t8=tr(U.TXR1),r8=or(U.TXR1),i8=t=>`${dt(t.length/2)}${t}`,n8=t=>{const e=xr(t);return Buffer.from(e).toString("hex")},s8=t=>t?`ff${ch(t)}`:"00",a8=t=>{const e=t.consume(1);if(Buffer.from(e).toString("hex")!=="00")return fh(t)},o8=t=>t?`ff${ch(t)}`:"00",c8=t=>{const e=t.consume(1);if(Buffer.from(e).toString("hex")!=="00")return fh(t)},f8=(t,e=8)=>`${dt(t.length/2,e)}${t}`,u8=t=>{const e=xr(t);return Buffer.from(e).toString("hex")},h8=t=>{const e=t.reduce((r,i)=>r+`${dt(i.length/2)}${i}`,"");return`${dt(e.length/2)}${e}`},d8=t=>{const e=xr(t);return nE(new Hr(e)).map(i=>Buffer.from(i).toString("hex"))},sb={branch:L.BRANCH,contents:[L.OPERATION]},uh={pkh:L.TZ1,secret:L.SECRET},hh={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,public_key:L.PUBLIC_KEY},dh={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,delegate:L.DELEGATE},lh={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,amount:L.ZARITH,destination:L.ADDRESS,parameters:L.PARAMETERS},ph={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,balance:L.ZARITH,delegate:L.DELEGATE,script:L.SCRIPT},bh={source:L.PKH,period:L.INT32,proposal:L.PROPOSAL,ballot:L.BALLOT_STATEMENT},gh={slot:L.INT16,level:L.INT32,round:L.INT32,block_payload_hash:L.BLOCK_PAYLOAD_HASH},mh={level:L.INT32,nonce:L.RAW},vh={source:L.PKH,period:L.INT32,proposals:L.PROPOSAL_ARR},yh={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,value:L.VALUE},_h={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,ticket_contents:L.VALUE,ticket_ty:L.VALUE,ticket_ticketer:L.ADDRESS,ticket_amount:L.ZARITH,destination:L.ADDRESS,entrypoint:L.ENTRYPOINT},wh={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,tx_rollup_origination:L.TX_ROLLUP_ORIGINATION_PARAM},Eh={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,rollup:L.TX_ROLLUP_ID,content:L.TX_ROLLUP_BATCH_CONTENT,burn_limit:L.BURN_LIMIT},xh={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,amount:L.ZARITH,destination:L.SMART_CONTRACT_ADDRESS},Ah={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,pk:L.PUBLIC_KEY},Sh={consensus_key:L.PKH,delegate:L.PKH,destination:L.PKH},Rh={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,limit:L.DEPOSITS_LIMIT},Oh={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,pvm_kind:L.PVM_KIND,kernel:L.PADDED_BYTES,origination_proof:L.PADDED_BYTES,parameters_ty:L.VALUE},Ph={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,message:L.SMART_ROLLUP_MESSAGE},Ih={source:L.PKH,fee:L.ZARITH,counter:L.ZARITH,gas_limit:L.ZARITH,storage_limit:L.ZARITH,rollup:L.SMART_ROLLUP_ADDRESS,cemented_commitment:L.SMART_ROLLUP_COMMITMENT_HASH,output_proof:L.PADDED_BYTES},l8=t=>e=>{if(!(e.kind in t)||!(e.kind in Tl))throw new bn(e.kind);return Tl[e.kind]+t[e.kind](e)},p8=t=>e=>{const r=e.consume(1),i=pu[r[0]];if(i===void 0)throw new J4(r[0].toString());const n=t[i](e);if(typeof n!="object")throw new eb("Invalid operation, cannot be decoded.");return Object.assign({kind:i},n)},yt=t=>e=>r=>Object.keys(e).reduce((n,s)=>{const a=e[s];if(r&&Array.isArray(a)){const o=t[a[0]],f=r[s];if(!Array.isArray(f))throw new W4(`Invalid operation value "${JSON.stringify(f)}" of key "${s}, expected value to be Array.`);return n+f.reduce((d,g)=>d+o(g),"")}else{const o=t[a];return n+o(r[s])}},""),_t=t=>e=>r=>Object.keys(e).reduce((n,s)=>{const a=e[s];if(Array.isArray(a)){const o=t[a[0]],f=[],d=r.length();for(;r.length()>0;)if(f.push(o(r)),d===r.length())throw new eb("Unable to decode value");return Object.assign(Object.assign({},n),{[s]:f})}else{const o=t[a],f=o(r);return typeof f<"u"?Object.assign(Object.assign({},n),{[s]:f}):Object.assign({},n)}},{}),ce={[L.SECRET]:t=>Il(t.consume(20)),[L.RAW]:t=>Il(t.consume(32)),[L.TZ1]:gE,[L.BRANCH]:mE,[L.ZARITH]:fh,[L.PUBLIC_KEY]:kE,[L.PKH]:ah,[L.DELEGATE]:LE,[L.INT32]:PE,[L.SCRIPT]:iE,[L.BALLOT_STATEMENT]:xE,[L.PROPOSAL]:nb,[L.PROPOSAL_ARR]:_E,[L.PARAMETERS]:GE,[L.ADDRESS]:UE,[L.SMART_ROLLUP_ADDRESS]:HE,[L.SMART_CONTRACT_ADDRESS]:FE,[L.SMART_ROLLUP_COMMITMENT_HASH]:KE,[L.VALUE]:WE,[L.INT16]:TE,[L.BLOCK_PAYLOAD_HASH]:ZE,[L.ENTRYPOINT]:YE,[L.TX_ROLLUP_ORIGINATION_PARAM]:e8,[L.TX_ROLLUP_ID]:r8,[L.TX_ROLLUP_BATCH_CONTENT]:n8,[L.BURN_LIMIT]:a8,[L.DEPOSITS_LIMIT]:c8,[L.PVM_KIND]:SE,[L.PADDED_BYTES]:u8,[L.SMART_ROLLUP_MESSAGE]:d8};ce[L.OPERATION]=p8(ce);ce[L.OP_ACTIVATE_ACCOUNT]=t=>_t(ce)(uh)(t);ce[L.OP_DELEGATION]=t=>_t(ce)(dh)(t);ce[L.OP_TRANSACTION]=t=>_t(ce)(lh)(t);ce[L.OP_ORIGINATION]=t=>_t(ce)(ph)(t);ce[L.OP_BALLOT]=t=>_t(ce)(bh)(t);ce[L.OP_ENDORSEMENT]=t=>_t(ce)(gh)(t);ce[L.OP_SEED_NONCE_REVELATION]=t=>_t(ce)(mh)(t);ce[L.OP_PROPOSALS]=t=>_t(ce)(vh)(t);ce[L.OP_REVEAL]=t=>_t(ce)(hh)(t);ce[L.OP_REGISTER_GLOBAL_CONSTANT]=t=>_t(ce)(yh)(t);ce[L.OP_TRANSFER_TICKET]=t=>_t(ce)(_h)(t);ce[L.OP_TX_ROLLUP_ORIGINATION]=t=>_t(ce)(wh)(t);ce[L.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>_t(ce)(Eh)(t);ce[L.OP_INCREASE_PAID_STORAGE]=t=>_t(ce)(xh)(t);ce[L.OP_UPDATE_CONSENSUS_KEY]=t=>_t(ce)(Ah)(t);ce[L.OP_DRAIN_DELEGATE]=t=>_t(ce)(Sh)(t);ce[L.OP_SMART_ROLLUP_ORIGINATE]=t=>_t(ce)(Oh)(t);ce[L.OP_SMART_ROLLUP_ADD_MESSAGES]=t=>_t(ce)(Ph)(t);ce[L.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=t=>_t(ce)(Ih)(t);ce[L.MANAGER]=_t(ce)(sb);ce[L.OP_SET_DEPOSITS_LIMIT]=t=>_t(ce)(Rh)(t);const fe={[L.SECRET]:t=>t,[L.RAW]:t=>t,[L.TZ1]:yE,[L.BRANCH]:vE,[L.ZARITH]:ch,[L.PUBLIC_KEY]:NE,[L.PKH]:oh,[L.DELEGATE]:RE,[L.SCRIPT]:rE,[L.BALLOT_STATEMENT]:EE,[L.PROPOSAL]:ib,[L.PROPOSAL_ARR]:wE,[L.INT32]:OE,[L.PARAMETERS]:zE,[L.ADDRESS]:CE,[L.SMART_ROLLUP_ADDRESS]:BE,[L.SMART_CONTRACT_ADDRESS]:DE,[L.SMART_ROLLUP_COMMITMENT_HASH]:$E,[L.VALUE]:qE,[L.INT16]:IE,[L.BLOCK_PAYLOAD_HASH]:JE,[L.ENTRYPOINT]:XE,[L.TX_ROLLUP_ORIGINATION_PARAM]:QE,[L.TX_ROLLUP_ID]:t8,[L.TX_ROLLUP_BATCH_CONTENT]:i8,[L.BURN_LIMIT]:s8,[L.DEPOSITS_LIMIT]:o8,[L.PVM_KIND]:AE,[L.PADDED_BYTES]:f8,[L.SMART_ROLLUP_MESSAGE]:h8};fe[L.OPERATION]=l8(fe);fe[L.OP_ACTIVATE_ACCOUNT]=t=>yt(fe)(uh)(t);fe[L.OP_DELEGATION]=t=>yt(fe)(dh)(t);fe[L.OP_TRANSACTION]=t=>yt(fe)(lh)(t);fe[L.OP_ORIGINATION]=t=>yt(fe)(ph)(t);fe[L.OP_BALLOT]=t=>yt(fe)(bh)(t);fe[L.OP_ENDORSEMENT]=t=>yt(fe)(gh)(t);fe[L.OP_SEED_NONCE_REVELATION]=t=>yt(fe)(mh)(t);fe[L.OP_PROPOSALS]=t=>yt(fe)(vh)(t);fe[L.OP_REVEAL]=t=>yt(fe)(hh)(t);fe[L.OP_REGISTER_GLOBAL_CONSTANT]=t=>yt(fe)(yh)(t);fe[L.OP_TRANSFER_TICKET]=t=>yt(fe)(_h)(t);fe[L.OP_TX_ROLLUP_ORIGINATION]=t=>yt(fe)(wh)(t);fe[L.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>yt(fe)(Eh)(t);fe[L.OP_INCREASE_PAID_STORAGE]=t=>yt(fe)(xh)(t);fe[L.OP_UPDATE_CONSENSUS_KEY]=t=>yt(fe)(Ah)(t);fe[L.OP_DRAIN_DELEGATE]=t=>yt(fe)(Sh)(t);fe[L.OP_SMART_ROLLUP_ORIGINATE]=t=>yt(fe)(Oh)(t);fe[L.OP_SMART_ROLLUP_ADD_MESSAGES]=t=>yt(fe)(Ph)(t);fe[L.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=t=>yt(fe)(Ih)(t);fe[L.MANAGER]=yt(fe)(sb);fe[L.OP_SET_DEPOSITS_LIMIT]=t=>yt(fe)(Rh)(t);const ab={activate_account:uh,reveal:hh,delegation:dh,transaction:lh,origination:ph,ballot:bh,endorsement:gh,seed_nonce_revelation:mh,proposals:vh,register_global_constant:yh,transfer_ticket:_h,tx_rollup_origination:wh,tx_rollup_submit_batch:Eh,increase_paid_storage:xh,update_consensus_key:Ah,drain_delegate:Sh,set_deposits_limit:Rh,smart_rollup_originate:Oh,smart_rollup_add_messages:Ph,smart_rollup_execute_outbox_message:Ih},b8=(t,e)=>e.filter(r=>!t.includes(r)),g8=(t,e)=>t.filter(r=>r!==e),m8=t=>Object.keys(ab).includes(t),v8=t=>{const e=t.kind,r=Object.keys(t),i=g8(r,"kind"),n=Object.keys(ab[e]);return b8(i,n)};var bu;(function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.PtNairobi="PtNairobiyssHuh87hEhfVBGCVrK3WnS8Z2FT4ymB5tAa4r1nQf",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(bu||(bu={}));const y8=bu.PtMumbai2;function _8(t,e){return{encoder:fe[t],decoder:r=>{const i=Hr.fromHexString(r);return ce[t](i)}}}class ob{constructor(e=y8){this.protocolHash=e,this.codec=_8(L.MANAGER,this.protocolHash)}forge(e){const r=e5(e.branch);if(r!==ee.VALID)throw new zg(e.branch,ae(r));for(const n of e.contents){if(!m8(n.kind))throw new bn(n.kind);const s=v8(n);if(s.length===1){if(n.kind==="delegation"&&s[0]==="delegate")continue;if(n.kind==="origination"&&s[0]==="delegate")continue;if(n.kind==="transaction"&&s[0]==="parameters")continue;if(n.kind==="set_deposits_limit"&&s[0]==="limit")continue;if(n.kind==="tx_rollup_submit_batch"&&s[0]==="burn_limit")continue;throw new Ll(n,`missing properties "${s.join(", ")}"`)}else if(s.length>1)throw new Ll(n,`missing properties "${s.join(", ")}"`)}const i=this.codec.encoder(e).toLowerCase();return Promise.resolve(i)}parse(e){return Promise.resolve(this.codec.decoder(e))}}new ob;function Yt(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function D(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(g){try{d(i.next(g))}catch(y){a(y)}}function f(g){try{d(i.throw(g))}catch(y){a(y)}}function d(g){g.done?s(g.value):n(g.value).then(o,f)}d((i=i.apply(t,e||[])).next())})}function Da(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)}function $t(t,e,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(t,r):n?n.value=r:e.set(t,r),r}function w8(t,e){const r=JSON.parse(t.body);if(r[0]&&r[0].kind&&r[0].msg){const i=JSON.stringify({kind:r[0].kind,id:r[0].id,msg:r[0].msg.replace(e,"")});return new ws(`Http error response: (${t.status}) ${i}`,t.status,t.statusText,i,t.url)}else return t}class Th{constructor(e){this.context=e}inject(e){return D(this,void 0,void 0,function*(){let r;try{r=yield this.context.rpc.injectOperation(e)}catch(i){const n=". You may want to use --replace to provide adequate fee and replace it";throw i instanceof ws&&i.message.includes(n)?w8(i,n):i}return r})}}class ka extends Po{constructor(){super(),this.name="UnconfiguredSignerError",this.message="No signer has been configured. Please configure one by calling setProvider({signer}) on your TezosToolkit instance."}}class gu{publicKey(){return D(this,void 0,void 0,function*(){throw new ka})}publicKeyHash(){return D(this,void 0,void 0,function*(){throw new ka})}secretKey(){return D(this,void 0,void 0,function*(){throw new ka})}sign(e,r){return D(this,void 0,void 0,function*(){throw new ka})}}function cb(t){return new ht(e=>(t.on("data",r=>{e.next(r)}),t.on("error",r=>{e.error(r)}),t.on("close",()=>{e.complete()}),()=>{t.close()}))}var $r;(function(t){t[t.DELEGATION=10600]="DELEGATION",t[t.ORIGINATION=10600]="ORIGINATION",t[t.TRANSFER=10600]="TRANSFER",t[t.REVEAL_TZ1=2e3]="REVEAL_TZ1",t[t.REVEAL_TZ2=2e3]="REVEAL_TZ2",t[t.REVEAL_TZ3=2e3]="REVEAL_TZ3",t[t.REVEAL_TZ4=2e3]="REVEAL_TZ4"})($r||($r={}));var vi;(function(t){t[t.DELEGATION=1257]="DELEGATION",t[t.ORIGINATION=1e4]="ORIGINATION",t[t.TRANSFER=1e4]="TRANSFER",t[t.REVEAL=374]="REVEAL"})(vi||(vi={}));var yi;(function(t){t[t.DELEGATION=0]="DELEGATION",t[t.ORIGINATION=257]="ORIGINATION",t[t.TRANSFER=257]="TRANSFER",t[t.REVEAL=0]="REVEAL"})(yi||(yi={}));const fb=250;var mt;(function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.PtNairobi="PtNairobiyssHuh87hEhfVBGCVrK3WnS8Z2FT4ymB5tAa4r1nQf",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(mt||(mt={}));const E8={"004":[mt.Pt24m4xi],"005":[mt.PsBABY5H,mt.PsBabyM1],"006":[mt.PsCARTHA],"007":[mt.PsDELPH1],"008":[mt.PtEdo2Zk],"009":[mt.PsFLorena],"010":[mt.PtGRANADs],"011":[mt.PtHangz2],"012":[mt.PsiThaCa,mt.Psithaca2],"013":[mt.PtJakart2],"014":[mt.PtKathman],"015":[mt.PtLimaPtL],"016":[mt.PtMumbai2],"017":[mt.PtNairobi],"018":[mt.ProtoALpha]};var mu;(function(t){t.MAINNET="NetXdQprcVkpaWU",t.CARTHAGENET="NetXjD3HPJJjmcd",t.DELPHINET="NetXm8tYqnMWky1",t.EDONET="NetXSgo1ZT2DRUG",t.FLORENCENET="NetXxkAx4woPLyu",t.GRANADANET="NetXz969SFaFn8k",t.HANGZHOUNET="NetXZSsxBpMQeAT",t.ITHACANET="NetXbhmtAbMukLc",t.ITHACANET2="NetXnHfVqm9iesp",t.JAKARTANET2="NetXLH1uAxK7CCh",t.KATHMANDUNET="NetXazhm4yetmff",t.LIMANET="NetXizpkH94bocH",t.MUMBAINET="NetXQw6nWSnrJ5t",t.MUMBAINET2="NetXgbcrNtXD2yA",t.NAIROBINET="NetXyuzvDo2Ugzb"})(mu||(mu={}));const wo=t=>Math.round(x8(t)*11/10),x8=t=>{switch(t.substring(0,3)){case"tz1":return $r.REVEAL_TZ1;case"tz2":return $r.REVEAL_TZ2;case"tz3":return $r.REVEAL_TZ3;case"tz4":return $r.REVEAL_TZ4;default:throw new Error(`Cannot estimate reveal gas limit for ${t}`)}};class Mh extends ke{constructor(e,r,i){super(),this.smartContractMethodName=e,this.sigs=r,this.invalidParams=i,this.name="InvalidParameterError",this.message=`${e} Received ${i.length} arguments while expecting one of the following signatures (${JSON.stringify(r)})`}}class ub extends ke{constructor(e){super(),this.source=e,this.name="InvalidDelegationSource",this.message=`Since Babylon delegation source can no longer be a contract address ${e}. Please use the smart contract abstraction to set your delegate.`}}class aa extends ke{constructor(e,r){super(),this.message=e,this.data=r,this.name="InvalidCodeParameter"}}class Lh extends ke{constructor(e,r){super(),this.message=e,this.data=r,this.name="InvalidInitParameter"}}class hb extends Oo{constructor(e,r,i,n){super(),this.message=e,this.viewName=r,this.failWith=i,this.cause=n,this.name="ViewSimulationError"}}const db=t=>{if(A8(t.body)){const e=JSON.parse(t.body);if(Array.isArray(e)&&"with"in e[e.length-1])return e[e.length-1].with}},A8=t=>{try{JSON.parse(t)}catch{return!1}return!0};class vu extends ke{constructor(e){super(),this.info=e,this.name="InvalidViewSimulationContext",this.message=`${e} Please configure the context of the view execution in the executeView method.`}}class lb extends Oo{constructor(e){super(),this.message=e,this.name="RevealOperationError"}}class pb extends ke{constructor(e){super(),this.message=e,this.name}}class bb extends ke{constructor(e){super(),this.message=e,this.name="InvalidBalanceError"}}const gb=({pkh:t,secret:e})=>D(void 0,void 0,void 0,function*(){return{kind:j.ACTIVATION,pkh:t,secret:e}}),hc=({code:t,init:e,balance:r="0",delegate:i,storage:n,fee:s=vi.ORIGINATION,gasLimit:a=$r.ORIGINATION,storageLimit:o=yi.ORIGINATION,mutez:f=!1})=>D(void 0,void 0,void 0,function*(){if(n!==void 0&&e!==void 0)throw new pb("Storage and Init cannot be set a the same time. Please either use storage or init but not both.");if(!Array.isArray(t))throw new aa("Wrong code parameter type, expected an array",t);let d;if(n!==void 0){const S=t.find(P=>"prim"in P&&P.prim==="storage");if(S?.args===void 0)throw new aa("The storage section is missing from the script",t);d=new yr(S.args[0]).Encode(n)}else if(e!==void 0&&typeof e=="object")d=e;else throw new Lh("Wrong init parameter type, expected JSON Michelson",e);const g={code:t,storage:d};if(isNaN(Number(r)))throw new bb(`Invalid Balance "${r}", cannot be converted to a number`);const y={kind:j.ORIGINATION,fee:s,gas_limit:a,storage_limit:o,balance:f?r.toString():Wu("tz","mutez",r).toString(),script:g};return i&&(y.delegate=i),y}),dc=({to:t,amount:e,parameter:r,fee:i=vi.TRANSFER,gasLimit:n=$r.TRANSFER,storageLimit:s=yi.TRANSFER,mutez:a=!1})=>D(void 0,void 0,void 0,function*(){return{kind:j.TRANSACTION,fee:i,gas_limit:n,storage_limit:s,amount:a?e.toString():Wu("tz","mutez",e).toString(),destination:t,parameters:r}}),lc=({delegate:t,source:e,fee:r=vi.DELEGATION,gasLimit:i=$r.DELEGATION,storageLimit:n=yi.DELEGATION})=>D(void 0,void 0,void 0,function*(){return{kind:j.DELEGATION,source:e,fee:r,gas_limit:i,storage_limit:n,delegate:t}}),mb=({fee:t=vi.DELEGATION,gasLimit:e=$r.DELEGATION,storageLimit:r=yi.DELEGATION},i)=>D(void 0,void 0,void 0,function*(){return{kind:j.DELEGATION,fee:t,gas_limit:e,storage_limit:r,delegate:i}}),Xa=({fee:t=vi.REVEAL,gasLimit:e=void 0,storageLimit:r=yi.REVEAL},i,n)=>D(void 0,void 0,void 0,function*(){return{kind:j.REVEAL,fee:t,public_key:n,source:i,gas_limit:e??wo(i),storage_limit:r}}),pc=({value:t,source:e,fee:r,gasLimit:i,storageLimit:n})=>D(void 0,void 0,void 0,function*(){return{kind:j.REGISTER_GLOBAL_CONSTANT,value:t,fee:r,gas_limit:i,storage_limit:n,source:e}}),bc=({ticketContents:t,ticketTy:e,ticketTicketer:r,ticketAmount:i,destination:n,entrypoint:s,source:a,fee:o,gasLimit:f,storageLimit:d})=>D(void 0,void 0,void 0,function*(){return{kind:j.TRANSFER_TICKET,fee:o,gas_limit:f,storage_limit:d,source:a,ticket_contents:t,ticket_ty:e,ticket_ticketer:r,ticket_amount:i,destination:n,entrypoint:s}}),gc=({source:t,fee:e,gasLimit:r,storageLimit:i,amount:n,destination:s})=>D(void 0,void 0,void 0,function*(){return{kind:j.INCREASE_PAID_STORAGE,source:t,fee:e,gas_limit:r,storage_limit:i,amount:n,destination:s}}),vb=({consensus_key:t,delegate:e,destination:r})=>D(void 0,void 0,void 0,function*(){return{kind:j.DRAIN_DELEGATE,consensus_key:t,delegate:e,destination:r}}),yb=({source:t,proposal:e,ballot:r})=>D(void 0,void 0,void 0,function*(){return{kind:j.BALLOT,source:t,proposal:e,ballot:r}}),_b=({source:t,proposals:e})=>D(void 0,void 0,void 0,function*(){return{kind:j.PROPOSALS,source:t,proposals:e}}),wb=({source:t,fee:e,gasLimit:r,storageLimit:i,pk:n})=>D(void 0,void 0,void 0,function*(){return{kind:j.UPDATE_CONSENSUS_KEY,source:t,fee:e,gas_limit:r,storage_limit:i,pk:n}}),mc=({source:t,fee:e,gasLimit:r,storageLimit:i,message:n})=>D(void 0,void 0,void 0,function*(){return{kind:j.SMART_ROLLUP_ADD_MESSAGES,source:t,fee:e,gas_limit:r,storage_limit:i,message:n}}),vc=({source:t,fee:e,gasLimit:r,storageLimit:i,pvmKind:n,kernel:s,originationProof:a,parametersType:o})=>D(void 0,void 0,void 0,function*(){return{kind:j.SMART_ROLLUP_ORIGINATE,source:t,fee:e,gas_limit:r,storage_limit:i,pvm_kind:n,kernel:s,origination_proof:a,parameters_ty:o}}),$a=(t,e)=>Object.assign(Object.assign({},t),{kind:e}),Bl=(t,e)=>{if(Array.isArray(t)){const r=t.find(i=>i.kind===e);if(r&&S8(r,e))return r}},S8=(t,e)=>t.kind===e,yu=t=>["transaction","delegation","origination","reveal","register_global_constant","increase_paid_storage","tx_rollup_origination","tx_rollup_submit_batch","transfer_ticket","update_consensus_key","smart_rollup_add_messages","smart_rollup_originate"].indexOf(t.kind)!==-1,Eb=t=>["transaction","delegation","origination","register_global_constant","increase_paid_storage","tx_rollup_origination","tx_rollup_submit_batch","transfer_ticket","update_consensus_key","smart_rollup_add_messages","smart_rollup_originate"].indexOf(t.kind)!==-1,Nh=t=>"metadata"in t,Ls=t=>Nh(t)&&"operation_result"in t.metadata,R8=t=>Nh(t)&&"internal_operation_results"in t.metadata,O8=t=>"with"in t;class Ch extends Oo{constructor(e,r){super(),this.errors=e,this.errorDetails=r,this.name="TezosOperationError";const i=e[e.length-1];this.id=i.id,this.kind=i.kind,this.message=`(${this.kind}) ${this.id}`,O8(i)&&(i.with.string?this.message=i.with.string:i.with.int?this.message=i.with.int:this.message=JSON.stringify(i.with))}}class xb extends Error{constructor(e){super(),this.result=e,this.name="TezosPreapplyFailureError",this.message="Preapply returned an unexpected result"}}const di=t=>{const e=Array.isArray(t)?t:[t],r=[];for(let i=0;i<e.length;i++)for(let n=0;n<e[i].contents.length;n++){const s=e[i].contents[n];Ls(s)&&"fee"in s&&(r.push(Object.assign({fee:s.fee},s.metadata.operation_result)),Array.isArray(s.metadata.internal_operation_results)&&s.metadata.internal_operation_results.forEach(a=>r.push(a.result)))}return r},_s=(t,e="failed")=>{const r=Array.isArray(t)?t:[t];let i=[];for(let n=0;n<r.length;n++)for(let s=0;s<r[n].contents.length;s++){const a=r[n].contents[s];if(Nh(a)&&(Ls(a)&&a.metadata.operation_result.status===e&&(i=i.concat(a.metadata.operation_result.errors||[])),R8(a)&&Array.isArray(a.metadata.internal_operation_results)))for(const o of a.metadata.internal_operation_results)"result"in o&&o.result.status===e&&(i=i.concat(o.result.errors||[]))}return i};class P8 extends et{constructor(e){super(),this.message=e,this.name="OriginationOperationError"}}class Ya extends ke{constructor(e){super(),this.message=e,this.name="InvalidEstimateValueError"}}class Ab extends ke{constructor(e){super(),this.invalidConfirmations=e,this.name="InvalidConfirmationCountError",this.message=`Invalid confirmation count ${e} expecting at least 1`}}class Sb extends Io{constructor(e){super(),this.message=e,this.name="ConfirmationTimeoutError"}}class Ua extends Oo{constructor(e,r){super(),this.message=e,this.cause=r,this.name="RPCResponseError"}}class ir{constructor(e,r,i,n){if(this.hash=e,this.raw=r,this.results=i,this.context=n,this._pollingConfig$=new Tn(1),this.currentHead$=this._pollingConfig$.pipe(Hi(s=>new sc(s).pipe(E1({each:s.timeout*1e3,with:()=>y1(()=>new Sb("Confirmation polling timed out"))}))),Hi(()=>x1(()=>cb(this.context.stream.subscribeBlock("head"))).pipe(Hi(s=>{var a,o;const f=(o=(a=this.lastHead)===null||a===void 0?void 0:a.header.level)!==null&&o!==void 0?o:s.header.level-1;return Qu(f+1,s.header.level-f-1).pipe(wa(d=>this.context.readProvider.getBlock(d)),R1(s))}),bo(s=>this.lastHead=s))),ll({refCount:!0})),this.confirmed$=this.currentHead$.pipe(Dn(s=>{for(let a=3;a>=0;a--)s.operations[a].forEach(o=>{o.hash===this.hash&&(this._foundAt=s.header.level)});if(s.header.level-this._foundAt>=0)return this._foundAt}),lo(s=>s!==void 0),Ci(),ll()),this._foundAt=Number.POSITIVE_INFINITY,Jp(this.hash)!==ee.VALID)throw new a0(this.hash);this.confirmed$.pipe(Ci(),cc(()=>oc(Yu))).subscribe()}get includedInBlock(){return this._foundAt}get revealOperation(){return Array.isArray(this.results)&&this.results.find(e=>e.kind==="reveal")}get revealStatus(){return this.revealOperation?this.revealOperation.metadata.operation_result.status:"unknown"}get status(){return this.results.map(e=>Ls(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}confirmation(e,r){return D(this,void 0,void 0,function*(){if(typeof e<"u"&&e<1)throw new Ab(e);const{defaultConfirmationCount:i,confirmationPollingTimeoutSecond:n}=this.context.config;this._pollingConfig$.next({timeout:r||n});const s=e!==void 0?e:i;return new Promise((a,o)=>{this.confirmed$.pipe(Hi(()=>this.currentHead$),lo(f=>f.header.level-this._foundAt>=s-1),Ci()).subscribe(f=>{a(this._foundAt+(s-1))},o)})})}}class Rb extends ir{constructor(e,r,i,n,s,a){super(e,n,s,a),this.params=r,this.source=i}sumProp(e,r){return e.reduce((i,n)=>r in n?Number(n[r])+i:i,0)}getOriginatedContractAddresses(){const e=this.results.filter(i=>i.kind==="origination");let r=[];for(const i of e)i.metadata.operation_result.originated_contracts&&(r=[...r,...i.metadata.operation_result.originated_contracts]);return r}get status(){return this.results.filter(e=>Bb.indexOf(e.kind)!==-1).map(e=>Ls(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}get fee(){return this.sumProp(this.params,"fee")}get gasLimit(){return this.sumProp(this.params,"gas_limit")}get storageLimit(){return this.sumProp(this.params,"storage_limit")}get consumedGas(){return re.config({DECIMAL_PLACES:0,ROUNDING_MODE:re.ROUND_UP}),new re(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(di({contents:this.results}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(di({contents:this.results}),"paid_storage_size_diff"))}get errors(){return _s({contents:this.results})}}class Ea{constructor(e){this.context=e}get rpc(){return this.context.rpc}get signer(){return this.context.signer}forge({opOb:{branch:e,contents:r,protocol:i},counter:n}){return D(this,void 0,void 0,function*(){return{opbytes:yield this.context.forger.forge({branch:e,contents:r}),opOb:{branch:e,contents:r,protocol:i},counter:n}})}estimate(e,r){var{fee:i,gasLimit:n,storageLimit:s}=e,a=Yt(e,["fee","gasLimit","storageLimit"]);return D(this,void 0,void 0,function*(){let o=i,f=n,d=s;if(o&&o%1!==0)throw new Ya(`Fee value must not be a decimal: ${o}`);if(f&&f%1!==0)throw new Ya(`Gas Limit value must not be a decimal: ${f}`);if(d&&d%1!==0)throw new Ya(`Storage Limit value must not be a decimal: ${d}`);if(i===void 0||n===void 0||s===void 0){const g=yield r(Object.assign({fee:i,gasLimit:n,storageLimit:s},a));o??(o=g.suggestedFeeMutez),f??(f=g.gasLimit),d??(d=g.storageLimit)}return{fee:o,gasLimit:f,storageLimit:d}})}getRPCOp(e){return D(this,void 0,void 0,function*(){switch(e.kind){case j.TRANSACTION:return dc(Object.assign({},e));case j.ORIGINATION:return hc(yield this.context.parser.prepareCodeOrigination(Object.assign({},e)));case j.DELEGATION:return lc(Object.assign({},e));case j.REGISTER_GLOBAL_CONSTANT:return pc(Object.assign({},e));case j.INCREASE_PAID_STORAGE:return gc(Object.assign({},e));case j.TRANSFER_TICKET:return bc(Object.assign({},e));case j.SMART_ROLLUP_ADD_MESSAGES:return mc(Object.assign({},e));case j.SMART_ROLLUP_ORIGINATE:return vc(Object.assign({},e));default:throw new bn(e.kind)}})}simulate(e){return D(this,void 0,void 0,function*(){return{opResponse:yield this.rpc.runOperation(e),op:e,context:this.context.clone()}})}isRevealOpNeeded(e,r){return D(this,void 0,void 0,function*(){return!(!(yield this.isAccountRevealRequired(r))||!this.isRevealRequiredForOpType(e))})}isAccountRevealRequired(e){return D(this,void 0,void 0,function*(){return!(yield this.context.readProvider.isAccountRevealed(e,"head"))})}isRevealRequiredForOpType(e){let r=!1;for(const i of e)Eb(i)&&(r=!0);return r}signAndInject(e){return D(this,void 0,void 0,function*(){const r=yield this.signer.sign(e.opbytes,new Uint8Array([3]));e.opbytes=r.sbytes,e.opOb.signature=r.prefixSig;const i=[],n=yield this.rpc.preapplyOperations([e.opOb]);if(!Array.isArray(n))throw new xb(n);for(let a=0;a<n.length;a++)for(let o=0;o<n[a].contents.length;o++)i.push(n[a].contents[o]);const s=_s(n);if(s.length)throw new Ch(s,"Error occurred during validation simulation of operation");return{hash:yield this.context.injector.inject(e.opbytes),forgedBytes:e,opResponse:i,context:this.context.clone()}})}}class Ob{constructor(e,r){this.walletProvider=e,this.context=r,this.operations=[]}withTransfer(e){const r=Ge(e.to);if(r!==ee.VALID)throw new Je(e.to,ae(r));return this.operations.push(Object.assign({kind:j.TRANSACTION},e)),this}withContractCall(e,r={}){return this.withTransfer(e.toTransferParams(r))}withDelegation(e){var r;const i=Ge((r=e.delegate)!==null&&r!==void 0?r:"");if(e.delegate&&i!==ee.VALID)throw new Je(e.delegate,ae(i));return this.operations.push(Object.assign({kind:j.DELEGATION},e)),this}withOrigination(e){return this.operations.push(Object.assign({kind:j.ORIGINATION},e)),this}withIncreasePaidStorage(e){const r=Ge(e.destination);if(r!==ee.VALID)throw new Je(e.destination,ae(r));return this.operations.push(Object.assign({kind:j.INCREASE_PAID_STORAGE},e)),this}mapOperation(e){return D(this,void 0,void 0,function*(){switch(e.kind){case j.TRANSACTION:return this.walletProvider.mapTransferParamsToWalletParams(()=>D(this,void 0,void 0,function*(){return e}));case j.ORIGINATION:return this.walletProvider.mapOriginateParamsToWalletParams(()=>D(this,void 0,void 0,function*(){return this.context.parser.prepareCodeOrigination(Object.assign({},e))}));case j.DELEGATION:return this.walletProvider.mapDelegateParamsToWalletParams(()=>D(this,void 0,void 0,function*(){return e}));case j.INCREASE_PAID_STORAGE:return this.walletProvider.mapIncreasePaidStorageWalletParams(()=>D(this,void 0,void 0,function*(){return e}));default:throw new bn(JSON.stringify(e.kind))}})}with(e){for(const r of e)switch(r.kind){case j.TRANSACTION:this.withTransfer(r);break;case j.ORIGINATION:this.withOrigination(r);break;case j.DELEGATION:this.withDelegation(r);break;case j.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(r);break;default:throw new bn(JSON.stringify(r.kind))}return this}send(){return D(this,void 0,void 0,function*(){const e=[];for(const i of this.operations)e.push(yield this.mapOperation(i));const r=yield this.walletProvider.sendOperations(e);return this.context.operationFactory.createBatchOperation(r)})}}class xa{constructor(e){this.context=e,this.walletCommand=r=>({send:r})}get walletProvider(){return this.context.walletProvider}pkh({forceRefetch:e}={}){return D(this,void 0,void 0,function*(){return(!this._pkh||e)&&(this._pkh=yield this.walletProvider.getPKH()),this._pkh})}originate(e){return this.walletCommand(()=>D(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapOriginateParamsToWalletParams(()=>this.context.parser.prepareCodeOrigination(Object.assign({},e))),i=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createOriginationOperation(i)}))}setDelegate(e){var r;const i=Ge((r=e.delegate)!==null&&r!==void 0?r:"");if(e.delegate&&i!==ee.VALID)throw new Je(e.delegate,ae(i));return this.walletCommand(()=>D(this,void 0,void 0,function*(){const n=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>D(this,void 0,void 0,function*(){return e})),s=yield this.walletProvider.sendOperations([n]);return this.context.operationFactory.createDelegationOperation(s)}))}registerDelegate(){return this.walletCommand(()=>D(this,void 0,void 0,function*(){const e=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>D(this,void 0,void 0,function*(){return{delegate:yield this.pkh()}})),r=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createDelegationOperation(r)}))}transfer(e){const r=Ge(e.to);if(r!==ee.VALID)throw new Je(e.to,ae(r));return this.walletCommand(()=>D(this,void 0,void 0,function*(){const i=yield this.walletProvider.mapTransferParamsToWalletParams(()=>D(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([i]);return this.context.operationFactory.createTransactionOperation(n)}))}increasePaidStorage(e){const r=Ge(e.destination);if(r!==ee.VALID)throw new Je(e.destination,ae(r));return this.walletCommand(()=>D(this,void 0,void 0,function*(){const i=yield this.walletProvider.mapIncreasePaidStorageWalletParams(()=>D(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([i]);return this.context.operationFactory.createIncreasePaidStorageOperation(n)}))}batch(e){const r=new Ob(this.walletProvider,this.context);return Array.isArray(e)&&r.with(e),r}at(e,r=i=>i){return D(this,void 0,void 0,function*(){const i=ss(e);if(i!==ee.VALID)throw new Nn(e,ae(i));const n=this.context.withExtensions().rpc,s=this.context.withExtensions().readProvider,a=yield s.getScript(e,"head"),o=yield s.getEntrypoints(e),f=new Dh(e,a,this,this.context.contract,o,n,s);return r(f,this.context)})}}const I8=(t,{ALLOCATION_BURN:e,ORIGINATION_BURN:r}={ALLOCATION_BURN:257,ORIGINATION_BURN:257})=>{re.config({DECIMAL_PLACES:0,ROUNDING_MODE:re.ROUND_UP});const i=di({contents:t});let n=new re(0),s=new re(0),a=new re(0),o=new re(0),f=new re(0),d=new re(0);return i.forEach(g=>{a=a.plus(g.fee||0),o=o.plus(Array.isArray(g.originated_contracts)?g.originated_contracts.length*r:0),f=f.plus("allocated_destination_contract"in g?e:0),n=n.plus(g.consumed_milligas||0),d=d.plus("paid_storage_size_diff"in g&&Number(g.paid_storage_size_diff)||0)}),s=s.plus(f).plus(o).plus(d),{totalFee:a,totalMilliGas:n,totalGas:n.dividedBy(1e3),totalStorage:s,totalAllocationBurn:f,totalOriginationBurn:o,totalPaidStorageDiff:d,totalStorageBurn:new re(s.multipliedBy(fb))}};class T8 extends Po{constructor(){super(),this.name="ConfirmationUndefinedError",this.message="Default confirmation count can not be undefined"}}class Er extends Io{constructor(e){super(),this.message=e,this.name="ObservableError"}}const M8=60;class Wn{constructor(e,r,i){if(this.opHash=e,this.context=r,this._newHead$=i,this._operationResult=new Tn(1),this._includedInBlock=new Tn(1),this._included=!1,this.newHead$=this._newHead$.pipe(Hi(n=>{var s,a;const o=(a=(s=this.lastHead)===null||s===void 0?void 0:s.header.level)!==null&&a!==void 0?a:n.header.level-1;return Qu(o+1,n.header.level-o-1).pipe(wa(f=>this.context.readProvider.getBlock(f)),R1(n))}),bo(n=>this.lastHead=n),po({connector:()=>new Tn(1),resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!1})),this.confirmed$=this.newHead$.pipe(Dn(n=>{for(const s of n.operations)for(const a of s)if(a.hash===this.opHash)return this._included=!0,this._includedInBlock.next(n),this._operationResult.next(a.contents),n}),lo(n=>typeof n<"u"),Ci(),po({connector:()=>new Tn(1),resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!1})),Jp(this.opHash)!==ee.VALID)throw new a0(this.opHash);this.confirmed$.pipe(Ci(),cc(()=>oc(void 0))).subscribe()}operationResults(){return D(this,void 0,void 0,function*(){return this._operationResult.pipe(Ci()).toPromise()})}receipt(){return D(this,void 0,void 0,function*(){const e=yield this.operationResults();if(!e)throw new Er("Unable to get operation results");return I8(e)})}getCurrentConfirmation(){return D(this,void 0,void 0,function*(){return this._included?ul([this._includedInBlock,Sn(this.context.readProvider.getBlock("head"))]).pipe(Dn(([e,r])=>r.header.level-e.header.level+1),Ci()).toPromise():0})}isInCurrentBranch(e="head"){return D(this,void 0,void 0,function*(){if(!this._included)return!0;const r=yield this.context.readProvider.getBlockLevel(e),i=yield this._includedInBlock.pipe(Ci()).toPromise();if(!i)throw new Er("Inclusion block is undefined");const n=r-i.header.level;if(n<=0)return!0;const s=Math.min(i.header.level+n,i.header.level+M8);return new Set(yield this.context.readProvider.getLiveBlocks(s)).has(i.hash)})}confirmationObservable(e){if(typeof e<"u"&&e<1)throw new Ab(e);const{defaultConfirmationCount:r}=this.context.config,i=e!==void 0?e:r;if(i===void 0)throw new T8;return ul([this._includedInBlock,this.newHead$]).pipe(S1(([,n],[,s])=>n.hash===s.hash),Dn(([n,s])=>({block:s,expectedConfirmation:i,currentConfirmation:s.header.level-n.header.level+1,completed:s.header.level-n.header.level>=i-1,isInCurrentBranch:()=>this.isInCurrentBranch(s.hash)})),dw(({completed:n})=>!n,!0))}confirmation(e){return this.confirmationObservable(e).toPromise()}}class Pb extends Wn{constructor(e,r,i){super(e,r,i),this.opHash=e,this.context=r}revealOperation(){return D(this,void 0,void 0,function*(){const e=yield this.operationResults();if(!e)throw new Er("operationResult returned undefined");return e.find(r=>r.kind===j.REVEAL)})}transactionOperation(){return D(this,void 0,void 0,function*(){const e=yield this.operationResults();if(!e)throw new Er("operationResult returned undefined");return e.find(r=>r.kind===j.TRANSACTION)})}status(){return D(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.transactionOperation();return e?e.metadata.operation_result.status:"unknown"})}}class Ib extends Wn{constructor(e,r,i){super(e,r,i),this.opHash=e,this.context=r}originationOperation(){return D(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return Bl(e,j.ORIGINATION);throw new Er("Unable to fetch operation result")})}revealOperation(){return D(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return Bl(e,j.REVEAL);throw new Er("Unable to fetch operation result")})}status(){return D(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.originationOperation();return e?e.metadata.operation_result.status:"unknown"})}contract(){return D(this,void 0,void 0,function*(){const e=yield this.originationOperation(),r=(e?.metadata.operation_result.originated_contracts||[])[0];return this.context.wallet.at(r)})}}class Tb extends Wn{constructor(e,r,i){super(e,r,i),this.opHash=e,this.context=r}revealOperation(){return D(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return e.find(r=>r.kind===j.REVEAL);throw new Er("Unable to fetch operation result")})}delegationOperation(){return D(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return e.find(r=>r.kind===j.DELEGATION);throw new Er("Unable to fetch operation result")})}status(){return D(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.delegationOperation();return e?e.metadata.operation_result.status:"unknown"})}}class Bh{constructor(e){this.context=e}getPKH(){return D(this,void 0,void 0,function*(){return this.context.signer.publicKeyHash()})}mapTransferParamsToWalletParams(e){return D(this,void 0,void 0,function*(){return $a(yield e(),j.TRANSACTION)})}mapOriginateParamsToWalletParams(e){return D(this,void 0,void 0,function*(){return $a(yield e(),j.ORIGINATION)})}mapDelegateParamsToWalletParams(e){return D(this,void 0,void 0,function*(){return $a(yield e(),j.DELEGATION)})}mapIncreasePaidStorageWalletParams(e){return D(this,void 0,void 0,function*(){return $a(yield e(),j.INCREASE_PAID_STORAGE)})}sendOperations(e){return D(this,void 0,void 0,function*(){return(yield this.context.batch.batch(e).send()).hash})}}class Mb{constructor(e,r,i,n,s="unit",a=!0,o=!1){this.provider=e,this.address=r,this.parameterSchema=i,this.name=n,this.args=s,this.isMultipleEntrypoint=a,this.isAnonymous=o}getSignature(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}send(e={}){return this.provider instanceof xa?this.provider.transfer(this.toTransferParams(e)).send():this.provider.transfer(this.toTransferParams(e))}toTransferParams({fee:e,gasLimit:r,storageLimit:i,source:n,amount:s=0,mutez:a=!1}={}){return{to:this.address,amount:s,fee:e,mutez:a,source:n,gasLimit:r,storageLimit:i,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:Ln,value:this.isAnonymous?this.parameterSchema.EncodeObject({[this.name]:this.args}):this.parameterSchema.EncodeObject(this.args)}}}}class Lb{constructor(e,r,i,n,s,a=!0,o=!1){this.provider=e,this.address=r,this.parameterSchema=i,this.name=n,this.args=s,this.isMultipleEntrypoint=a,this.isAnonymous=o}validateArgs(e,r,i){const n=r.ExtractSignatures();if(!n.find(s=>s.length===e.length))throw new Mh(i,n,e)}get schema(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}getSignature(){if(this.isAnonymous){const e=this.parameterSchema.ExtractSignatures().find(r=>r[0]===this.name);if(e)return e.shift(),e}else{const e=this.parameterSchema.ExtractSignatures();return e.length==1?e[0]:e}}send(e={}){return this.provider instanceof xa?this.provider.transfer(this.toTransferParams(e)).send():this.provider.transfer(this.toTransferParams(e))}toTransferParams({fee:e,gasLimit:r,storageLimit:i,source:n,amount:s=0,mutez:a=!1}={}){return{to:this.address,amount:s,fee:e,mutez:a,source:n,gasLimit:r,storageLimit:i,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:Ln,value:this.isAnonymous?this.parameterSchema.Encode(this.name,...this.args):this.parameterSchema.Encode(...this.args)}}}}class L8{constructor(e,r,i,n,s,a="Unit"){this._rpc=e,this._readProvider=r,this._contractAddress=i,this._smartContractViewSchema=n,this._contractStorageType=s,this._args=a}getSignature(){return{parameter:this._smartContractViewSchema.extractArgsSchema(),result:this._smartContractViewSchema.extractResultSchema()}}executeView(e){return D(this,void 0,void 0,function*(){this.verifyContextExecution(e);const r=yield this._readProvider.getChainId(),i=this.transformArgsToMichelson(),n={contract:this._contractAddress,view:this._smartContractViewSchema.viewName,input:i,chain_id:r,source:e.viewCaller};return e.source&&(n.payer=e.source),this.executeViewAndDecodeResult(n)})}verifyContextExecution(e){if(e.source&&Ge(e.source)!==ee.VALID)throw new vu(`The source account who initialized the view execution is invalid: ${e.source}.`);if(!e.viewCaller||Ge(e.viewCaller)!==ee.VALID)throw new vu(`The contract which is the caller of view is invalid: ${e.viewCaller}.`)}transformArgsToMichelson(){try{return this._smartContractViewSchema.encodeViewArgs(this._args)}catch(e){throw new n0(this._smartContractViewSchema.viewName,this.getSignature(),this._args,e)}}adaptViewCodeToContext(e,r,i){const n={BALANCE:[{prim:"PUSH",args:[{prim:"mutez"},{int:i}]}],SENDER:[{prim:"PUSH",args:[{prim:"address"},{string:r}]}],SELF_ADDRESS:[{prim:"PUSH",args:[{prim:"address"},{string:this._contractAddress}]}],AMOUNT:[{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]}]};return e.forEach((s,a)=>{s.prim in n&&(e[a]=Object(n)[s.prim]),s.args&&s.args.length!==0?this.adaptViewCodeToContext(s.args,r,i):Array.isArray(s)&&this.adaptViewCodeToContext(s,r,i)}),e}executeViewAndDecodeResult(e){return D(this,void 0,void 0,function*(){let r;try{r=(yield this._rpc.runScriptView(e)).data}catch(i){const n=db(i);throw n?new hb(`The simulation of the on-chain view named ${this._smartContractViewSchema.viewName} failed with: ${JSON.stringify(n)}`,this._smartContractViewSchema.viewName,n,i):i}return this._smartContractViewSchema.decodeViewResult(r)})}}class N8{constructor(e,r){this.provider=e,this.contractAddress=r}createContractMethodFlatParams(e,r,i,n=!0,s=!1){return new Lb(this.provider,this.contractAddress,e,r,i,n,s)}createContractMethodObjectParam(e,r,i,n=!0,s=!1){return new Mb(this.provider,this.contractAddress,e,r,i,n,s)}createContractViewObjectParam(e,r,i,n,s){return new L8(e,r,this.contractAddress,i,n,s)}}const Ln="default";class Nb{constructor(e,r,i,n,s,a,o){this.currentContract=e,this.name=r,this.callbackParametersSchema=i,this.parameterSchema=n,this.args=s,this.rpc=a,this.readProvider=o}read(e){return D(this,void 0,void 0,function*(){const r=Wp(e??"");if(ss(e??"")==ee.VALID)throw new o0("Since version 12, the lambda view no longer depends on a lambda contract. The read method no longer accepts a contract address as a parameter.");if(e&&r!==ee.VALID)throw new Wg(e,ae(r));const i=this.parameterSchema.Encode(...this.args),n=yield this.rpc.runView({contract:this.currentContract.address,entrypoint:this.name,input:i,chain_id:e||(yield this.readProvider.getChainId())});return this.callbackParametersSchema.Execute(n.data)})}}const C8=(t,e,r)=>{const i=e.ExtractSignatures();if(!i.find(n=>n.length===t.length))throw new Mh(r,i,t)},B8=t=>{let e=!1;if("prim"in t&&t.prim==="pair"&&t.args){const r=t.args[t.args.length-1];"prim"in r&&r.prim==="contract"&&(e=!0)}return e};class Dh{constructor(e,r,i,n,s,a,o){this.address=e,this.script=r,this.storageProvider=n,this.entrypoints=s,this.rpc=a,this.readProvider=o,this.methods={},this.methodsObject={},this.views={},this.contractViews={},this.contractMethodFactory=new N8(i,e),this.schema=yr.fromRPCResponse({script:this.script}),this.parameterSchema=ts.fromRPCResponse({script:this.script}),this.viewSchema=th.fromRPCResponse({script:this.script}),this.viewSchema.length!==0&&this._initializeOnChainViews(this,a,this.readProvider,this.viewSchema),this.eventSchema=tn.fromRPCResponse({script:this.script}),this._initializeMethods(this,this.entrypoints.entrypoints,this.rpc,this.readProvider)}_initializeMethods(e,r,i,n){const s=this.parameterSchema,a=Object.keys(r);if(s.isMultipleEntryPoint)a.forEach(f=>{const d=new ts(r[f]);if(this.methods[f]=function(...g){return e.contractMethodFactory.createContractMethodFlatParams(d,f,g)},this.methodsObject[f]=function(g){return e.contractMethodFactory.createContractMethodObjectParam(d,f,g)},B8(r[f])){const g=function(...y){const S=r[f].args[0],O=new ts(S),P=r[f].args[1].args[0],M=new ts(P);return C8(y,O,f),new Nb(e,f,M,O,y,i,n)};this.views[f]=g}}),Object.keys(s.ExtractSchema()).filter(f=>Object.keys(r).indexOf(f)===-1).forEach(f=>{this.methods[f]=function(...d){return e.contractMethodFactory.createContractMethodFlatParams(s,f,d,!1,!0)},this.methodsObject[f]=function(d){return e.contractMethodFactory.createContractMethodObjectParam(s,f,d,!1,!0)}});else{const o=this.parameterSchema;this.methods[Ln]=function(...f){return e.contractMethodFactory.createContractMethodFlatParams(o,Ln,f,!1)},this.methodsObject[Ln]=function(f){return e.contractMethodFactory.createContractMethodObjectParam(o,Ln,f,!1)}}}_initializeOnChainViews(e,r,i,n){const s=this.schema.val;n.forEach(a=>{this.contractViews[a.viewName]=function(o){return e.contractMethodFactory.createContractViewObjectParam(r,i,a,s,o)}})}storage(){return this.storageProvider.getStorage(this.address,this.schema)}bigMap(e){return this.storageProvider.getBigMapKey(this.address,e,this.schema)}}const D8=t=>[{prim:"DROP"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PUSH",args:[{prim:"key_hash"},{string:t}]},{prim:"SOME"},{prim:"SET_DELEGATE"},{prim:"CONS"}],k8=(t,e)=>[{prim:"DROP"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PUSH",args:[{prim:"key_hash"},{string:t}]},{prim:"IMPLICIT_ACCOUNT"},{prim:"PUSH",args:[{prim:"mutez"},{int:`${e}`}]},{prim:"UNIT"},{prim:"TRANSFER_TOKENS"},{prim:"CONS"}],$8=()=>[{prim:"DROP"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"NONE",args:[{prim:"key_hash"}]},{prim:"SET_DELEGATE"},{prim:"CONS"}],U8=(t,e)=>[{prim:"DROP"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PUSH",args:[{prim:"address"},{string:t}]},{prim:"CONTRACT",args:[{prim:"unit"}]},{prim:"IF_NONE",args:[[{prim:"UNIT"},{prim:"FAILWITH"}],[]]},{prim:"PUSH",args:[{prim:"mutez"},{int:`${e}`}]},{prim:"UNIT"},{prim:"TRANSFER_TOKENS"},{prim:"CONS"}],H8={setDelegate:D8,removeDelegate:$8,transferImplicit:k8,transferToContract:U8},F8=[{prim:"parameter",args:[{prim:"lambda",args:[{prim:"unit"},{prim:"pair",args:[{prim:"list",args:[{prim:"operation"}]},{prim:"unit"}]}]}]},{prim:"storage",args:[{prim:"unit"}]},{prim:"code",args:[[{prim:"CAR"},{prim:"UNIT"},{prim:"EXEC"}]]}],K8="Unit",j8={code:F8,storage:K8};function G8(t,e){return(r,i)=>e(t(r,i),i)}class Cb{constructor(e,r){this.id=e,this.provider=r}getSaplingDiff(e){return D(this,void 0,void 0,function*(){return this.provider.getSaplingDiffByID(this.id.toString(),e)})}getId(){return this.id.toString()}}var ot;const fr=(t,e)=>{var r,i,n;return{fee:(r=t.fee)!==null&&r!==void 0?r:e.fee,gasLimit:(i=t.gasLimit)!==null&&i!==void 0?i:e.gasLimit,storageLimit:(n=t.storageLimit)!==null&&n!==void 0?n:e.storageLimit}};class Ns extends Ea{constructor(e){super(e),this.context=e,ot.set(this,void 0),$t(this,ot,{})}getBlockHash(){return D(this,void 0,void 0,function*(){return this.context.readProvider.getBlockHash("head~2")})}getProtocolHash(){return D(this,void 0,void 0,function*(){return this.context.readProvider.getNextProtocol("head")})}getHeadCounter(e){var r;return D(this,void 0,void 0,function*(){return(r=this.context.readProvider.getCounter(e,"head"))!==null&&r!==void 0?r:"0"})}adjustGasForBatchOperation(e,r,i){return re.min(r,e.div(i+1))}getAccountLimits(e,r,i){return D(this,void 0,void 0,function*(){const n=yield this.context.readProvider.getBalance(e,"head"),{hard_gas_limit_per_operation:s,hard_gas_limit_per_block:a,hard_storage_limit_per_operation:o,cost_per_byte:f}=r;return{fee:0,gasLimit:i?Math.floor(this.adjustGasForBatchOperation(a,s,i).toNumber()):s.toNumber(),storageLimit:Math.floor(re.min(n.dividedBy(f),o).toNumber())}})}getFee(e,r,i){return(!Da(this,ot)[r]||Da(this,ot)[r]<i)&&(Da(this,ot)[r]=i),{counter:`${++Da(this,ot)[r]}`,fee:typeof e.fee>"u"?"0":`${e.fee}`,gas_limit:typeof e.gas_limit>"u"?"0":`${e.gas_limit}`,storage_limit:typeof e.storage_limit>"u"?"0":`${e.storage_limit}`}}getSource(e,r,i){return{source:typeof e.source>"u"?i||r:e.source}}addRevealOperationIfNeeded(e,r){return D(this,void 0,void 0,function*(){if(Eb(e)){const i=[e],{publicKey:n,pkh:s}=yield this.getKeys();if(yield this.isAccountRevealRequired(r)){if(!n)throw new tf(s);return i.unshift(yield Xa({fee:vi.REVEAL,storageLimit:yi.REVEAL,gasLimit:wo(s)},r,n)),i}}return e})}getKeys(){return D(this,void 0,void 0,function*(){const e=this.context.isAnySignerConfigured();return{pkh:e?yield this.signer.publicKeyHash():yield this.context.walletProvider.getPKH(),publicKey:e?yield this.signer.publicKey():void 0}})}convertIntoArray(e){return Array.isArray(e)?[...e]:[e]}constructOpContents(e,r,i,n,s){return e.map(a=>{switch(a.kind){case j.ACTIVATION:case j.DRAIN_DELEGATE:return Object.assign({},a);case j.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},a),{balance:typeof a.balance<"u"?`${a.balance}`:"0"}),this.getSource(a,i,n)),this.getFee(a,i,r));case j.TRANSACTION:{const o=Object.assign(Object.assign(Object.assign(Object.assign({},a),{amount:typeof a.amount<"u"?`${a.amount}`:"0"}),this.getSource(a,i,n)),this.getFee(a,i,r));if(o.source.toLowerCase().startsWith("kt1"))throw new o0(`KT1 addresses are not supported as source since ${mt.PsBabyM1}`);return o}case j.REVEAL:case j.DELEGATION:case j.REGISTER_GLOBAL_CONSTANT:case j.UPDATE_CONSENSUS_KEY:case j.SMART_ROLLUP_ADD_MESSAGES:case j.SMART_ROLLUP_ORIGINATE:return Object.assign(Object.assign(Object.assign({},a),this.getSource(a,i,n)),this.getFee(a,i,r));case j.TRANSFER_TICKET:return Object.assign(Object.assign(Object.assign(Object.assign({},a),{ticket_amount:`${a.ticket_amount}`}),this.getSource(a,i,n)),this.getFee(a,i,r));case j.INCREASE_PAID_STORAGE:return Object.assign(Object.assign(Object.assign(Object.assign({},a),{amount:`${a.amount}`}),this.getSource(a,i,n)),this.getFee(a,i,r));case j.BALLOT:if(s===void 0)throw new Ua("Failed to get the current voting period index");return Object.assign(Object.assign({},a),{period:s?.voting_period.index});case j.PROPOSALS:if(s===void 0)throw new Ua("Failed to get the current voting period index");return Object.assign(Object.assign({},a),{period:s?.voting_period.index});default:throw new bn(a.kind)}})}activate({pkh:e,secret:r}){return D(this,void 0,void 0,function*(){const i=yield gb({pkh:e,secret:r}),n=this.convertIntoArray(i),s=yield this.getBlockHash(),a=yield this.getProtocolHash();$t(this,ot,{});const o=parseInt(yield this.getHeadCounter(e),10),f=this.constructOpContents(n,o,e);return{opOb:{branch:s,contents:f,protocol:a},counter:o}})}reveal({fee:e,gasLimit:r,storageLimit:i}){return D(this,void 0,void 0,function*(){const{pkh:n,publicKey:s}=yield this.getKeys();if(!s)throw new tf(n);const a=yield this.context.readProvider.getProtocolConstants("head"),o=yield this.getAccountLimits(n,a),f=fr({fee:e,storageLimit:i,gasLimit:r},o),d=yield Xa({fee:f.fee,gasLimit:f.gasLimit,storageLimit:f.storageLimit},n,s),g=this.convertIntoArray(d),y=yield this.getBlockHash(),S=yield this.getProtocolHash();$t(this,ot,{});const O=parseInt(yield this.getHeadCounter(n),10),P=this.constructOpContents(g,O,n);return{opOb:{branch:y,contents:P,protocol:S},counter:O}})}originate(e,r){var{fee:i,storageLimit:n,gasLimit:s}=e,a=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){const{pkh:o}=yield this.getKeys(),f=yield this.context.readProvider.getProtocolConstants("head"),d=yield this.getAccountLimits(o,f),g=yield hc(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},a),fr({fee:i,storageLimit:n,gasLimit:s},d)))),y=yield this.addRevealOperationIfNeeded(g,o),S=this.convertIntoArray(y),O=yield this.getBlockHash(),P=yield this.getProtocolHash();$t(this,ot,{});const M=parseInt(yield this.getHeadCounter(o),10),B=this.constructOpContents(S,M,o,r);return{opOb:{branch:O,contents:B,protocol:P},counter:M}})}transaction(e){var{fee:r,storageLimit:i,gasLimit:n}=e,s=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){const{pkh:a}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),f=yield this.getAccountLimits(a,o),d=yield dc(Object.assign(Object.assign({},s),fr({fee:r,storageLimit:i,gasLimit:n},f))),g=yield this.addRevealOperationIfNeeded(d,a),y=this.convertIntoArray(g),S=yield this.getBlockHash(),O=yield this.getProtocolHash();$t(this,ot,{});const P=parseInt(yield this.getHeadCounter(a),10),M=this.constructOpContents(y,P,a,s.source);return{opOb:{branch:S,contents:M,protocol:O},counter:P}})}delegation(e){var{fee:r,storageLimit:i,gasLimit:n}=e,s=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){const{pkh:a}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),f=yield this.getAccountLimits(a,o),d=yield lc(Object.assign(Object.assign({},s),fr({fee:r,storageLimit:i,gasLimit:n},f))),g=yield this.addRevealOperationIfNeeded(d,a),y=this.convertIntoArray(g),S=yield this.getBlockHash(),O=yield this.getProtocolHash();$t(this,ot,{});const P=parseInt(yield this.getHeadCounter(a),10),M=this.constructOpContents(y,P,a,s.source);return{opOb:{branch:S,contents:M,protocol:O},counter:P}})}registerDelegate({fee:e,storageLimit:r,gasLimit:i},n){return D(this,void 0,void 0,function*(){const{pkh:s}=yield this.getKeys(),a=yield this.context.readProvider.getProtocolConstants("head"),o=yield this.getAccountLimits(s,a),f=fr({fee:e,storageLimit:r,gasLimit:i},o),d=yield mb({fee:f.fee,storageLimit:f.storageLimit,gasLimit:f.gasLimit},s),g=yield this.addRevealOperationIfNeeded(d,s),y=this.convertIntoArray(g),S=yield this.getBlockHash(),O=yield this.getProtocolHash();$t(this,ot,{});const P=parseInt(yield this.getHeadCounter(s),10),M=this.constructOpContents(y,P,s,n);return{opOb:{branch:S,contents:M,protocol:O},counter:P}})}registerGlobalConstant(e){var{fee:r,storageLimit:i,gasLimit:n}=e,s=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){const{pkh:a}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),f=yield this.getAccountLimits(a,o),d=yield pc(Object.assign(Object.assign({},s),fr({fee:r,storageLimit:i,gasLimit:n},f))),g=yield this.addRevealOperationIfNeeded(d,a),y=this.convertIntoArray(g),S=yield this.getBlockHash(),O=yield this.getProtocolHash();$t(this,ot,{});const P=parseInt(yield this.getHeadCounter(a),10),M=this.constructOpContents(y,P,a,s.source);return{opOb:{branch:S,contents:M,protocol:O},counter:P}})}updateConsensusKey(e,r){var{fee:i,storageLimit:n,gasLimit:s}=e,a=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){const{pkh:o}=yield this.getKeys(),f=yield this.context.readProvider.getProtocolConstants("head"),d=yield this.getAccountLimits(o,f),g=yield wb(Object.assign(Object.assign({},a),fr({fee:i,storageLimit:n,gasLimit:s},d))),y=yield this.addRevealOperationIfNeeded(g,o),S=this.convertIntoArray(y),O=yield this.getBlockHash(),P=yield this.getProtocolHash();$t(this,ot,{});const M=parseInt(yield this.getHeadCounter(o),10),B=this.constructOpContents(S,M,o,r);return{opOb:{branch:O,contents:B,protocol:P},counter:M}})}increasePaidStorage(e){var{fee:r,storageLimit:i,gasLimit:n}=e,s=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){const{pkh:a}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),f=yield this.getAccountLimits(a,o),d=yield gc(Object.assign(Object.assign({},s),fr({fee:r,storageLimit:i,gasLimit:n},f))),g=yield this.addRevealOperationIfNeeded(d,a),y=this.convertIntoArray(g),S=yield this.getBlockHash(),O=yield this.getProtocolHash();$t(this,ot,{});const P=parseInt(yield this.getHeadCounter(a),10),M=this.constructOpContents(y,P,a,s.source);return{opOb:{branch:S,contents:M,protocol:O},counter:P}})}ballot(e){return D(this,void 0,void 0,function*(){const{pkh:r}=yield this.getKeys(),i=yield yb(Object.assign({},e)),n=this.convertIntoArray(i),s=yield this.getBlockHash(),a=yield this.getProtocolHash();$t(this,ot,{});const o=parseInt(yield this.getHeadCounter(r),10);let f;try{f=yield this.rpc.getCurrentPeriod()}catch{throw new Ua("Failed to get the current voting period index")}const d=this.constructOpContents(n,o,r,void 0,f);return{opOb:{branch:s,contents:d,protocol:a},counter:o}})}proposals(e){return D(this,void 0,void 0,function*(){const{pkh:r}=yield this.getKeys(),i=yield _b(Object.assign({},e)),n=this.convertIntoArray(i),s=yield this.getBlockHash(),a=yield this.getProtocolHash();$t(this,ot,{});const o=parseInt(yield this.getHeadCounter(r),10);let f;try{f=yield this.rpc.getCurrentPeriod()}catch{throw new Ua("Failed to get the current voting period index")}const d=this.constructOpContents(n,o,r,void 0,f);return{opOb:{branch:s,contents:d,protocol:a},counter:o}})}drainDelegate(e,r){return D(this,void 0,void 0,function*(){const{pkh:i}=yield this.getKeys(),n=yield vb(Object.assign({},e)),s=this.convertIntoArray(n),a=yield this.getBlockHash(),o=yield this.getProtocolHash();$t(this,ot,{});const f=parseInt(yield this.getHeadCounter(i),10),d=this.constructOpContents(s,f,i,r);return{opOb:{branch:a,contents:d,protocol:o},counter:f}})}transferTicket(e){var{fee:r,storageLimit:i,gasLimit:n}=e,s=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){const{pkh:a}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),f=yield this.getAccountLimits(a,o),d=yield bc(Object.assign(Object.assign({},s),fr({fee:r,storageLimit:i,gasLimit:n},f))),g=yield this.addRevealOperationIfNeeded(d,a),y=this.convertIntoArray(g),S=yield this.getBlockHash(),O=yield this.getProtocolHash();$t(this,ot,{});const P=parseInt(yield this.getHeadCounter(a),10),M=this.constructOpContents(y,P,a,s.source);return{opOb:{branch:S,contents:M,protocol:O},counter:P}})}smartRollupAddMessages(e){var{fee:r,storageLimit:i,gasLimit:n}=e,s=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){const{pkh:a}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),f=yield this.getAccountLimits(a,o),d=yield mc(Object.assign(Object.assign({},s),fr({fee:r,storageLimit:i,gasLimit:n},f))),g=yield this.addRevealOperationIfNeeded(d,a),y=this.convertIntoArray(g),S=yield this.getBlockHash(),O=yield this.getProtocolHash();$t(this,ot,{});const P=parseInt(yield this.getHeadCounter(a),10),M=this.constructOpContents(y,P,a,s.source);return{opOb:{branch:S,contents:M,protocol:O},counter:P}})}smartRollupOriginate(e){var{fee:r,storageLimit:i,gasLimit:n}=e,s=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){const{pkh:a}=yield this.getKeys(),o=yield this.rpc.getOriginationProof({kind:s.pvmKind,kernel:s.kernel}),f=yield this.context.readProvider.getProtocolConstants("head"),d=yield this.getAccountLimits(a,f),g=yield vc(Object.assign(Object.assign(Object.assign({},fr({fee:r,storageLimit:i,gasLimit:n},d)),s),{originationProof:o})),y=yield this.addRevealOperationIfNeeded(g,a),S=this.convertIntoArray(y),O=yield this.getBlockHash(),P=yield this.getProtocolHash();$t(this,ot,{});const M=parseInt(yield this.getHeadCounter(a),10),B=this.constructOpContents(S,M,a,s.source);return{opOb:{branch:O,contents:B,protocol:P},counter:M}})}batch(e,r){return D(this,void 0,void 0,function*(){const{pkh:i,publicKey:n}=yield this.getKeys(),s=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.getAccountLimits(i,s,e.length),o=yield this.isRevealOpNeeded(e,i),f=[];if(r)for(const O of e)if(yu(O)){const P=r.shift(),M=fr(O,{fee:P.suggestedFeeMutez,storageLimit:P.storageLimit,gasLimit:P.gasLimit});f.push(yield this.getRPCOp(Object.assign(Object.assign({},O),M)))}else f.push(Object.assign({},O));else for(const O of e)if(yu(O)){const P=fr(O,a);f.push(yield this.getRPCOp(Object.assign(Object.assign({},O),P)))}else f.push(Object.assign({},O));if(o){if(!n)throw new tf(i);f.unshift(yield Xa({fee:vi.REVEAL,storageLimit:yi.REVEAL,gasLimit:wo(i)},i,n))}const d=yield this.getBlockHash(),g=yield this.getProtocolHash();$t(this,ot,{});const y=parseInt(yield this.getHeadCounter(i),10),S=this.constructOpContents(f,y,i);return{opOb:{branch:d,contents:S,protocol:g},counter:y}})}contractCall(e){var r,i,n;return D(this,void 0,void 0,function*(){const s=yield this.getBlockHash(),a=yield this.getProtocolHash(),{pkh:o}=yield this.getKeys();$t(this,ot,{});const f=parseInt(yield this.getHeadCounter(o),10),d=e.toTransferParams(),g=yield this.context.readProvider.getProtocolConstants("head"),y=yield this.getAccountLimits(o,g),S=fr({fee:d.fee,storageLimit:d.storageLimit,gasLimit:d.gasLimit},y),O={kind:j.TRANSACTION,fee:(r=d.fee)!==null&&r!==void 0?r:S.fee,gas_limit:(i=d.gasLimit)!==null&&i!==void 0?i:S.gasLimit,storage_limit:(n=d.storageLimit)!==null&&n!==void 0?n:S.storageLimit,amount:String(d.amount),destination:d.to,parameters:d.parameter},P=yield this.addRevealOperationIfNeeded(O,o),M=this.convertIntoArray(P),B=this.constructOpContents(M,f,o);return{opOb:{branch:s,contents:B,protocol:a},counter:f}})}toPreapply(e){return D(this,void 0,void 0,function*(){const{opOb:{contents:r,branch:i,protocol:n}}=e,s=this.toForge(e),a=yield this.context.forger.forge(s),o=yield this.context.signer.sign(a,new Uint8Array([3]));return[{contents:r,branch:i,protocol:n,signature:o.prefixSig}]})}toForge({opOb:{contents:e,branch:r}}){return{branch:r,contents:e}}}ot=new WeakMap;const Bb=[j.ACTIVATION,j.ORIGINATION,j.TRANSACTION,j.DELEGATION];class kh extends Ea{constructor(e,r){super(e),this.estimator=r,this.operations=[],this.prepare=new Ns(this.context)}withTransfer(e){const r=Ge(e.to);if(e.amount<0)throw new Qs(e.amount.toString());if(r!==ee.VALID)throw new Je(e.to,ae(r));return this.operations.push(Object.assign({kind:j.TRANSACTION},e)),this}withTransferTicket(e){const r=Ge(e.destination);if(r!==ee.VALID)throw new Je(e.destination,ae(r));return this.operations.push(Object.assign({kind:j.TRANSFER_TICKET},e)),this}withContractCall(e,r={}){return this.withTransfer(e.toTransferParams(r))}withDelegation(e){var r;const i=Ge(e.source);if(e.source&&i!==ee.VALID)throw new Je(e.source,ae(i));const n=Ge((r=e.delegate)!==null&&r!==void 0?r:"");if(e.delegate&&n!==ee.VALID)throw new Je(e.delegate,ae(n));return this.operations.push(Object.assign({kind:j.DELEGATION},e)),this}withActivation({pkh:e,secret:r}){const i=qu(e);if(i!==ee.VALID)throw new Ou(e,ae(i));return this.operations.push({kind:j.ACTIVATION,pkh:e,secret:r}),this}withOrigination(e){return this.operations.push(Object.assign({kind:j.ORIGINATION},e)),this}withRegisterGlobalConstant(e){return this.operations.push(Object.assign({kind:j.REGISTER_GLOBAL_CONSTANT},e)),this}withIncreasePaidStorage(e){return this.operations.push(Object.assign({kind:j.INCREASE_PAID_STORAGE},e)),this}withSmartRollupAddMessages(e){return this.operations.push(Object.assign({kind:j.SMART_ROLLUP_ADD_MESSAGES},e)),this}withSmartRollupOriginate(e){return this.operations.push(Object.assign({kind:j.SMART_ROLLUP_ORIGINATE},e)),this}getRPCOp(e){return D(this,void 0,void 0,function*(){switch(e.kind){case j.TRANSACTION:return dc(Object.assign({},e));case j.ORIGINATION:return hc(yield this.context.parser.prepareCodeOrigination(Object.assign({},e)));case j.DELEGATION:return lc(Object.assign({},e));case j.REGISTER_GLOBAL_CONSTANT:return pc(Object.assign({},e));case j.INCREASE_PAID_STORAGE:return gc(Object.assign({},e));case j.TRANSFER_TICKET:return bc(Object.assign({},e));case j.SMART_ROLLUP_ADD_MESSAGES:return mc(Object.assign({},e));case j.SMART_ROLLUP_ORIGINATE:return vc(Object.assign({},e));default:throw new bn(JSON.stringify(e.kind))}})}with(e){for(const r of e)switch(r.kind){case j.TRANSACTION:this.withTransfer(r);break;case j.ORIGINATION:this.withOrigination(r);break;case j.DELEGATION:this.withDelegation(r);break;case j.ACTIVATION:this.withActivation(r);break;case j.REGISTER_GLOBAL_CONSTANT:this.withRegisterGlobalConstant(r);break;case j.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(r);break;case j.TRANSFER_TICKET:this.withTransferTicket(r);break;case j.SMART_ROLLUP_ADD_MESSAGES:this.withSmartRollupAddMessages(r);break;case j.SMART_ROLLUP_ORIGINATE:this.withSmartRollupOriginate(r);break;default:throw new bn(JSON.stringify(r.kind))}return this}send(e){return D(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),i=e&&e.source||r,n=yield this.estimator.batch(this.operations);n.length!==this.operations.length&&n.shift();const s=yield this.prepare.batch(this.operations,n),a=yield this.forge(s),{hash:o,context:f,forgedBytes:d,opResponse:g}=yield this.signAndInject(a);return new Rb(o,s.opOb.contents,i,d,g,f)})}}class V8{constructor(e,r){this.context=e,this.estimator=r}batch(e){const r=new kh(this.context,this.estimator);return Array.isArray(e)&&r.with(e),r}}class z8 extends Wn{constructor(e,r,i){super(e,r,i),this.opHash=e,this.context=r,this.getOriginatedContractAddresses=()=>D(this,void 0,void 0,function*(){const n=yield this.operationResults();if(n){const s=n.filter(o=>o.kind==="origination");let a=[];for(const o of s)o.metadata.operation_result.originated_contracts&&(a=[...a,...o.metadata.operation_result.originated_contracts]);return a}else throw new Er("Unable to fetch operation results")})}revealOperation(){return D(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return e.find(r=>r.kind===j.REVEAL);throw new Er("Unable to fetch operation results")})}status(){return D(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.operationResults();if(e)return e.filter(r=>Bb.indexOf(r.kind)!==-1).map(r=>Ls(r)?r.metadata.operation_result.status:"unknown")[0]||"unknown";throw new Er("Unable to fetch operation results")})}}class q8 extends Wn{constructor(e,r,i){super(e,r,i),this.opHash=e,this.context=r}revealOperation(){return D(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return e.find(r=>r.kind===j.REVEAL);throw new Er("Unable to fetch operation result")})}increasePaidStorageOperation(){return D(this,void 0,void 0,function*(){const e=yield this.operationResults();if(e)return e.find(r=>r.kind===j.INCREASE_PAID_STORAGE);throw new Er("Unable to fetch operation result")})}status(){return D(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.increasePaidStorageOperation();return e?e.metadata.operation_result.status:"unknown"})}}function W8(t){return function(r){return new sc(null).pipe(E1({each:t,with:()=>y1(()=>new Sb("Confirmation polling timed out"))}),na(()=>r))}}const J8=(t,e,r)=>t.pipe(W8(e.config.confirmationPollingTimeoutSecond*1e3),po({connector:()=>new Tn(1),resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!1}));class Z8{constructor(e){this.context=e,this.sharedHeadObs=x1(()=>cb(this.context.stream.subscribeBlock("head")))}createNewHeadObservable(){return D(this,void 0,void 0,function*(){return J8(this.sharedHeadObs,this.context)})}createPastBlockWalker(e,r=1){return Sn(this.context.readProvider.getBlock(e)).pipe(Hi(i=>r===1?oc(i):Qu(i.header.level,r-1).pipe(uw(i),wa(n=>D(this,void 0,void 0,function*(){return this.context.readProvider.getBlock(typeof n=="number"?n:n.header.level)})))))}createHeadObservableFromConfig({blockIdentifier:e}){return D(this,void 0,void 0,function*(){const r=[];return e&&r.push(this.createPastBlockWalker(e)),r.push(yield this.createNewHeadObservable()),ho(...r)})}createOperation(e,r={}){return D(this,void 0,void 0,function*(){return new Wn(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createBatchOperation(e,r={}){return D(this,void 0,void 0,function*(){return new z8(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createTransactionOperation(e,r={}){return D(this,void 0,void 0,function*(){return new Pb(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createDelegationOperation(e,r={}){return D(this,void 0,void 0,function*(){return new Tb(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createOriginationOperation(e,r={}){return D(this,void 0,void 0,function*(){return new Ib(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createIncreasePaidStorageOperation(e,r={}){return D(this,void 0,void 0,function*(){return new q8(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}}class X8 extends Ea{constructor(e){super(e),this.prepare=new Ns(this.context)}getBalance(e){return D(this,void 0,void 0,function*(){const r=Ge(e);if(r!==ee.VALID)throw new Je(e,ae(r));return this.context.readProvider.getBalance(e,"head")})}getDelegate(e){return D(this,void 0,void 0,function*(){const r=Ge(e);if(r!==ee.VALID)throw new Je(e,ae(r));return this.context.readProvider.getDelegate(e,"head")})}activate(e,r){return D(this,void 0,void 0,function*(){const i=qu(e);if(i!==ee.VALID)throw new Ou(e,ae(i));const n=yield this.prepare.activate({pkh:e,secret:r}),s=yield this.forge(n),a=`${s.opbytes}00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`;return new ir(yield this.rpc.injectOperation(a),Object.assign(Object.assign({},s),{opbytes:a}),[],this.context.clone())})}}const Ha=100,Y8=1,Q8=.1,Dl=100;class jt{constructor(e,r,i,n,s=Ha){this._milligasLimit=e,this._storageLimit=r,this.opSize=i,this.minimalFeePerStorageByteMutez=n,this.baseFeeMutez=s}get burnFeeMutez(){return this.roundUp(Number(this.storageLimit)*Number(this.minimalFeePerStorageByteMutez))}get storageLimit(){const e=Math.max(Number(this._storageLimit),0);return e>0?e:0}get gasLimit(){return this.roundUp(Number(this._milligasLimit)/1e3+Dl)}get operationFeeMutez(){return(Number(this._milligasLimit)/1e3+Dl)*Q8+Number(this.opSize)*Y8}roundUp(e){return Math.ceil(Number(e))}get minimalFeeMutez(){return this.roundUp(Ha+this.operationFeeMutez)}get suggestedFeeMutez(){return this.roundUp(this.operationFeeMutez+Ha*2)}get usingBaseFeeMutez(){return Math.max(Number(this.baseFeeMutez),Ha)+this.roundUp(this.operationFeeMutez)}get totalCost(){return this.minimalFeeMutez+this.burnFeeMutez}get consumedMilligas(){return Number(this._milligasLimit)}static createEstimateInstanceFromProperties(e){let r=0,i=0,n=0,s=0,a;return e.forEach(o=>{r+=o.milligasLimit,i+=o.storageLimit,n+=o.opSize,s=Math.max(o.minimalFeePerStorageByteMutez,s),o.baseFeeMutez&&(a=a?a+o.baseFeeMutez:o.baseFeeMutez)}),new jt(r,i,n,s,a)}static createArrayEstimateInstancesFromProperties(e){return e.map(r=>new jt(r.milligasLimit,r.storageLimit,r.opSize,r.minimalFeePerStorageByteMutez,r.baseFeeMutez))}}class Db extends et{constructor(){super(),this.name="RevealEstimateError",this.message="Public key is unknown, unable to estimate the reveal operation in Wallet API."}}const ex="edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg";class kb extends Ea{constructor(){super(...arguments),this.ALLOCATION_STORAGE=257,this.ORIGINATION_STORAGE=257,this.OP_SIZE_REVEAL=128,this.prepare=new Ns(this.context)}getKeys(){return D(this,void 0,void 0,function*(){const e=this.context.isAnySignerConfigured();return{publicKeyHash:e?yield this.signer.publicKeyHash():yield this.context.walletProvider.getPKH(),publicKey:e?yield this.signer.publicKey():void 0}})}getEstimationPropertiesFromOperationContent(e,r,i){const n=di({contents:[e]});let s=0,a=0;return n.forEach(o=>{a+="originated_contracts"in o&&typeof o.originated_contracts<"u"?o.originated_contracts.length*this.ORIGINATION_STORAGE:0,a+="allocated_destination_contract"in o?this.ALLOCATION_STORAGE:0,s+=Number(o.consumed_milligas)||0,a+="paid_storage_size_diff"in o&&Number(o.paid_storage_size_diff)||0,a+="storage_size"in o&&"global_address"in o&&Number(o.storage_size)||0,a+="genesis_commitment_hash"in o?Number(o.size):0}),yu(e)?{milligasLimit:s||0,storageLimit:Number(a||0),opSize:r,minimalFeePerStorageByteMutez:i.toNumber()}:{milligasLimit:0,storageLimit:0,opSize:r,minimalFeePerStorageByteMutez:i.toNumber(),baseFeeMutez:0}}calculateEstimates(e,r){return D(this,void 0,void 0,function*(){const{opbytes:i,opOb:{branch:n,contents:s}}=yield this.forge(e),a={operation:{branch:n,contents:s,signature:ex},chain_id:yield this.context.readProvider.getChainId()},{opResponse:o}=yield this.simulate(a),{cost_per_byte:f}=r,d=[..._s(o,"backtracked"),..._s(o)];if(d.length)throw new Ch(d,"Error occurred during estimation");let g=1;return Array.isArray(e.opOb.contents)&&e.opOb.contents.length>1&&(g=o.contents[0].kind==="reveal"?e.opOb.contents.length-1:e.opOb.contents.length),o.contents.map(y=>this.getEstimationPropertiesFromOperationContent(y,y.kind==="reveal"?this.OP_SIZE_REVEAL/2:i.length/2/g,f))})}originate(e){return D(this,void 0,void 0,function*(){const r=yield this.prepare.originate(e),i=yield this.context.readProvider.getProtocolConstants("head"),n=yield this.calculateEstimates(r,i);return r.opOb.contents[0].kind==="reveal"&&n.shift(),jt.createEstimateInstanceFromProperties(n)})}transfer(e){var r,{fee:i,storageLimit:n,gasLimit:s}=e,a=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){const o=Ge(a.to);if(o!==ee.VALID)throw new Je(a.to,ae(o));const f=Ge((r=a.source)!==null&&r!==void 0?r:"");if(a.source&&f!==ee.VALID)throw new Je(a.source,ae(f));if(a.amount<0)throw new Qs(a.amount.toString());const d=yield this.prepare.transaction(Object.assign({fee:i,storageLimit:n,gasLimit:s},a)),g=yield this.context.readProvider.getProtocolConstants("head"),y=yield this.calculateEstimates(d,g);return d.opOb.contents[0].kind==="reveal"&&y.shift(),jt.createEstimateInstanceFromProperties(y)})}transferTicket(e){var r,{fee:i,storageLimit:n,gasLimit:s}=e,a=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){const o=Ge(a.destination);if(o!==ee.VALID)throw new Je(a.destination,ae(o));const f=Ge((r=a.source)!==null&&r!==void 0?r:"");if(a.source&&f!==ee.VALID)throw new Je(a.source,ae(f));const d=yield this.context.readProvider.getProtocolConstants("head"),g=yield this.prepare.transferTicket(Object.assign({fee:i,storageLimit:n,gasLimit:s},a)),y=yield this.calculateEstimates(g,d);return g.opOb.contents[0].kind==="reveal"&&y.shift(),jt.createEstimateInstanceFromProperties(y)})}setDelegate(e){var r,{fee:i,gasLimit:n,storageLimit:s}=e,a=Yt(e,["fee","gasLimit","storageLimit"]);return D(this,void 0,void 0,function*(){const o=Ge(a.source);if(a.source&&o!==ee.VALID)throw new Je(a.source,ae(o));const f=Ge((r=a.delegate)!==null&&r!==void 0?r:"");if(a.delegate&&f!==ee.VALID)throw new Je(a.delegate,ae(f));const d=yield this.prepare.delegation(Object.assign({fee:i,storageLimit:s,gasLimit:n},a)),g=yield this.context.readProvider.getProtocolConstants("head"),y=yield this.calculateEstimates(d,g);return d.opOb.contents[0].kind==="reveal"&&y.shift(),jt.createEstimateInstanceFromProperties(y)})}batch(e){return D(this,void 0,void 0,function*(){const r=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.prepare.batch(e),n=yield this.calculateEstimates(i,r);return jt.createArrayEstimateInstancesFromProperties(n)})}registerDelegate(e,r){var{fee:i,storageLimit:n,gasLimit:s}=e,a=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){const o=(yield this.getKeys()).publicKeyHash,f=yield this.context.readProvider.getProtocolConstants("head"),d=r||o,g=yield this.prepare.registerDelegate(Object.assign({fee:i,storageLimit:n,gasLimit:s},a),d),y=yield this.calculateEstimates(g,f);return g.opOb.contents[0].kind==="reveal"&&y.shift(),jt.createEstimateInstanceFromProperties(y)})}reveal(e){return D(this,void 0,void 0,function*(){const{publicKeyHash:r,publicKey:i}=yield this.getKeys();if(!i)throw new Db;if(yield this.isAccountRevealRequired(r)){const n=yield this.context.readProvider.getProtocolConstants("head"),s=e?yield this.prepare.reveal(e):yield this.prepare.reveal({}),a=yield this.calculateEstimates(s,n);return jt.createEstimateInstanceFromProperties(a)}})}registerGlobalConstant(e){var{fee:r,storageLimit:i,gasLimit:n}=e,s=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){const a=yield this.prepare.registerGlobalConstant(Object.assign({fee:r,storageLimit:i,gasLimit:n},s)),o=yield this.context.readProvider.getProtocolConstants("head"),f=yield this.calculateEstimates(a,o);return a.opOb.contents[0].kind==="reveal"&&f.shift(),jt.createEstimateInstanceFromProperties(f)})}increasePaidStorage(e){var{fee:r,storageLimit:i,gasLimit:n}=e,s=Yt(e,["fee","storageLimit","gasLimit"]);return D(this,void 0,void 0,function*(){if(s.amount<0)throw new Qs(s.amount.toString());const a=yield this.context.readProvider.getProtocolConstants("head"),o=yield this.prepare.increasePaidStorage(Object.assign({fee:r,storageLimit:i,gasLimit:n},s)),f=yield this.calculateEstimates(o,a);return o.opOb.contents[0].kind==="reveal"&&f.shift(),jt.createEstimateInstanceFromProperties(f)})}updateConsensusKey(e){return D(this,void 0,void 0,function*(){const r=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.prepare.updateConsensusKey(e),n=yield this.calculateEstimates(i,r);return i.opOb.contents[0].kind==="reveal"&&n.shift(),jt.createEstimateInstanceFromProperties(n)})}smartRollupAddMessages(e){return D(this,void 0,void 0,function*(){const r=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.prepare.smartRollupAddMessages(e),n=yield this.calculateEstimates(i,r);return i.opOb.contents[0].kind==="reveal"&&n.shift(),jt.createEstimateInstanceFromProperties(n)})}smartRollupOriginate(e){return D(this,void 0,void 0,function*(){const r=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.prepare.smartRollupOriginate(e),n=yield this.calculateEstimates(i,r);return i.opOb.contents[0].kind==="reveal"&&n.shift(),jt.createEstimateInstanceFromProperties(n)})}contractCall(e){return D(this,void 0,void 0,function*(){const r=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.prepare.contractCall(e),n=yield this.calculateEstimates(i,r);return i.opOb.contents[0].kind==="reveal"&&n.shift(),jt.createEstimateInstanceFromProperties(n)})}}class _u extends ir{constructor(e,r,i,n,s,a){super(e,n,s,a),this.params=r,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="delegation"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get delegate(){return this.params.delegate}get isRegisterOperation(){return this.delegate===this.source}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedGas(){return re.config({DECIMAL_PLACES:0,ROUNDING_MODE:re.ROUND_UP}),this.consumedMilliGas?new re(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class $b extends ir{constructor(e,r,i,n,s,a){super(e,i,n,s),this.params=r,this.contractProvider=a;const o=this.operationResults&&this.operationResults.originated_contracts;Array.isArray(o)&&(this.contractAddress=o[0])}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="origination"),r=e&&Ls(e)&&e.metadata.operation_result;return r||void 0}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedGas(){return re.config({DECIMAL_PLACES:0,ROUNDING_MODE:re.ROUND_UP}),this.consumedMilliGas?new re(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get storageDiff(){const e=this.operationResults&&this.operationResults.paid_storage_size_diff;return e||void 0}get storageSize(){const e=this.operationResults&&this.operationResults.storage_size;return e||void 0}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}contract(e,r){return D(this,void 0,void 0,function*(){if(!this.contractAddress)throw new P8("No contract was originated in this operation");return yield this.confirmation(e,r),this.contractProvider.at(this.contractAddress)})}}class tx extends ir{constructor(e,r,i,n,s,a){super(e,n,s,a),this.params=r,this.source=i,this.globalConstantHash=this.operationResults&&this.operationResults.global_address}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="register_global_constant"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get registeredExpression(){return this.params.value}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return re.config({DECIMAL_PLACES:0,ROUNDING_MODE:re.ROUND_UP}),this.consumedMilliGas?new re(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class rx extends ir{constructor(e,r,i,n,s,a){super(e,n,s,a),this.params=r,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(r=>r.kind==="reveal");return e?[e]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get publicKey(){return this.params.public_key}sumProp(e,r){return e.reduce((i,n)=>r in n?Number(n[r])+i:i,0)}get consumedGas(){return re.config({DECIMAL_PLACES:0,ROUNDING_MODE:re.ROUND_UP}),new re(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(di({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(di({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(di({contents:this.operationResults}),"storage_size"))}get errors(){return _s({contents:this.operationResults})}}class Ub extends ir{constructor(e,r,i,n,s,a){super(e,n,s,a),this.params=r,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(r=>r.kind==="transaction");return e?[e]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get amount(){return new re(this.params.amount)}get destination(){return this.params.destination}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}sumProp(e,r){return e.reduce((i,n)=>r in n?Number(n[r])+i:i,0)}get consumedGas(){return re.config({DECIMAL_PLACES:0,ROUNDING_MODE:re.ROUND_UP}),new re(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(di({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(di({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(di({contents:this.operationResults}),"storage_size"))}get errors(){return _s({contents:this.operationResults})}}class Hb{constructor(e,r,i){this.id=e,this.schema=r,this.provider=i}get(e,r){return D(this,void 0,void 0,function*(){try{return yield this.provider.getBigMapKeyByID(this.id.toString(),e,this.schema,r)}catch(i){if(i instanceof ws&&i.status===ea.NOT_FOUND)return;throw i}})}getMultipleValues(e,r,i=5){return D(this,void 0,void 0,function*(){return this.provider.getBigMapKeysByID(this.id.toString(),e,this.schema,r,i)})}toJSON(){return this.id.toString()}toString(){return this.id.toString()}}const kl=t=>({big_map:(e,r)=>{if(!e||!("int"in e)||e.int===void 0)return{};{const i=new yr(r);return new Hb(new re(e.int),i,t)}},sapling_state:e=>!e||!("int"in e)||e.int===void 0?{}:new Cb(new re(e.int),t)});class Fb extends ir{constructor(e,r,i,n,s,a){super(e,n,s,a),this.params=r,this.source=i}get operationResults(){const r=Array.isArray(this.results)&&this.results.find(i=>i.kind==="ballot");return r||void 0}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}get proposal(){return this.params.proposal}get ballot(){return this.params.ballot}}class Kb extends ir{constructor(e,r,i,n,s){super(e,i,n,s),this.params=r}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="drain_delegate"),r=e&&e.metadata&&e.metadata.balance_updates;return r||void 0}get consensusKey(){return this.params.consensus_key}get delegate(){return this.params.delegate}get destination(){return this.params.destination}}class ix extends ir{constructor(e,r,i,n,s,a){super(e,n,s,a),this.params=r,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind===j.TRANSFER_TICKET),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedGas(){return re.config({DECIMAL_PLACES:0,ROUNDING_MODE:re.ROUND_UP}),this.consumedMilliGas?new re(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class nx extends ir{constructor(e,r,i,n,s,a){super(e,n,s,a),this.params=r,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="increase_paid_storage"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get amount(){return this.params.amount}get destination(){return this.params.destination}}class sx extends ir{constructor(e,r,i,n,s,a){super(e,n,s,a),this.params=r,this.source=i}get operationResults(){const r=Array.isArray(this.results)&&this.results.find(i=>i.kind==="proposals");return r||void 0}get proposals(){return this.params.proposals}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}}class ax extends ir{constructor(e,r,i,n,s,a){super(e,n,s,a),this.params=r,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="update_consensus_key"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get pk(){return this.params.pk}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class ox extends ir{constructor(e,r,i,n,s,a){super(e,n,s,a),this.params=r,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind==="smart_rollup_add_messages"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get message(){return this.params.message}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class cx extends ir{constructor(e,r,i,n,s,a){super(e,n,s,a),this.params=r,this.source=i}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(i=>i.kind===j.SMART_ROLLUP_ORIGINATE),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get pvmKind(){return this.params.pvm_kind}get kernel(){return this.params.kernel}get originationProof(){return this.params.origination_proof}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class fx extends Ea{constructor(e,r){super(e),this.estimator=r,this.contractProviderTypeSymbol=Symbol.for("taquito-contract-provider-type-symbol"),this.prepare=new Ns(this.context)}getStorage(e,r){return D(this,void 0,void 0,function*(){const i=ss(e);if(i!==ee.VALID)throw new Nn(e,ae(i));const n=yield this.context.readProvider.getScript(e,"head");r||(r=n);let s;return yr.isSchema(r)?s=r:s=yr.fromRPCResponse({script:r}),s.Execute(n.storage,kl(this))})}getBigMapKey(e,r,i){return D(this,void 0,void 0,function*(){const n=ss(e);if(n!==ee.VALID)throw new Nn(e,ae(n));i||(i=(yield this.rpc.getContract(e)).script);let s;yr.isSchema(i)?s=i:s=yr.fromRPCResponse({script:i});const a=s.EncodeBigMapKey(r),o=yield this.rpc.getBigMapKey(e,a);return s.ExecuteOnBigMapValue(o)})}getBigMapKeyByID(e,r,i,n){return D(this,void 0,void 0,function*(){const{key:s,type:a}=i.EncodeBigMapKey(r),{packed:o}=yield this.context.packer.packData({data:s,type:a}),f=i5(o),d=n?yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:f},n):yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:f},"head");return i.ExecuteOnBigMapValue(d,kl(this))})}getBigMapKeysByID(e,r,i,n,s=5){return D(this,void 0,void 0,function*(){const a=yield this.getBlockForRequest(r,n),o=new hr;let f=0,d=[];for(;f<r.length;){const y=r.slice(f,f+s).map(S=>this.getBigMapValueOrUndefined(S,e,i,a));d=[...d,...yield Promise.all(y)],f+=s}for(let g=0;g<d.length;g++)o.set(r[g],d[g]);return o})}getBlockForRequest(e,r){return D(this,void 0,void 0,function*(){return e.length===1||typeof r<"u"?r:yield this.context.readProvider.getBlockLevel("head")})}getBigMapValueOrUndefined(e,r,i,n){return D(this,void 0,void 0,function*(){try{return yield this.getBigMapKeyByID(r,e,i,n)}catch(s){if(s instanceof ws&&s.status===ea.NOT_FOUND)return;throw s}})}getSaplingDiffByID(e,r){return D(this,void 0,void 0,function*(){return r?yield this.context.readProvider.getSaplingDiffById({id:e.toString()},r):yield this.context.readProvider.getSaplingDiffById({id:e.toString()},"head")})}originate(e){return D(this,void 0,void 0,function*(){const r=yield this.estimate(e,this.estimator.originate.bind(this.estimator)),i=yield this.prepare.originate(Object.assign(Object.assign({},e),r)),n=i.opOb.contents.find(g=>g.kind===j.ORIGINATION),s=yield this.forge(i),{hash:a,context:o,forgedBytes:f,opResponse:d}=yield this.signAndInject(s);return new $b(a,n,f,d,o,this)})}setDelegate(e){var r;return D(this,void 0,void 0,function*(){const i=Ge(e.source);if(e.source&&i!==ee.VALID)throw new Je(e.source,ae(i));const n=Ge((r=e.delegate)!==null&&r!==void 0?r:"");if(e.delegate&&n!==ee.VALID)throw new Je(e.delegate,ae(n));if(/kt1/i.test(e.source))throw new ub(e.source);const s=yield this.signer.publicKeyHash(),a=e.source||s,o=yield this.estimate(e,this.estimator.setDelegate.bind(this.estimator)),f=yield this.prepare.delegation(Object.assign(Object.assign({},e),o)),d=f.opOb.contents.find(M=>M.kind===j.DELEGATION),g=yield this.forge(f),{hash:y,context:S,forgedBytes:O,opResponse:P}=yield this.signAndInject(g);return new _u(y,d,a,O,P,S)})}registerDelegate(e){return D(this,void 0,void 0,function*(){const r=yield this.estimate(e,this.estimator.registerDelegate.bind(this.estimator)),i=yield this.signer.publicKeyHash(),n=yield this.prepare.registerDelegate(Object.assign(Object.assign({},e),r)),s=n.opOb.contents.find(y=>y.kind===j.DELEGATION),a=yield this.forge(n),{hash:o,context:f,forgedBytes:d,opResponse:g}=yield this.signAndInject(a);return new _u(o,s,i,d,g,f)})}transfer(e){var r;return D(this,void 0,void 0,function*(){const i=Ge(e.to);if(i!==ee.VALID)throw new Je(e.to,ae(i));const n=Ge((r=e.source)!==null&&r!==void 0?r:"");if(e.source&&n!==ee.VALID)throw new Je(e.source,ae(n));if(e.amount<0)throw new Qs(e.amount.toString());const s=yield this.signer.publicKeyHash(),a=yield this.estimate(e,this.estimator.transfer.bind(this.estimator)),o=e.source||s,f=yield this.prepare.transaction(Object.assign(Object.assign({},e),a)),d=f.opOb.contents.find(M=>M.kind===j.TRANSACTION),g=yield this.forge(f),{hash:y,context:S,forgedBytes:O,opResponse:P}=yield this.signAndInject(g);return new Ub(y,d,o,O,P,S)})}transferTicket(e){var r,i;return D(this,void 0,void 0,function*(){const n=Ge(e.destination);if(n!==ee.VALID)throw new Je(e.destination,ae(n));const s=Ge((r=e.source)!==null&&r!==void 0?r:"");if(e.source&&s!==ee.VALID)throw new Je(e.source,ae(s));const a=yield this.signer.publicKeyHash(),o=(i=e.source)!==null&&i!==void 0?i:a,f=yield this.estimate(e,this.estimator.transferTicket.bind(this.estimator)),d=yield this.prepare.transferTicket(Object.assign(Object.assign({},e),f)),g=d.opOb.contents.find(B=>B.kind===j.TRANSFER_TICKET),y=yield this.forge(d),{hash:S,context:O,forgedBytes:P,opResponse:M}=yield this.signAndInject(y);return new ix(S,g,o,P,M,O)})}reveal(e){return D(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),i=yield this.estimator.reveal(e);if(i){const n=yield this.estimate(e,()=>D(this,void 0,void 0,function*(){return i})),s=yield this.prepare.reveal(Object.assign(Object.assign({},e),n)),a=s.opOb.contents.find(S=>S.kind===j.REVEAL),o=yield this.forge(s),{hash:f,context:d,forgedBytes:g,opResponse:y}=yield this.signAndInject(o);return new rx(f,a,r,g,y,d)}else throw new lb(`The publicKeyHash '${r}' has already been revealed.`)})}registerGlobalConstant(e){return D(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.registerGlobalConstant.bind(this.estimator)),n=yield this.prepare.registerGlobalConstant(Object.assign(Object.assign({},e),i)),s=n.opOb.contents.find(y=>y.kind===j.REGISTER_GLOBAL_CONSTANT),a=yield this.forge(n),{hash:o,context:f,forgedBytes:d,opResponse:g}=yield this.signAndInject(a);return new tx(o,s,r,d,g,f)})}increasePaidStorage(e){return D(this,void 0,void 0,function*(){if(e.amount<0)throw new Qs(e.amount.toString());const r=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.increasePaidStorage.bind(this.estimator)),n=yield this.prepare.increasePaidStorage(Object.assign(Object.assign({},e),i)),s=n.opOb.contents.find(y=>y.kind===j.INCREASE_PAID_STORAGE),a=yield this.forge(n),{hash:o,context:f,forgedBytes:d,opResponse:g}=yield this.signAndInject(a);return new nx(o,s,r,d,g,f)})}drainDelegate(e){return D(this,void 0,void 0,function*(){const r=yield this.prepare.drainDelegate(e),i=r.opOb.contents.find(d=>d.kind===j.DRAIN_DELEGATE),n=yield this.forge(r),{hash:s,context:a,forgedBytes:o,opResponse:f}=yield this.signAndInject(n);return new Kb(s,i,o,f,a)})}ballot(e){var r,i;return D(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),s=Ge((r=e.source)!==null&&r!==void 0?r:"");if(e.source&&s!==ee.VALID)throw new Je(e.source,ae(s));const a=(i=e.source)!==null&&i!==void 0?i:n,o=yield this.prepare.ballot(Object.assign(Object.assign({},e),{source:a})),f=o.opOb.contents.find(P=>P.kind===j.BALLOT),d=yield this.forge(o),{hash:g,context:y,forgedBytes:S,opResponse:O}=yield this.signAndInject(d);return new Fb(g,f,n,S,O,y)})}proposals(e){var r,i;return D(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),s=Ge((r=e.source)!==null&&r!==void 0?r:"");if(e.source&&s!==ee.VALID)throw new Je(e.source,ae(s));const a=(i=e.source)!==null&&i!==void 0?i:n,o=yield this.prepare.proposals(Object.assign(Object.assign({},e),{source:a})),f=o.opOb.contents.find(P=>P.kind===j.PROPOSALS),d=yield this.forge(o),{hash:g,context:y,forgedBytes:S,opResponse:O}=yield this.signAndInject(d);return new sx(g,f,n,S,O,y)})}updateConsensusKey(e){return D(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.updateConsensusKey.bind(this.estimator)),n=yield this.prepare.updateConsensusKey(Object.assign(Object.assign({},e),i)),s=n.opOb.contents.find(y=>y.kind===j.UPDATE_CONSENSUS_KEY),a=yield this.forge(n),{hash:o,context:f,forgedBytes:d,opResponse:g}=yield this.signAndInject(a);return new ax(o,s,r,d,g,f)})}smartRollupAddMessages(e){return D(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.smartRollupAddMessages.bind(this.estimator)),n=yield this.prepare.smartRollupAddMessages(Object.assign(Object.assign({},e),i)),s=n.opOb.contents.find(y=>y.kind===j.SMART_ROLLUP_ADD_MESSAGES),a=yield this.forge(n),{hash:o,context:f,forgedBytes:d,opResponse:g}=yield this.signAndInject(a);return new ox(o,s,r,d,g,f)})}smartRollupOriginate(e){return D(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.smartRollupOriginate.bind(this.estimator)),n=yield this.rpc.getOriginationProof({kind:e.pvmKind,kernel:e.kernel}),s=Object.assign(Object.assign({},e),{originationProof:n}),a=yield this.prepare.smartRollupOriginate(Object.assign(Object.assign({},s),i)),o=a.opOb.contents.find(O=>O.kind===j.SMART_ROLLUP_ORIGINATE),f=yield this.forge(a),{hash:d,context:g,forgedBytes:y,opResponse:S}=yield this.signAndInject(f);return new cx(d,o,r,y,S,g)})}at(e,r=i=>i){return D(this,void 0,void 0,function*(){const i=ss(e);if(i!==ee.VALID)throw new Nn(e,ae(i));const n=this.context.withExtensions().rpc,s=this.context.withExtensions().readProvider,a=yield s.getScript(e,"head"),o=yield s.getEntrypoints(e),f=new Dh(e,a,this,this,o,n,s);return r(f,this.context)})}batch(e){const r=new kh(this.context,this.estimator);return Array.isArray(e)&&r.with(e),r}}class $h{constructor(e){this.context=e}getNextProto(){return D(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}parseScript(e){return D(this,void 0,void 0,function*(){return new Mn({protocol:yield this.getNextProto()}).parseScript(e)})}parseMichelineExpression(e){return D(this,void 0,void 0,function*(){return new Mn({protocol:yield this.getNextProto()}).parseMichelineExpression(e)})}parseJSON(e){return D(this,void 0,void 0,function*(){return new Mn({protocol:yield this.getNextProto()}).parseJSON(e)})}prepareCodeOrigination(e){return D(this,void 0,void 0,function*(){const r=e;if(r.code=yield this.formatCodeParam(e.code),e.init)r.init=yield this.formatInitParam(e.init);else if(e.storage){const i=r.code.find(a=>"prim"in a&&a.prim==="storage");if(!i?.args)throw new aa("The storage section is missing from the script",e.code);const n=new yr(i.args[0]),s=yield this.findGlobalConstantsHashAndValue(n);if(Object.keys(s).length!==0){const o=new Mn({expandGlobalConstant:s}).parseJSON(i.args[0]),f=new yr(o);r.init=f.Encode(e.storage)}else r.init=n.Encode(e.storage);delete r.storage}return r})}formatCodeParam(e){return D(this,void 0,void 0,function*(){let r;if(typeof e=="string"){const i=yield this.parseScript(e);if(i===null)throw new aa("Unable to parse",e);r=i}else{const i=yield this.parseJSON(e),n=["parameter","storage","code"];r=i.sort((s,a)=>n.indexOf(s.prim)-n.indexOf(a.prim))}return r})}formatInitParam(e){return D(this,void 0,void 0,function*(){let r;if(typeof e=="string"){const i=yield this.parseMichelineExpression(e);if(i===null)throw new Lh("Invalid init parameter",e);r=i}else r=yield this.parseJSON(e);return r})}findGlobalConstantsHashAndValue(e){return D(this,void 0,void 0,function*(){const r=e.findToken("constant"),i={};if(r.length!==0)for(const n of r){const s=n.tokenVal.args;if(s){const a=s[0];if(a.string){const o=a.string,f=yield this.context.globalConstantsProvider.getGlobalConstantByHash(o);Object.assign(i,{[o]:f})}}}return i})}}class Uh{constructor(e){this.context=e}packData(e){return D(this,void 0,void 0,function*(){return this.context.rpc.packData(e)})}}class jb extends et{constructor(e){super(),this.hash=e,this.name="GlobalConstantNotFound",this.message=`Please load the value associated with the constant ${e} using the loadGlobalConstant method of the DefaultGlobalConstantsProvider.`}}class Gb extends Po{constructor(){super(),this.name="UnconfiguredGlobalConstantsProviderError",this.message="No global constants provider has been configured. Please configure one by calling setGlobalConstantsProvider({globalConstantsProvider}) on your TezosToolkit instance."}}class Vb{getGlobalConstantByHash(e){return D(this,void 0,void 0,function*(){throw new Gb})}}class Hh{constructor(e){this.rpc=e}getBalance(e,r){return D(this,void 0,void 0,function*(){return this.rpc.getBalance(e,{block:String(r)})})}getDelegate(e,r){return D(this,void 0,void 0,function*(){return this.rpc.getDelegate(e,{block:String(r)})})}getNextProtocol(e){return D(this,void 0,void 0,function*(){return(yield this.rpc.getProtocols({block:String(e)})).next_protocol})}getProtocolConstants(e){return D(this,void 0,void 0,function*(){const{time_between_blocks:r,minimal_block_delay:i,hard_gas_limit_per_operation:n,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:a,cost_per_byte:o,tx_rollup_origination_size:f,smart_rollup_origination_size:d}=yield this.rpc.getConstants({block:String(e)});return{time_between_blocks:r,minimal_block_delay:i,hard_gas_limit_per_operation:n,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:a,cost_per_byte:o,tx_rollup_origination_size:f,smart_rollup_origination_size:d}})}getScript(e,r){return D(this,void 0,void 0,function*(){const{script:i}=yield this.rpc.getContract(e,{block:String(r)});return i})}getStorage(e,r){return D(this,void 0,void 0,function*(){return this.rpc.getStorage(e,{block:String(r)})})}getBlockHash(e){return D(this,void 0,void 0,function*(){const{hash:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getBlockLevel(e){return D(this,void 0,void 0,function*(){const{level:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getCounter(e,r){return D(this,void 0,void 0,function*(){const{counter:i}=yield this.rpc.getContract(e,{block:String(r)});return i||"0"})}getBlockTimestamp(e){return D(this,void 0,void 0,function*(){const{timestamp:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getBigMapValue(e,r){return D(this,void 0,void 0,function*(){return this.rpc.getBigMapExpr(e.id,e.expr,{block:String(r)})})}getSaplingDiffById(e,r){return D(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffById(e.id,{block:String(r)})})}getSaplingDiffByContract(e,r){return D(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffByContract(e,{block:String(r)})})}getEntrypoints(e){return D(this,void 0,void 0,function*(){return this.rpc.getEntrypoints(e)})}getChainId(){return D(this,void 0,void 0,function*(){return this.rpc.getChainId()})}isAccountRevealed(e,r){return D(this,void 0,void 0,function*(){const i=yield this.rpc.getManagerKey(e,{block:String(r)});return i&&typeof i=="object"?!!i.key:!!i})}getBlock(e){return D(this,void 0,void 0,function*(){return this.rpc.getBlock({block:String(e)})})}getLiveBlocks(e){return this.rpc.getLiveBlocks({block:String(e)})}}class $l extends ke{constructor(e){super(),this.type=e,this.name="UnsupportedEventError",this.message=`Unsupported event type "${e}" expecting one of the "data", "error", or "close".`}}class ux extends ke{constructor(e){super(),this.invalidExpression=e,this.name="InvalidFilterExpressionError",this.message="Invalid filter expression expecting the object to contain either and/or property"}}const hx=(t,e)=>t.hash===e.opHash,dx=(t,e)=>{switch(t.kind){case"endorsement":return"metadata"in t&&t.metadata.delegate===e.source;case"activate_account":return"metadata"in t&&t.pkh===e.source;default:return"source"in t&&t.source===e.source}},lx=(t,e)=>"kind"in t&&t.kind===e.kind,px=(t,e)=>{switch(t.kind){case"delegation":return t.delegate===e.destination;case"origination":if("metadata"in t&&"operation_result"in t.metadata&&"originated_contracts"in t.metadata.operation_result&&Array.isArray(t.metadata.operation_result.originated_contracts))return t.metadata.operation_result.originated_contracts.some(r=>r===e.destination);break;case"transaction":return t.destination===e.destination;default:return!1}},bx=(t,e,r,i)=>!(t.kind!=="event"||r&&t.tag!==r||e&&t.source!==e||i&&t.result.status!=="applied"),gx=(t,e)=>"opHash"in e?hx(t,e):"source"in e?dx(t,e):"kind"in e?lx(t,e):"destination"in e?px(t,e):!1,mx=(t,e)=>{if(Array.isArray(e.and))return e.and.every(r=>wu(t,r));if(Array.isArray(e.or))return e.or.some(r=>wu(t,r));throw new ux(e)},wu=(t,e)=>{const r=[];return Array.isArray(e)?r.push(...e):r.push(e),r.every(i=>"and"in i||"or"in i?mx(t,i):gx(t,i))};class Ws{constructor(e,r=!1,i=O1()){this.shouldRetry=r,this.operatorFunction=i,this.errorListeners=[],this.messageListeners=[],this.closeListeners=[],this.completed$=new zn,e.pipe(hw(this.completed$),bo(n=>{this.call(this.messageListeners,n)},n=>{this.call(this.errorListeners,n)},()=>{this.call(this.closeListeners)}),this.shouldRetry?i:bo(),cc(()=>Q5)).subscribe()}call(e,r){for(const i of e)try{i(r)}catch(n){console.error(n)}}remove(e,r){const i=e.indexOf(r);i!==-1&&e.splice(i,1)}on(e,r){switch(e){case"data":this.messageListeners.push(r);break;case"error":this.errorListeners.push(r);break;case"close":this.closeListeners.push(r);break;default:throw new $l(e)}}off(e,r){switch(e){case"data":this.remove(this.messageListeners,r);break;case"error":this.remove(this.errorListeners,r);break;case"close":this.remove(this.closeListeners,r);break;default:throw new $l(e)}}close(){this.completed$.next()}}const vx={shouldObservableSubscriptionRetry:!1,observableSubscriptionRetryFunction:O1()},yx=t=>Sn(t.rpc.getBlock()).pipe(Ci()),_x=t=>wa(e=>new ht(r=>{for(const i of e.operations)for(const n of i)for(const s of n.contents)wu(Object.assign({hash:n.hash},s),t)&&r.next(Object.assign({hash:n.hash},s));r.complete()})),wx=t=>wa(e=>new ht(r=>{for(const i of e.operations)for(const n of i)for(const s of n.contents){const o=s.metadata.internal_operation_results;if(o)for(const f of o)bx(f,t?.address,t?.tag,t?.excludeFailedOperations)&&r.next(Object.assign({opHash:n.hash,blockHash:e.hash,level:e.header.level},f))}r.complete()}));class Eo{constructor(e,r={}){this.context=e,this._config$=new sc(Object.assign(Object.assign({},vx),r)),this.timer$=this._config$.pipe(dl("pollingIntervalMilliseconds"),Hi(i=>i?au(0,i):Sn(this.getConfirmationPollingInterval()).pipe(Hi(n=>au(0,n))))),this.newBlock$=this.timer$.pipe(Hi(()=>yx(this.context)),sw("hash"),fw(),r1())}get config(){return this._config$.getValue()}getConfirmationPollingInterval(){return D(this,void 0,void 0,function*(){if(!this.config.pollingIntervalMilliseconds)try{const i=yield this.context.readProvider.getProtocolConstants("head"),s=(i.minimal_block_delay?i.minimal_block_delay.multipliedBy(1e3):i.time_between_blocks?i.time_between_blocks[0].multipliedBy(1e3):new re(5e3)).dividedBy(3);this.config.pollingIntervalMilliseconds=s.toNumber()===0?1e3:s.toNumber()}catch{return 5e3}return this.config.pollingIntervalMilliseconds})}subscribeBlock(e){return new Ws(this.newBlock$,this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribe(e){return new Ws(this.newBlock$.pipe(dl("hash")),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeOperation(e){return new Ws(this.newBlock$.pipe(_x(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeEvent(e){return new Ws(this.newBlock$.pipe(wx(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}}class Fh{constructor(e){this.context=e}getNextProto(){return D(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}forge({branch:e,contents:r}){return D(this,void 0,void 0,function*(){return new ob(yield this.getNextProto()).forge({branch:e,contents:r})})}}const zb={defaultConfirmationCount:1,confirmationPollingTimeoutSecond:180};class oa{constructor(e,r=new gu,i,n=new sc(Object.assign({},zb)),s,a,o,f,d,g,y,S){this._rpc=e,this._signer=r,this._proto=i,this._config=n,this.providerDecorator=[],this.tz=new X8(this),this.estimate=new kb(this),this.contract=new fx(this,this.estimate),this.prepare=new Ns(this),this.batch=new V8(this,this.estimate),this.wallet=new xa(this),this.withExtensions=()=>{let O=this.clone();return this.providerDecorator.forEach(P=>{O=P(O)}),O},typeof this._rpc=="string"?this._rpcClient=new qa(this._rpc):this._rpcClient=this._rpc,this._forger=s||new Fh(this),this._injector=a||new Th(this),this.operationFactory=new Z8(this),this._walletProvider=f||new Bh(this),this._parser=d||new $h(this),this._packer=o||new Uh(this),this._globalConstantsProvider=g||new Vb,this._readProvider=y||new Hh(this._rpcClient),this._stream=S||new Eo(this)}get config(){return this._config.getValue()}set config(e){this._config.next(Object.assign({},e))}setPartialConfig(e){this._config.next(Object.assign(Object.assign({},this._config.getValue()),e))}get rpc(){return this._rpcClient}set rpc(e){this._rpcClient=e}get injector(){return this._injector}set injector(e){this._injector=e}get forger(){return this._forger}set forger(e){this._forger=e}get signer(){return this._signer}set signer(e){this._signer=e}get walletProvider(){return this._walletProvider}set walletProvider(e){this._walletProvider=e}set proto(e){this._proto=e}get proto(){return this._proto}get parser(){return this._parser}set parser(e){this._parser=e}get packer(){return this._packer}set packer(e){this._packer=e}get globalConstantsProvider(){return this._globalConstantsProvider}set globalConstantsProvider(e){this._globalConstantsProvider=e}get readProvider(){return this._readProvider}set readProvider(e){this._readProvider=e}get stream(){return this._stream}set stream(e){this._stream=e}isAnyProtocolActive(e=[]){return D(this,void 0,void 0,function*(){if(this._proto)return e.includes(this._proto);{const r=yield this.readProvider.getNextProtocol("head");return e.includes(r)}})}isAnySignerConfigured(){return!(this.signer instanceof gu)}clone(){return new oa(this.rpc,this.signer,this.proto,this._config,this.forger,this._injector,this.packer,this._walletProvider,this._parser,this._globalConstantsProvider,this._readProvider,this._stream)}registerProviderDecorator(e){this.providerDecorator.push(e)}}const Ex={commitHash:"15732f9b7d575aa46427c94501fb8677a754b733",version:"17.1.1"};class xx extends et{constructor(e){super(),this.results=e,this.name="ForgingMismatchError",this.message="Forging mismatch error"}}class Ul extends Po{constructor(){super(),this.name="UnspecifiedForgerError",this.message="No forger has been configured. Please configure new CompositeForger([rpcForger, localForger]) with your TezosToolkit instance."}}class Ax{constructor(e){if(this.forgers=e,e.length===0)throw new Ul}forge({branch:e,contents:r}){return D(this,void 0,void 0,function*(){const i=yield Promise.all(this.forgers.map(s=>s.forge({branch:e,contents:r})));if(i.length===0)throw new Ul;let n=i.pop();for(;i.length;){const s=i.pop();if(s!==n)throw new xx([n,s]);n=s}return n})}}class Sx{constructor(e){this.context=e}forge({branch:e,contents:r}){return this.context.rpc.forgeOperations({branch:e,contents:r})}}class Rx{prepareCodeOrigination(e){return D(this,void 0,void 0,function*(){return e})}}class Ox{packData(e){return D(this,void 0,void 0,function*(){const{bytes:r}=B4(e.data,e.type);return{packed:r}})}}class Px{constructor(){this._globalConstantsLibrary={}}loadGlobalConstant(e){for(const r in e)Object.assign(this._globalConstantsLibrary,{[r]:e[r]})}getGlobalConstantByHash(e){return D(this,void 0,void 0,function*(){const r=this._globalConstantsLibrary[e];if(!r)throw new jb(e);return r})}}class Ix{constructor(e){this._rpc=e,this._options={},this.format=Wu,typeof this._rpc=="string"?this._rpcClient=new qa(this._rpc):this._rpcClient=this._rpc,this._context=new oa(e),this._wallet=new xa(this._context),this.setProvider({rpc:this._rpcClient}),this.batch=this._context.batch.batch.bind(this._context.batch)}setProvider({rpc:e,stream:r,signer:i,protocol:n,config:s,forger:a,wallet:o,packer:f,globalConstantsProvider:d,readProvider:g,parserProvider:y,injectorProvider:S}){this.setRpcProvider(e),this.setStreamProvider(r),this.setSignerProvider(i),this.setForgerProvider(a),this.setWalletProvider(o),this.setPackerProvider(f),this.setGlobalConstantsProvider(d),this.setReadProvider(g),this.setParserProvider(y),this.setInjectorProvider(S),this._context.proto=n,s&&this._context.setPartialConfig(s)}setSignerProvider(e){!this._options.signer&&typeof e>"u"?(this._context.signer=new gu,this._options.signer=e):typeof e<"u"&&(this._context.signer=e,this._options.signer=e)}setRpcProvider(e){typeof e=="string"?this._rpcClient=new qa(e):e===void 0||(this._rpcClient=e),this._options.rpc=this._rpcClient,this._context.rpc=this._rpcClient}setForgerProvider(e){if(typeof e<"u")this._options.forger=e,this._context.forger=e;else if(this._options.forger===void 0){const r=this.getFactory(Fh)();this._options.forger=r,this._context.forger=r}}setStreamProvider(e){if(typeof e=="string"){const r=new Eo(new oa(new qa(e)));this._options.stream=r,this._context.stream=r}else if(typeof e<"u")this._options.stream=e,this._context.stream=e;else if(this._options.stream===void 0){const r=this.getFactory(Eo)();this._options.stream=r,this._context.stream=r}}setWalletProvider(e){if(!this._options.wallet&&typeof e>"u"){const r=this.getFactory(Bh)();this._options.wallet=r,this._context.walletProvider=r}else typeof e<"u"&&(this._options.wallet=e,this._context.walletProvider=e)}setPackerProvider(e){if(!this._options.packer&&typeof e>"u"){const r=this.getFactory(Uh)();this._context.packer=r,this._options.packer=r}else typeof e<"u"&&(this._context.packer=e,this._options.packer=e)}setGlobalConstantsProvider(e){if(!this._options.globalConstantsProvider&&typeof e>"u"){const r=new Vb;this._context.globalConstantsProvider=r,this._options.globalConstantsProvider=r}else typeof e<"u"&&(this._context.globalConstantsProvider=e,this._options.globalConstantsProvider=e)}setReadProvider(e){const r=e||new Hh(this._context.rpc);this._options.readProvider=r,this._context.readProvider=r}setParserProvider(e){if(!this._options.parserProvider&&typeof e>"u"){const r=new $h(this._context);this._context.parser=r,this._options.parserProvider=r}else typeof e<"u"&&(this._context.parser=e,this._options.parserProvider=e)}setInjectorProvider(e){if(!this._options.injectorProvider&&typeof e>"u"){const r=new Th(this._context);this._context.injector=r,this._options.injectorProvider=r}else typeof e<"u"&&(this._context.injector=e,this._options.injectorProvider=e)}get tz(){return this._context.tz}get contract(){return this._context.contract}get prepare(){return this._context.prepare}get wallet(){return this._wallet}get operation(){return this._context.operationFactory}get estimate(){return this._context.estimate}get stream(){return this._context.stream}get rpc(){return this._context.rpc}get signer(){return this._context.signer}get globalConstants(){return this._context.globalConstantsProvider}addExtension(e){Array.isArray(e)?e.forEach(r=>r.configureContext(this._context)):e.configureContext(this._context)}getFactory(e){return(...r)=>new e(this._context,...r)}getVersionInfo(){return Ex}}const Cx=Object.freeze(Object.defineProperty({__proto__:null,BallotOperation:Fb,BatchOperation:Rb,BigMapAbstraction:Hb,COST_PER_BYTE:fb,get ChainIds(){return mu},CompositeForger:Ax,Context:oa,ContractAbstraction:Dh,ContractMethod:Lb,ContractMethodObject:Mb,ContractView:Nb,get DEFAULT_FEE(){return vi},get DEFAULT_GAS_LIMIT(){return $r},DEFAULT_SMART_CONTRACT_METHOD_NAME:Ln,get DEFAULT_STORAGE_LIMIT(){return yi},DefaultGlobalConstantsProvider:Px,DelegateOperation:_u,DelegationWalletOperation:Tb,DrainDelegateOperation:Kb,Estimate:jt,GlobalConstantNotFound:jb,InvalidBalanceError:bb,InvalidCodeParameter:aa,InvalidDelegationSource:ub,InvalidEstimateValueError:Ya,InvalidInitParameter:Lh,InvalidParameterError:Mh,InvalidViewSimulationContext:vu,LegacyWalletProvider:Bh,MANAGER_LAMBDA:H8,MichelCodecPacker:Ox,MichelCodecParser:$h,MichelsonMap:hr,NoopParser:Rx,ObservableSubscription:Ws,get OpKind(){return j},Operation:ir,OperationBatch:kh,OriginationOperation:$b,OriginationParameterError:pb,OriginationWalletOperation:Ib,PollingSubscribeProvider:Eo,PrepareProvider:Ns,get Protocols(){return mt},RPCEstimateProvider:kb,RevealEstimateError:Db,RevealOperationError:lb,RpcForger:Sx,RpcInjector:Th,RpcPacker:Uh,RpcReadAdapter:Hh,SaplingStateAbstraction:Cb,TaquitoLocalForger:Fh,TezosOperationError:Ch,TezosPreapplyFailureError:xb,TezosToolkit:Ix,TransactionOperation:Ub,TransactionWalletOperation:Pb,UnconfiguredGlobalConstantsProviderError:Gb,UnitValue:fu,VIEW_LAMBDA:j8,ViewSimulationError:hb,Wallet:xa,WalletOperation:Wn,WalletOperationBatch:Ob,compose:G8,createActivationOperation:gb,createBallotOperation:yb,createDrainDelegateOperation:vb,createIncreasePaidStorageOperation:gc,createOriginationOperation:hc,createProposalsOperation:_b,createRegisterDelegateOperation:mb,createRegisterGlobalConstantOperation:pc,createRevealOperation:Xa,createSetDelegateOperation:lc,createSmartRollupAddMessagesOperation:mc,createSmartRollupOriginateOperation:vc,createTransferOperation:dc,createTransferTicketOperation:bc,createUpdateConsensusKeyOperation:wb,defaultConfigConfirmation:zb,getRevealGasLimit:wo,protocols:E8,validateAndExtractFailwith:db},Symbol.toStringTag,{value:"Module"}));export{re as B,Lx as C,hr as M,j as O,Mx as P,Ix as T,Ys as a,um as b,Nx as c,Ir as d,iu as e,r6 as f,ca as g,f0 as h,me as i,Um as j,cm as k,No as l,Fl as m,Lu as n,dc as o,gc as p,hc as q,Es as r,Ar as s,lc as t,Cx as u,Fn as w};
