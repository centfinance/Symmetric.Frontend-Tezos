import{a3 as T,l as x}from"./entry.b98f4bf0.js";import{t,f as q}from"./approve.e9115015.js";import{B as y,O as I}from"./taquito.es6.0972656a.js";const N=async(i,r,s,l,p=.005,m=!1,e)=>{console.log(s);const d=await i.wallet.pkh();if(r){const f=t.address(d),v=e?t.address(e):t.address(d),c=t.map(s.map(a=>({key:t.nat(a.index),value:{0:t.address(a.address),1:a.id!==null?t.nat(a.id):void 0}})));console.log(c);const u=t.map(l.map(a=>({key:t.nat(a.index),value:t.nat(a.value.toString())}))),w=t.map(l.map(a=>({key:t.nat(a.index),value:t.nat(a.value.plus(a.value.multipliedBy(p)))}))),n=m?"INIT":"EXACT_TOKENS_IN_FOR_SPT_OUT",O=t.nat(0);return(await i.wallet.at(T.contracts.vault)).methodsObject.joinPool({poolId:{0:t.address(r.address),1:t.nat(r.id)},recipient:v,request:{assets:c,limits:w,userData:{allT:void 0,amountsIn:u,kind:n,minSPTAmountOut:O,sptAmountOut:void 0,tokenIndex:void 0}},sender:f})}},P=async(i,r,s,l=.5,p=!1,m)=>{const e=await x().tezos(),d=r.map((o,a)=>({index:o[0],value:y(o[1].toFixed(18)).multipliedBy(10**s[a].decimals)})),v=(await N(e,i,s,d,l,p,m))?.toTransferParams(),c=await e.wallet.pkh(),u=await q(e,c,s[0].address,s.map(o=>o.id?o.id:0),T.contracts.vault),w={kind:I.TRANSACTION,...v},n=[];return n.push(...u.approveRequests),n.push(w),n.push(...u.revokeRequests),await e.wallet.batch(n).send()};export{N as c,P as u};
