import{S as K,K as u,O as v,a3 as qe,ae as Kt,af as Gt,ag as Jt,q as X,ah as Xt,J as D,ai as Yt,L as Y,aj as at,ak as dt,h as vt,U as _t,N as re,a0 as Ee,al as Zt,a1 as Ue,am as el,Q as se,an as tl,V as ke,ao as ll,ap as nt,aq as ol,ar as al,as as nl,at as je,au as st,av as sl,M as ft,aw as rl,ax as De,ay as ie,az as il,g as fe,k as N,o as T,c as M,a as x,F as ne,r as ce,v as Q,w as R,b as P,m as S,t as z,d as I,a9 as Z,a5 as ze,n as ve,aA as _e,x as mt,a6 as Me,aB as gt,s as bt,aC as ul,aD as de,l as cl,aE as dl,aF as vl}from"./entry.98ea8e51.js";import{P as ee,_ as He,a as Ie,b as pt,c as _l,g as fl}from"./PoolRepository.e5e3576a.js";import{u as ml,b as gl,c as yt,_ as bl,a as ht}from"./QSkeleton.bafc97ae.js";import"./index.82070b46.js";import{B as H}from"./taquito.es6.aa3d2637.js";import{u as pl}from"./useJoinPool.39e703b7.js";import{P as Qe,a as Ne,c as rt,n as yl}from"./Pool.b1ccc596.js";import{t as U}from"./approve.9f3adc2d.js";import"./index.b1eb048f.js";const hl=["top","middle","bottom"],wl=K({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>hl.includes(e)}},setup(e,{slots:t}){const o=u(()=>e.align!==void 0?{verticalAlign:e.align}:null),i=u(()=>{const n=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(n!==void 0?` text-${n}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>v("div",{class:i.value,style:o.value,role:"status","aria-label":e.label},qe(t.default,e.label!==void 0?[e.label]:[]))}}),Sl=K({name:"QBtnToggle",props:{...Kt,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(t=>("label"in t||"icon"in t||"slot"in t)&&"value"in t)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:t,emit:o}){const i=u(()=>e.options.find(g=>g.value===e.modelValue)!==void 0),n=u(()=>({type:"hidden",name:e.name,value:e.modelValue})),d=Xt(n),s=u(()=>Gt(e)),c=u(()=>({rounded:e.rounded,dense:e.dense,...s.value})),_=u(()=>e.options.map((g,r)=>{const{attrs:b,value:h,slot:w,...k}=g;return{slot:w,props:{key:r,"aria-pressed":h===e.modelValue?"true":"false",...b,...k,...c.value,disable:e.disable===!0||k.disable===!0,color:h===e.modelValue?a(k,"toggleColor"):a(k,"color"),textColor:h===e.modelValue?a(k,"toggleTextColor"):a(k,"textColor"),noCaps:a(k,"noCaps")===!0,noWrap:a(k,"noWrap")===!0,size:a(k,"size"),padding:a(k,"padding"),ripple:a(k,"ripple"),stack:a(k,"stack")===!0,stretch:a(k,"stretch")===!0,onClick(V){p(h,g,V)}}}}));function p(g,r,b){e.readonly!==!0&&(e.modelValue===g?e.clearable===!0&&(o("update:modelValue",null,null),o("clear")):o("update:modelValue",g,r),o("click",b))}function a(g,r){return g[r]===void 0?e[r]:g[r]}function f(){const g=_.value.map(r=>v(X,r.props,r.slot!==void 0?t[r.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&i.value===!0&&d(g,"push"),qe(t.default,g)}return()=>v(Jt,{class:"q-btn-toggle",...s.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},f)}});let ue=0;const xl={fullscreen:Boolean,noRouteFullscreenExit:Boolean},ql=["update:fullscreen","fullscreen"];function kl(){const e=re(),{props:t,emit:o,proxy:i}=e;let n,d,s;const c=D(!1);Yt(e)===!0&&Y(()=>i.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&a()}),Y(()=>t.fullscreen,f=>{c.value!==f&&_()}),Y(c,f=>{o("update:fullscreen",f),o("fullscreen",f)});function _(){c.value===!0?a():p()}function p(){c.value!==!0&&(c.value=!0,s=i.$el.parentNode,s.replaceChild(d,i.$el),document.body.appendChild(i.$el),ue++,ue===1&&document.body.classList.add("q-body--fullscreen-mixin"),n={handler:a},at.add(n))}function a(){c.value===!0&&(n!==void 0&&(at.remove(n),n=void 0),s.replaceChild(i.$el,d),c.value=!1,ue=Math.max(0,ue-1),ue===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),i.$el.scrollIntoView!==void 0&&setTimeout(()=>{i.$el.scrollIntoView()})))}return dt(()=>{d=document.createElement("span")}),vt(()=>{t.fullscreen===!0&&p()}),_t(a),Object.assign(i,{toggleFullscreen:_,setFullscreen:p,exitFullscreen:a}),{inFullscreen:c,toggleFullscreen:_}}const Cl={xs:2,sm:4,md:6,lg:10,xl:14};function it(e,t,o){return{transform:t===!0?`translateX(${o.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const Pl=K({name:"QLinearProgress",props:{...Ee,...Zt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:o}=re(),i=Ue(e,o.$q),n=el(e,Cl),d=u(()=>e.indeterminate===!0||e.query===!0),s=u(()=>e.reverse!==e.query),c=u(()=>({...n.value!==null?n.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),_=u(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),p=u(()=>it(e.buffer!==void 0?e.buffer:1,s.value,o.$q)),a=u(()=>`with${e.instantFeedback===!0?"out":""}-transition`),f=u(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${a.value} q-linear-progress__track--${i.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),g=u(()=>it(d.value===!0?1:e.value,s.value,o.$q)),r=u(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${a.value} q-linear-progress__model--${d.value===!0?"in":""}determinate`),b=u(()=>({width:`${e.value*100}%`})),h=u(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${a.value}`);return()=>{const w=[v("div",{class:f.value,style:p.value}),v("div",{class:r.value,style:g.value})];return e.stripe===!0&&d.value===!1&&w.push(v("div",{class:h.value,style:b.value})),v("div",{class:_.value,style:c.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},qe(t.default,w))}}}),Bl=["horizontal","vertical","cell","none"],$l=K({name:"QMarkupTable",props:{...Ee,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Bl.includes(e)}},setup(e,{slots:t}){const o=re(),i=Ue(e,o.proxy.$q),n=u(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(i.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>v("div",{class:n.value},[v("table",{class:"q-table"},se(t.default))])}}),Rl=v("div",{class:"q-space"}),Vl=K({name:"QSpace",setup(){return()=>Rl}}),wt=K({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:o}){const i=re(),{proxy:{$q:n}}=i,d=s=>{o("click",s)};return()=>{if(e.props===void 0)return v("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:d},se(t.default));let s,c;const _=i.vnode.key;if(_){if(s=e.props.colsMap[_],s===void 0)return}else s=e.props.col;if(s.sortable===!0){const a=s.align==="right"?"unshift":"push";c=tl(t.default,[]),c[a](v(ke,{class:s.__iconClass,name:n.iconSet.table.arrowUp}))}else c=se(t.default);const p={class:s.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:s.headerStyle,onClick:a=>{s.sortable===!0&&e.props.sort(s),d(a)}};return v("th",p,c)}}});function St(e,t){return v("div",e,[v("table",{class:"q-table"},t)])}const Tl={list:nl,table:$l},Ll=["list","table","__qtable"],Al=K({name:"QVirtualScroll",props:{...ml,type:{type:String,default:"list",validator:e=>Ll.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:t,attrs:o}){let i;const n=D(null),d=u(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:s,localResetVirtualScroll:c,padVirtualScroll:_,onVirtualScrollEvt:p}=gl({virtualScrollLength:d,getVirtualScrollTarget:b,getVirtualScrollEl:r}),a=u(()=>{if(d.value===0)return[];const V=(A,y)=>({index:s.value.from+y,item:A});return e.itemsFn===void 0?e.items.slice(s.value.from,s.value.to).map(V):e.itemsFn(s.value.from,s.value.to-s.value.from).map(V)}),f=u(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),g=u(()=>e.scrollTarget!==void 0?{}:{tabindex:0});Y(d,()=>{c()}),Y(()=>e.scrollTarget,()=>{w(),h()});function r(){return n.value.$el||n.value}function b(){return i}function h(){i=ll(r(),e.scrollTarget),i.addEventListener("scroll",p,nt.passive)}function w(){i!==void 0&&(i.removeEventListener("scroll",p,nt.passive),i=void 0)}function k(){let V=_(e.type==="list"?"div":"tbody",a.value.map(t.default));return t.before!==void 0&&(V=t.before().concat(V)),qe(t.after,V)}return dt(()=>{c()}),vt(()=>{h()}),ol(()=>{h()}),al(()=>{w()}),_t(()=>{w()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?St({ref:n,class:"q-table__middle "+f.value},k()):v(Tl[e.type],{...o,ref:n,class:[o.class,f.value],...g.value},k)}}});function Ol(e,t){return new Date(e)-new Date(t)}const Fl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Dl(e,t,o,i){const n=u(()=>{const{sortBy:c}=t.value;return c&&o.value.find(_=>_.name===c)||null}),d=u(()=>e.sortMethod!==void 0?e.sortMethod:(c,_,p)=>{const a=o.value.find(r=>r.name===_);if(a===void 0||a.field===void 0)return c;const f=p===!0?-1:1,g=typeof a.field=="function"?r=>a.field(r):r=>r[a.field];return c.sort((r,b)=>{let h=g(r),w=g(b);return h==null?-1*f:w==null?1*f:a.sort!==void 0?a.sort(h,w,r,b)*f:je(h)===!0&&je(w)===!0?(h-w)*f:st(h)===!0&&st(w)===!0?Ol(h,w)*f:typeof h=="boolean"&&typeof w=="boolean"?(h-w)*f:([h,w]=[h,w].map(k=>(k+"").toLocaleString().toLowerCase()),h<w?-1*f:h===w?0:f)})});function s(c){let _=e.columnSortOrder;if(sl(c)===!0)c.sortOrder&&(_=c.sortOrder),c=c.name;else{const f=o.value.find(g=>g.name===c);f!==void 0&&f.sortOrder&&(_=f.sortOrder)}let{sortBy:p,descending:a}=t.value;p!==c?(p=c,a=_==="da"):e.binaryStateSort===!0?a=!a:a===!0?_==="ad"?p=null:a=!1:_==="ad"?a=!0:p=null,i({sortBy:p,descending:a,page:1})}return{columnToSort:n,computedSortMethod:d,sort:s}}const Nl={filter:[String,Object],filterMethod:Function};function jl(e,t){const o=u(()=>e.filterMethod!==void 0?e.filterMethod:(i,n,d,s)=>{const c=n?n.toLowerCase():"";return i.filter(_=>d.some(p=>{const a=s(p,_)+"";return(a==="undefined"||a==="null"?"":a.toLowerCase()).indexOf(c)!==-1}))});return Y(()=>e.filter,()=>{ft(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:o}}function zl(e,t){for(const o in t)if(t[o]!==e[o])return!1;return!0}function ut(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Ml={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function El(e,t){const{props:o,emit:i}=e,n=D(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:o.rowsPerPageOptions.length!==0?o.rowsPerPageOptions[0]:5},o.pagination)),d=u(()=>{const a=o["onUpdate:pagination"]!==void 0?{...n.value,...o.pagination}:n.value;return ut(a)}),s=u(()=>d.value.rowsNumber!==void 0);function c(a){_({pagination:a,filter:o.filter})}function _(a={}){ft(()=>{i("request",{pagination:a.pagination||d.value,filter:a.filter||o.filter,getCellValue:t})})}function p(a,f){const g=ut({...d.value,...a});if(zl(d.value,g)===!0){s.value===!0&&f===!0&&c(g);return}if(s.value===!0){c(g);return}o.pagination!==void 0&&o["onUpdate:pagination"]!==void 0?i("update:pagination",g):n.value=g}return{innerPagination:n,computedPagination:d,isServerSide:s,requestServerInteraction:_,setPagination:p}}function Ul(e,t,o,i,n,d){const{props:s,emit:c,proxy:{$q:_}}=e,p=u(()=>i.value===!0?o.value.rowsNumber||0:d.value),a=u(()=>{const{page:y,rowsPerPage:B}=o.value;return(y-1)*B}),f=u(()=>{const{page:y,rowsPerPage:B}=o.value;return y*B}),g=u(()=>o.value.page===1),r=u(()=>o.value.rowsPerPage===0?1:Math.max(1,Math.ceil(p.value/o.value.rowsPerPage))),b=u(()=>f.value===0?!0:o.value.page>=r.value),h=u(()=>(s.rowsPerPageOptions.includes(t.value.rowsPerPage)?s.rowsPerPageOptions:[t.value.rowsPerPage].concat(s.rowsPerPageOptions)).map(B=>({label:B===0?_.lang.table.allRows:""+B,value:B})));Y(r,(y,B)=>{if(y===B)return;const L=o.value.page;y&&!L?n({page:1}):y<L&&n({page:y})});function w(){n({page:1})}function k(){const{page:y}=o.value;y>1&&n({page:y-1})}function V(){const{page:y,rowsPerPage:B}=o.value;f.value>0&&y*B<p.value&&n({page:y+1})}function A(){n({page:r.value})}return s["onUpdate:pagination"]!==void 0&&c("update:pagination",{...o.value}),{firstRowIndex:a,lastRowIndex:f,isFirstPage:g,isLastPage:b,pagesNumber:r,computedRowsPerPageOptions:h,computedRowsNumber:p,firstPage:w,prevPage:k,nextPage:V,lastPage:A}}const Hl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Il=["update:selected","selection"];function Ql(e,t,o,i){const n=u(()=>{const b={};return e.selected.map(i.value).forEach(h=>{b[h]=!0}),b}),d=u(()=>e.selection!=="none"),s=u(()=>e.selection==="single"),c=u(()=>e.selection==="multiple"),_=u(()=>o.value.length!==0&&o.value.every(b=>n.value[i.value(b)]===!0)),p=u(()=>_.value!==!0&&o.value.some(b=>n.value[i.value(b)]===!0)),a=u(()=>e.selected.length);function f(b){return n.value[b]===!0}function g(){t("update:selected",[])}function r(b,h,w,k){t("selection",{rows:h,added:w,keys:b,evt:k});const V=s.value===!0?w===!0?h:[]:w===!0?e.selected.concat(h):e.selected.filter(A=>b.includes(i.value(A))===!1);t("update:selected",V)}return{hasSelectionMode:d,singleSelection:s,multipleSelection:c,allRowsSelected:_,someRowsSelected:p,rowsSelectedNumber:a,isRowSelected:f,clearSelection:g,updateSelection:r}}function ct(e){return Array.isArray(e)?e.slice():[]}const Wl={expanded:Array},Kl=["update:expanded"];function Gl(e,t){const o=D(ct(e.expanded));Y(()=>e.expanded,s=>{o.value=ct(s)});function i(s){return o.value.includes(s)}function n(s){e.expanded!==void 0?t("update:expanded",s):o.value=s}function d(s,c){const _=o.value.slice(),p=_.indexOf(s);c===!0?p===-1&&(_.push(s),n(_)):p!==-1&&(_.splice(p,1),n(_))}return{isRowExpanded:i,setExpanded:n,updateExpanded:d}}const Jl={visibleColumns:Array};function Xl(e,t,o){const i=u(()=>{if(e.columns!==void 0)return e.columns;const c=e.rows[0];return c!==void 0?Object.keys(c).map(_=>({name:_,label:_.toUpperCase(),field:_,align:je(c[_])?"right":"left",sortable:!0})):[]}),n=u(()=>{const{sortBy:c,descending:_}=t.value;return(e.visibleColumns!==void 0?i.value.filter(a=>a.required===!0||e.visibleColumns.includes(a.name)===!0):i.value).map(a=>{const f=a.align||"right",g=`text-${f}`;return{...a,align:f,__iconClass:`q-table__sort-icon q-table__sort-icon--${f}`,__thClass:g+(a.headerClasses!==void 0?" "+a.headerClasses:"")+(a.sortable===!0?" sortable":"")+(a.name===c?` sorted ${_===!0?"sort-desc":""}`:""),__tdStyle:a.style!==void 0?typeof a.style!="function"?()=>a.style:a.style:()=>null,__tdClass:a.classes!==void 0?typeof a.classes!="function"?()=>g+" "+a.classes:r=>g+" "+a.classes(r):()=>g}})}),d=u(()=>{const c={};return n.value.forEach(_=>{c[_.name]=_}),c}),s=u(()=>e.tableColspan!==void 0?e.tableColspan:n.value.length+(o.value===!0?1:0));return{colList:i,computedCols:n,computedColsMap:d,computedColspan:s}}const xe="q-table__bottom row items-center",xt={};yt.forEach(e=>{xt[e]={}});const Yl=K({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...xt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Ee,...xl,...Jl,...Nl,...Ml,...Wl,...Hl,...Fl},emits:["request","virtualScroll",...ql,...Kl,...Il],setup(e,{slots:t,emit:o}){const i=re(),{proxy:{$q:n}}=i,d=Ue(e,n),{inFullscreen:s,toggleFullscreen:c}=kl(),_=u(()=>typeof e.rowKey=="function"?e.rowKey:l=>l[e.rowKey]),p=D(null),a=D(null),f=u(()=>e.grid!==!0&&e.virtualScroll===!0),g=u(()=>" q-table__card"+(d.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),r=u(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":g.value)+(d.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(s.value===!0?" fullscreen scroll":"")),b=u(()=>r.value+(e.loading===!0?" q-table--loading":""));Y(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+r.value,()=>{f.value===!0&&a.value!==null&&a.value.reset()});const{innerPagination:h,computedPagination:w,isServerSide:k,requestServerInteraction:V,setPagination:A}=El(i,oe),{computedFilterMethod:y}=jl(e,A),{isRowExpanded:B,setExpanded:L,updateExpanded:W}=Gl(e,o),j=u(()=>{let l=e.rows;if(k.value===!0||l.length===0)return l;const{sortBy:m,descending:q}=w.value;return e.filter&&(l=y.value(l,e.filter,G.value,oe)),Bt.value!==null&&(l=$t.value(e.rows===l?l.slice():l,m,q)),l}),We=u(()=>j.value.length),te=u(()=>{let l=j.value;if(k.value===!0)return l;const{rowsPerPage:m}=w.value;return m!==0&&(ge.value===0&&e.rows!==l?l.length>be.value&&(l=l.slice(0,be.value)):l=l.slice(ge.value,be.value)),l}),{hasSelectionMode:le,singleSelection:qt,multipleSelection:Ke,allRowsSelected:kt,someRowsSelected:Ge,rowsSelectedNumber:Ce,isRowSelected:Pe,clearSelection:Ct,updateSelection:me}=Ql(e,o,te,_),{colList:Pt,computedCols:G,computedColsMap:Je,computedColspan:Xe}=Xl(e,w,le),{columnToSort:Bt,computedSortMethod:$t,sort:Be}=Dl(e,w,Pt,A),{firstRowIndex:ge,lastRowIndex:be,isFirstPage:$e,isLastPage:Re,pagesNumber:pe,computedRowsPerPageOptions:Rt,computedRowsNumber:ye,firstPage:Ve,prevPage:Te,nextPage:Le,lastPage:Ae}=Ul(i,h,w,k,A,We),Vt=u(()=>te.value.length===0),Tt=u(()=>{const l={};return yt.forEach(m=>{l[m]=e[m]}),l.virtualScrollItemSize===void 0&&(l.virtualScrollItemSize=e.dense===!0?28:48),l});function Lt(){f.value===!0&&a.value.reset()}function At(){if(e.grid===!0)return Qt();const l=e.hideHeader!==!0?lt:null;if(f.value===!0){const q=t["top-row"],C=t["bottom-row"],$={default:F=>Ze(F.item,t.body,F.index)};if(q!==void 0){const F=v("tbody",q({cols:G.value}));$.before=l===null?()=>F:()=>[l()].concat(F)}else l!==null&&($.before=l);return C!==void 0&&($.after=()=>v("tbody",C({cols:G.value}))),v(Al,{ref:a,class:e.tableClass,style:e.tableStyle,...Tt.value,scrollTarget:e.virtualScrollTarget,items:te.value,type:"__qtable",tableColspan:Xe.value,onVirtualScroll:Ft},$)}const m=[Dt()];return l!==null&&m.unshift(l()),St({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},m)}function Ot(l,m){if(a.value!==null){a.value.scrollTo(l,m);return}l=parseInt(l,10);const q=p.value.querySelector(`tbody tr:nth-of-type(${l+1})`);if(q!==null){const C=p.value.querySelector(".q-table__middle.scroll"),$=q.offsetTop-e.virtualScrollStickySizeStart,F=$<C.scrollTop?"decrease":"increase";C.scrollTop=$,o("virtualScroll",{index:l,from:0,to:h.value.rowsPerPage-1,direction:F})}}function Ft(l){o("virtualScroll",l)}function Ye(){return[v(Pl,{class:"q-table__linear-progress",color:e.color,dark:d.value,indeterminate:!0,trackColor:"transparent"})]}function Ze(l,m,q){const C=_.value(l),$=Pe(C);if(m!==void 0)return m(et({key:C,row:l,pageIndex:q,__trClass:$?"selected":""}));const F=t["body-cell"],O=G.value.map(E=>{const we=t[`body-cell-${E.name}`],Se=we!==void 0?we:F;return Se!==void 0?Se(Nt({key:C,row:l,pageIndex:q,col:E})):v("td",{class:E.__tdClass(l),style:E.__tdStyle(l)},oe(E,l))});if(le.value===!0){const E=t["body-selection"],we=E!==void 0?E(jt({key:C,row:l,pageIndex:q})):[v(De,{modelValue:$,color:e.color,dark:d.value,dense:e.dense,"onUpdate:modelValue":(Se,Wt)=>{me([C],[l],Se,Wt)}})];O.unshift(v("td",{class:"q-table--col-auto-width"},we))}const J={key:C,class:{selected:$}};return e.onRowClick!==void 0&&(J.class["cursor-pointer"]=!0,J.onClick=E=>{o("RowClick",E,l,q)}),e.onRowDblclick!==void 0&&(J.class["cursor-pointer"]=!0,J.onDblclick=E=>{o("RowDblclick",E,l,q)}),e.onRowContextmenu!==void 0&&(J.class["cursor-pointer"]=!0,J.onContextmenu=E=>{o("RowContextmenu",E,l,q)}),v("tr",J,O)}function Dt(){const l=t.body,m=t["top-row"],q=t["bottom-row"];let C=te.value.map(($,F)=>Ze($,l,F));return m!==void 0&&(C=m({cols:G.value}).concat(C)),q!==void 0&&(C=C.concat(q({cols:G.value}))),v("tbody",C)}function et(l){return Oe(l),l.cols=l.cols.map(m=>ie({...m},"value",()=>oe(m,l.row))),l}function Nt(l){return Oe(l),ie(l,"value",()=>oe(l.col,l.row)),l}function jt(l){return Oe(l),l}function Oe(l){Object.assign(l,{cols:G.value,colsMap:Je.value,sort:Be,rowIndex:ge.value+l.pageIndex,color:e.color,dark:d.value,dense:e.dense}),le.value===!0&&ie(l,"selected",()=>Pe(l.key),(m,q)=>{me([l.key],[l.row],m,q)}),ie(l,"expand",()=>B(l.key),m=>{W(l.key,m)})}function oe(l,m){const q=typeof l.field=="function"?l.field(m):m[l.field];return l.format!==void 0?l.format(q,m):q}const ae=u(()=>({pagination:w.value,pagesNumber:pe.value,isFirstPage:$e.value,isLastPage:Re.value,firstPage:Ve,prevPage:Te,nextPage:Le,lastPage:Ae,inFullscreen:s.value,toggleFullscreen:c}));function zt(){const l=t.top,m=t["top-left"],q=t["top-right"],C=t["top-selection"],$=le.value===!0&&C!==void 0&&Ce.value>0,F="q-table__top relative-position row items-center";if(l!==void 0)return v("div",{class:F},[l(ae.value)]);let O;if($===!0?O=C(ae.value).slice():(O=[],m!==void 0?O.push(v("div",{class:"q-table__control"},[m(ae.value)])):e.title&&O.push(v("div",{class:"q-table__control"},[v("div",{class:["q-table__title",e.titleClass]},e.title)]))),q!==void 0&&(O.push(v("div",{class:"q-table__separator col"})),O.push(v("div",{class:"q-table__control"},[q(ae.value)]))),O.length!==0)return v("div",{class:F},O)}const tt=u(()=>Ge.value===!0?null:kt.value);function lt(){const l=Mt();return e.loading===!0&&t.loading===void 0&&l.push(v("tr",{class:"q-table__progress"},[v("th",{class:"relative-position",colspan:Xe.value},Ye())])),v("thead",l)}function Mt(){const l=t.header,m=t["header-cell"];if(l!==void 0)return l(Fe({header:!0})).slice();const q=G.value.map(C=>{const $=t[`header-cell-${C.name}`],F=$!==void 0?$:m,O=Fe({col:C});return F!==void 0?F(O):v(wt,{key:C.name,props:O},()=>C.label)});if(qt.value===!0&&e.grid!==!0)q.unshift(v("th",{class:"q-table--col-auto-width"}," "));else if(Ke.value===!0){const C=t["header-selection"],$=C!==void 0?C(Fe({})):[v(De,{color:e.color,modelValue:tt.value,dark:d.value,dense:e.dense,"onUpdate:modelValue":ot})];q.unshift(v("th",{class:"q-table--col-auto-width"},$))}return[v("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},q)]}function Fe(l){return Object.assign(l,{cols:G.value,sort:Be,colsMap:Je.value,color:e.color,dark:d.value,dense:e.dense}),Ke.value===!0&&ie(l,"selected",()=>tt.value,ot),l}function ot(l){Ge.value===!0&&(l=!1),me(te.value.map(_.value),te.value,l)}const he=u(()=>{const l=[e.iconFirstPage||n.iconSet.table.firstPage,e.iconPrevPage||n.iconSet.table.prevPage,e.iconNextPage||n.iconSet.table.nextPage,e.iconLastPage||n.iconSet.table.lastPage];return n.lang.rtl===!0?l.reverse():l});function Et(){if(e.hideBottom===!0)return;if(Vt.value===!0){if(e.hideNoData===!0)return;const q=e.loading===!0?e.loadingLabel||n.lang.table.loading:e.filter?e.noResultsLabel||n.lang.table.noResults:e.noDataLabel||n.lang.table.noData,C=t["no-data"],$=C!==void 0?[C({message:q,icon:n.iconSet.table.warning,filter:e.filter})]:[v(ke,{class:"q-table__bottom-nodata-icon",name:n.iconSet.table.warning}),q];return v("div",{class:xe+" q-table__bottom--nodata"},$)}const l=t.bottom;if(l!==void 0)return v("div",{class:xe},[l(ae.value)]);const m=e.hideSelectedBanner!==!0&&le.value===!0&&Ce.value>0?[v("div",{class:"q-table__control"},[v("div",[(e.selectedRowsLabel||n.lang.table.selectedRecords)(Ce.value)])])]:[];if(e.hidePagination!==!0)return v("div",{class:xe+" justify-end"},Ht(m));if(m.length!==0)return v("div",{class:xe},m)}function Ut(l){A({page:1,rowsPerPage:l.value})}function Ht(l){let m;const{rowsPerPage:q}=w.value,C=e.paginationLabel||n.lang.table.pagination,$=t.pagination,F=e.rowsPerPageOptions.length>1;if(l.push(v("div",{class:"q-table__separator col"})),F===!0&&l.push(v("div",{class:"q-table__control"},[v("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||n.lang.table.recordsPerPage]),v(bl,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:q,options:Rt.value,displayValue:q===0?n.lang.table.allRows:q,dark:d.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Ut})])),$!==void 0)m=$(ae.value);else if(m=[v("span",q!==0?{class:"q-table__bottom-item"}:{},[q?C(ge.value+1,Math.min(be.value,ye.value),ye.value):C(1,We.value,ye.value)])],q!==0&&pe.value>1){const O={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(O.size="sm"),pe.value>2&&m.push(v(X,{key:"pgFirst",...O,icon:he.value[0],disable:$e.value,onClick:Ve})),m.push(v(X,{key:"pgPrev",...O,icon:he.value[1],disable:$e.value,onClick:Te}),v(X,{key:"pgNext",...O,icon:he.value[2],disable:Re.value,onClick:Le})),pe.value>2&&m.push(v(X,{key:"pgLast",...O,icon:he.value[3],disable:Re.value,onClick:Ae}))}return l.push(v("div",{class:"q-table__control"},m)),l}function It(){const l=e.gridHeader===!0?[v("table",{class:"q-table"},[lt()])]:e.loading===!0&&t.loading===void 0?Ye():void 0;return v("div",{class:"q-table__middle"},l)}function Qt(){const l=t.item!==void 0?t.item:m=>{const q=m.cols.map($=>v("div",{class:"q-table__grid-item-row"},[v("div",{class:"q-table__grid-item-title"},[$.label]),v("div",{class:"q-table__grid-item-value"},[$.value])]));if(le.value===!0){const $=t["body-selection"],F=$!==void 0?$(m):[v(De,{modelValue:m.selected,color:e.color,dark:d.value,dense:e.dense,"onUpdate:modelValue":(O,J)=>{me([m.key],[m.row],O,J)}})];q.unshift(v("div",{class:"q-table__grid-item-row"},F),v(il,{dark:d.value}))}const C={class:["q-table__grid-item-card"+g.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(C.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(C.onClick=$=>{o("RowClick",$,m.row,m.pageIndex)}),e.onRowDblclick!==void 0&&(C.onDblclick=$=>{o("RowDblclick",$,m.row,m.pageIndex)})),v("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(m.selected===!0?" q-table__grid-item--selected":"")},[v("div",C,q)])};return v("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},te.value.map((m,q)=>l(et({key:_.value(m),row:m,pageIndex:q}))))}return Object.assign(i.proxy,{requestServerInteraction:V,setPagination:A,firstPage:Ve,prevPage:Te,nextPage:Le,lastPage:Ae,isRowSelected:Pe,clearSelection:Ct,isRowExpanded:B,setExpanded:L,sort:Be,resetVirtualScroll:Lt,scrollTo:Ot,getCellValue:oe}),rl(i.proxy,{filteredSortedRows:()=>j.value,computedRows:()=>te.value,computedRowsNumber:()=>ye.value}),()=>{const l=[zt()],m={ref:p,class:b.value};return e.grid===!0?l.push(It()):Object.assign(m,{class:[m.class,e.cardClass],style:e.cardStyle}),l.push(At(),Et()),e.loading===!0&&t.loading!==void 0&&l.push(t.loading()),v("div",m,l)}}}),Zl=K({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const o=re(),i=u(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return v("td",{class:i.value},se(t.default));const n=o.vnode.key,d=(e.props.colsMap!==void 0?e.props.colsMap[n]:null)||e.props.col;if(d===void 0)return;const{row:s}=e.props;return v("td",{class:i.value+d.__tdClass(s),style:d.__tdStyle(s)},se(t.default))}}}),eo=K({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:t}){const o=u(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>v("tr",{class:o.value},se(t.default))}}),to={class:"flex flex-col"},lo={class:"q-pa-md"},oo={class:"text-sm"},ao={class:"row items-center no-wrap"},no={class:"text-center leading-4"},so=x("br",null,null,-1),ro={key:0,class:"p-4 mt-8 bg-gray-900"},io={key:0,class:"p-4 flex flex-col text-2xl items-center gap-2"},uo=x("div",null,"Liquidity Added ðŸŽ‰",-1),co={class:"text-sm text-blue-500"},vo=["href"],_o=fe({__name:"JoinPool",props:{pool:{},pricingAsset:{}},setup(e){const t=e,o=u(()=>t.pool?N(Qe).with("pool_tokens").find(t.pool):null),i=u(()=>N(Ne).where("pool_id",o.value?.id).orderBy("index").get());let n=u(()=>i.value?.map(r=>({id:r.id,address:r.address,token_id:r.pool_token_id,symbol:r.symbol,decimal:r.decimals,index:r.index,priceRate:1,amount:"0"})));u(()=>o.value?.pool_tokens.map(r=>({balance:H(r.balance),index:r.index})));const d=D(new Array(n.value.length).fill(D(null))),s=n.value?.map(r=>D(void 0)),c=n.value?.map(r=>D(void 0));let _=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});const p=(r,b)=>{if(r in ze.mockPriceData&&s[b].value&&!isNaN(parseInt(s[b].value))){const h=H(s[b].value).multipliedBy(ze.mockPriceData[r]);c[b].value=h.toNumber()}};u(()=>{if(t.pricingAsset){const r=s[t.pricingAsset.index].value;return isNaN(parseInt(r))?Ne.formatPrice("0"):Ne.formatPrice(r)}return null});const a=D(!1),f=D(null),g=async()=>{a.value=!0;try{if(d.value.every((r,b)=>r.value[b].validate())){const b=await(await ve().getDAppClient()).getActiveAccount(),h=N(_e).find(b.address),w=i.value.map(y=>({address:y.address,id:y.FA2?y.pool_token_id:null,decimals:y.decimals,index:y.index})),k=await pl({address:o.value.address,id:o.value.poolId},s.map((y,B)=>[B,H(y.value)]),w,parseInt(h?.slippage)/100,o.value.pool_shares==0),V=k.opHash,A=await k.confirmation();console.log(A),f.value=V,s.forEach((y,B)=>s[B].value=void 0),N(ee).fetchPoolData()}}catch(r){console.log(r)}a.value=!1};return(r,b)=>{const h=He,w=Ie,k=ke,V=X,A=mt,y=ht,B=pt;return T(),M("div",to,[x("div",null,[x("div",lo,[(T(!0),M(ne,null,ce(S(n),L=>(T(),Q(A,{ref_for:!0,ref:S(d)[L.index],key:"id",dark:"",outlined:"",color:"white",type:"number",placeholder:"0.00","bottom-slots":"",modelValue:S(s)[L.index].value,"onUpdate:modelValue":[W=>S(s)[L.index].value=W,W=>p(L.symbol,L.index)],"input-class":"focus:ring-0 focus:ring-offset-0",rules:[W=>W>0||"No amount entered",W=>Number(W)<=Number(S(i)[L.index].normalizedBalance())||"Not enough Balance"],"lazy-rules":"ondemand"},{before:R(()=>[P(w,{size:"40px"},{default:R(()=>[P(h,{src:S(i)[L.index].icon,"spinner-color":"white"},null,8,["src"])]),_:2},1024)]),append:R(()=>[x("div",oo,z(S(c)[L.index].value?S(_).format(S(c)[L.index].value):""),1)]),after:R(()=>[P(V,{color:"orange",outline:"",dense:"",onClick:()=>{S(s)[L.index].value=S(i)[L.index].normalizedBalance(),p(L.symbol,L.index)}},{default:R(()=>[x("div",ao,[P(k,{left:"",name:"wallet"}),x("div",no,[I(z(L.symbol)+" ",1),so,I(" "+z(S(i)[L.index].formatBalance()),1)])])]),_:2},1032,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","rules"]))),128)),S(a)||S(f)?(T(),M("div",ro,[S(f)?(T(),M("div",io,[uo,x("div",co,[x("a",{href:`https://ghostnet.tzkt.io/${S(f)}`,target:"_blank"},z(S(f)),9,vo)])])):Z("",!0),S(a)?(T(),Q(y,{key:1,type:"text"})):Z("",!0)])):Z("",!0),P(V,{loading:S(a),color:"black",spread:"","no-caps":"","text-color":"white",label:"Add Liquidity",class:"full-width",onClick:g},{loading:R(()=>[P(B,{class:"on-left"}),I(" Sending... ")]),_:1},8,["loading"])])])])}}}),fo=async(e,t,o,i,n="0.5",d)=>{const s=await e.wallet.pkh();if(t){const c=U.address(s),_=d?U.address(d):U.address(s),p=U.map(t.pool_tokens.map(b=>({key:U.nat(b.index),value:{0:U.address(b.address),1:U.nat(b.pool_token_id)}}))),a=U.map(i.map(b=>({key:U.nat(b.index),value:U.nat(b.amount.minus(b.amount.multipliedBy(Number(n)/100)).toFixed(0))}))),f=U.nat(5);return(await e.wallet.at(ze.contracts.vault)).methodsObject.exitPool({poolId:{0:U.address(t.address),1:U.nat(t.poolId)},recipient:_,sender:c,request:{assets:p,limits:a,userData:{amountsOut:void 0,maxSPTAmountIn:void 0,sptAmountIn:U.nat(o),tokenIndex:void 0,kind:f,recoveryModeExit:!1}}})}},mo={class:"q-pa-sm"},go={class:"flex flex-row justify-between gap-x-1 mx-4 my-1"},bo=x("div",{class:"place-self-end font-bold"},"How much to withdraw?",-1),po={class:"flex flex-row gap-x-1"},yo={class:"pb-2"},ho={class:"my-1"},wo={class:"row items-center no-wrap"},So={class:"text-center leading-4"},xo=x("br",null,null,-1),qo=x("div",{class:"text-center text-md font-bold pb-1"}," You will receive at least: ",-1),ko={class:"grid grid-cols-2 gap-3"},Co={class:"flex justify-center items-center"},Po={class:"text-sm font-bold"},Bo=x("br",null,null,-1),$o={class:"text-xs font-thin grey"},Ro={key:0,class:"p-4 mt-8 bg-gray-900"},Vo={key:0,class:"p-4 flex flex-col text-2xl items-center gap-2"},To=x("div",null,"Liquidity Removed ðŸŽ‰",-1),Lo={class:"text-sm text-blue-500"},Ao=["href"],Oo=fe({__name:"ExitPool",props:{pool:{}},setup(e){const t=e,o=u(()=>t.pool?N(Qe).with("pool_tokens").find(t.pool):null),i=D(null),n=D(void 0),d=D(!1),s=g=>{const r=H(o.value?.userLPBalance).dividedBy(100).multipliedBy(g).dividedBy(1e18);n.value=r.toString()},c=u(()=>o.value?.pool_tokens.map(g=>({balance:H(g.balance),index:g.index})));console.log(c.value[0].balance.toString());const _=u(()=>rt(H(n.value).multipliedBy(1e18),H(o.value?.pool_shares),c.value)),p=u(()=>{if(!n.value||isNaN(parseInt(n.value)))return new Array(o.value?.pool_tokens.length).fill("0.00");const g=rt(H(n.value).multipliedBy(10**18),H(o.value?.pool_shares),c.value),r=N(_e).all()[0];let b="0.005";return r&&(b=(Number(r.slippage)/100).toString()),g.map(h=>yl(h.amount.minus(h.amount.multipliedBy(b))).format({average:!0,totalLength:6}))}),a=D(null),f=async()=>{d.value=!0;try{const g=_.value.map(B=>({index:B.index,amount:H(B.amount.toFixed(18)).multipliedBy(1e18)}));i.value.validate();const r=await ve().tezos(),h=await(await ve().getDAppClient()).getActiveAccount(),w=N(_e).find(h.address),V=await(await fo(r,o.value,H(H(n.value).toFixed(18)).multipliedBy(10**18),g,w?.slippage)).send(),A=V.opHash,y=await V.confirmation();console.log(y),a.value=A,n.value=void 0,N(ee).fetchPoolData()}catch(g){console.log(g)}d.value=!1};return(g,r)=>{const b=X,h=ke,w=mt,k=He,V=Ie,A=gt,y=bt,B=ht,L=pt,W=ul;return T(),M(ne,null,[x("div",mo,[x("div",go,[bo,x("div",po,[P(b,{outline:"",dense:"",label:"25%",onClick:r[0]||(r[0]=j=>s(25))}),P(b,{outline:"",dense:"",label:"50%",onClick:r[1]||(r[1]=j=>s(50))}),P(b,{outline:"",dense:"",label:"75%",onClick:r[2]||(r[2]=j=>s(75))})])]),x("div",yo,[P(w,{ref_key:"inputRef",ref:i,dark:"",outlined:"",dense:"","item-aligned":"",color:"white",modelValue:S(n),"onUpdate:modelValue":r[4]||(r[4]=j=>Me(n)?n.value=j:null),placeholder:"0.00",type:"number",step:"0.01","input-class":"focus:ring-0 focus:ring-offset-0",rules:[j=>j>0||"No amount entered",j=>j<=S(o).normalizedLPBalance()||"Not enough Balance"],"lazy-rules":"ondemand","no-error-icon":""},{after:R(()=>[x("div",ho,[P(b,{dense:"",color:"orange",outline:"",onClick:r[3]||(r[3]=j=>s(100))},{default:R(()=>[x("div",wo,[P(h,{left:"",name:"wallet"}),x("div",So,[I(z(S(o)?.symbol)+" ",1),xo,I(" "+z(S(o)?.formatLPBalance()),1)])])]),_:1})])]),_:1},8,["modelValue","rules"])]),x("div",null,[qo,x("div",ko,[(T(!0),M(ne,null,ce(S(o)?.pool_tokens,j=>(T(),Q(y,{dark:"",flat:"",bordered:"",key:"token"},{default:R(()=>[P(A,{horizontal:""},{default:R(()=>[x("div",Co,[P(V,{size:"75px"},{default:R(()=>[P(k,{class:"col-5",src:j.icon},null,8,["src"])]),_:2},1024)]),P(A,null,{default:R(()=>[x("div",Po,[I(z(S(p)[j.index])+" ",1),Bo,x("span",$o,z(j.symbol),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])])]),S(d)||S(a)?(T(),M("div",Ro,[S(a)?(T(),M("div",Vo,[To,x("div",Lo,[x("a",{href:`https://ghostnet.tzkt.io/${S(a)}`,target:"_blank"},z(S(a)),9,Ao)])])):Z("",!0),S(d)?(T(),Q(B,{key:1,type:"text"})):Z("",!0)])):Z("",!0),P(W,{align:"center"},{default:R(()=>[P(b,{loading:S(d),color:"black",spread:"","no-caps":"","text-color":"white",class:"full-width bg-black",label:"Remove Liquidity",onClick:f},{loading:R(()=>[P(L,{class:"on-left"}),I(" Sending... ")]),_:1},8,["loading"])]),_:1})],64)}}}),Fo=x("div",{class:"text-h6"},"Manage Pool",-1),Do={class:"pt-3 flex justify-end"},No=fe({__name:"ManagePool",props:{pool:{}},async setup(e){let t,o;const i=e,n=D(!0),d=u(()=>!!i.pool),s=u(()=>i.pool?N(Qe).with("pool_tokens").find(i.pool):null),c=u(()=>{const a=s.value?.pool_tokens.find(f=>f.isStable());return a||null}),_=([t,o]=de(()=>ve().tezos()),t=await t,o(),t),p=([t,o]=de(()=>_.wallet.pkh()),t=await t,o(),t);return s.value&&N(ee).updateUserBalances(s.value,p),s.value&&N(ee).updateUserLPBalance(s.value,p),s.value&&N(ee).updatePoolShares(s.value),(a,f)=>{const g=Vl,r=X,b=gt,h=Sl,w=_l,k=_o,V=Oo,A=bt,y=cl;return T(),Q(y,{dark:"",modelValue:S(d),"onUpdate:modelValue":f[2]||(f[2]=B=>Me(d)?d.value=B:null)},{default:R(()=>[P(A,{dark:"",flat:"",style:{"min-width":"400px","max-width":"80vw"}},{default:R(()=>[P(b,{class:"row items-center q-pb-none"},{default:R(()=>[Fo,P(g),P(r,{icon:"close",flat:"",round:"",dense:"",onClick:f[0]||(f[0]=B=>a.$emit("PoolDialogClose"))})]),_:1}),P(b,null,{default:R(()=>[P(h,{modelValue:S(n),"onUpdate:modelValue":f[1]||(f[1]=B=>Me(n)?n.value=B:null),spread:"","no-caps":"","toggle-color":"orange",color:"white","text-color":"black",options:[{label:"Add Liquidity",value:!0},{label:"Remove Liquidity",value:!1}]},null,8,["modelValue"]),x("div",Do,[P(w)])]),_:1}),S(d)&&S(n)?(T(),Q(k,{key:0,pool:i.pool,pricingAsset:S(c)},null,8,["pool","pricingAsset"])):Z("",!0),S(d)&&!S(n)?(T(),Q(V,{key:1,pool:i.pool},null,8,["pool"])):Z("",!0)]),_:1})]),_:1},8,["modelValue"])}}}),jo={class:"flex flex-col"},zo={key:0,class:"text-lg"},Mo={key:1,class:"text-red-500"},Eo={key:2,class:"space-y-4"},Uo={class:"q-pa-md"},Ho={class:"flex flex-row w-full justify-between pt-2"},Io=x("div",{class:"font-bold text-2xl"},"Pools",-1),Qo={class:"flex gap-2"},Wo={class:"grid grid-cols-12 grid-flow-col auto-cols-min"},Ko={class:"col-span-4"},Go={class:"col-span-8 flex flex-wrap gap-y-1"},Jo=fe({__name:"PoolsList",props:{poolsList:{},pending:{type:Boolean},error:{}},setup(e){console.log(e.poolsList);const o=[{name:"composition",field:"composition",label:"Composition",sortable:!1,align:"left"},{name:"swap_fee",field:"swap_fee",label:"Swap Fee"},{name:"total_liquidity",field:"total_liquidity",label:"Liquidity",sortable:!0},{name:"total_swap_volume",field:"total_swap_volume",label:"Total Volume",sortable:!0}];let i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});const n=u(()=>N(_e).all()[0]),d=D(null),s=p=>{d.value=p},c=()=>{d.value=null},_=async()=>{await N(ee).fetchPoolData()};return(p,a)=>{const f=X,g=wt,r=eo,b=He,h=Ie,w=wl,k=Zl,V=Yl,A=No;return T(),M("div",jo,[p.pending?(T(),M("div",zo,"Loading...")):p.error?(T(),M("div",Mo," An error occurred: "+z(p.error.message),1)):(T(),M("div",Eo,[x("div",Uo,[P(V,{flat:"",title:"Pools",dark:"",rows:p.poolsList,columns:o,"row-key":"name",separator:"none","column-sort-order":"da","table-header-class":"font-bold"},{top:R(y=>[x("div",Ho,[Io,x("div",Qo,[P(f,{dark:"",dense:"",outline:"",rounded:"",icon:"refresh",onClick:_}),P(f,{dark:"",dense:"",outline:"",rounded:"",icon:"add",to:"/pools/create"})])])]),header:R(y=>[P(r,{props:y},{default:R(()=>[(T(!0),M(ne,null,ce(y.cols,B=>(T(),Q(g,{key:B.name,props:y},{default:R(()=>[I(z(B.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:R(y=>[P(r,{props:y},{default:R(()=>[P(k,{key:"composition",props:y},{default:R(()=>[x("div",Wo,[x("div",Ko,[(T(!0),M(ne,null,ce(y.row.icons,(B,L)=>(T(),Q(h,{key:L,size:"35px",class:"bg-black",style:dl(`left: ${L*-15}px`)},{default:R(()=>[P(b,{src:y.row.icons[L]},null,8,["src"])]),_:2},1032,["style"]))),128))]),x("div",Go,[(T(!0),M(ne,null,ce(y.row.composition,B=>(T(),Q(w,{key:"token",color:"black",class:"mx-1"},{default:R(()=>[I(z(B.symbol)+" "+z(B.weight),1)]),_:2},1024))),128))])])]),_:2},1032,["props"]),P(k,{key:"swap_fee",props:y},{default:R(()=>[I(z(y.row.swap_fee)+"% ",1)]),_:2},1032,["props"]),P(k,{key:"total_liquidity",props:y},{default:R(()=>[I(z(S(i).format(y.row.total_liquidity)),1)]),_:2},1032,["props"]),P(k,{key:"total_swap_volume",props:y},{default:R(()=>[I(z(y.row.total_swap_volume),1)]),_:2},1032,["props"]),P(k,null,{default:R(()=>[P(f,{label:"Manage",disable:!S(n),"no-caps":"",color:"black",onClick:B=>s(y.row.address)},null,8,["disable","onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows"])])])),S(d)?(T(),Q(A,{key:3,onPoolDialogClose:c,pool:S(d)},null,8,["pool"])):Z("",!0)])}}}),Xo={class:"grid w-full grid-cols-12"},Yo={class:"col-span-12 w-full md:col-span-8 q-pa-md"},Zo=x("div",{class:"text-2xl font-bold"},"TVL",-1),ea={class:"text-4xl font-extrabold"},ta=x("div",{class:"col-span-12 w-full md:col-span-4 q-pa-md"},[x("div",{class:"text-2xl font-bold"},"Volume (24h)"),x("div",{class:"text-4xl font-extrabold"},"$15,043,564")],-1),la={class:"col-span-12 w-full md:col-span-12 mt-4"},va=fe({__name:"index",async setup(e){let t,o;const i=([t,o]=de(()=>ve().getDAppClient()),t=await t,o(),t),n=([t,o]=de(()=>i.getActiveAccount()),t=await t,o(),t);n&&N(_e).save({id:n.address,walletKey:n.walletKey,lastConnected:n.connectedAt,slippage:"0.5"});const d=fl(`
  query GetPool {
    indexer_pool(order_by: { total_liquidity: desc }) {
      holders_count
      swaps_count
      swap_enabled
      address
      index
      factory
      id
      owner
      create_time
      swap_fee
      total_liquidity
      total_shares
      total_swap_fee
      total_swap_volume
      name
      pool_type
      symbol
      tokens_list
      pool_tokens {
        address
        balance
        index
        decimals
        name
        symbol
        token_id
        weight
        id
        pool_id
        pool_token_id
        token {
          fa2
        }
      }
    }
  }
`),{pending:s,data:c,error:_}=([t,o]=de(()=>vl(d)),t=await t,o(),t);c.value&&c.value.indexer_pool&&N(ee).store(c.value);const p=u(()=>N(ee).tvl()),a=u(()=>N(ee).getPoolList());return(f,g)=>{const r=Jo;return T(),M("div",null,[x("div",Xo,[x("div",Yo,[Zo,x("div",ea,z(S(p)),1)]),ta,x("div",la,[P(r,{poolsList:S(a),pending:S(s),error:S(_)},null,8,["poolsList","pending","error"])])])])}}});export{va as default};
