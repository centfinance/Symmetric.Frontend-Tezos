import{_ as Ni,a as Ei,P as ei,T as Si,d as Ai,c as Ri,b as Ii}from"./PoolRepository.385d7de6.js";import{g as pi,I as Vt,H as Gt,o as Ft,c as Ht,b as Mt,w as At,k,q as Ur,a7 as Zt,d as Kt,a5 as Ti,a6 as ki,t as Yt,a4 as sr,a9 as Oi,ab as Ui,a8 as Bi,l as gi,i as Pt,az as Br,a3 as vi,aC as Ir,a as bt,s as Pi,m as Fi}from"./entry.70a44c3e.js";import{_ as Ci,a as Di}from"./QSkeleton.48979104.js";import{P as ni}from"./Pool.6cae3e70.js";import{B as $t,r as qi,a as Li,g as Vi,O as zi}from"./taquito.es6.be9aa50e.js";import{f as Gi,t as Et}from"./approve.f1e92b6e.js";import"./index.7ad58a7f.js";import"./index.b1eb048f.js";const Zi=pi({__name:"TokenSelect",props:{options:{},modelValue:{}},emits:["update:modelValue"],setup(l,{emit:n}){const d=l,m=Vt({get(){return d.modelValue},set(v){n("update:modelValue",v)}}),g=Gt(d.options),u=(v,S)=>{if(v===""){S(()=>{g.value=d.options});return}S(()=>{console.log(v);const b=v.toLowerCase();console.log(d.options.filter(w=>w.value.toLowerCase().indexOf(b)>-1)),g.value=d.options.filter(w=>w.value.toLowerCase().indexOf(b)>-1)})};return(v,S)=>{const b=Ni,w=Ei,x=Oi,gt=Ui,Tt=Bi,Rt=Ci;return Ft(),Ht("div",null,[Mt(Rt,{modelValue:k(m),"onUpdate:modelValue":S[0]||(S[0]=kt=>sr(m)?m.value=kt:null),rounded:"",outlined:"",dark:"",color:"orange","use-input":"","input-class":"hidden focus:ring-0 focus:ring-offset-0 text-2xl","input-debounce":"0",options:k(g),onFilter:u,behavior:"dialog"},{prepend:At(()=>[k(m)?(Ft(),Ur(w,{key:0},{default:At(()=>[Mt(b,{src:k(m).icon,"spinner-color":"white"},null,8,["src"])]),_:1})):Zt("",!0)]),"no-option":At(()=>[Mt(gt,null,{default:At(()=>[Mt(x,{class:"text-grey"},{default:At(()=>[Kt(" No results ")]),_:1})]),_:1})]),option:At(kt=>[Mt(gt,Ti(ki(kt.itemProps)),{default:At(()=>[Mt(x,{avatar:""},{default:At(()=>[Mt(b,{src:kt.opt.icon,"spinner-color":"white"},null,8,["src"])]),_:2},1024),Mt(x,null,{default:At(()=>[Mt(Tt,null,{default:At(()=>[Kt(Yt(kt.opt.label),1)]),_:2},1024),Mt(Tt,{caption:""},{default:At(()=>[Kt(Yt(kt.opt.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])])}}});$t.config({EXPONENTIAL_AT:[-100,100],ROUNDING_MODE:1,DECIMAL_PLACES:18});ar(0);ar(1);ar("Infinity");function ar(l){return new $t(l.toString())}var Cr={exports:{}};Cr.exports;(function(l){(function(n,d){function m(a,t){if(!a)throw new Error(t||"Assertion failed")}function g(a,t){a.super_=t;var i=function(){};i.prototype=t.prototype,a.prototype=new i,a.prototype.constructor=a}function u(a,t,i){if(u.isBN(a))return a;this.negative=0,this.words=null,this.length=0,this.red=null,a!==null&&((t==="le"||t==="be")&&(i=t,t=10),this._init(a||0,t||10,i||"be"))}typeof n=="object"?n.exports=u:d.BN=u,u.BN=u,u.wordSize=26;var v;try{typeof window<"u"&&typeof window.Buffer<"u"?v=window.Buffer:v=qi.Buffer}catch{}u.isBN=function(t){return t instanceof u?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===u.wordSize&&Array.isArray(t.words)},u.max=function(t,i){return t.cmp(i)>0?t:i},u.min=function(t,i){return t.cmp(i)<0?t:i},u.prototype._init=function(t,i,e){if(typeof t=="number")return this._initNumber(t,i,e);if(typeof t=="object")return this._initArray(t,i,e);i==="hex"&&(i=16),m(i===(i|0)&&i>=2&&i<=36),t=t.toString().replace(/\s+/g,"");var s=0;t[0]==="-"&&(s++,this.negative=1),s<t.length&&(i===16?this._parseHex(t,s,e):(this._parseBase(t,i,s),e==="le"&&this._initArray(this.toArray(),i,e)))},u.prototype._initNumber=function(t,i,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(m(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),e==="le"&&this._initArray(this.toArray(),i,e)},u.prototype._initArray=function(t,i,e){if(m(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var h,c,p=0;if(e==="be")for(s=t.length-1,h=0;s>=0;s-=3)c=t[s]|t[s-1]<<8|t[s-2]<<16,this.words[h]|=c<<p&67108863,this.words[h+1]=c>>>26-p&67108863,p+=24,p>=26&&(p-=26,h++);else if(e==="le")for(s=0,h=0;s<t.length;s+=3)c=t[s]|t[s+1]<<8|t[s+2]<<16,this.words[h]|=c<<p&67108863,this.words[h+1]=c>>>26-p&67108863,p+=24,p>=26&&(p-=26,h++);return this._strip()};function S(a,t){var i=a.charCodeAt(t);if(i>=48&&i<=57)return i-48;if(i>=65&&i<=70)return i-55;if(i>=97&&i<=102)return i-87;m(!1,"Invalid character in "+a)}function b(a,t,i){var e=S(a,i);return i-1>=t&&(e|=S(a,i-1)<<4),e}u.prototype._parseHex=function(t,i,e){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var h=0,c=0,p;if(e==="be")for(s=t.length-1;s>=i;s-=2)p=b(t,i,s)<<h,this.words[c]|=p&67108863,h>=18?(h-=18,c+=1,this.words[c]|=p>>>26):h+=8;else{var o=t.length-i;for(s=o%2===0?i+1:i;s<t.length;s+=2)p=b(t,i,s)<<h,this.words[c]|=p&67108863,h>=18?(h-=18,c+=1,this.words[c]|=p>>>26):h+=8}this._strip()};function w(a,t,i,e){for(var s=0,h=0,c=Math.min(a.length,i),p=t;p<c;p++){var o=a.charCodeAt(p)-48;s*=e,o>=49?h=o-49+10:o>=17?h=o-17+10:h=o,m(o>=0&&h<e,"Invalid character"),s+=h}return s}u.prototype._parseBase=function(t,i,e){this.words=[0],this.length=1;for(var s=0,h=1;h<=67108863;h*=i)s++;s--,h=h/i|0;for(var c=t.length-e,p=c%s,o=Math.min(c,c-p)+e,r=0,f=e;f<o;f+=s)r=w(t,f,f+s,i),this.imuln(h),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r);if(p!==0){var y=1;for(r=w(t,f,t.length,i),f=0;f<p;f++)y*=i;this.imuln(y),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r)}this._strip()},u.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red};function x(a,t){a.words=t.words,a.length=t.length,a.negative=t.negative,a.red=t.red}if(u.prototype._move=function(t){x(t,this)},u.prototype.clone=function(){var t=new u(null);return this.copy(t),t},u.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},u.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},u.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{u.prototype[Symbol.for("nodejs.util.inspect.custom")]=gt}catch{u.prototype.inspect=gt}else u.prototype.inspect=gt;function gt(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var Tt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Rt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],kt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];u.prototype.toString=function(t,i){t=t||10,i=i|0||1;var e;if(t===16||t==="hex"){e="";for(var s=0,h=0,c=0;c<this.length;c++){var p=this.words[c],o=((p<<s|h)&16777215).toString(16);h=p>>>24-s&16777215,s+=2,s>=26&&(s-=26,c--),h!==0||c!==this.length-1?e=Tt[6-o.length]+o+e:e=o+e}for(h!==0&&(e=h.toString(16)+e);e.length%i!==0;)e="0"+e;return this.negative!==0&&(e="-"+e),e}if(t===(t|0)&&t>=2&&t<=36){var r=Rt[t],f=kt[t];e="";var y=this.clone();for(y.negative=0;!y.isZero();){var M=y.modrn(f).toString(t);y=y.idivn(f),y.isZero()?e=M+e:e=Tt[r-M.length]+M+e}for(this.isZero()&&(e="0"+e);e.length%i!==0;)e="0"+e;return this.negative!==0&&(e="-"+e),e}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},u.prototype.toJSON=function(){return this.toString(16,2)},v&&(u.prototype.toBuffer=function(t,i){return this.toArrayLike(v,t,i)}),u.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)};var er=function(t,i){return t.allocUnsafe?t.allocUnsafe(i):new t(i)};u.prototype.toArrayLike=function(t,i,e){this._strip();var s=this.byteLength(),h=e||Math.max(1,s);m(s<=h,"byte array longer than desired length"),m(h>0,"Requested array length <= 0");var c=er(t,h),p=i==="le"?"LE":"BE";return this["_toArrayLike"+p](c,s),c},u.prototype._toArrayLikeLE=function(t,i){for(var e=0,s=0,h=0,c=0;h<this.length;h++){var p=this.words[h]<<c|s;t[e++]=p&255,e<t.length&&(t[e++]=p>>8&255),e<t.length&&(t[e++]=p>>16&255),c===6?(e<t.length&&(t[e++]=p>>24&255),s=0,c=0):(s=p>>>24,c+=2)}if(e<t.length)for(t[e++]=s;e<t.length;)t[e++]=0},u.prototype._toArrayLikeBE=function(t,i){for(var e=t.length-1,s=0,h=0,c=0;h<this.length;h++){var p=this.words[h]<<c|s;t[e--]=p&255,e>=0&&(t[e--]=p>>8&255),e>=0&&(t[e--]=p>>16&255),c===6?(e>=0&&(t[e--]=p>>24&255),s=0,c=0):(s=p>>>24,c+=2)}if(e>=0)for(t[e--]=s;e>=0;)t[e--]=0},Math.clz32?u.prototype._countBits=function(t){return 32-Math.clz32(t)}:u.prototype._countBits=function(t){var i=t,e=0;return i>=4096&&(e+=13,i>>>=13),i>=64&&(e+=7,i>>>=7),i>=8&&(e+=4,i>>>=4),i>=2&&(e+=2,i>>>=2),e+i},u.prototype._zeroBits=function(t){if(t===0)return 26;var i=t,e=0;return i&8191||(e+=13,i>>>=13),i&127||(e+=7,i>>>=7),i&15||(e+=4,i>>>=4),i&3||(e+=2,i>>>=2),i&1||e++,e},u.prototype.bitLength=function(){var t=this.words[this.length-1],i=this._countBits(t);return(this.length-1)*26+i};function Dt(a){for(var t=new Array(a.bitLength()),i=0;i<t.length;i++){var e=i/26|0,s=i%26;t[i]=a.words[e]>>>s&1}return t}u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var e=this._zeroBits(this.words[i]);if(t+=e,e!==26)break}return t},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},u.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return this.negative!==0},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this._strip()},u.prototype.ior=function(t){return m((this.negative|t.negative)===0),this.iuor(t)},u.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},u.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},u.prototype.iuand=function(t){var i;this.length>t.length?i=t:i=this;for(var e=0;e<i.length;e++)this.words[e]=this.words[e]&t.words[e];return this.length=i.length,this._strip()},u.prototype.iand=function(t){return m((this.negative|t.negative)===0),this.iuand(t)},u.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},u.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},u.prototype.iuxor=function(t){var i,e;this.length>t.length?(i=this,e=t):(i=t,e=this);for(var s=0;s<e.length;s++)this.words[s]=i.words[s]^e.words[s];if(this!==i)for(;s<i.length;s++)this.words[s]=i.words[s];return this.length=i.length,this._strip()},u.prototype.ixor=function(t){return m((this.negative|t.negative)===0),this.iuxor(t)},u.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},u.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},u.prototype.inotn=function(t){m(typeof t=="number"&&t>=0);var i=Math.ceil(t/26)|0,e=t%26;this._expand(i),e>0&&i--;for(var s=0;s<i;s++)this.words[s]=~this.words[s]&67108863;return e>0&&(this.words[s]=~this.words[s]&67108863>>26-e),this._strip()},u.prototype.notn=function(t){return this.clone().inotn(t)},u.prototype.setn=function(t,i){m(typeof t=="number"&&t>=0);var e=t/26|0,s=t%26;return this._expand(e+1),i?this.words[e]=this.words[e]|1<<s:this.words[e]=this.words[e]&~(1<<s),this._strip()},u.prototype.iadd=function(t){var i;if(this.negative!==0&&t.negative===0)return this.negative=0,i=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,i=this.isub(t),t.negative=1,i._normSign();var e,s;this.length>t.length?(e=this,s=t):(e=t,s=this);for(var h=0,c=0;c<s.length;c++)i=(e.words[c]|0)+(s.words[c]|0)+h,this.words[c]=i&67108863,h=i>>>26;for(;h!==0&&c<e.length;c++)i=(e.words[c]|0)+h,this.words[c]=i&67108863,h=i>>>26;if(this.length=e.length,h!==0)this.words[this.length]=h,this.length++;else if(e!==this)for(;c<e.length;c++)this.words[c]=e.words[c];return this},u.prototype.add=function(t){var i;return t.negative!==0&&this.negative===0?(t.negative=0,i=this.sub(t),t.negative^=1,i):t.negative===0&&this.negative!==0?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},u.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var i=this.iadd(t);return t.negative=1,i._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var e=this.cmp(t);if(e===0)return this.negative=0,this.length=1,this.words[0]=0,this;var s,h;e>0?(s=this,h=t):(s=t,h=this);for(var c=0,p=0;p<h.length;p++)i=(s.words[p]|0)-(h.words[p]|0)+c,c=i>>26,this.words[p]=i&67108863;for(;c!==0&&p<s.length;p++)i=(s.words[p]|0)+c,c=i>>26,this.words[p]=i&67108863;if(c===0&&p<s.length&&s!==this)for(;p<s.length;p++)this.words[p]=s.words[p];return this.length=Math.max(this.length,p),s!==this&&(this.negative=1),this._strip()},u.prototype.sub=function(t){return this.clone().isub(t)};function Qt(a,t,i){i.negative=t.negative^a.negative;var e=a.length+t.length|0;i.length=e,e=e-1|0;var s=a.words[0]|0,h=t.words[0]|0,c=s*h,p=c&67108863,o=c/67108864|0;i.words[0]=p;for(var r=1;r<e;r++){for(var f=o>>>26,y=o&67108863,M=Math.min(r,t.length-1),_=Math.max(0,r-a.length+1);_<=M;_++){var yt=r-_|0;s=a.words[yt]|0,h=t.words[_]|0,c=s*h+y,f+=c/67108864|0,y=c&67108863}i.words[r]=y|0,o=f|0}return o!==0?i.words[r]=o|0:i.length--,i._strip()}var nr=function(t,i,e){var s=t.words,h=i.words,c=e.words,p=0,o,r,f,y=s[0]|0,M=y&8191,_=y>>>13,yt=s[1]|0,T=yt&8191,O=yt>>>13,qr=s[2]|0,B=qr&8191,P=qr>>>13,Lr=s[3]|0,F=Lr&8191,C=Lr>>>13,Vr=s[4]|0,D=Vr&8191,q=Vr>>>13,zr=s[5]|0,L=zr&8191,V=zr>>>13,Gr=s[6]|0,z=Gr&8191,G=Gr>>>13,Zr=s[7]|0,Z=Zr&8191,$=Zr>>>13,$r=s[8]|0,H=$r&8191,K=$r>>>13,Hr=s[9]|0,W=Hr&8191,X=Hr>>>13,Kr=h[0]|0,J=Kr&8191,Q=Kr>>>13,Wr=h[1]|0,Y=Wr&8191,j=Wr>>>13,Xr=h[2]|0,tt=Xr&8191,rt=Xr>>>13,Jr=h[3]|0,it=Jr&8191,et=Jr>>>13,Qr=h[4]|0,nt=Qr&8191,ot=Qr>>>13,Yr=h[5]|0,st=Yr&8191,ft=Yr>>>13,jr=h[6]|0,ht=jr&8191,at=jr>>>13,ti=h[7]|0,lt=ti&8191,ut=ti>>>13,ri=h[8]|0,dt=ri&8191,mt=ri>>>13,ii=h[9]|0,ct=ii&8191,pt=ii>>>13;e.negative=t.negative^i.negative,e.length=19,o=Math.imul(M,J),r=Math.imul(M,Q),r=r+Math.imul(_,J)|0,f=Math.imul(_,Q);var lr=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(lr>>>26)|0,lr&=67108863,o=Math.imul(T,J),r=Math.imul(T,Q),r=r+Math.imul(O,J)|0,f=Math.imul(O,Q),o=o+Math.imul(M,Y)|0,r=r+Math.imul(M,j)|0,r=r+Math.imul(_,Y)|0,f=f+Math.imul(_,j)|0;var ur=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(ur>>>26)|0,ur&=67108863,o=Math.imul(B,J),r=Math.imul(B,Q),r=r+Math.imul(P,J)|0,f=Math.imul(P,Q),o=o+Math.imul(T,Y)|0,r=r+Math.imul(T,j)|0,r=r+Math.imul(O,Y)|0,f=f+Math.imul(O,j)|0,o=o+Math.imul(M,tt)|0,r=r+Math.imul(M,rt)|0,r=r+Math.imul(_,tt)|0,f=f+Math.imul(_,rt)|0;var dr=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(dr>>>26)|0,dr&=67108863,o=Math.imul(F,J),r=Math.imul(F,Q),r=r+Math.imul(C,J)|0,f=Math.imul(C,Q),o=o+Math.imul(B,Y)|0,r=r+Math.imul(B,j)|0,r=r+Math.imul(P,Y)|0,f=f+Math.imul(P,j)|0,o=o+Math.imul(T,tt)|0,r=r+Math.imul(T,rt)|0,r=r+Math.imul(O,tt)|0,f=f+Math.imul(O,rt)|0,o=o+Math.imul(M,it)|0,r=r+Math.imul(M,et)|0,r=r+Math.imul(_,it)|0,f=f+Math.imul(_,et)|0;var mr=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(mr>>>26)|0,mr&=67108863,o=Math.imul(D,J),r=Math.imul(D,Q),r=r+Math.imul(q,J)|0,f=Math.imul(q,Q),o=o+Math.imul(F,Y)|0,r=r+Math.imul(F,j)|0,r=r+Math.imul(C,Y)|0,f=f+Math.imul(C,j)|0,o=o+Math.imul(B,tt)|0,r=r+Math.imul(B,rt)|0,r=r+Math.imul(P,tt)|0,f=f+Math.imul(P,rt)|0,o=o+Math.imul(T,it)|0,r=r+Math.imul(T,et)|0,r=r+Math.imul(O,it)|0,f=f+Math.imul(O,et)|0,o=o+Math.imul(M,nt)|0,r=r+Math.imul(M,ot)|0,r=r+Math.imul(_,nt)|0,f=f+Math.imul(_,ot)|0;var cr=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(cr>>>26)|0,cr&=67108863,o=Math.imul(L,J),r=Math.imul(L,Q),r=r+Math.imul(V,J)|0,f=Math.imul(V,Q),o=o+Math.imul(D,Y)|0,r=r+Math.imul(D,j)|0,r=r+Math.imul(q,Y)|0,f=f+Math.imul(q,j)|0,o=o+Math.imul(F,tt)|0,r=r+Math.imul(F,rt)|0,r=r+Math.imul(C,tt)|0,f=f+Math.imul(C,rt)|0,o=o+Math.imul(B,it)|0,r=r+Math.imul(B,et)|0,r=r+Math.imul(P,it)|0,f=f+Math.imul(P,et)|0,o=o+Math.imul(T,nt)|0,r=r+Math.imul(T,ot)|0,r=r+Math.imul(O,nt)|0,f=f+Math.imul(O,ot)|0,o=o+Math.imul(M,st)|0,r=r+Math.imul(M,ft)|0,r=r+Math.imul(_,st)|0,f=f+Math.imul(_,ft)|0;var pr=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(pr>>>26)|0,pr&=67108863,o=Math.imul(z,J),r=Math.imul(z,Q),r=r+Math.imul(G,J)|0,f=Math.imul(G,Q),o=o+Math.imul(L,Y)|0,r=r+Math.imul(L,j)|0,r=r+Math.imul(V,Y)|0,f=f+Math.imul(V,j)|0,o=o+Math.imul(D,tt)|0,r=r+Math.imul(D,rt)|0,r=r+Math.imul(q,tt)|0,f=f+Math.imul(q,rt)|0,o=o+Math.imul(F,it)|0,r=r+Math.imul(F,et)|0,r=r+Math.imul(C,it)|0,f=f+Math.imul(C,et)|0,o=o+Math.imul(B,nt)|0,r=r+Math.imul(B,ot)|0,r=r+Math.imul(P,nt)|0,f=f+Math.imul(P,ot)|0,o=o+Math.imul(T,st)|0,r=r+Math.imul(T,ft)|0,r=r+Math.imul(O,st)|0,f=f+Math.imul(O,ft)|0,o=o+Math.imul(M,ht)|0,r=r+Math.imul(M,at)|0,r=r+Math.imul(_,ht)|0,f=f+Math.imul(_,at)|0;var gr=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(gr>>>26)|0,gr&=67108863,o=Math.imul(Z,J),r=Math.imul(Z,Q),r=r+Math.imul($,J)|0,f=Math.imul($,Q),o=o+Math.imul(z,Y)|0,r=r+Math.imul(z,j)|0,r=r+Math.imul(G,Y)|0,f=f+Math.imul(G,j)|0,o=o+Math.imul(L,tt)|0,r=r+Math.imul(L,rt)|0,r=r+Math.imul(V,tt)|0,f=f+Math.imul(V,rt)|0,o=o+Math.imul(D,it)|0,r=r+Math.imul(D,et)|0,r=r+Math.imul(q,it)|0,f=f+Math.imul(q,et)|0,o=o+Math.imul(F,nt)|0,r=r+Math.imul(F,ot)|0,r=r+Math.imul(C,nt)|0,f=f+Math.imul(C,ot)|0,o=o+Math.imul(B,st)|0,r=r+Math.imul(B,ft)|0,r=r+Math.imul(P,st)|0,f=f+Math.imul(P,ft)|0,o=o+Math.imul(T,ht)|0,r=r+Math.imul(T,at)|0,r=r+Math.imul(O,ht)|0,f=f+Math.imul(O,at)|0,o=o+Math.imul(M,lt)|0,r=r+Math.imul(M,ut)|0,r=r+Math.imul(_,lt)|0,f=f+Math.imul(_,ut)|0;var vr=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(vr>>>26)|0,vr&=67108863,o=Math.imul(H,J),r=Math.imul(H,Q),r=r+Math.imul(K,J)|0,f=Math.imul(K,Q),o=o+Math.imul(Z,Y)|0,r=r+Math.imul(Z,j)|0,r=r+Math.imul($,Y)|0,f=f+Math.imul($,j)|0,o=o+Math.imul(z,tt)|0,r=r+Math.imul(z,rt)|0,r=r+Math.imul(G,tt)|0,f=f+Math.imul(G,rt)|0,o=o+Math.imul(L,it)|0,r=r+Math.imul(L,et)|0,r=r+Math.imul(V,it)|0,f=f+Math.imul(V,et)|0,o=o+Math.imul(D,nt)|0,r=r+Math.imul(D,ot)|0,r=r+Math.imul(q,nt)|0,f=f+Math.imul(q,ot)|0,o=o+Math.imul(F,st)|0,r=r+Math.imul(F,ft)|0,r=r+Math.imul(C,st)|0,f=f+Math.imul(C,ft)|0,o=o+Math.imul(B,ht)|0,r=r+Math.imul(B,at)|0,r=r+Math.imul(P,ht)|0,f=f+Math.imul(P,at)|0,o=o+Math.imul(T,lt)|0,r=r+Math.imul(T,ut)|0,r=r+Math.imul(O,lt)|0,f=f+Math.imul(O,ut)|0,o=o+Math.imul(M,dt)|0,r=r+Math.imul(M,mt)|0,r=r+Math.imul(_,dt)|0,f=f+Math.imul(_,mt)|0;var wr=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(wr>>>26)|0,wr&=67108863,o=Math.imul(W,J),r=Math.imul(W,Q),r=r+Math.imul(X,J)|0,f=Math.imul(X,Q),o=o+Math.imul(H,Y)|0,r=r+Math.imul(H,j)|0,r=r+Math.imul(K,Y)|0,f=f+Math.imul(K,j)|0,o=o+Math.imul(Z,tt)|0,r=r+Math.imul(Z,rt)|0,r=r+Math.imul($,tt)|0,f=f+Math.imul($,rt)|0,o=o+Math.imul(z,it)|0,r=r+Math.imul(z,et)|0,r=r+Math.imul(G,it)|0,f=f+Math.imul(G,et)|0,o=o+Math.imul(L,nt)|0,r=r+Math.imul(L,ot)|0,r=r+Math.imul(V,nt)|0,f=f+Math.imul(V,ot)|0,o=o+Math.imul(D,st)|0,r=r+Math.imul(D,ft)|0,r=r+Math.imul(q,st)|0,f=f+Math.imul(q,ft)|0,o=o+Math.imul(F,ht)|0,r=r+Math.imul(F,at)|0,r=r+Math.imul(C,ht)|0,f=f+Math.imul(C,at)|0,o=o+Math.imul(B,lt)|0,r=r+Math.imul(B,ut)|0,r=r+Math.imul(P,lt)|0,f=f+Math.imul(P,ut)|0,o=o+Math.imul(T,dt)|0,r=r+Math.imul(T,mt)|0,r=r+Math.imul(O,dt)|0,f=f+Math.imul(O,mt)|0,o=o+Math.imul(M,ct)|0,r=r+Math.imul(M,pt)|0,r=r+Math.imul(_,ct)|0,f=f+Math.imul(_,pt)|0;var Mr=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,o=Math.imul(W,Y),r=Math.imul(W,j),r=r+Math.imul(X,Y)|0,f=Math.imul(X,j),o=o+Math.imul(H,tt)|0,r=r+Math.imul(H,rt)|0,r=r+Math.imul(K,tt)|0,f=f+Math.imul(K,rt)|0,o=o+Math.imul(Z,it)|0,r=r+Math.imul(Z,et)|0,r=r+Math.imul($,it)|0,f=f+Math.imul($,et)|0,o=o+Math.imul(z,nt)|0,r=r+Math.imul(z,ot)|0,r=r+Math.imul(G,nt)|0,f=f+Math.imul(G,ot)|0,o=o+Math.imul(L,st)|0,r=r+Math.imul(L,ft)|0,r=r+Math.imul(V,st)|0,f=f+Math.imul(V,ft)|0,o=o+Math.imul(D,ht)|0,r=r+Math.imul(D,at)|0,r=r+Math.imul(q,ht)|0,f=f+Math.imul(q,at)|0,o=o+Math.imul(F,lt)|0,r=r+Math.imul(F,ut)|0,r=r+Math.imul(C,lt)|0,f=f+Math.imul(C,ut)|0,o=o+Math.imul(B,dt)|0,r=r+Math.imul(B,mt)|0,r=r+Math.imul(P,dt)|0,f=f+Math.imul(P,mt)|0,o=o+Math.imul(T,ct)|0,r=r+Math.imul(T,pt)|0,r=r+Math.imul(O,ct)|0,f=f+Math.imul(O,pt)|0;var yr=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(yr>>>26)|0,yr&=67108863,o=Math.imul(W,tt),r=Math.imul(W,rt),r=r+Math.imul(X,tt)|0,f=Math.imul(X,rt),o=o+Math.imul(H,it)|0,r=r+Math.imul(H,et)|0,r=r+Math.imul(K,it)|0,f=f+Math.imul(K,et)|0,o=o+Math.imul(Z,nt)|0,r=r+Math.imul(Z,ot)|0,r=r+Math.imul($,nt)|0,f=f+Math.imul($,ot)|0,o=o+Math.imul(z,st)|0,r=r+Math.imul(z,ft)|0,r=r+Math.imul(G,st)|0,f=f+Math.imul(G,ft)|0,o=o+Math.imul(L,ht)|0,r=r+Math.imul(L,at)|0,r=r+Math.imul(V,ht)|0,f=f+Math.imul(V,at)|0,o=o+Math.imul(D,lt)|0,r=r+Math.imul(D,ut)|0,r=r+Math.imul(q,lt)|0,f=f+Math.imul(q,ut)|0,o=o+Math.imul(F,dt)|0,r=r+Math.imul(F,mt)|0,r=r+Math.imul(C,dt)|0,f=f+Math.imul(C,mt)|0,o=o+Math.imul(B,ct)|0,r=r+Math.imul(B,pt)|0,r=r+Math.imul(P,ct)|0,f=f+Math.imul(P,pt)|0;var _r=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(_r>>>26)|0,_r&=67108863,o=Math.imul(W,it),r=Math.imul(W,et),r=r+Math.imul(X,it)|0,f=Math.imul(X,et),o=o+Math.imul(H,nt)|0,r=r+Math.imul(H,ot)|0,r=r+Math.imul(K,nt)|0,f=f+Math.imul(K,ot)|0,o=o+Math.imul(Z,st)|0,r=r+Math.imul(Z,ft)|0,r=r+Math.imul($,st)|0,f=f+Math.imul($,ft)|0,o=o+Math.imul(z,ht)|0,r=r+Math.imul(z,at)|0,r=r+Math.imul(G,ht)|0,f=f+Math.imul(G,at)|0,o=o+Math.imul(L,lt)|0,r=r+Math.imul(L,ut)|0,r=r+Math.imul(V,lt)|0,f=f+Math.imul(V,ut)|0,o=o+Math.imul(D,dt)|0,r=r+Math.imul(D,mt)|0,r=r+Math.imul(q,dt)|0,f=f+Math.imul(q,mt)|0,o=o+Math.imul(F,ct)|0,r=r+Math.imul(F,pt)|0,r=r+Math.imul(C,ct)|0,f=f+Math.imul(C,pt)|0;var xr=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(xr>>>26)|0,xr&=67108863,o=Math.imul(W,nt),r=Math.imul(W,ot),r=r+Math.imul(X,nt)|0,f=Math.imul(X,ot),o=o+Math.imul(H,st)|0,r=r+Math.imul(H,ft)|0,r=r+Math.imul(K,st)|0,f=f+Math.imul(K,ft)|0,o=o+Math.imul(Z,ht)|0,r=r+Math.imul(Z,at)|0,r=r+Math.imul($,ht)|0,f=f+Math.imul($,at)|0,o=o+Math.imul(z,lt)|0,r=r+Math.imul(z,ut)|0,r=r+Math.imul(G,lt)|0,f=f+Math.imul(G,ut)|0,o=o+Math.imul(L,dt)|0,r=r+Math.imul(L,mt)|0,r=r+Math.imul(V,dt)|0,f=f+Math.imul(V,mt)|0,o=o+Math.imul(D,ct)|0,r=r+Math.imul(D,pt)|0,r=r+Math.imul(q,ct)|0,f=f+Math.imul(q,pt)|0;var br=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(br>>>26)|0,br&=67108863,o=Math.imul(W,st),r=Math.imul(W,ft),r=r+Math.imul(X,st)|0,f=Math.imul(X,ft),o=o+Math.imul(H,ht)|0,r=r+Math.imul(H,at)|0,r=r+Math.imul(K,ht)|0,f=f+Math.imul(K,at)|0,o=o+Math.imul(Z,lt)|0,r=r+Math.imul(Z,ut)|0,r=r+Math.imul($,lt)|0,f=f+Math.imul($,ut)|0,o=o+Math.imul(z,dt)|0,r=r+Math.imul(z,mt)|0,r=r+Math.imul(G,dt)|0,f=f+Math.imul(G,mt)|0,o=o+Math.imul(L,ct)|0,r=r+Math.imul(L,pt)|0,r=r+Math.imul(V,ct)|0,f=f+Math.imul(V,pt)|0;var Nr=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,o=Math.imul(W,ht),r=Math.imul(W,at),r=r+Math.imul(X,ht)|0,f=Math.imul(X,at),o=o+Math.imul(H,lt)|0,r=r+Math.imul(H,ut)|0,r=r+Math.imul(K,lt)|0,f=f+Math.imul(K,ut)|0,o=o+Math.imul(Z,dt)|0,r=r+Math.imul(Z,mt)|0,r=r+Math.imul($,dt)|0,f=f+Math.imul($,mt)|0,o=o+Math.imul(z,ct)|0,r=r+Math.imul(z,pt)|0,r=r+Math.imul(G,ct)|0,f=f+Math.imul(G,pt)|0;var Er=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(Er>>>26)|0,Er&=67108863,o=Math.imul(W,lt),r=Math.imul(W,ut),r=r+Math.imul(X,lt)|0,f=Math.imul(X,ut),o=o+Math.imul(H,dt)|0,r=r+Math.imul(H,mt)|0,r=r+Math.imul(K,dt)|0,f=f+Math.imul(K,mt)|0,o=o+Math.imul(Z,ct)|0,r=r+Math.imul(Z,pt)|0,r=r+Math.imul($,ct)|0,f=f+Math.imul($,pt)|0;var Sr=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,o=Math.imul(W,dt),r=Math.imul(W,mt),r=r+Math.imul(X,dt)|0,f=Math.imul(X,mt),o=o+Math.imul(H,ct)|0,r=r+Math.imul(H,pt)|0,r=r+Math.imul(K,ct)|0,f=f+Math.imul(K,pt)|0;var Ar=(p+o|0)+((r&8191)<<13)|0;p=(f+(r>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,o=Math.imul(W,ct),r=Math.imul(W,pt),r=r+Math.imul(X,ct)|0,f=Math.imul(X,pt);var Rr=(p+o|0)+((r&8191)<<13)|0;return p=(f+(r>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,c[0]=lr,c[1]=ur,c[2]=dr,c[3]=mr,c[4]=cr,c[5]=pr,c[6]=gr,c[7]=vr,c[8]=wr,c[9]=Mr,c[10]=yr,c[11]=_r,c[12]=xr,c[13]=br,c[14]=Nr,c[15]=Er,c[16]=Sr,c[17]=Ar,c[18]=Rr,p!==0&&(c[19]=p,e.length++),e};Math.imul||(nr=Qt);function qt(a,t,i){i.negative=t.negative^a.negative,i.length=a.length+t.length;for(var e=0,s=0,h=0;h<i.length-1;h++){var c=s;s=0;for(var p=e&67108863,o=Math.min(h,t.length-1),r=Math.max(0,h-a.length+1);r<=o;r++){var f=h-r,y=a.words[f]|0,M=t.words[r]|0,_=y*M,yt=_&67108863;c=c+(_/67108864|0)|0,yt=yt+p|0,p=yt&67108863,c=c+(yt>>>26)|0,s+=c>>>26,c&=67108863}i.words[h]=p,e=c,c=s}return e!==0?i.words[h]=e:i.length--,i._strip()}function or(a,t,i){return qt(a,t,i)}u.prototype.mulTo=function(t,i){var e,s=this.length+t.length;return this.length===10&&t.length===10?e=nr(this,t,i):s<63?e=Qt(this,t,i):s<1024?e=qt(this,t,i):e=or(this,t,i),e},u.prototype.mul=function(t){var i=new u(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},u.prototype.mulf=function(t){var i=new u(null);return i.words=new Array(this.length+t.length),or(this,t,i)},u.prototype.imul=function(t){return this.clone().mulTo(t,this)},u.prototype.imuln=function(t){var i=t<0;i&&(t=-t),m(typeof t=="number"),m(t<67108864);for(var e=0,s=0;s<this.length;s++){var h=(this.words[s]|0)*t,c=(h&67108863)+(e&67108863);e>>=26,e+=h/67108864|0,e+=c>>>26,this.words[s]=c&67108863}return e!==0&&(this.words[s]=e,this.length++),i?this.ineg():this},u.prototype.muln=function(t){return this.clone().imuln(t)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(t){var i=Dt(t);if(i.length===0)return new u(1);for(var e=this,s=0;s<i.length&&i[s]===0;s++,e=e.sqr());if(++s<i.length)for(var h=e.sqr();s<i.length;s++,h=h.sqr())i[s]!==0&&(e=e.mul(h));return e},u.prototype.iushln=function(t){m(typeof t=="number"&&t>=0);var i=t%26,e=(t-i)/26,s=67108863>>>26-i<<26-i,h;if(i!==0){var c=0;for(h=0;h<this.length;h++){var p=this.words[h]&s,o=(this.words[h]|0)-p<<i;this.words[h]=o|c,c=p>>>26-i}c&&(this.words[h]=c,this.length++)}if(e!==0){for(h=this.length-1;h>=0;h--)this.words[h+e]=this.words[h];for(h=0;h<e;h++)this.words[h]=0;this.length+=e}return this._strip()},u.prototype.ishln=function(t){return m(this.negative===0),this.iushln(t)},u.prototype.iushrn=function(t,i,e){m(typeof t=="number"&&t>=0);var s;i?s=(i-i%26)/26:s=0;var h=t%26,c=Math.min((t-h)/26,this.length),p=67108863^67108863>>>h<<h,o=e;if(s-=c,s=Math.max(0,s),o){for(var r=0;r<c;r++)o.words[r]=this.words[r];o.length=c}if(c!==0)if(this.length>c)for(this.length-=c,r=0;r<this.length;r++)this.words[r]=this.words[r+c];else this.words[0]=0,this.length=1;var f=0;for(r=this.length-1;r>=0&&(f!==0||r>=s);r--){var y=this.words[r]|0;this.words[r]=f<<26-h|y>>>h,f=y&p}return o&&f!==0&&(o.words[o.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},u.prototype.ishrn=function(t,i,e){return m(this.negative===0),this.iushrn(t,i,e)},u.prototype.shln=function(t){return this.clone().ishln(t)},u.prototype.ushln=function(t){return this.clone().iushln(t)},u.prototype.shrn=function(t){return this.clone().ishrn(t)},u.prototype.ushrn=function(t){return this.clone().iushrn(t)},u.prototype.testn=function(t){m(typeof t=="number"&&t>=0);var i=t%26,e=(t-i)/26,s=1<<i;if(this.length<=e)return!1;var h=this.words[e];return!!(h&s)},u.prototype.imaskn=function(t){m(typeof t=="number"&&t>=0);var i=t%26,e=(t-i)/26;if(m(this.negative===0,"imaskn works only with positive numbers"),this.length<=e)return this;if(i!==0&&e++,this.length=Math.min(e,this.length),i!==0){var s=67108863^67108863>>>i<<i;this.words[this.length-1]&=s}return this._strip()},u.prototype.maskn=function(t){return this.clone().imaskn(t)},u.prototype.iaddn=function(t){return m(typeof t=="number"),m(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<=t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},u.prototype._iaddn=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},u.prototype.isubn=function(t){if(m(typeof t=="number"),m(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this._strip()},u.prototype.addn=function(t){return this.clone().iaddn(t)},u.prototype.subn=function(t){return this.clone().isubn(t)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(t,i,e){var s=t.length+e,h;this._expand(s);var c,p=0;for(h=0;h<t.length;h++){c=(this.words[h+e]|0)+p;var o=(t.words[h]|0)*i;c-=o&67108863,p=(c>>26)-(o/67108864|0),this.words[h+e]=c&67108863}for(;h<this.length-e;h++)c=(this.words[h+e]|0)+p,p=c>>26,this.words[h+e]=c&67108863;if(p===0)return this._strip();for(m(p===-1),p=0,h=0;h<this.length;h++)c=-(this.words[h]|0)+p,p=c>>26,this.words[h]=c&67108863;return this.negative=1,this._strip()},u.prototype._wordDiv=function(t,i){var e=this.length-t.length,s=this.clone(),h=t,c=h.words[h.length-1]|0,p=this._countBits(c);e=26-p,e!==0&&(h=h.ushln(e),s.iushln(e),c=h.words[h.length-1]|0);var o=s.length-h.length,r;if(i!=="mod"){r=new u(null),r.length=o+1,r.words=new Array(r.length);for(var f=0;f<r.length;f++)r.words[f]=0}var y=s.clone()._ishlnsubmul(h,1,o);y.negative===0&&(s=y,r&&(r.words[o]=1));for(var M=o-1;M>=0;M--){var _=(s.words[h.length+M]|0)*67108864+(s.words[h.length+M-1]|0);for(_=Math.min(_/c|0,67108863),s._ishlnsubmul(h,_,M);s.negative!==0;)_--,s.negative=0,s._ishlnsubmul(h,1,M),s.isZero()||(s.negative^=1);r&&(r.words[M]=_)}return r&&r._strip(),s._strip(),i!=="div"&&e!==0&&s.iushrn(e),{div:r||null,mod:s}},u.prototype.divmod=function(t,i,e){if(m(!t.isZero()),this.isZero())return{div:new u(0),mod:new u(0)};var s,h,c;return this.negative!==0&&t.negative===0?(c=this.neg().divmod(t,i),i!=="mod"&&(s=c.div.neg()),i!=="div"&&(h=c.mod.neg(),e&&h.negative!==0&&h.iadd(t)),{div:s,mod:h}):this.negative===0&&t.negative!==0?(c=this.divmod(t.neg(),i),i!=="mod"&&(s=c.div.neg()),{div:s,mod:c.mod}):this.negative&t.negative?(c=this.neg().divmod(t.neg(),i),i!=="div"&&(h=c.mod.neg(),e&&h.negative!==0&&h.isub(t)),{div:c.div,mod:h}):t.length>this.length||this.cmp(t)<0?{div:new u(0),mod:this}:t.length===1?i==="div"?{div:this.divn(t.words[0]),mod:null}:i==="mod"?{div:null,mod:new u(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new u(this.modrn(t.words[0]))}:this._wordDiv(t,i)},u.prototype.div=function(t){return this.divmod(t,"div",!1).div},u.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},u.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},u.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var e=i.div.negative!==0?i.mod.isub(t):i.mod,s=t.ushrn(1),h=t.andln(1),c=e.cmp(s);return c<0||h===1&&c===0?i.div:i.div.negative!==0?i.div.isubn(1):i.div.iaddn(1)},u.prototype.modrn=function(t){var i=t<0;i&&(t=-t),m(t<=67108863);for(var e=(1<<26)%t,s=0,h=this.length-1;h>=0;h--)s=(e*s+(this.words[h]|0))%t;return i?-s:s},u.prototype.modn=function(t){return this.modrn(t)},u.prototype.idivn=function(t){var i=t<0;i&&(t=-t),m(t<=67108863);for(var e=0,s=this.length-1;s>=0;s--){var h=(this.words[s]|0)+e*67108864;this.words[s]=h/t|0,e=h%t}return this._strip(),i?this.ineg():this},u.prototype.divn=function(t){return this.clone().idivn(t)},u.prototype.egcd=function(t){m(t.negative===0),m(!t.isZero());var i=this,e=t.clone();i.negative!==0?i=i.umod(t):i=i.clone();for(var s=new u(1),h=new u(0),c=new u(0),p=new u(1),o=0;i.isEven()&&e.isEven();)i.iushrn(1),e.iushrn(1),++o;for(var r=e.clone(),f=i.clone();!i.isZero();){for(var y=0,M=1;!(i.words[0]&M)&&y<26;++y,M<<=1);if(y>0)for(i.iushrn(y);y-- >0;)(s.isOdd()||h.isOdd())&&(s.iadd(r),h.isub(f)),s.iushrn(1),h.iushrn(1);for(var _=0,yt=1;!(e.words[0]&yt)&&_<26;++_,yt<<=1);if(_>0)for(e.iushrn(_);_-- >0;)(c.isOdd()||p.isOdd())&&(c.iadd(r),p.isub(f)),c.iushrn(1),p.iushrn(1);i.cmp(e)>=0?(i.isub(e),s.isub(c),h.isub(p)):(e.isub(i),c.isub(s),p.isub(h))}return{a:c,b:p,gcd:e.iushln(o)}},u.prototype._invmp=function(t){m(t.negative===0),m(!t.isZero());var i=this,e=t.clone();i.negative!==0?i=i.umod(t):i=i.clone();for(var s=new u(1),h=new u(0),c=e.clone();i.cmpn(1)>0&&e.cmpn(1)>0;){for(var p=0,o=1;!(i.words[0]&o)&&p<26;++p,o<<=1);if(p>0)for(i.iushrn(p);p-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var r=0,f=1;!(e.words[0]&f)&&r<26;++r,f<<=1);if(r>0)for(e.iushrn(r);r-- >0;)h.isOdd()&&h.iadd(c),h.iushrn(1);i.cmp(e)>=0?(i.isub(e),s.isub(h)):(e.isub(i),h.isub(s))}var y;return i.cmpn(1)===0?y=s:y=h,y.cmpn(0)<0&&y.iadd(t),y},u.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),e=t.clone();i.negative=0,e.negative=0;for(var s=0;i.isEven()&&e.isEven();s++)i.iushrn(1),e.iushrn(1);do{for(;i.isEven();)i.iushrn(1);for(;e.isEven();)e.iushrn(1);var h=i.cmp(e);if(h<0){var c=i;i=e,e=c}else if(h===0||e.cmpn(1)===0)break;i.isub(e)}while(!0);return e.iushln(s)},u.prototype.invm=function(t){return this.egcd(t).a.umod(t)},u.prototype.isEven=function(){return(this.words[0]&1)===0},u.prototype.isOdd=function(){return(this.words[0]&1)===1},u.prototype.andln=function(t){return this.words[0]&t},u.prototype.bincn=function(t){m(typeof t=="number");var i=t%26,e=(t-i)/26,s=1<<i;if(this.length<=e)return this._expand(e+1),this.words[e]|=s,this;for(var h=s,c=e;h!==0&&c<this.length;c++){var p=this.words[c]|0;p+=h,h=p>>>26,p&=67108863,this.words[c]=p}return h!==0&&(this.words[c]=h,this.length++),this},u.prototype.isZero=function(){return this.length===1&&this.words[0]===0},u.prototype.cmpn=function(t){var i=t<0;if(this.negative!==0&&!i)return-1;if(this.negative===0&&i)return 1;this._strip();var e;if(this.length>1)e=1;else{i&&(t=-t),m(t<=67108863,"Number is too big");var s=this.words[0]|0;e=s===t?0:s<t?-1:1}return this.negative!==0?-e|0:e},u.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var i=this.ucmp(t);return this.negative!==0?-i|0:i},u.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,e=this.length-1;e>=0;e--){var s=this.words[e]|0,h=t.words[e]|0;if(s!==h){s<h?i=-1:s>h&&(i=1);break}}return i},u.prototype.gtn=function(t){return this.cmpn(t)===1},u.prototype.gt=function(t){return this.cmp(t)===1},u.prototype.gten=function(t){return this.cmpn(t)>=0},u.prototype.gte=function(t){return this.cmp(t)>=0},u.prototype.ltn=function(t){return this.cmpn(t)===-1},u.prototype.lt=function(t){return this.cmp(t)===-1},u.prototype.lten=function(t){return this.cmpn(t)<=0},u.prototype.lte=function(t){return this.cmp(t)<=0},u.prototype.eqn=function(t){return this.cmpn(t)===0},u.prototype.eq=function(t){return this.cmp(t)===0},u.red=function(t){return new R(t)},u.prototype.toRed=function(t){return m(!this.red,"Already a number in reduction context"),m(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(t){return this.red=t,this},u.prototype.forceRed=function(t){return m(!this.red,"Already a number in reduction context"),this._forceRed(t)},u.prototype.redAdd=function(t){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},u.prototype.redIAdd=function(t){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},u.prototype.redSub=function(t){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},u.prototype.redISub=function(t){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},u.prototype.redShl=function(t){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},u.prototype.redMul=function(t){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},u.prototype.redIMul=function(t){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(t){return m(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var A={k256:null,p224:null,p192:null,p25519:null};function I(a,t){this.name=a,this.p=new u(t,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}I.prototype._tmp=function(){var t=new u(null);return t.words=new Array(Math.ceil(this.n/13)),t},I.prototype.ireduce=function(t){var i=t,e;do this.split(i,this.tmp),i=this.imulK(i),i=i.iadd(this.tmp),e=i.bitLength();while(e>this.n);var s=e<this.n?-1:i.ucmp(this.p);return s===0?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):i.strip!==void 0?i.strip():i._strip(),i},I.prototype.split=function(t,i){t.iushrn(this.n,0,i)},I.prototype.imulK=function(t){return t.imul(this.k)};function vt(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(vt,I),vt.prototype.split=function(t,i){for(var e=4194303,s=Math.min(t.length,9),h=0;h<s;h++)i.words[h]=t.words[h];if(i.length=s,t.length<=9){t.words[0]=0,t.length=1;return}var c=t.words[9];for(i.words[i.length++]=c&e,h=10;h<t.length;h++){var p=t.words[h]|0;t.words[h-10]=(p&e)<<4|c>>>22,c=p}c>>>=22,t.words[h-10]=c,c===0&&t.length>10?t.length-=10:t.length-=9},vt.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,e=0;e<t.length;e++){var s=t.words[e]|0;i+=s*977,t.words[e]=i&67108863,i=s*64+(i/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function Nt(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g(Nt,I);function Ot(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(Ot,I);function Lt(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(Lt,I),Lt.prototype.imulK=function(t){for(var i=0,e=0;e<t.length;e++){var s=(t.words[e]|0)*19+i,h=s&67108863;s>>>=26,t.words[e]=h,i=s}return i!==0&&(t.words[t.length++]=i),t},u._prime=function(t){if(A[t])return A[t];var i;if(t==="k256")i=new vt;else if(t==="p224")i=new Nt;else if(t==="p192")i=new Ot;else if(t==="p25519")i=new Lt;else throw new Error("Unknown prime "+t);return A[t]=i,i};function R(a){if(typeof a=="string"){var t=u._prime(a);this.m=t.p,this.prime=t}else m(a.gtn(1),"modulus must be greater than 1"),this.m=a,this.prime=null}R.prototype._verify1=function(t){m(t.negative===0,"red works only with positives"),m(t.red,"red works only with red numbers")},R.prototype._verify2=function(t,i){m((t.negative|i.negative)===0,"red works only with positives"),m(t.red&&t.red===i.red,"red works only with red numbers")},R.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(x(t,t.umod(this.m)._forceRed(this)),t)},R.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},R.prototype.add=function(t,i){this._verify2(t,i);var e=t.add(i);return e.cmp(this.m)>=0&&e.isub(this.m),e._forceRed(this)},R.prototype.iadd=function(t,i){this._verify2(t,i);var e=t.iadd(i);return e.cmp(this.m)>=0&&e.isub(this.m),e},R.prototype.sub=function(t,i){this._verify2(t,i);var e=t.sub(i);return e.cmpn(0)<0&&e.iadd(this.m),e._forceRed(this)},R.prototype.isub=function(t,i){this._verify2(t,i);var e=t.isub(i);return e.cmpn(0)<0&&e.iadd(this.m),e},R.prototype.shl=function(t,i){return this._verify1(t),this.imod(t.ushln(i))},R.prototype.imul=function(t,i){return this._verify2(t,i),this.imod(t.imul(i))},R.prototype.mul=function(t,i){return this._verify2(t,i),this.imod(t.mul(i))},R.prototype.isqr=function(t){return this.imul(t,t.clone())},R.prototype.sqr=function(t){return this.mul(t,t)},R.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(m(i%2===1),i===3){var e=this.m.add(new u(1)).iushrn(2);return this.pow(t,e)}for(var s=this.m.subn(1),h=0;!s.isZero()&&s.andln(1)===0;)h++,s.iushrn(1);m(!s.isZero());var c=new u(1).toRed(this),p=c.redNeg(),o=this.m.subn(1).iushrn(1),r=this.m.bitLength();for(r=new u(2*r*r).toRed(this);this.pow(r,o).cmp(p)!==0;)r.redIAdd(p);for(var f=this.pow(r,s),y=this.pow(t,s.addn(1).iushrn(1)),M=this.pow(t,s),_=h;M.cmp(c)!==0;){for(var yt=M,T=0;yt.cmp(c)!==0;T++)yt=yt.redSqr();m(T<_);var O=this.pow(f,new u(1).iushln(_-T-1));y=y.redMul(O),f=O.redSqr(),M=M.redMul(f),_=T}return y},R.prototype.invm=function(t){var i=t._invmp(this.m);return i.negative!==0?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},R.prototype.pow=function(t,i){if(i.isZero())return new u(1).toRed(this);if(i.cmpn(1)===0)return t.clone();var e=4,s=new Array(1<<e);s[0]=new u(1).toRed(this),s[1]=t;for(var h=2;h<s.length;h++)s[h]=this.mul(s[h-1],t);var c=s[0],p=0,o=0,r=i.bitLength()%26;for(r===0&&(r=26),h=i.length-1;h>=0;h--){for(var f=i.words[h],y=r-1;y>=0;y--){var M=f>>y&1;if(c!==s[0]&&(c=this.sqr(c)),M===0&&p===0){o=0;continue}p<<=1,p|=M,o++,!(o!==e&&(h!==0||y!==0))&&(c=this.mul(c,s[p]),o=0,p=0)}r=26}return c},R.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},R.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},u.mont=function(t){return new Ut(t)};function Ut(a){R.call(this,a),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(Ut,R),Ut.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},Ut.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},Ut.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var e=t.imul(i),s=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=e.isub(s).iushrn(this.shift),c=h;return h.cmp(this.m)>=0?c=h.isub(this.m):h.cmpn(0)<0&&(c=h.iadd(this.m)),c._forceRed(this)},Ut.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new u(0)._forceRed(this);var e=t.mul(i),s=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=e.isub(s).iushrn(this.shift),c=h;return h.cmp(this.m)>=0?c=h.isub(this.m):h.cmpn(0)<0&&(c=h.iadd(this.m)),c._forceRed(this)},Ut.prototype.invm=function(t){var i=this.imod(t._invmp(this.m).mul(this.r2));return i._forceRed(this)}})(l,Li)})(Cr);var $i=Cr.exports;const Hi=Vi($i),Ki="logger/5.7.0";let oi=!1,si=!1;const fr={debug:1,default:2,info:2,warning:3,error:4,off:5};let fi=fr.default,Tr=null;function Wi(){try{const l=[];if(["NFD","NFC","NFKD","NFKC"].forEach(n=>{try{if("test".normalize(n)!=="test")throw new Error("bad normalize")}catch{l.push(n)}}),l.length)throw new Error("missing "+l.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(l){return l.message}return null}const hi=Wi();var Pr;(function(l){l.DEBUG="DEBUG",l.INFO="INFO",l.WARNING="WARNING",l.ERROR="ERROR",l.OFF="OFF"})(Pr||(Pr={}));var It;(function(l){l.UNKNOWN_ERROR="UNKNOWN_ERROR",l.NOT_IMPLEMENTED="NOT_IMPLEMENTED",l.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",l.NETWORK_ERROR="NETWORK_ERROR",l.SERVER_ERROR="SERVER_ERROR",l.TIMEOUT="TIMEOUT",l.BUFFER_OVERRUN="BUFFER_OVERRUN",l.NUMERIC_FAULT="NUMERIC_FAULT",l.MISSING_NEW="MISSING_NEW",l.INVALID_ARGUMENT="INVALID_ARGUMENT",l.MISSING_ARGUMENT="MISSING_ARGUMENT",l.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",l.CALL_EXCEPTION="CALL_EXCEPTION",l.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",l.NONCE_EXPIRED="NONCE_EXPIRED",l.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",l.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",l.TRANSACTION_REPLACED="TRANSACTION_REPLACED",l.ACTION_REJECTED="ACTION_REJECTED"})(It||(It={}));const ai="0123456789abcdef";class E{constructor(n){Object.defineProperty(this,"version",{enumerable:!0,value:n,writable:!1})}_log(n,d){const m=n.toLowerCase();fr[m]==null&&this.throwArgumentError("invalid log level name","logLevel",n),!(fi>fr[m])&&console.log.apply(console,d)}debug(...n){this._log(E.levels.DEBUG,n)}info(...n){this._log(E.levels.INFO,n)}warn(...n){this._log(E.levels.WARNING,n)}makeError(n,d,m){if(si)return this.makeError("censored error",d,{});d||(d=E.errors.UNKNOWN_ERROR),m||(m={});const g=[];Object.keys(m).forEach(b=>{const w=m[b];try{if(w instanceof Uint8Array){let x="";for(let gt=0;gt<w.length;gt++)x+=ai[w[gt]>>4],x+=ai[w[gt]&15];g.push(b+"=Uint8Array(0x"+x+")")}else g.push(b+"="+JSON.stringify(w))}catch{g.push(b+"="+JSON.stringify(m[b].toString()))}}),g.push(`code=${d}`),g.push(`version=${this.version}`);const u=n;let v="";switch(d){case It.NUMERIC_FAULT:{v="NUMERIC_FAULT";const b=n;switch(b){case"overflow":case"underflow":case"division-by-zero":v+="-"+b;break;case"negative-power":case"negative-width":v+="-unsupported";break;case"unbound-bitwise-result":v+="-unbound-result";break}break}case It.CALL_EXCEPTION:case It.INSUFFICIENT_FUNDS:case It.MISSING_NEW:case It.NONCE_EXPIRED:case It.REPLACEMENT_UNDERPRICED:case It.TRANSACTION_REPLACED:case It.UNPREDICTABLE_GAS_LIMIT:v=d;break}v&&(n+=" [ See: https://links.ethers.org/v5-errors-"+v+" ]"),g.length&&(n+=" ("+g.join(", ")+")");const S=new Error(n);return S.reason=u,S.code=d,Object.keys(m).forEach(function(b){S[b]=m[b]}),S}throwError(n,d,m){throw this.makeError(n,d,m)}throwArgumentError(n,d,m){return this.throwError(n,E.errors.INVALID_ARGUMENT,{argument:d,value:m})}assert(n,d,m,g){n||this.throwError(d,m,g)}assertArgument(n,d,m,g){n||this.throwArgumentError(d,m,g)}checkNormalize(n){hi&&this.throwError("platform missing String.prototype.normalize",E.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:hi})}checkSafeUint53(n,d){typeof n=="number"&&(d==null&&(d="value not safe"),(n<0||n>=9007199254740991)&&this.throwError(d,E.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:n}),n%1&&this.throwError(d,E.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:n}))}checkArgumentCount(n,d,m){m?m=": "+m:m="",n<d&&this.throwError("missing argument"+m,E.errors.MISSING_ARGUMENT,{count:n,expectedCount:d}),n>d&&this.throwError("too many arguments"+m,E.errors.UNEXPECTED_ARGUMENT,{count:n,expectedCount:d})}checkNew(n,d){(n===Object||n==null)&&this.throwError("missing new",E.errors.MISSING_NEW,{name:d.name})}checkAbstract(n,d){n===d?this.throwError("cannot instantiate abstract class "+JSON.stringify(d.name)+" directly; use a sub-class",E.errors.UNSUPPORTED_OPERATION,{name:n.name,operation:"new"}):(n===Object||n==null)&&this.throwError("missing new",E.errors.MISSING_NEW,{name:d.name})}static globalLogger(){return Tr||(Tr=new E(Ki)),Tr}static setCensorship(n,d){if(!n&&d&&this.globalLogger().throwError("cannot permanently disable censorship",E.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),oi){if(!n)return;this.globalLogger().throwError("error censorship permanent",E.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}si=!!n,oi=!!d}static setLogLevel(n){const d=fr[n.toLowerCase()];if(d==null){E.globalLogger().warn("invalid log level - "+n);return}fi=d}static from(n){return new E(n)}}E.errors=It;E.levels=Pr;const Xi="bytes/5.7.0",zt=new E(Xi);function wi(l){return!!l.toHexString}function hr(l){return l.slice||(l.slice=function(){const n=Array.prototype.slice.call(arguments);return hr(new Uint8Array(Array.prototype.slice.apply(l,n)))}),l}function li(l){return typeof l=="number"&&l==l&&l%1===0}function ir(l){if(l==null)return!1;if(l.constructor===Uint8Array)return!0;if(typeof l=="string"||!li(l.length)||l.length<0)return!1;for(let n=0;n<l.length;n++){const d=l[n];if(!li(d)||d<0||d>=256)return!1}return!0}function Ji(l,n){if(n||(n={}),typeof l=="number"){zt.checkSafeUint53(l,"invalid arrayify value");const d=[];for(;l;)d.unshift(l&255),l=parseInt(String(l/256));return d.length===0&&d.push(0),hr(new Uint8Array(d))}if(n.allowMissingPrefix&&typeof l=="string"&&l.substring(0,2)!=="0x"&&(l="0x"+l),wi(l)&&(l=l.toHexString()),Jt(l)){let d=l.substring(2);d.length%2&&(n.hexPad==="left"?d="0"+d:n.hexPad==="right"?d+="0":zt.throwArgumentError("hex data is odd-length","value",l));const m=[];for(let g=0;g<d.length;g+=2)m.push(parseInt(d.substring(g,g+2),16));return hr(new Uint8Array(m))}return ir(l)?hr(new Uint8Array(l)):zt.throwArgumentError("invalid arrayify value","value",l)}function Jt(l,n){return!(typeof l!="string"||!l.match(/^0x[0-9A-Fa-f]*$/)||n&&l.length!==2+2*n)}const kr="0123456789abcdef";function Mi(l,n){if(n||(n={}),typeof l=="number"){zt.checkSafeUint53(l,"invalid hexlify value");let d="";for(;l;)d=kr[l&15]+d,l=Math.floor(l/16);return d.length?(d.length%2&&(d="0"+d),"0x"+d):"0x00"}if(typeof l=="bigint")return l=l.toString(16),l.length%2?"0x0"+l:"0x"+l;if(n.allowMissingPrefix&&typeof l=="string"&&l.substring(0,2)!=="0x"&&(l="0x"+l),wi(l))return l.toHexString();if(Jt(l))return l.length%2&&(n.hexPad==="left"?l="0x0"+l.substring(2):n.hexPad==="right"?l+="0":zt.throwArgumentError("hex data is odd-length","value",l)),l.toLowerCase();if(ir(l)){let d="0x";for(let m=0;m<l.length;m++){let g=l[m];d+=kr[(g&240)>>4]+kr[g&15]}return d}return zt.throwArgumentError("invalid hexlify value","value",l)}function ui(l,n){for(typeof l!="string"?l=Mi(l):Jt(l)||zt.throwArgumentError("invalid hex string","value",l),l.length>2*n+2&&zt.throwArgumentError("value out of range","value",arguments[1]);l.length<2*n+2;)l="0x0"+l.substring(2);return l}const yi="bignumber/5.7.0";var Fr=Hi.BN;const Ct=new E(yi),Or={},di=9007199254740991;function Qi(l){return l!=null&&(U.isBigNumber(l)||typeof l=="number"&&l%1===0||typeof l=="string"&&!!l.match(/^-?[0-9]+$/)||Jt(l)||typeof l=="bigint"||ir(l))}let mi=!1;class U{constructor(n,d){n!==Or&&Ct.throwError("cannot call constructor directly; use BigNumber.from",E.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=d,this._isBigNumber=!0,Object.freeze(this)}fromTwos(n){return xt(N(this).fromTwos(n))}toTwos(n){return xt(N(this).toTwos(n))}abs(){return this._hex[0]==="-"?U.from(this._hex.substring(1)):this}add(n){return xt(N(this).add(N(n)))}sub(n){return xt(N(this).sub(N(n)))}div(n){return U.from(n).isZero()&&St("division-by-zero","div"),xt(N(this).div(N(n)))}mul(n){return xt(N(this).mul(N(n)))}mod(n){const d=N(n);return d.isNeg()&&St("division-by-zero","mod"),xt(N(this).umod(d))}pow(n){const d=N(n);return d.isNeg()&&St("negative-power","pow"),xt(N(this).pow(d))}and(n){const d=N(n);return(this.isNegative()||d.isNeg())&&St("unbound-bitwise-result","and"),xt(N(this).and(d))}or(n){const d=N(n);return(this.isNegative()||d.isNeg())&&St("unbound-bitwise-result","or"),xt(N(this).or(d))}xor(n){const d=N(n);return(this.isNegative()||d.isNeg())&&St("unbound-bitwise-result","xor"),xt(N(this).xor(d))}mask(n){return(this.isNegative()||n<0)&&St("negative-width","mask"),xt(N(this).maskn(n))}shl(n){return(this.isNegative()||n<0)&&St("negative-width","shl"),xt(N(this).shln(n))}shr(n){return(this.isNegative()||n<0)&&St("negative-width","shr"),xt(N(this).shrn(n))}eq(n){return N(this).eq(N(n))}lt(n){return N(this).lt(N(n))}lte(n){return N(this).lte(N(n))}gt(n){return N(this).gt(N(n))}gte(n){return N(this).gte(N(n))}isNegative(){return this._hex[0]==="-"}isZero(){return N(this).isZero()}toNumber(){try{return N(this).toNumber()}catch{St("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Ct.throwError("this platform does not support BigInt",E.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?mi||(mi=!0,Ct.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Ct.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",E.errors.UNEXPECTED_ARGUMENT,{}):Ct.throwError("BigNumber.toString does not accept parameters",E.errors.UNEXPECTED_ARGUMENT,{})),N(this).toString(10)}toHexString(){return this._hex}toJSON(n){return{type:"BigNumber",hex:this.toHexString()}}static from(n){if(n instanceof U)return n;if(typeof n=="string")return n.match(/^-?0x[0-9a-f]+$/i)?new U(Or,rr(n)):n.match(/^-?[0-9]+$/)?new U(Or,rr(new Fr(n))):Ct.throwArgumentError("invalid BigNumber string","value",n);if(typeof n=="number")return n%1&&St("underflow","BigNumber.from",n),(n>=di||n<=-di)&&St("overflow","BigNumber.from",n),U.from(String(n));const d=n;if(typeof d=="bigint")return U.from(d.toString());if(ir(d))return U.from(Mi(d));if(d)if(d.toHexString){const m=d.toHexString();if(typeof m=="string")return U.from(m)}else{let m=d._hex;if(m==null&&d.type==="BigNumber"&&(m=d.hex),typeof m=="string"&&(Jt(m)||m[0]==="-"&&Jt(m.substring(1))))return U.from(m)}return Ct.throwArgumentError("invalid BigNumber value","value",n)}static isBigNumber(n){return!!(n&&n._isBigNumber)}}function rr(l){if(typeof l!="string")return rr(l.toString(16));if(l[0]==="-")return l=l.substring(1),l[0]==="-"&&Ct.throwArgumentError("invalid hex","value",l),l=rr(l),l==="0x00"?l:"-"+l;if(l.substring(0,2)!=="0x"&&(l="0x"+l),l==="0x")return"0x00";for(l.length%2&&(l="0x0"+l.substring(2));l.length>4&&l.substring(0,4)==="0x00";)l="0x"+l.substring(4);return l}function xt(l){return U.from(rr(l))}function N(l){const n=U.from(l).toHexString();return n[0]==="-"?new Fr("-"+n.substring(3),16):new Fr(n.substring(2),16)}function St(l,n,d){const m={fault:l,operation:n};return d!=null&&(m.value=d),Ct.throwError(l,E.errors.NUMERIC_FAULT,m)}const _t=new E(yi),jt={},_i=U.from(0),xi=U.from(-1);function bi(l,n,d,m){const g={fault:n,operation:d};return m!==void 0&&(g.value=m),_t.throwError(l,E.errors.NUMERIC_FAULT,g)}let tr="0";for(;tr.length<256;)tr+=tr;function Dr(l){if(typeof l!="number")try{l=U.from(l).toNumber()}catch{}return typeof l=="number"&&l>=0&&l<=256&&!(l%1)?"1"+tr.substring(0,l):_t.throwArgumentError("invalid decimal size","decimals",l)}function Wt(l,n){n==null&&(n=0);const d=Dr(n);l=U.from(l);const m=l.lt(_i);m&&(l=l.mul(xi));let g=l.mod(d).toString();for(;g.length<d.length-1;)g="0"+g;g=g.match(/^([0-9]*[1-9]|0)(0*)/)[1];const u=l.div(d).toString();return d.length===1?l=u:l=u+"."+g,m&&(l="-"+l),l}function Bt(l,n){n==null&&(n=0);const d=Dr(n);(typeof l!="string"||!l.match(/^-?[0-9.]+$/))&&_t.throwArgumentError("invalid decimal value","value",l);const m=l.substring(0,1)==="-";m&&(l=l.substring(1)),l==="."&&_t.throwArgumentError("missing value","value",l);const g=l.split(".");g.length>2&&_t.throwArgumentError("too many decimal points","value",l);let u=g[0],v=g[1];for(u||(u="0"),v||(v="0");v[v.length-1]==="0";)v=v.substring(0,v.length-1);for(v.length>d.length-1&&bi("fractional component exceeds decimals","underflow","parseFixed"),v===""&&(v="0");v.length<d.length-1;)v+="0";const S=U.from(u),b=U.from(v);let w=S.mul(d).add(b);return m&&(w=w.mul(xi)),w}class Xt{constructor(n,d,m,g){n!==jt&&_t.throwError("cannot use FixedFormat constructor; use FixedFormat.from",E.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=d,this.width=m,this.decimals=g,this.name=(d?"":"u")+"fixed"+String(m)+"x"+String(g),this._multiplier=Dr(g),Object.freeze(this)}static from(n){if(n instanceof Xt)return n;typeof n=="number"&&(n=`fixed128x${n}`);let d=!0,m=128,g=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")d=!1;else{const u=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);u||_t.throwArgumentError("invalid fixed format","format",n),d=u[1]!=="u",m=parseInt(u[2]),g=parseInt(u[3])}}else if(n){const u=(v,S,b)=>n[v]==null?b:(typeof n[v]!==S&&_t.throwArgumentError("invalid fixed format ("+v+" not "+S+")","format."+v,n[v]),n[v]);d=u("signed","boolean",d),m=u("width","number",m),g=u("decimals","number",g)}return m%8&&_t.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",m),g>80&&_t.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",g),new Xt(jt,d,m,g)}}class wt{constructor(n,d,m,g){n!==jt&&_t.throwError("cannot use FixedNumber constructor; use FixedNumber.from",E.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=g,this._hex=d,this._value=m,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(n){this.format.name!==n.format.name&&_t.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",n)}addUnsafe(n){this._checkFormat(n);const d=Bt(this._value,this.format.decimals),m=Bt(n._value,n.format.decimals);return wt.fromValue(d.add(m),this.format.decimals,this.format)}subUnsafe(n){this._checkFormat(n);const d=Bt(this._value,this.format.decimals),m=Bt(n._value,n.format.decimals);return wt.fromValue(d.sub(m),this.format.decimals,this.format)}mulUnsafe(n){this._checkFormat(n);const d=Bt(this._value,this.format.decimals),m=Bt(n._value,n.format.decimals);return wt.fromValue(d.mul(m).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(n){this._checkFormat(n);const d=Bt(this._value,this.format.decimals),m=Bt(n._value,n.format.decimals);return wt.fromValue(d.mul(this.format._multiplier).div(m),this.format.decimals,this.format)}floor(){const n=this.toString().split(".");n.length===1&&n.push("0");let d=wt.from(n[0],this.format);const m=!n[1].match(/^(0*)$/);return this.isNegative()&&m&&(d=d.subUnsafe(ci.toFormat(d.format))),d}ceiling(){const n=this.toString().split(".");n.length===1&&n.push("0");let d=wt.from(n[0],this.format);const m=!n[1].match(/^(0*)$/);return!this.isNegative()&&m&&(d=d.addUnsafe(ci.toFormat(d.format))),d}round(n){n==null&&(n=0);const d=this.toString().split(".");if(d.length===1&&d.push("0"),(n<0||n>80||n%1)&&_t.throwArgumentError("invalid decimal count","decimals",n),d[1].length<=n)return this;const m=wt.from("1"+tr.substring(0,n),this.format),g=Yi.toFormat(this.format);return this.mulUnsafe(m).addUnsafe(g).floor().divUnsafe(m)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(n){if(n==null)return this._hex;n%8&&_t.throwArgumentError("invalid byte width","width",n);const d=U.from(this._hex).fromTwos(this.format.width).toTwos(n).toHexString();return ui(d,n/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(n){return wt.fromString(this._value,n)}static fromValue(n,d,m){return m==null&&d!=null&&!Qi(d)&&(m=d,d=null),d==null&&(d=0),m==null&&(m="fixed"),wt.fromString(Wt(n,d),Xt.from(m))}static fromString(n,d){d==null&&(d="fixed");const m=Xt.from(d),g=Bt(n,m.decimals);!m.signed&&g.lt(_i)&&bi("unsigned value cannot be negative","overflow","value",n);let u=null;m.signed?u=g.toTwos(m.width).toHexString():(u=g.toHexString(),u=ui(u,m.width/8));const v=Wt(g,m.decimals);return new wt(jt,u,v,m)}static fromBytes(n,d){d==null&&(d="fixed");const m=Xt.from(d);if(Ji(n).length>m.width/8)throw new Error("overflow");let g=U.from(n);m.signed&&(g=g.fromTwos(m.width));const u=g.toTwos((m.signed?0:1)+m.width).toHexString(),v=Wt(g,m.decimals);return new wt(jt,u,v,m)}static from(n,d){if(typeof n=="string")return wt.fromString(n,d);if(ir(n))return wt.fromBytes(n,d);try{return wt.fromValue(n,0,d)}catch(m){if(m.code!==E.errors.INVALID_ARGUMENT)throw m}return _t.throwArgumentError("invalid FixedNumber value","value",n)}static isFixedNumber(n){return!!(n&&n._isFixedNumber)}}const ci=wt.from(1),Yi=wt.from("0.5");function ji(l,n){return new Date(l.getTime()+n*6e4)}const te=(l,n,d,m,g,u)=>{const S=parseFloat(Wt($t(n).multipliedBy(1e18).toString(),m.decimals)),b=parseFloat(Wt($t(d).multipliedBy(1e18).toString(),g.decimals)),w=parseFloat(m.weight.toString()),x=parseFloat(g.weight.toString()),gt=Number(l),Tt=parseFloat(Wt($t(u).multipliedBy(1e18).toString(),18));return ar(b*(1-(S/(S+gt*(1-Tt)))**(w/x)))},re=async(l,n,d,m,g,u,v="0.5",S)=>{const b=Et.address(u),w={amount:Et.nat(g),assetIn:{0:Et.address(d.address),1:Et.nat(d.id)},assetOut:{0:Et.address(m.address),1:Et.nat(m.id)},kind:"GIVEN_IN",poolId:{0:Et.address(n.address),1:Et.nat(n.poolId)}},x=await l.contract.at(vi.contracts.vault);return console.log(x),x.methods.swap(Et.timestamp(ji(new Date,30).toISOString()),Et.address(b),Et.address(S||b),Et.nat(0),w.amount,w.assetIn[0],w.assetIn[1],w.assetOut[0],w.assetOut[1],w.kind,w.poolId[0],w.poolId[1])},ie=async(l,n,d,m)=>{const g=await gi().tezos(),u=Pt(Br).all()[0],S=(await re(g,l,n,d,$t($t(m).toFixed(18)).multipliedBy(10**18),u.id,u.slippage)).toTransferParams(),b=await Gi(g,u.id,l.pool_tokens[0].address,[n.id],vi.contracts.vault),w={kind:zi.TRANSACTION,...S},x=[];return x.push(...b.approveRequests),x.push(w),x.push(...b.revokeRequests),await g.wallet.batch(x).send()},ee={class:"w-max rounded-md mx-auto grid grid-cols-1 p-4 bg-black"},ne={class:"pb-3 flex justify-end"},oe={class:"bg-grey-10 rounded p-4 flex justify-between"},se={class:"mr-4 w-52"},fe={key:0,class:"flex justify-end mt-1 pt-2 mr-2"},he={class:"mx-auto"},ae={class:"flex-row bg-grey-10 rounded p-4 flex justify-between"},le={class:"mr-4 w-52"},ue={key:0,class:"flex justify-end mt-1 pt-2 mr-2"},de={key:0,class:"p-4 mt-8 bg-gray-900"},me={key:0,class:"p-4 flex flex-col text-2xl items-center gap-2"},ce=bt("div",null,"Swap Completed 🎉",-1),pe={class:"text-sm text-blue-500"},ge=["href"],ve={class:"mt-8"},Se=pi({__name:"index",async setup(l){let n,d;Pt(ei).fetchPoolData();const m=Pt(Si);[n,d]=Ir(()=>m.fetch()),await n,d();const g=Vt(()=>Pt(Ai).where("token_id",A=>!isNaN(Number(A))).where("total_balance_notional",A=>A>=100).get()),u=([n,d]=Ir(()=>gi().getDAppClient()),n=await n,d(),n),v=([n,d]=Ir(()=>u.getActiveAccount()),n=await n,d(),n);v&&Pt(Br).save({id:v.address,walletKey:v.walletKey,lastConnected:v.connectedAt,slippage:"0.5"});const S=Vt(()=>Pt(Br).all()[0]),b=Vt(()=>g.value.map(A=>({label:A.symbol,value:A.symbol,description:A.id,icon:A.icon,token:{address:A.address,id:A.token_id,decimals:A.decimals},balance:A.formatBalance()}))),w=Gt(b.value[0]),x=Gt(b.value[1]),gt=Gt(b),Tt=Vt(()=>b.value.filter(A=>A.value!==w.value.value)),Rt=Gt(null),kt=Vt(()=>Pt(ni).with("pool_tokens").find(Qt.value?.poolId)),er=Vt(()=>w.value&&x.value?Pt(ni).with("pool_tokens").where("tokens_list",A=>{const I=A.split(",");return I.includes(`${w.value.token.address}${w.value.token.id}`)&&I.includes(`${x.value.token.address}${x.value.token.id}`)}).get():null),Dt=Gt(!1),Qt=Vt(()=>w.value&&x.value&&Rt.value&&er.value?er.value.map(vt=>{console.log(vt);const Nt=vt.pool_tokens.find(R=>R.address===w.value.token.address&&R.pool_token_id===w.value.token.id),Ot=vt.pool_tokens.find(R=>R.address===x.value.token.address&&R.pool_token_id===x.value.token.id),Lt=te(Rt.value,Nt.balance,Ot.balance,{decimals:Nt.decimals,weight:Nt.weight},{decimals:Ot.decimals,weight:Ot.weight},vt.swap_fee);return{poolId:vt.id,amount:Lt}}).reduce(function(vt,Nt){return vt.amount>Nt.amount?vt:Nt}):null),nr=()=>{if(w.value&&x.value){const A=w.value;w.value=x.value,x.value=A}},qt=Gt(null),or=async()=>{Dt.value=!0;try{if(w.value&&x.value&&w.value!==x.value){const A=await ie(kt.value,w.value.token,x.value.token,Rt.value),I=A.opHash,vt=await A.confirmation();console.log(vt),qt.value=I,Rt.value=null,Pt(ei).fetchPoolData()}}catch(A){console.error(A)}Dt.value=!1};return(A,I)=>{const vt=Ri,Nt=Pi,Ot=Zi,Lt=Fi,R=Di,Ut=Ii;return Ft(),Ht("div",null,[bt("div",ee,[bt("div",ne,[k(S)?(Ft(),Ur(vt,{key:0})):Zt("",!0)]),bt("div",oe,[bt("div",se,[Kt(" Amount Input "),Mt(Nt,{dark:"",modelValue:k(Rt),"onUpdate:modelValue":I[0]||(I[0]=a=>sr(Rt)?Rt.value=a:null),borderless:"",placeholder:"0.00","input-class":"focus:ring-0 focus:ring-offset-0 text-3xl"},null,8,["modelValue"])]),bt("div",null,[Mt(Ot,{modelValue:k(w),"onUpdate:modelValue":I[1]||(I[1]=a=>sr(w)?w.value=a:null),default:"CTez",options:k(gt)},null,8,["modelValue","options"]),k(S)?(Ft(),Ht("div",fe," Balance: "+Yt(k(w)?.balance),1)):Zt("",!0)])]),bt("div",he,[Mt(Lt,{dark:"",round:"",icon:"arrow_downward",onClick:nr})]),bt("div",ae,[bt("div",le,[Kt(" Amount Output "),Mt(Nt,{dark:"",loading:k(Dt),"model-value":k(Qt)?.amount,readonly:"",borderless:"",placeholder:"0.00","input-class":"focus:ring-0 focus:ring-offset-0 text-3xl"},null,8,["loading","model-value"])]),bt("div",null,[Mt(Ot,{modelValue:k(x),"onUpdate:modelValue":I[2]||(I[2]=a=>sr(x)?x.value=a:null),options:k(Tt)},null,8,["modelValue","options"]),k(x)&&k(S)?(Ft(),Ht("div",ue," Balance: "+Yt(k(x)?.balance),1)):Zt("",!0)])]),k(Dt)||k(qt)?(Ft(),Ht("div",de,[k(qt)?(Ft(),Ht("div",me,[ce,bt("div",pe,[bt("a",{href:`https://ghostnet.tzkt.io/${k(qt)}`,target:"_blank"},Yt(k(qt)),9,ge)])])):Zt("",!0),k(Dt)?(Ft(),Ur(R,{key:1,type:"text"})):Zt("",!0)])):Zt("",!0),bt("div",ve,[Mt(Lt,{loading:k(Dt),color:"orange",disable:!k(S),spread:"","no-caps":"","text-color":"white",label:"Swap",class:"full-width",onClick:or},{loading:At(()=>[Mt(Ut,{class:"on-left"}),Kt(" Sending... ")]),_:1},8,["loading","disable"])])])])}}});export{Se as default};
