import{a3 as T,j as x}from"./entry.93641817.js";import{t as a,f as y}from"./approve.71708fc3.js";import{B as I,O as N}from"./taquito.es6.9f0f758a.js";const b=async(l,r,s,d,m=.005,v=!1,e)=>{console.log(s);const c=await l.wallet.pkh();if(r){const i=a.address(c),w=e?a.address(e):a.address(c),u=a.map(s.map(t=>({key:a.nat(t.index),value:{0:a.address(t.address),1:t.id!==null?a.nat(t.id):void 0}})));console.log(u);const p=a.map(d.map(t=>({key:a.nat(t.index),value:a.nat(t.value.toString())}))),f=a.map(d.map(t=>({key:a.nat(t.index),value:a.nat(t.value.plus(t.value.multipliedBy(m)))}))),n=v?"INIT":"EXACT_TOKENS_IN_FOR_SPT_OUT",O=a.nat(0);return(await l.wallet.at(T.contracts.vault)).methodsObject.joinPool({poolId:{0:a.address(r.address),1:a.nat(r.id)},recipient:w,request:{assets:u,limits:f,userData:{allT:void 0,amountsIn:p,kind:n,minSPTAmountOut:O,sptAmountOut:void 0,tokenIndex:void 0}},sender:i})}},P=async(l,r,s,d=.5,m=!1,v)=>{const e=await x().tezos(),c=r.map((o,t)=>({index:o[0],value:I(o[1].toFixed(18)).multipliedBy(10**s[t].decimals)})),i=await b(e,l,s,c,d,m,v),w=i==null?void 0:i.toTransferParams(),u=await e.wallet.pkh(),p=await y(e,u,s[0].address,s.map(o=>o.id?o.id:0),T.contracts.vault),f={kind:N.TRANSACTION,...w},n=[];return n.push(...p.approveRequests),n.push(f),n.push(...p.revokeRequests),await e.wallet.batch(n).send()};export{b as c,P as u};
