import{l as U,p as u,s as le,aa as Gt,q as fe,z as oe,m as i,X as ke,U as Ce,V as Pe,x as N,L as Z,ab as Xt,ac as nt,ad as vt,ae as _t,af as Jt,ag as Yt,v as ft,ah as Zt,ai as el,aj as tl,ak as ll,al as st,am as Ie,an as rt,ao as ol,M as mt,ap as al,aq as ue,k as Y,ar as nl,as as sl,a as me,e as z,o as V,f as M,i as w,F as re,r as de,c as K,w as T,h as $,u as x,t as j,a9 as G,a5 as ee,a3 as Ue,j as _e,at as Be,au as rl,av as il,a4 as He,aw as ve,ax as ul,ay as cl}from"./entry.782333c1.js";import{P as te,_ as Qe,a as We,b as gt,c as dl,g as vl}from"./PoolRepository.7c24311f.js";import{u as _l,b as fl,c as bt,_ as ml,a as pt}from"./QSkeleton.9c33433b.js";import{u as gl,a as bl,b as pl}from"./use-checkbox.80e90cd0.js";import{u as hl,b as yl,a as ht,t as H,_ as xl}from"./approve.d45d309b.js";import{B as Q}from"./taquito.es6.ab3f541c.js";import{u as wl}from"./useJoinPool.74cae63c.js";import{P as Ke,a as Me,c as it,n as Sl}from"./Pool.144f8e11.js";import{_ as yt}from"./QCard.66b9baec.js";const xt=U({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:o}){const r=oe(),{proxy:{$q:n}}=r,v=s=>{o("click",s)};return()=>{if(e.props===void 0)return u("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:v},le(t.default));let s,c;const d=r.vnode.key;if(d){if(s=e.props.colsMap[d],s===void 0)return}else s=e.props.col;if(s.sortable===!0){const a=s.align==="right"?"unshift":"push";c=Gt(t.default,[]),c[a](u(fe,{class:s.__iconClass,name:n.iconSet.table.arrowUp}))}else c=le(t.default);const y={class:s.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:s.headerStyle,onClick:a=>{s.sortable===!0&&e.props.sort(s),v(a)}};return u("th",y,c)}}}),ql=U({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:t}){const o=i(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>u("tr",{class:o.value},le(t.default))}}),kl=["top","middle","bottom"],Cl=U({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>kl.includes(e)}},setup(e,{slots:t}){const o=i(()=>e.align!==void 0?{verticalAlign:e.align}:null),r=i(()=>{const n=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(n!==void 0?` text-${n}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>u("div",{class:r.value,style:o.value,role:"status","aria-label":e.label},ke(t.default,e.label!==void 0?[e.label]:[]))}}),Pl=U({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const o=oe(),r=i(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return u("td",{class:r.value},le(t.default));const n=o.vnode.key,v=(e.props.colsMap!==void 0?e.props.colsMap[n]:null)||e.props.col;if(v===void 0)return;const{row:s}=e.props;return u("td",{class:r.value+v.__tdClass(s),style:v.__tdStyle(s)},le(t.default))}}}),Bl={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},je={xs:2,sm:4,md:8,lg:16,xl:24},$l=U({name:"QSeparator",props:{...Ce,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=oe(),o=Pe(e,t.proxy.$q),r=i(()=>e.vertical===!0?"vertical":"horizontal"),n=i(()=>` q-separator--${r.value}`),v=i(()=>e.inset!==!1?`${n.value}-${Bl[e.inset]}`:""),s=i(()=>`q-separator${n.value}${v.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(o.value===!0?" q-separator--dark":"")),c=i(()=>{const d={};if(e.size!==void 0&&(d[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const y=e.spaced===!0?`${je.md}px`:e.spaced in je?`${je[e.spaced]}px`:e.spaced,a=e.vertical===!0?["Left","Right"]:["Top","Bottom"];d[`margin${a[0]}`]=d[`margin${a[1]}`]=y}return d});return()=>u("hr",{class:s.value,style:c.value,"aria-orientation":r.value})}}),Rl=["horizontal","vertical","cell","none"],Tl=U({name:"QMarkupTable",props:{...Ce,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Rl.includes(e)}},setup(e,{slots:t}){const o=oe(),r=Pe(e,o.proxy.$q),n=i(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(r.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>u("div",{class:n.value},[u("table",{class:"q-table"},le(t.default))])}});function wt(e,t){return u("div",e,[u("table",{class:"q-table"},t)])}const Vl={list:Zt,table:Tl},Al=["list","table","__qtable"],Ll=U({name:"QVirtualScroll",props:{..._l,type:{type:String,default:"list",validator:e=>Al.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:t,attrs:o}){let r;const n=N(null),v=i(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:s,localResetVirtualScroll:c,padVirtualScroll:d,onVirtualScrollEvt:y}=fl({virtualScrollLength:v,getVirtualScrollTarget:h,getVirtualScrollEl:_}),a=i(()=>{if(v.value===0)return[];const L=(P,k)=>({index:s.value.from+k,item:P});return e.itemsFn===void 0?e.items.slice(s.value.from,s.value.to).map(L):e.itemsFn(s.value.from,s.value.to-s.value.from).map(L)}),g=i(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),b=i(()=>e.scrollTarget!==void 0?{}:{tabindex:0});Z(v,()=>{c()}),Z(()=>e.scrollTarget,()=>{f(),m()});function _(){return n.value.$el||n.value}function h(){return r}function m(){r=Xt(_(),e.scrollTarget),r.addEventListener("scroll",y,nt.passive)}function f(){r!==void 0&&(r.removeEventListener("scroll",y,nt.passive),r=void 0)}function q(){let L=d(e.type==="list"?"div":"tbody",a.value.map(t.default));return t.before!==void 0&&(L=t.before().concat(L)),ke(t.after,L)}return vt(()=>{c()}),_t(()=>{m()}),Jt(()=>{m()}),Yt(()=>{f()}),ft(()=>{f()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?wt({ref:n,class:"q-table__middle "+g.value},q()):u(Vl[e.type],{...o,ref:n,class:[o.class,g.value],...b.value},q)}}}),Ol={xs:2,sm:4,md:6,lg:10,xl:14};function ut(e,t,o){return{transform:t===!0?`translateX(${o.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const Dl=U({name:"QLinearProgress",props:{...Ce,...el,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:o}=oe(),r=Pe(e,o.$q),n=tl(e,Ol),v=i(()=>e.indeterminate===!0||e.query===!0),s=i(()=>e.reverse!==e.query),c=i(()=>({...n.value!==null?n.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),d=i(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),y=i(()=>ut(e.buffer!==void 0?e.buffer:1,s.value,o.$q)),a=i(()=>`with${e.instantFeedback===!0?"out":""}-transition`),g=i(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${a.value} q-linear-progress__track--${r.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),b=i(()=>ut(v.value===!0?1:e.value,s.value,o.$q)),_=i(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${a.value} q-linear-progress__model--${v.value===!0?"in":""}determinate`),h=i(()=>({width:`${e.value*100}%`})),m=i(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${a.value}`);return()=>{const f=[u("div",{class:g.value,style:y.value}),u("div",{class:_.value,style:b.value})];return e.stripe===!0&&v.value===!1&&f.push(u("div",{class:m.value,style:h.value})),u("div",{class:d.value,style:c.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},ke(t.default,f))}}}),Fl=u("div",{key:"svg",class:"q-checkbox__bg absolute"},[u("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[u("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),u("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),Ee=U({name:"QCheckbox",props:gl,emits:bl,setup(e){function t(o,r){const n=i(()=>(o.value===!0?e.checkedIcon:r.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>n.value!==null?[u("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[u(fe,{class:"q-checkbox__icon",name:n.value})])]:[Fl]}return pl("checkbox",t)}});let ce=0;const Nl={fullscreen:Boolean,noRouteFullscreenExit:Boolean},zl=["update:fullscreen","fullscreen"];function Ml(){const e=oe(),{props:t,emit:o,proxy:r}=e;let n,v,s;const c=N(!1);ll(e)===!0&&Z(()=>r.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&a()}),Z(()=>t.fullscreen,g=>{c.value!==g&&d()}),Z(c,g=>{o("update:fullscreen",g),o("fullscreen",g)});function d(){c.value===!0?a():y()}function y(){c.value!==!0&&(c.value=!0,s=r.$el.parentNode,s.replaceChild(v,r.$el),document.body.appendChild(r.$el),ce++,ce===1&&document.body.classList.add("q-body--fullscreen-mixin"),n={handler:a},st.add(n))}function a(){c.value===!0&&(n!==void 0&&(st.remove(n),n=void 0),s.replaceChild(r.$el,v),c.value=!1,ce=Math.max(0,ce-1),ce===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),r.$el.scrollIntoView!==void 0&&setTimeout(()=>{r.$el.scrollIntoView()})))}return vt(()=>{v=document.createElement("span")}),_t(()=>{t.fullscreen===!0&&y()}),ft(a),Object.assign(r,{toggleFullscreen:d,setFullscreen:y,exitFullscreen:a}),{inFullscreen:c,toggleFullscreen:d}}function jl(e,t){return new Date(e)-new Date(t)}const El={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Il(e,t,o,r){const n=i(()=>{const{sortBy:c}=t.value;return c&&o.value.find(d=>d.name===c)||null}),v=i(()=>e.sortMethod!==void 0?e.sortMethod:(c,d,y)=>{const a=o.value.find(_=>_.name===d);if(a===void 0||a.field===void 0)return c;const g=y===!0?-1:1,b=typeof a.field=="function"?_=>a.field(_):_=>_[a.field];return c.sort((_,h)=>{let m=b(_),f=b(h);return m==null?-1*g:f==null?1*g:a.sort!==void 0?a.sort(m,f,_,h)*g:Ie(m)===!0&&Ie(f)===!0?(m-f)*g:rt(m)===!0&&rt(f)===!0?jl(m,f)*g:typeof m=="boolean"&&typeof f=="boolean"?(m-f)*g:([m,f]=[m,f].map(q=>(q+"").toLocaleString().toLowerCase()),m<f?-1*g:m===f?0:g)})});function s(c){let d=e.columnSortOrder;if(ol(c)===!0)c.sortOrder&&(d=c.sortOrder),c=c.name;else{const g=o.value.find(b=>b.name===c);g!==void 0&&g.sortOrder&&(d=g.sortOrder)}let{sortBy:y,descending:a}=t.value;y!==c?(y=c,a=d==="da"):e.binaryStateSort===!0?a=!a:a===!0?d==="ad"?y=null:a=!1:d==="ad"?a=!0:y=null,r({sortBy:y,descending:a,page:1})}return{columnToSort:n,computedSortMethod:v,sort:s}}const Ul={filter:[String,Object],filterMethod:Function};function Hl(e,t){const o=i(()=>e.filterMethod!==void 0?e.filterMethod:(r,n,v,s)=>{const c=n?n.toLowerCase():"";return r.filter(d=>v.some(y=>{const a=s(y,d)+"";return(a==="undefined"||a==="null"?"":a.toLowerCase()).indexOf(c)!==-1}))});return Z(()=>e.filter,()=>{mt(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:o}}function Ql(e,t){for(const o in t)if(t[o]!==e[o])return!1;return!0}function ct(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Wl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Kl(e,t){const{props:o,emit:r}=e,n=N(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:o.rowsPerPageOptions.length!==0?o.rowsPerPageOptions[0]:5},o.pagination)),v=i(()=>{const a=o["onUpdate:pagination"]!==void 0?{...n.value,...o.pagination}:n.value;return ct(a)}),s=i(()=>v.value.rowsNumber!==void 0);function c(a){d({pagination:a,filter:o.filter})}function d(a={}){mt(()=>{r("request",{pagination:a.pagination||v.value,filter:a.filter||o.filter,getCellValue:t})})}function y(a,g){const b=ct({...v.value,...a});if(Ql(v.value,b)===!0){s.value===!0&&g===!0&&c(b);return}if(s.value===!0){c(b);return}o.pagination!==void 0&&o["onUpdate:pagination"]!==void 0?r("update:pagination",b):n.value=b}return{innerPagination:n,computedPagination:v,isServerSide:s,requestServerInteraction:d,setPagination:y}}function Gl(e,t,o,r,n,v){const{props:s,emit:c,proxy:{$q:d}}=e,y=i(()=>r.value===!0?o.value.rowsNumber||0:v.value),a=i(()=>{const{page:k,rowsPerPage:B}=o.value;return(k-1)*B}),g=i(()=>{const{page:k,rowsPerPage:B}=o.value;return k*B}),b=i(()=>o.value.page===1),_=i(()=>o.value.rowsPerPage===0?1:Math.max(1,Math.ceil(y.value/o.value.rowsPerPage))),h=i(()=>g.value===0?!0:o.value.page>=_.value),m=i(()=>(s.rowsPerPageOptions.includes(t.value.rowsPerPage)?s.rowsPerPageOptions:[t.value.rowsPerPage].concat(s.rowsPerPageOptions)).map(B=>({label:B===0?d.lang.table.allRows:""+B,value:B})));Z(_,(k,B)=>{if(k===B)return;const E=o.value.page;k&&!E?n({page:1}):k<E&&n({page:k})});function f(){n({page:1})}function q(){const{page:k}=o.value;k>1&&n({page:k-1})}function L(){const{page:k,rowsPerPage:B}=o.value;g.value>0&&k*B<y.value&&n({page:k+1})}function P(){n({page:_.value})}return s["onUpdate:pagination"]!==void 0&&c("update:pagination",{...o.value}),{firstRowIndex:a,lastRowIndex:g,isFirstPage:b,isLastPage:h,pagesNumber:_,computedRowsPerPageOptions:m,computedRowsNumber:y,firstPage:f,prevPage:q,nextPage:L,lastPage:P}}const Xl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Jl=["update:selected","selection"];function Yl(e,t,o,r){const n=i(()=>{const h={};return e.selected.map(r.value).forEach(m=>{h[m]=!0}),h}),v=i(()=>e.selection!=="none"),s=i(()=>e.selection==="single"),c=i(()=>e.selection==="multiple"),d=i(()=>o.value.length!==0&&o.value.every(h=>n.value[r.value(h)]===!0)),y=i(()=>d.value!==!0&&o.value.some(h=>n.value[r.value(h)]===!0)),a=i(()=>e.selected.length);function g(h){return n.value[h]===!0}function b(){t("update:selected",[])}function _(h,m,f,q){t("selection",{rows:m,added:f,keys:h,evt:q});const L=s.value===!0?f===!0?m:[]:f===!0?e.selected.concat(m):e.selected.filter(P=>h.includes(r.value(P))===!1);t("update:selected",L)}return{hasSelectionMode:v,singleSelection:s,multipleSelection:c,allRowsSelected:d,someRowsSelected:y,rowsSelectedNumber:a,isRowSelected:g,clearSelection:b,updateSelection:_}}function dt(e){return Array.isArray(e)?e.slice():[]}const Zl={expanded:Array},eo=["update:expanded"];function to(e,t){const o=N(dt(e.expanded));Z(()=>e.expanded,s=>{o.value=dt(s)});function r(s){return o.value.includes(s)}function n(s){e.expanded!==void 0?t("update:expanded",s):o.value=s}function v(s,c){const d=o.value.slice(),y=d.indexOf(s);c===!0?y===-1&&(d.push(s),n(d)):y!==-1&&(d.splice(y,1),n(d))}return{isRowExpanded:r,setExpanded:n,updateExpanded:v}}const lo={visibleColumns:Array};function oo(e,t,o){const r=i(()=>{if(e.columns!==void 0)return e.columns;const c=e.rows[0];return c!==void 0?Object.keys(c).map(d=>({name:d,label:d.toUpperCase(),field:d,align:Ie(c[d])?"right":"left",sortable:!0})):[]}),n=i(()=>{const{sortBy:c,descending:d}=t.value;return(e.visibleColumns!==void 0?r.value.filter(a=>a.required===!0||e.visibleColumns.includes(a.name)===!0):r.value).map(a=>{const g=a.align||"right",b=`text-${g}`;return{...a,align:g,__iconClass:`q-table__sort-icon q-table__sort-icon--${g}`,__thClass:b+(a.headerClasses!==void 0?" "+a.headerClasses:"")+(a.sortable===!0?" sortable":"")+(a.name===c?` sorted ${d===!0?"sort-desc":""}`:""),__tdStyle:a.style!==void 0?typeof a.style!="function"?()=>a.style:a.style:()=>null,__tdClass:a.classes!==void 0?typeof a.classes!="function"?()=>b+" "+a.classes:_=>b+" "+a.classes(_):()=>b}})}),v=i(()=>{const c={};return n.value.forEach(d=>{c[d.name]=d}),c}),s=i(()=>e.tableColspan!==void 0?e.tableColspan:n.value.length+(o.value===!0?1:0));return{colList:r,computedCols:n,computedColsMap:v,computedColspan:s}}const qe="q-table__bottom row items-center",St={};bt.forEach(e=>{St[e]={}});const ao=U({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...St,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Ce,...Nl,...lo,...Ul,...Wl,...Zl,...Xl,...El},emits:["request","virtualScroll",...zl,...eo,...Jl],setup(e,{slots:t,emit:o}){const r=oe(),{proxy:{$q:n}}=r,v=Pe(e,n),{inFullscreen:s,toggleFullscreen:c}=Ml(),d=i(()=>typeof e.rowKey=="function"?e.rowKey:l=>l[e.rowKey]),y=N(null),a=N(null),g=i(()=>e.grid!==!0&&e.virtualScroll===!0),b=i(()=>" q-table__card"+(v.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),_=i(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":b.value)+(v.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(s.value===!0?" fullscreen scroll":"")),h=i(()=>_.value+(e.loading===!0?" q-table--loading":""));Z(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+_.value,()=>{g.value===!0&&a.value!==null&&a.value.reset()});const{innerPagination:m,computedPagination:f,isServerSide:q,requestServerInteraction:L,setPagination:P}=Kl(r,ne),{computedFilterMethod:k}=Hl(e,P),{isRowExpanded:B,setExpanded:E,updateExpanded:ie}=to(e,o),O=i(()=>{let l=e.rows;if(q.value===!0||l.length===0)return l;const{sortBy:p,descending:S}=f.value;return e.filter&&(l=k.value(l,e.filter,X.value,ne)),$t.value!==null&&(l=Rt.value(e.rows===l?l.slice():l,p,S)),l}),A=i(()=>O.value.length),W=i(()=>{let l=O.value;if(q.value===!0)return l;const{rowsPerPage:p}=f.value;return p!==0&&(be.value===0&&e.rows!==l?l.length>pe.value&&(l=l.slice(0,pe.value)):l=l.slice(be.value,pe.value)),l}),{hasSelectionMode:ae,singleSelection:kt,multipleSelection:Ge,allRowsSelected:Ct,someRowsSelected:Xe,rowsSelectedNumber:$e,isRowSelected:Re,clearSelection:Pt,updateSelection:ge}=Yl(e,o,W,d),{colList:Bt,computedCols:X,computedColsMap:Je,computedColspan:Ye}=oo(e,f,ae),{columnToSort:$t,computedSortMethod:Rt,sort:Te}=Il(e,f,Bt,P),{firstRowIndex:be,lastRowIndex:pe,isFirstPage:Ve,isLastPage:Ae,pagesNumber:he,computedRowsPerPageOptions:Tt,computedRowsNumber:ye,firstPage:Le,prevPage:Oe,nextPage:De,lastPage:Fe}=Gl(r,m,f,q,P,A),Vt=i(()=>W.value.length===0),At=i(()=>{const l={};return bt.forEach(p=>{l[p]=e[p]}),l.virtualScrollItemSize===void 0&&(l.virtualScrollItemSize=e.dense===!0?28:48),l});function Lt(){g.value===!0&&a.value.reset()}function Ot(){if(e.grid===!0)return Wt();const l=e.hideHeader!==!0?ot:null;if(g.value===!0){const S=t["top-row"],C=t["bottom-row"],R={default:F=>et(F.item,t.body,F.index)};if(S!==void 0){const F=u("tbody",S({cols:X.value}));R.before=l===null?()=>F:()=>[l()].concat(F)}else l!==null&&(R.before=l);return C!==void 0&&(R.after=()=>u("tbody",C({cols:X.value}))),u(Ll,{ref:a,class:e.tableClass,style:e.tableStyle,...At.value,scrollTarget:e.virtualScrollTarget,items:W.value,type:"__qtable",tableColspan:Ye.value,onVirtualScroll:Ft},R)}const p=[Nt()];return l!==null&&p.unshift(l()),wt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},p)}function Dt(l,p){if(a.value!==null){a.value.scrollTo(l,p);return}l=parseInt(l,10);const S=y.value.querySelector(`tbody tr:nth-of-type(${l+1})`);if(S!==null){const C=y.value.querySelector(".q-table__middle.scroll"),R=S.offsetTop-e.virtualScrollStickySizeStart,F=R<C.scrollTop?"decrease":"increase";C.scrollTop=R,o("virtualScroll",{index:l,from:0,to:m.value.rowsPerPage-1,direction:F})}}function Ft(l){o("virtualScroll",l)}function Ze(){return[u(Dl,{class:"q-table__linear-progress",color:e.color,dark:v.value,indeterminate:!0,trackColor:"transparent"})]}function et(l,p,S){const C=d.value(l),R=Re(C);if(p!==void 0)return p(tt({key:C,row:l,pageIndex:S,__trClass:R?"selected":""}));const F=t["body-cell"],D=X.value.map(I=>{const we=t[`body-cell-${I.name}`],Se=we!==void 0?we:F;return Se!==void 0?Se(zt({key:C,row:l,pageIndex:S,col:I})):u("td",{class:I.__tdClass(l),style:I.__tdStyle(l)},ne(I,l))});if(ae.value===!0){const I=t["body-selection"],we=I!==void 0?I(Mt({key:C,row:l,pageIndex:S})):[u(Ee,{modelValue:R,color:e.color,dark:v.value,dense:e.dense,"onUpdate:modelValue":(Se,Kt)=>{ge([C],[l],Se,Kt)}})];D.unshift(u("td",{class:"q-table--col-auto-width"},we))}const J={key:C,class:{selected:R}};return e.onRowClick!==void 0&&(J.class["cursor-pointer"]=!0,J.onClick=I=>{o("RowClick",I,l,S)}),e.onRowDblclick!==void 0&&(J.class["cursor-pointer"]=!0,J.onDblclick=I=>{o("RowDblclick",I,l,S)}),e.onRowContextmenu!==void 0&&(J.class["cursor-pointer"]=!0,J.onContextmenu=I=>{o("RowContextmenu",I,l,S)}),u("tr",J,D)}function Nt(){const l=t.body,p=t["top-row"],S=t["bottom-row"];let C=W.value.map((R,F)=>et(R,l,F));return p!==void 0&&(C=p({cols:X.value}).concat(C)),S!==void 0&&(C=C.concat(S({cols:X.value}))),u("tbody",C)}function tt(l){return Ne(l),l.cols=l.cols.map(p=>ue({...p},"value",()=>ne(p,l.row))),l}function zt(l){return Ne(l),ue(l,"value",()=>ne(l.col,l.row)),l}function Mt(l){return Ne(l),l}function Ne(l){Object.assign(l,{cols:X.value,colsMap:Je.value,sort:Te,rowIndex:be.value+l.pageIndex,color:e.color,dark:v.value,dense:e.dense}),ae.value===!0&&ue(l,"selected",()=>Re(l.key),(p,S)=>{ge([l.key],[l.row],p,S)}),ue(l,"expand",()=>B(l.key),p=>{ie(l.key,p)})}function ne(l,p){const S=typeof l.field=="function"?l.field(p):p[l.field];return l.format!==void 0?l.format(S,p):S}const se=i(()=>({pagination:f.value,pagesNumber:he.value,isFirstPage:Ve.value,isLastPage:Ae.value,firstPage:Le,prevPage:Oe,nextPage:De,lastPage:Fe,inFullscreen:s.value,toggleFullscreen:c}));function jt(){const l=t.top,p=t["top-left"],S=t["top-right"],C=t["top-selection"],R=ae.value===!0&&C!==void 0&&$e.value>0,F="q-table__top relative-position row items-center";if(l!==void 0)return u("div",{class:F},[l(se.value)]);let D;if(R===!0?D=C(se.value).slice():(D=[],p!==void 0?D.push(u("div",{class:"q-table__control"},[p(se.value)])):e.title&&D.push(u("div",{class:"q-table__control"},[u("div",{class:["q-table__title",e.titleClass]},e.title)]))),S!==void 0&&(D.push(u("div",{class:"q-table__separator col"})),D.push(u("div",{class:"q-table__control"},[S(se.value)]))),D.length!==0)return u("div",{class:F},D)}const lt=i(()=>Xe.value===!0?null:Ct.value);function ot(){const l=Et();return e.loading===!0&&t.loading===void 0&&l.push(u("tr",{class:"q-table__progress"},[u("th",{class:"relative-position",colspan:Ye.value},Ze())])),u("thead",l)}function Et(){const l=t.header,p=t["header-cell"];if(l!==void 0)return l(ze({header:!0})).slice();const S=X.value.map(C=>{const R=t[`header-cell-${C.name}`],F=R!==void 0?R:p,D=ze({col:C});return F!==void 0?F(D):u(xt,{key:C.name,props:D},()=>C.label)});if(kt.value===!0&&e.grid!==!0)S.unshift(u("th",{class:"q-table--col-auto-width"}," "));else if(Ge.value===!0){const C=t["header-selection"],R=C!==void 0?C(ze({})):[u(Ee,{color:e.color,modelValue:lt.value,dark:v.value,dense:e.dense,"onUpdate:modelValue":at})];S.unshift(u("th",{class:"q-table--col-auto-width"},R))}return[u("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},S)]}function ze(l){return Object.assign(l,{cols:X.value,sort:Te,colsMap:Je.value,color:e.color,dark:v.value,dense:e.dense}),Ge.value===!0&&ue(l,"selected",()=>lt.value,at),l}function at(l){Xe.value===!0&&(l=!1),ge(W.value.map(d.value),W.value,l)}const xe=i(()=>{const l=[e.iconFirstPage||n.iconSet.table.firstPage,e.iconPrevPage||n.iconSet.table.prevPage,e.iconNextPage||n.iconSet.table.nextPage,e.iconLastPage||n.iconSet.table.lastPage];return n.lang.rtl===!0?l.reverse():l});function It(){if(e.hideBottom===!0)return;if(Vt.value===!0){if(e.hideNoData===!0)return;const S=e.loading===!0?e.loadingLabel||n.lang.table.loading:e.filter?e.noResultsLabel||n.lang.table.noResults:e.noDataLabel||n.lang.table.noData,C=t["no-data"],R=C!==void 0?[C({message:S,icon:n.iconSet.table.warning,filter:e.filter})]:[u(fe,{class:"q-table__bottom-nodata-icon",name:n.iconSet.table.warning}),S];return u("div",{class:qe+" q-table__bottom--nodata"},R)}const l=t.bottom;if(l!==void 0)return u("div",{class:qe},[l(se.value)]);const p=e.hideSelectedBanner!==!0&&ae.value===!0&&$e.value>0?[u("div",{class:"q-table__control"},[u("div",[(e.selectedRowsLabel||n.lang.table.selectedRecords)($e.value)])])]:[];if(e.hidePagination!==!0)return u("div",{class:qe+" justify-end"},Ht(p));if(p.length!==0)return u("div",{class:qe},p)}function Ut(l){P({page:1,rowsPerPage:l.value})}function Ht(l){let p;const{rowsPerPage:S}=f.value,C=e.paginationLabel||n.lang.table.pagination,R=t.pagination,F=e.rowsPerPageOptions.length>1;if(l.push(u("div",{class:"q-table__separator col"})),F===!0&&l.push(u("div",{class:"q-table__control"},[u("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||n.lang.table.recordsPerPage]),u(ml,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:S,options:Tt.value,displayValue:S===0?n.lang.table.allRows:S,dark:v.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Ut})])),R!==void 0)p=R(se.value);else if(p=[u("span",S!==0?{class:"q-table__bottom-item"}:{},[S?C(be.value+1,Math.min(pe.value,ye.value),ye.value):C(1,A.value,ye.value)])],S!==0&&he.value>1){const D={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(D.size="sm"),he.value>2&&p.push(u(Y,{key:"pgFirst",...D,icon:xe.value[0],disable:Ve.value,onClick:Le})),p.push(u(Y,{key:"pgPrev",...D,icon:xe.value[1],disable:Ve.value,onClick:Oe}),u(Y,{key:"pgNext",...D,icon:xe.value[2],disable:Ae.value,onClick:De})),he.value>2&&p.push(u(Y,{key:"pgLast",...D,icon:xe.value[3],disable:Ae.value,onClick:Fe}))}return l.push(u("div",{class:"q-table__control"},p)),l}function Qt(){const l=e.gridHeader===!0?[u("table",{class:"q-table"},[ot()])]:e.loading===!0&&t.loading===void 0?Ze():void 0;return u("div",{class:"q-table__middle"},l)}function Wt(){const l=t.item!==void 0?t.item:p=>{const S=p.cols.map(R=>u("div",{class:"q-table__grid-item-row"},[u("div",{class:"q-table__grid-item-title"},[R.label]),u("div",{class:"q-table__grid-item-value"},[R.value])]));if(ae.value===!0){const R=t["body-selection"],F=R!==void 0?R(p):[u(Ee,{modelValue:p.selected,color:e.color,dark:v.value,dense:e.dense,"onUpdate:modelValue":(D,J)=>{ge([p.key],[p.row],D,J)}})];S.unshift(u("div",{class:"q-table__grid-item-row"},F),u($l,{dark:v.value}))}const C={class:["q-table__grid-item-card"+b.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(C.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(C.onClick=R=>{o("RowClick",R,p.row,p.pageIndex)}),e.onRowDblclick!==void 0&&(C.onDblclick=R=>{o("RowDblclick",R,p.row,p.pageIndex)})),u("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(p.selected===!0?" q-table__grid-item--selected":"")},[u("div",C,S)])};return u("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},W.value.map((p,S)=>l(tt({key:d.value(p),row:p,pageIndex:S}))))}return Object.assign(r.proxy,{requestServerInteraction:L,setPagination:P,firstPage:Le,prevPage:Oe,nextPage:De,lastPage:Fe,isRowSelected:Re,clearSelection:Pt,isRowExpanded:B,setExpanded:E,sort:Te,resetVirtualScroll:Lt,scrollTo:Dt,getCellValue:ne}),al(r.proxy,{filteredSortedRows:()=>O.value,computedRows:()=>W.value,computedRowsNumber:()=>ye.value}),()=>{const l=[jt()],p={ref:y,class:h.value};return e.grid===!0?l.push(Qt()):Object.assign(p,{class:[p.class,e.cardClass],style:e.cardStyle}),l.push(Ot(),It()),e.loading===!0&&t.loading!==void 0&&l.push(t.loading()),u("div",p,l)}}}),no=u("div",{class:"q-space"}),so=U({name:"QSpace",setup(){return()=>no}}),qt=U({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const o=i(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>u(e.tag,{class:o.value},le(t.default))}}),ro=U({name:"QBtnToggle",props:{...hl,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(t=>("label"in t||"icon"in t||"slot"in t)&&"value"in t)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:t,emit:o}){const r=i(()=>e.options.find(b=>b.value===e.modelValue)!==void 0),n=i(()=>({type:"hidden",name:e.name,value:e.modelValue})),v=yl(n),s=i(()=>nl(e)),c=i(()=>({rounded:e.rounded,dense:e.dense,...s.value})),d=i(()=>e.options.map((b,_)=>{const{attrs:h,value:m,slot:f,...q}=b;return{slot:f,props:{key:_,"aria-pressed":m===e.modelValue?"true":"false",...h,...q,...c.value,disable:e.disable===!0||q.disable===!0,color:m===e.modelValue?a(q,"toggleColor"):a(q,"color"),textColor:m===e.modelValue?a(q,"toggleTextColor"):a(q,"textColor"),noCaps:a(q,"noCaps")===!0,noWrap:a(q,"noWrap")===!0,size:a(q,"size"),padding:a(q,"padding"),ripple:a(q,"ripple"),stack:a(q,"stack")===!0,stretch:a(q,"stretch")===!0,onClick(L){y(m,b,L)}}}}));function y(b,_,h){e.readonly!==!0&&(e.modelValue===b?e.clearable===!0&&(o("update:modelValue",null,null),o("clear")):o("update:modelValue",b,_),o("click",h))}function a(b,_){return b[_]===void 0?e[_]:b[_]}function g(){const b=d.value.map(_=>u(Y,_.props,_.slot!==void 0?t[_.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&r.value===!0&&v(b,"push"),ke(t.default,b)}return()=>u(sl,{class:"q-btn-toggle",...s.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},g)}}),io={class:"flex flex-col"},uo={class:"q-pa-md"},co={class:"text-sm"},vo={class:"row items-center no-wrap"},_o={class:"text-center leading-4"},fo=w("br",null,null,-1),mo={key:0,class:"p-4 mt-8 bg-gray-900"},go={key:0,class:"p-4 flex flex-col text-2xl items-center gap-2"},bo=w("div",null,"Liquidity Added ðŸŽ‰",-1),po={class:"text-sm text-blue-500"},ho=["href"],yo=me({__name:"JoinPool",props:{pool:{},pricingAsset:{}},setup(e){var _,h;const t=e,o=i(()=>t.pool?z(Ke).with("pool_tokens").find(t.pool):null),r=i(()=>{var m;return z(Me).where("pool_id",(m=o.value)==null?void 0:m.id).orderBy("index").get()});let n=i(()=>{var m;return(m=r.value)==null?void 0:m.map(f=>({id:f.id,address:f.address,token_id:f.pool_token_id,symbol:f.symbol,decimal:f.decimals,index:f.index,priceRate:1,amount:"0"}))});console.log(n),i(()=>{var m;return(m=o.value)==null?void 0:m.pool_tokens.map(f=>({balance:Q(f.balance),index:f.index}))});const v=N(new Array(n.value.length).fill(N(null))),s=(_=n.value)==null?void 0:_.map(m=>N(void 0)),c=(h=n.value)==null?void 0:h.map(m=>N(void 0));let d=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});const y=(m,f)=>{if(m in Ue.mockPriceData&&s[f].value&&!isNaN(parseInt(s[f].value))){const q=Q(s[f].value).multipliedBy(Ue.mockPriceData[m]);c[f].value=q.toNumber()}};i(()=>{if(t.pricingAsset){const m=s[t.pricingAsset.index].value;return isNaN(parseInt(m))?Me.formatPrice("0"):Me.formatPrice(m)}return null});const a=N(!1),g=N(null),b=async()=>{a.value=!0;try{v.value.forEach((B,E)=>B.value[E].validate());const f=await(await _e().getDAppClient()).getActiveAccount(),q=z(Be).find(f.address),L=r.value.map(B=>({address:B.address,id:B.FA2?B.pool_token_id:null,decimals:B.decimals,index:B.index})),k=await(await wl({address:o.value.address,id:o.value.poolId},s.map((B,E)=>[E,Q(B.value)]),L,parseInt(q==null?void 0:q.slippage)/100,o.value.pool_shares==0)).confirmation();console.log(k),g.value=k.block,s.forEach((B,E)=>s[E].value=void 0),z(te).fetchPoolData()}catch(m){console.log(m)}a.value=!1};return(m,f)=>{const q=Qe,L=We,P=fe,k=Y,B=ht,E=pt,ie=gt;return V(),M("div",io,[w("div",null,[w("div",uo,[(V(!0),M(re,null,de(x(n),O=>(V(),K(B,{ref_for:!0,ref:x(v)[O.index],key:"id",dark:"",outlined:"",color:"white",type:"number",placeholder:"0.00","bottom-slots":"",modelValue:x(s)[O.index].value,"onUpdate:modelValue":[A=>x(s)[O.index].value=A,A=>y(O.symbol,O.index)],"input-class":"focus:ring-0 focus:ring-offset-0",rules:[A=>A>0||"No amount entered",A=>A<=x(r)[O.index].normalizedBalance()||"Not enough Balance"],"lazy-rules":"ondemand"},{before:T(()=>[$(L,{size:"40px"},{default:T(()=>[$(q,{src:x(r)[O.index].icon,"spinner-color":"white"},null,8,["src"])]),_:2},1024)]),append:T(()=>[w("div",co,j(x(c)[O.index].value?x(d).format(x(c)[O.index].value):""),1)]),after:T(()=>[$(k,{color:"orange",outline:"",dense:"",onClick:()=>{x(s)[O.index].value=x(r)[O.index].normalizedBalance(),y(O.symbol,O.index)}},{default:T(()=>[w("div",vo,[$(P,{left:"",name:"wallet"}),w("div",_o,[G(j(O.symbol)+" ",1),fo,G(" "+j(x(r)[O.index].formatBalance()),1)])])]),_:2},1032,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","rules"]))),128)),x(a)||x(g)?(V(),M("div",mo,[x(g)?(V(),M("div",go,[bo,w("div",po,[w("a",{href:`https://ghostnet.tzkt.io/${x(g).operations.at(-1).at(-1).hash}`,target:"_blank"},j(x(g).operations.at(-1).at(-1).hash),9,ho)])])):ee("",!0),x(a)?(V(),K(E,{key:1,type:"text"})):ee("",!0)])):ee("",!0),$(k,{loading:x(a),color:"black",spread:"","no-caps":"","text-color":"white",label:"Add Liquidity",class:"full-width",onClick:b},{loading:T(()=>[$(ie,{class:"on-left"}),G(" Sending... ")]),_:1},8,["loading"])])])])}}}),xo=U({name:"QCardActions",props:{...rl,vertical:Boolean},setup(e,{slots:t}){const o=il(e),r=i(()=>`q-card__actions ${o.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>u("div",{class:r.value},le(t.default))}}),wo=async(e,t,o,r,n="0.5",v)=>{const s=await e.wallet.pkh();if(t){const c=H.address(s),d=v?H.address(v):H.address(s),y=H.map(t.pool_tokens.map(h=>({key:H.nat(h.index),value:{0:H.address(h.address),1:H.nat(h.pool_token_id)}}))),a=H.map(r.map(h=>({key:H.nat(h.index),value:H.nat(h.amount.minus(h.amount.multipliedBy(Number(n)/100)).toFixed(0))}))),g="EXACT_SPT_IN_FOR_TOKENS_OUT";return(await e.wallet.at(Ue.contracts.vault)).methodsObject.exitPool({poolId:{0:H.address(t.address),1:H.nat(t.poolId)},recipient:d,sender:c,request:{assets:y,limits:a,userData:{amountsOut:void 0,maxSPTAmountIn:void 0,sptAmountIn:H.nat(o),tokenIndex:void 0,kind:g,recoveryModeExit:!1}}})}},So={class:"q-pa-sm"},qo={class:"flex flex-row justify-between gap-x-1 mx-4 my-1"},ko=w("div",{class:"place-self-end font-bold"},"How much to withdraw?",-1),Co={class:"flex flex-row gap-x-1"},Po={class:"pb-2"},Bo={class:"my-1"},$o={class:"row items-center no-wrap"},Ro={class:"text-center leading-4"},To=w("br",null,null,-1),Vo=w("div",{class:"text-center text-md font-bold pb-1"}," You will receive at least: ",-1),Ao={class:"grid grid-cols-2 gap-3"},Lo={class:"flex justify-center items-center"},Oo={class:"text-sm font-bold"},Do=w("br",null,null,-1),Fo={class:"text-xs font-thin grey"},No={key:0,class:"p-4 mt-8 bg-gray-900"},zo={key:0,class:"p-4 flex flex-col text-2xl items-center gap-2"},Mo=w("div",null,"Liquidity Removed ðŸŽ‰",-1),jo={class:"text-sm text-blue-500"},Eo=["href"],Io=me({__name:"ExitPool",props:{pool:{}},setup(e){const t=e,o=i(()=>t.pool?z(Ke).with("pool_tokens").find(t.pool):null),r=N(null),n=N(void 0),v=N(!1),s=b=>{var h;const _=Q((h=o.value)==null?void 0:h.userLPBalance).dividedBy(100).multipliedBy(b).dividedBy(1e18);n.value=_.toString()},c=i(()=>{var b;return(b=o.value)==null?void 0:b.pool_tokens.map(_=>({balance:Q(_.balance),index:_.index}))});console.log(c.value[0].balance.toString());const d=i(()=>{var _;return it(Q(n.value).multipliedBy(1e18),Q((_=o.value)==null?void 0:_.pool_shares),c.value)}),y=i(()=>{var _,h;return!n.value||isNaN(parseInt(n.value))?new Array((_=o.value)==null?void 0:_.pool_tokens.length).fill("0.00"):it(Q(n.value).multipliedBy(10**18),Q((h=o.value)==null?void 0:h.pool_shares),c.value).map(m=>Sl(m.amount).format({average:!0,totalLength:6}))}),a=N(null),g=async()=>{v.value=!0;try{const b=d.value.map(k=>({index:k.index,amount:Q(k.amount.toFixed(18)).multipliedBy(1e18)}));r.value.validate();const _=await _e().tezos(),m=await(await _e().getDAppClient()).getActiveAccount(),f=z(Be).find(m.address),P=await(await(await wo(_,o.value,Q(Q(n.value).toFixed(18)).multipliedBy(10**18),b,f==null?void 0:f.slippage)).send()).confirmation();console.log(P),a.value=P.block,n.value=void 0,z(te).fetchPoolData()}catch(b){console.log(b)}v.value=!1};return(b,_)=>{var O;const h=Y,m=fe,f=ht,q=Qe,L=We,P=qt,k=yt,B=pt,E=gt,ie=xo;return V(),M(re,null,[w("div",So,[w("div",qo,[ko,w("div",Co,[$(h,{outline:"",dense:"",label:"25%",onClick:_[0]||(_[0]=A=>s(25))}),$(h,{outline:"",dense:"",label:"50%",onClick:_[1]||(_[1]=A=>s(50))}),$(h,{outline:"",dense:"",label:"75%",onClick:_[2]||(_[2]=A=>s(75))})])]),w("div",Po,[$(f,{ref_key:"inputRef",ref:r,dark:"",outlined:"",dense:"","item-aligned":"",color:"white",modelValue:x(n),"onUpdate:modelValue":_[4]||(_[4]=A=>He(n)?n.value=A:null),placeholder:"0.00",type:"number",step:"0.01","input-class":"focus:ring-0 focus:ring-offset-0",rules:[A=>A>0||"No amount entered",A=>A<=x(o).normalizedLPBalance()||"Not enough Balance"],"lazy-rules":"ondemand","no-error-icon":""},{after:T(()=>[w("div",Bo,[$(h,{dense:"",color:"orange",outline:"",onClick:_[3]||(_[3]=A=>s(100))},{default:T(()=>{var A,W;return[w("div",$o,[$(m,{left:"",name:"wallet"}),w("div",Ro,[G(j((A=x(o))==null?void 0:A.symbol)+" ",1),To,G(" "+j((W=x(o))==null?void 0:W.formatLPBalance()),1)])])]}),_:1})])]),_:1},8,["modelValue","rules"])]),w("div",null,[Vo,w("div",Ao,[(V(!0),M(re,null,de((O=x(o))==null?void 0:O.pool_tokens,A=>(V(),K(k,{dark:"",flat:"",bordered:"",key:"token"},{default:T(()=>[$(P,{horizontal:""},{default:T(()=>[w("div",Lo,[$(L,{size:"75px"},{default:T(()=>[$(q,{class:"col-5",src:A.icon},null,8,["src"])]),_:2},1024)]),$(P,null,{default:T(()=>[w("div",Oo,[G(j(x(y)[A.index])+" ",1),Do,w("span",Fo,j(A.symbol),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])])]),x(v)||x(a)?(V(),M("div",No,[x(a)?(V(),M("div",zo,[Mo,w("div",jo,[w("a",{href:`https://ghostnet.tzkt.io/${x(a).operations.at(-1).at(-1).hash}`,target:"_blank"},j(x(a).operations.at(-1).at(-1).hash),9,Eo)])])):ee("",!0),x(v)?(V(),K(B,{key:1,type:"text"})):ee("",!0)])):ee("",!0),$(ie,{align:"center"},{default:T(()=>[$(h,{loading:x(v),color:"black",spread:"","no-caps":"","text-color":"white",class:"full-width bg-black",label:"Remove Liquidity",onClick:g},{loading:T(()=>[$(E,{class:"on-left"}),G(" Sending... ")]),_:1},8,["loading"])]),_:1})],64)}}}),Uo=w("div",{class:"text-h6"},"Manage Pool",-1),Ho={class:"pt-3 flex justify-end"},Qo=me({__name:"ManagePool",props:{pool:{}},async setup(e){let t,o;const r=e,n=N(!0),v=i(()=>!!r.pool),s=i(()=>r.pool?z(Ke).with("pool_tokens").find(r.pool):null),c=i(()=>{var g;const a=(g=s.value)==null?void 0:g.pool_tokens.find(b=>b.isStable());return a||null}),d=([t,o]=ve(()=>_e().tezos()),t=await t,o(),t),y=([t,o]=ve(()=>d.wallet.pkh()),t=await t,o(),t);return s.value&&z(te).updateUserBalances(s.value,y),s.value&&z(te).updateUserLPBalance(s.value,y),s.value&&z(te).updatePoolShares(s.value),(a,g)=>{const b=so,_=Y,h=qt,m=ro,f=dl,q=yo,L=Io,P=yt,k=xl;return V(),K(k,{dark:"",modelValue:x(v),"onUpdate:modelValue":g[2]||(g[2]=B=>He(v)?v.value=B:null)},{default:T(()=>[$(P,{dark:"",flat:"",style:{"min-width":"400px","max-width":"80vw"}},{default:T(()=>[$(h,{class:"row items-center q-pb-none"},{default:T(()=>[Uo,$(b),$(_,{icon:"close",flat:"",round:"",dense:"",onClick:g[0]||(g[0]=B=>a.$emit("PoolDialogClose"))})]),_:1}),$(h,null,{default:T(()=>[$(m,{modelValue:x(n),"onUpdate:modelValue":g[1]||(g[1]=B=>He(n)?n.value=B:null),spread:"","no-caps":"","toggle-color":"orange",color:"white","text-color":"black",options:[{label:"Add Liquidity",value:!0},{label:"Remove Liquidity",value:!1}]},null,8,["modelValue"]),w("div",Ho,[$(f)])]),_:1}),x(v)&&x(n)?(V(),K(q,{key:0,pool:r.pool,pricingAsset:x(c)},null,8,["pool","pricingAsset"])):ee("",!0),x(v)&&!x(n)?(V(),K(L,{key:1,pool:r.pool},null,8,["pool"])):ee("",!0)]),_:1})]),_:1},8,["modelValue"])}}}),Wo={class:"flex flex-col"},Ko={key:0,class:"text-lg"},Go={key:1,class:"text-red-500"},Xo={key:2,class:"space-y-4"},Jo={class:"q-pa-md"},Yo={class:"flex flex-row w-full justify-between pt-2"},Zo=w("div",{class:"font-bold text-2xl"},"Pools",-1),ea={class:"flex gap-2"},ta={class:"grid grid-cols-12 grid-flow-col auto-cols-min"},la={class:"col-span-4"},oa={class:"col-span-8 flex flex-wrap gap-y-1"},aa=me({__name:"PoolsList",props:{poolsList:{},pending:{type:Boolean},error:{}},setup(e){const t=[{name:"composition",field:"composition",label:"Composition",sortable:!1,align:"left"},{name:"total_liquidity",field:"total_liquidity",label:"Liquidity",sortable:!0},{name:"total_swap_volume",field:"total_swap_volume",label:"Total Volume",sortable:!0}];let o=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});const r=i(()=>z(Be).all()[0]),n=N(null),v=d=>{n.value=d},s=()=>{n.value=null},c=async()=>{await z(te).fetchPoolData()};return(d,y)=>{const a=Y,g=xt,b=ql,_=Qe,h=We,m=Cl,f=Pl,q=ao,L=Qo;return V(),M("div",Wo,[d.pending?(V(),M("div",Ko,"Loading...")):d.error?(V(),M("div",Go," An error occurred: "+j(d.error.message),1)):(V(),M("div",Xo,[w("div",Jo,[$(q,{flat:"",title:"Pools",dark:"",rows:d.poolsList,columns:t,"row-key":"name",separator:"none","column-sort-order":"da","table-header-class":"font-bold"},{top:T(P=>[w("div",Yo,[Zo,w("div",ea,[$(a,{dark:"",dense:"",outline:"",rounded:"",icon:"refresh",onClick:c}),$(a,{dark:"",dense:"",outline:"",rounded:"",icon:"add",to:"/pools/create"})])])]),header:T(P=>[$(b,{props:P},{default:T(()=>[(V(!0),M(re,null,de(P.cols,k=>(V(),K(g,{key:k.name,props:P},{default:T(()=>[G(j(k.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:T(P=>[$(b,{props:P},{default:T(()=>[$(f,{key:"composition",props:P},{default:T(()=>[w("div",ta,[w("div",la,[(V(!0),M(re,null,de(P.row.icons,(k,B)=>(V(),K(h,{key:B,size:"35px",class:"bg-black",style:ul(`left: ${B*-15}px`)},{default:T(()=>[$(_,{src:P.row.icons[B]},null,8,["src"])]),_:2},1032,["style"]))),128))]),w("div",oa,[(V(!0),M(re,null,de(P.row.composition,k=>(V(),K(m,{key:"token",color:"black",class:"mx-1"},{default:T(()=>[G(j(k.symbol)+" "+j(k.weight),1)]),_:2},1024))),128))])])]),_:2},1032,["props"]),$(f,{key:"total_liquidity",props:P},{default:T(()=>[G(j(x(o).format(P.row.total_liquidity)),1)]),_:2},1032,["props"]),$(f,{key:"total_swap_volume",props:P},{default:T(()=>[G(j(P.row.total_swap_volume),1)]),_:2},1032,["props"]),$(f,null,{default:T(()=>[$(a,{label:"Manage",disable:!x(r),"no-caps":"",color:"black",onClick:k=>v(P.row.address)},null,8,["disable","onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows"])])])),x(n)?(V(),K(L,{key:3,onPoolDialogClose:s,pool:x(n)},null,8,["pool"])):ee("",!0)])}}}),na={class:"grid w-full grid-cols-12"},sa={class:"col-span-12 w-full md:col-span-8 q-pa-md"},ra=w("div",{class:"text-2xl font-bold"},"TVL",-1),ia={class:"text-4xl font-extrabold"},ua=w("div",{class:"col-span-12 w-full md:col-span-4 q-pa-md"},[w("div",{class:"text-2xl font-bold"},"Volume (24h)"),w("div",{class:"text-4xl font-extrabold"},"$15,043,564")],-1),ca={class:"col-span-12 w-full md:col-span-12 mt-4"},ya=me({__name:"index",async setup(e){let t,o;const r=([t,o]=ve(()=>_e().getDAppClient()),t=await t,o(),t),n=([t,o]=ve(()=>r.getActiveAccount()),t=await t,o(),t);n&&z(Be).save({id:n.address,walletKey:n.walletKey,lastConnected:n.connectedAt,slippage:"0.5"});const v=vl(`
  query GetPool {
    indexer_pool(order_by: { total_liquidity: desc }) {
      holders_count
      swaps_count
      swap_enabled
      address
      index
      factory
      id
      owner
      create_time
      swap_fee
      total_liquidity
      total_shares
      total_swap_fee
      total_swap_volume
      name
      pool_type
      symbol
      tokens_list
      pool_tokens {
        address
        balance
        index
        decimals
        name
        symbol
        token_id
        weight
        id
        pool_id
        pool_token_id
        token {
          fa2
        }
      }
    }
  }
`),{pending:s,data:c,error:d}=([t,o]=ve(()=>cl(v)),t=await t,o(),t);c.value&&c.value.indexer_pool&&z(te).store(c.value);const y=i(()=>z(te).tvl()),a=i(()=>z(te).getPoolList());return(g,b)=>{const _=aa;return V(),M("div",null,[w("div",na,[w("div",sa,[ra,w("div",ia,j(x(y)),1)]),ua,w("div",ca,[$(_,{poolsList:x(a),pending:x(s),error:x(d)},null,8,["poolsList","pending","error"])])])])}}});export{ya as default};
